(function(ua){typeof define=="function"&&define.amd?define(ua):ua()})((function(){"use strict";/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ua(e){const t=Object.create(null);for(const o of e.split(","))t[o]=1;return o=>o in t}const kt={},ca=[],Vn=()=>{},Tu=()=>!1,Hs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),br=e=>e.startsWith("onUpdate:"),Wt=Object.assign,wr=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},km=Object.prototype.hasOwnProperty,ht=(e,t)=>km.call(e,t),je=Array.isArray,da=e=>Wa(e)==="[object Map]",fa=e=>Wa(e)==="[object Set]",Su=e=>Wa(e)==="[object Date]",Ge=e=>typeof e=="function",Nt=e=>typeof e=="string",On=e=>typeof e=="symbol",Ct=e=>e!==null&&typeof e=="object",ku=e=>(Ct(e)||Ge(e))&&Ge(e.then)&&Ge(e.catch),Cu=Object.prototype.toString,Wa=e=>Cu.call(e),Cm=e=>Wa(e).slice(8,-1),Eu=e=>Wa(e)==="[object Object]",xr=e=>Nt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Va=ua(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ws=e=>{const t=Object.create(null);return(o=>t[o]||(t[o]=e(o)))},Em=/-\w/g,Cn=Ws(e=>e.replace(Em,t=>t.slice(1).toUpperCase())),Lm=/\B([A-Z])/g,To=Ws(e=>e.replace(Lm,"-$1").toLowerCase()),Vs=Ws(e=>e.charAt(0).toUpperCase()+e.slice(1)),Tr=Ws(e=>e?`on${Vs(e)}`:""),So=(e,t)=>!Object.is(e,t),zs=(e,...t)=>{for(let o=0;o<e.length;o++)e[o](...t)},Lu=(e,t,o,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:o})},qs=e=>{const t=parseFloat(e);return isNaN(t)?e:t},$m=e=>{const t=Nt(e)?Number(e):NaN;return isNaN(t)?e:t};let $u;const Gs=()=>$u||($u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function pt(e){if(je(e)){const t={};for(let o=0;o<e.length;o++){const n=e[o],a=Nt(n)?Om(n):pt(n);if(a)for(const s in a)t[s]=a[s]}return t}else if(Nt(e)||Ct(e))return e}const Am=/;(?![^(]*\))/g,Im=/:([^]+)/,Mm=/\/\*[^]*?\*\//g;function Om(e){const t={};return e.replace(Mm,"").split(Am).forEach(o=>{if(o){const n=o.split(Im);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ee(e){let t="";if(Nt(e))t=e;else if(je(e))for(let o=0;o<e.length;o++){const n=Ee(e[o]);n&&(t+=n+" ")}else if(Ct(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}const Nm=ua("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Au(e){return!!e||e===""}function Rm(e,t){if(e.length!==t.length)return!1;let o=!0;for(let n=0;o&&n<e.length;n++)o=zo(e[n],t[n]);return o}function zo(e,t){if(e===t)return!0;let o=Su(e),n=Su(t);if(o||n)return o&&n?e.getTime()===t.getTime():!1;if(o=On(e),n=On(t),o||n)return e===t;if(o=je(e),n=je(t),o||n)return o&&n?Rm(e,t):!1;if(o=Ct(e),n=Ct(t),o||n){if(!o||!n)return!1;const a=Object.keys(e).length,s=Object.keys(t).length;if(a!==s)return!1;for(const l in e){const r=e.hasOwnProperty(l),u=t.hasOwnProperty(l);if(r&&!u||!r&&u||!zo(e[l],t[l]))return!1}}return String(e)===String(t)}function Sr(e,t){return e.findIndex(o=>zo(o,t))}const Iu=e=>!!(e&&e.__v_isRef===!0),h=e=>Nt(e)?e:e==null?"":je(e)||Ct(e)&&(e.toString===Cu||!Ge(e.toString))?Iu(e)?h(e.value):JSON.stringify(e,Mu,2):String(e),Mu=(e,t)=>Iu(t)?Mu(e,t.value):da(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((o,[n,a],s)=>(o[kr(n,s)+" =>"]=a,o),{})}:fa(t)?{[`Set(${t.size})`]:[...t.values()].map(o=>kr(o))}:On(t)?kr(t):Ct(t)&&!je(t)&&!Eu(t)?String(t):t,kr=(e,t="")=>{var o;return On(e)?`Symbol(${(o=e.description)!=null?o:t})`:e};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Zt;class Ou{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Zt,!t&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].pause();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].resume();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].resume()}}run(t){if(this._active){const o=Zt;try{return Zt=this,t()}finally{Zt=o}}}on(){++this._on===1&&(this.prevScope=Zt,Zt=this)}off(){this._on>0&&--this._on===0&&(Zt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let o,n;for(o=0,n=this.effects.length;o<n;o++)this.effects[o].stop();for(this.effects.length=0,o=0,n=this.cleanups.length;o<n;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,n=this.scopes.length;o<n;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Cr(e){return new Ou(e)}function Nu(){return Zt}function Dm(e,t=!1){Zt&&Zt.cleanups.push(e)}let $t;const Er=new WeakSet;class Ru{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Zt&&Zt.active&&Zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Er.has(this)&&(Er.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Pu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hu(this),Fu(this);const t=$t,o=Nn;$t=this,Nn=!0;try{return this.fn()}finally{Bu(this),$t=t,Nn=o,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ir(t);this.deps=this.depsTail=void 0,Hu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Er.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ar(this)&&this.run()}get dirty(){return Ar(this)}}let Du=0,za,qa;function Pu(e,t=!1){if(e.flags|=8,t){e.next=qa,qa=e;return}e.next=za,za=e}function Lr(){Du++}function $r(){if(--Du>0)return;if(qa){let t=qa;for(qa=void 0;t;){const o=t.next;t.next=void 0,t.flags&=-9,t=o}}let e;for(;za;){let t=za;for(za=void 0;t;){const o=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=o}}if(e)throw e}function Fu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Bu(e){let t,o=e.depsTail,n=o;for(;n;){const a=n.prevDep;n.version===-1?(n===o&&(o=a),Ir(n),Pm(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=a}e.deps=t,e.depsTail=o}function Ar(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Uu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Uu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ga)||(e.globalVersion=Ga,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ar(e))))return;e.flags|=2;const t=e.dep,o=$t,n=Nn;$t=e,Nn=!0;try{Fu(e);const a=e.fn(e._value);(t.version===0||So(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(a){throw t.version++,a}finally{$t=o,Nn=n,Bu(e),e.flags&=-3}}function Ir(e,t=!1){const{dep:o,prevSub:n,nextSub:a}=e;if(n&&(n.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=n,e.nextSub=void 0),o.subs===e&&(o.subs=n,!n&&o.computed)){o.computed.flags&=-5;for(let s=o.computed.deps;s;s=s.nextDep)Ir(s,!0)}!t&&!--o.sc&&o.map&&o.map.delete(o.key)}function Pm(e){const{prevDep:t,nextDep:o}=e;t&&(t.nextDep=o,e.prevDep=void 0),o&&(o.prevDep=t,e.nextDep=void 0)}let Nn=!0;const ju=[];function zn(){ju.push(Nn),Nn=!1}function qn(){const e=ju.pop();Nn=e===void 0?!0:e}function Hu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const o=$t;$t=void 0;try{t()}finally{$t=o}}}let Ga=0;class Fm{constructor(t,o){this.sub=t,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!$t||!Nn||$t===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==$t)o=this.activeLink=new Fm($t,this),$t.deps?(o.prevDep=$t.depsTail,$t.depsTail.nextDep=o,$t.depsTail=o):$t.deps=$t.depsTail=o,Wu(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const n=o.nextDep;n.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=n),o.prevDep=$t.depsTail,o.nextDep=void 0,$t.depsTail.nextDep=o,$t.depsTail=o,$t.deps===o&&($t.deps=n)}return o}trigger(t){this.version++,Ga++,this.notify(t)}notify(t){Lr();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{$r()}}}function Wu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Wu(n)}const o=e.dep.subs;o!==e&&(e.prevSub=o,o&&(o.nextSub=e)),e.dep.subs=e}}const Qs=new WeakMap,qo=Symbol(""),Or=Symbol(""),Qa=Symbol("");function en(e,t,o){if(Nn&&$t){let n=Qs.get(e);n||Qs.set(e,n=new Map);let a=n.get(o);a||(n.set(o,a=new Mr),a.map=n,a.key=o),a.track()}}function no(e,t,o,n,a,s){const l=Qs.get(e);if(!l){Ga++;return}const r=u=>{u&&u.trigger()};if(Lr(),t==="clear")l.forEach(r);else{const u=je(e),d=u&&xr(o);if(u&&o==="length"){const c=Number(n);l.forEach((f,m)=>{(m==="length"||m===Qa||!On(m)&&m>=c)&&r(f)})}else switch((o!==void 0||l.has(void 0))&&r(l.get(o)),d&&r(l.get(Qa)),t){case"add":u?d&&r(l.get("length")):(r(l.get(qo)),da(e)&&r(l.get(Or)));break;case"delete":u||(r(l.get(qo)),da(e)&&r(l.get(Or)));break;case"set":da(e)&&r(l.get(qo));break}}$r()}function Bm(e,t){const o=Qs.get(e);return o&&o.get(t)}function pa(e){const t=at(e);return t===e?t:(en(t,"iterate",Qa),En(e)?t:t.map(Jt))}function Ys(e){return en(e=at(e),"iterate",Qa),e}const Um={__proto__:null,[Symbol.iterator](){return Nr(this,Symbol.iterator,Jt)},concat(...e){return pa(this).concat(...e.map(t=>je(t)?pa(t):t))},entries(){return Nr(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return oo(this,"every",e,t,void 0,arguments)},filter(e,t){return oo(this,"filter",e,t,o=>o.map(Jt),arguments)},find(e,t){return oo(this,"find",e,t,Jt,arguments)},findIndex(e,t){return oo(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return oo(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return oo(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return oo(this,"forEach",e,t,void 0,arguments)},includes(...e){return Rr(this,"includes",e)},indexOf(...e){return Rr(this,"indexOf",e)},join(e){return pa(this).join(e)},lastIndexOf(...e){return Rr(this,"lastIndexOf",e)},map(e,t){return oo(this,"map",e,t,void 0,arguments)},pop(){return Ya(this,"pop")},push(...e){return Ya(this,"push",e)},reduce(e,...t){return Vu(this,"reduce",e,t)},reduceRight(e,...t){return Vu(this,"reduceRight",e,t)},shift(){return Ya(this,"shift")},some(e,t){return oo(this,"some",e,t,void 0,arguments)},splice(...e){return Ya(this,"splice",e)},toReversed(){return pa(this).toReversed()},toSorted(e){return pa(this).toSorted(e)},toSpliced(...e){return pa(this).toSpliced(...e)},unshift(...e){return Ya(this,"unshift",e)},values(){return Nr(this,"values",Jt)}};function Nr(e,t,o){const n=Ys(e),a=n[t]();return n!==e&&!En(e)&&(a._next=a.next,a.next=()=>{const s=a._next();return s.value&&(s.value=o(s.value)),s}),a}const jm=Array.prototype;function oo(e,t,o,n,a,s){const l=Ys(e),r=l!==e&&!En(e),u=l[t];if(u!==jm[t]){const f=u.apply(e,s);return r?Jt(f):f}let d=o;l!==e&&(r?d=function(f,m){return o.call(this,Jt(f),m,e)}:o.length>2&&(d=function(f,m){return o.call(this,f,m,e)}));const c=u.call(l,d,n);return r&&a?a(c):c}function Vu(e,t,o,n){const a=Ys(e);let s=o;return a!==e&&(En(e)?o.length>3&&(s=function(l,r,u){return o.call(this,l,r,u,e)}):s=function(l,r,u){return o.call(this,l,Jt(r),u,e)}),a[t](s,...n)}function Rr(e,t,o){const n=at(e);en(n,"iterate",Qa);const a=n[t](...o);return(a===-1||a===!1)&&Pr(o[0])?(o[0]=at(o[0]),n[t](...o)):a}function Ya(e,t,o=[]){zn(),Lr();const n=at(e)[t].apply(e,o);return $r(),qn(),n}const Hm=ua("__proto__,__v_isRef,__isVue"),zu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(On));function Wm(e){On(e)||(e=String(e));const t=at(this);return en(t,"has",e),t.hasOwnProperty(e)}class qu{constructor(t=!1,o=!1){this._isReadonly=t,this._isShallow=o}get(t,o,n){if(o==="__v_skip")return t.__v_skip;const a=this._isReadonly,s=this._isShallow;if(o==="__v_isReactive")return!a;if(o==="__v_isReadonly")return a;if(o==="__v_isShallow")return s;if(o==="__v_raw")return n===(a?s?Xu:Ku:s?Ju:Yu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const l=je(t);if(!a){let u;if(l&&(u=Um[o]))return u;if(o==="hasOwnProperty")return Wm}const r=Reflect.get(t,o,Rt(t)?t:n);return(On(o)?zu.has(o):Hm(o))||(a||en(t,"get",o),s)?r:Rt(r)?l&&xr(o)?r:r.value:Ct(r)?a?Zu(r):Zs(r):r}}class Gu extends qu{constructor(t=!1){super(!1,t)}set(t,o,n,a){let s=t[o];if(!this._isShallow){const u=Co(s);if(!En(n)&&!Co(n)&&(s=at(s),n=at(n)),!je(t)&&Rt(s)&&!Rt(n))return u||(s.value=n),!0}const l=je(t)&&xr(o)?Number(o)<t.length:ht(t,o),r=Reflect.set(t,o,n,Rt(t)?t:a);return t===at(a)&&(l?So(n,s)&&no(t,"set",o,n):no(t,"add",o,n)),r}deleteProperty(t,o){const n=ht(t,o);t[o];const a=Reflect.deleteProperty(t,o);return a&&n&&no(t,"delete",o,void 0),a}has(t,o){const n=Reflect.has(t,o);return(!On(o)||!zu.has(o))&&en(t,"has",o),n}ownKeys(t){return en(t,"iterate",je(t)?"length":qo),Reflect.ownKeys(t)}}class Qu extends qu{constructor(t=!1){super(!0,t)}set(t,o){return!0}deleteProperty(t,o){return!0}}const Vm=new Gu,zm=new Qu,qm=new Gu(!0),Gm=new Qu(!0),Dr=e=>e,Js=e=>Reflect.getPrototypeOf(e);function Qm(e,t,o){return function(...n){const a=this.__v_raw,s=at(a),l=da(s),r=e==="entries"||e===Symbol.iterator&&l,u=e==="keys"&&l,d=a[e](...n),c=o?Dr:t?tl:Jt;return!t&&en(s,"iterate",u?Or:qo),{next(){const{value:f,done:m}=d.next();return m?{value:f,done:m}:{value:r?[c(f[0]),c(f[1])]:c(f),done:m}},[Symbol.iterator](){return this}}}}function Ks(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ym(e,t){const o={get(a){const s=this.__v_raw,l=at(s),r=at(a);e||(So(a,r)&&en(l,"get",a),en(l,"get",r));const{has:u}=Js(l),d=t?Dr:e?tl:Jt;if(u.call(l,a))return d(s.get(a));if(u.call(l,r))return d(s.get(r));s!==l&&s.get(a)},get size(){const a=this.__v_raw;return!e&&en(at(a),"iterate",qo),a.size},has(a){const s=this.__v_raw,l=at(s),r=at(a);return e||(So(a,r)&&en(l,"has",a),en(l,"has",r)),a===r?s.has(a):s.has(a)||s.has(r)},forEach(a,s){const l=this,r=l.__v_raw,u=at(r),d=t?Dr:e?tl:Jt;return!e&&en(u,"iterate",qo),r.forEach((c,f)=>a.call(s,d(c),d(f),l))}};return Wt(o,e?{add:Ks("add"),set:Ks("set"),delete:Ks("delete"),clear:Ks("clear")}:{add(a){!t&&!En(a)&&!Co(a)&&(a=at(a));const s=at(this);return Js(s).has.call(s,a)||(s.add(a),no(s,"add",a,a)),this},set(a,s){!t&&!En(s)&&!Co(s)&&(s=at(s));const l=at(this),{has:r,get:u}=Js(l);let d=r.call(l,a);d||(a=at(a),d=r.call(l,a));const c=u.call(l,a);return l.set(a,s),d?So(s,c)&&no(l,"set",a,s):no(l,"add",a,s),this},delete(a){const s=at(this),{has:l,get:r}=Js(s);let u=l.call(s,a);u||(a=at(a),u=l.call(s,a)),r&&r.call(s,a);const d=s.delete(a);return u&&no(s,"delete",a,void 0),d},clear(){const a=at(this),s=a.size!==0,l=a.clear();return s&&no(a,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(a=>{o[a]=Qm(a,e,t)}),o}function Xs(e,t){const o=Ym(e,t);return(n,a,s)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?n:Reflect.get(ht(o,a)&&a in n?o:n,a,s)}const Jm={get:Xs(!1,!1)},Km={get:Xs(!1,!0)},Xm={get:Xs(!0,!1)},Zm={get:Xs(!0,!0)},Yu=new WeakMap,Ju=new WeakMap,Ku=new WeakMap,Xu=new WeakMap;function eh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function th(e){return e.__v_skip||!Object.isExtensible(e)?0:eh(Cm(e))}function Zs(e){return Co(e)?e:el(e,!1,Vm,Jm,Yu)}function nh(e){return el(e,!1,qm,Km,Ju)}function Zu(e){return el(e,!0,zm,Xm,Ku)}function aM(e){return el(e,!0,Gm,Zm,Xu)}function el(e,t,o,n,a){if(!Ct(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=th(e);if(s===0)return e;const l=a.get(e);if(l)return l;const r=new Proxy(e,s===2?n:o);return a.set(e,r),r}function ko(e){return Co(e)?ko(e.__v_raw):!!(e&&e.__v_isReactive)}function Co(e){return!!(e&&e.__v_isReadonly)}function En(e){return!!(e&&e.__v_isShallow)}function Pr(e){return e?!!e.__v_raw:!1}function at(e){const t=e&&e.__v_raw;return t?at(t):e}function Fr(e){return!ht(e,"__v_skip")&&Object.isExtensible(e)&&Lu(e,"__v_skip",!0),e}const Jt=e=>Ct(e)?Zs(e):e,tl=e=>Ct(e)?Zu(e):e;function Rt(e){return e?e.__v_isRef===!0:!1}function y(e){return ec(e,!1)}function oh(e){return ec(e,!0)}function ec(e,t){return Rt(e)?e:new ah(e,t)}class ah{constructor(t,o){this.dep=new Mr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?t:at(t),this._value=o?t:Jt(t),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(t){const o=this._rawValue,n=this.__v_isShallow||En(t)||Co(t);t=n?t:at(t),So(t,o)&&(this._rawValue=t,this._value=n?t:Jt(t),this.dep.trigger())}}function p(e){return Rt(e)?e.value:e}const sh={get:(e,t,o)=>t==="__v_raw"?e:p(Reflect.get(e,t,o)),set:(e,t,o,n)=>{const a=e[t];return Rt(a)&&!Rt(o)?(a.value=o,!0):Reflect.set(e,t,o,n)}};function tc(e){return ko(e)?e:new Proxy(e,sh)}function lh(e){const t=je(e)?new Array(e.length):{};for(const o in e)t[o]=ih(e,o);return t}class rh{constructor(t,o,n){this._object=t,this._key=o,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Bm(at(this._object),this._key)}}function ih(e,t,o){const n=e[t];return Rt(n)?n:new rh(e,t,o)}class uh{constructor(t,o,n){this.fn=t,this.setter=o,this._value=void 0,this.dep=new Mr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ga-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&$t!==this)return Pu(this,!0),!0}get value(){const t=this.dep.track();return Uu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ch(e,t,o=!1){let n,a;return Ge(e)?n=e:(n=e.get,a=e.set),new uh(n,a,o)}const nl={},ol=new WeakMap;let Go;function dh(e,t=!1,o=Go){if(o){let n=ol.get(o);n||ol.set(o,n=[]),n.push(e)}}function fh(e,t,o=kt){const{immediate:n,deep:a,once:s,scheduler:l,augmentJob:r,call:u}=o,d=T=>a?T:En(T)||a===!1||a===0?ao(T,1):ao(T);let c,f,m,g,v=!1,_=!1;if(Rt(e)?(f=()=>e.value,v=En(e)):ko(e)?(f=()=>d(e),v=!0):je(e)?(_=!0,v=e.some(T=>ko(T)||En(T)),f=()=>e.map(T=>{if(Rt(T))return T.value;if(ko(T))return d(T);if(Ge(T))return u?u(T,2):T()})):Ge(e)?t?f=u?()=>u(e,2):e:f=()=>{if(m){zn();try{m()}finally{qn()}}const T=Go;Go=c;try{return u?u(e,3,[g]):e(g)}finally{Go=T}}:f=Vn,t&&a){const T=f,P=a===!0?1/0:a;f=()=>ao(T(),P)}const w=Nu(),x=()=>{c.stop(),w&&w.active&&wr(w.effects,c)};if(s&&t){const T=t;t=(...P)=>{T(...P),x()}}let A=_?new Array(e.length).fill(nl):nl;const W=T=>{if(!(!(c.flags&1)||!c.dirty&&!T))if(t){const P=c.run();if(a||v||(_?P.some((q,G)=>So(q,A[G])):So(P,A))){m&&m();const q=Go;Go=c;try{const G=[P,A===nl?void 0:_&&A[0]===nl?[]:A,g];A=P,u?u(t,3,G):t(...G)}finally{Go=q}}}else c.run()};return r&&r(W),c=new Ru(f),c.scheduler=l?()=>l(W,!1):W,g=T=>dh(T,!1,c),m=c.onStop=()=>{const T=ol.get(c);if(T){if(u)u(T,4);else for(const P of T)P();ol.delete(c)}},t?n?W(!0):A=c.run():l?l(W.bind(null,!0),!0):c.run(),x.pause=c.pause.bind(c),x.resume=c.resume.bind(c),x.stop=x,x}function ao(e,t=1/0,o){if(t<=0||!Ct(e)||e.__v_skip||(o=o||new Map,(o.get(e)||0)>=t))return e;if(o.set(e,t),t--,Rt(e))ao(e.value,t,o);else if(je(e))for(let n=0;n<e.length;n++)ao(e[n],t,o);else if(fa(e)||da(e))e.forEach(n=>{ao(n,t,o)});else if(Eu(e)){for(const n in e)ao(e[n],t,o);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ao(e[n],t,o)}return e}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ja=[];let Br=!1;function sM(e,...t){if(Br)return;Br=!0,zn();const o=Ja.length?Ja[Ja.length-1].component:null,n=o&&o.appContext.config.warnHandler,a=ph();if(n)ga(n,o,11,[e+t.map(s=>{var l,r;return(r=(l=s.toString)==null?void 0:l.call(s))!=null?r:JSON.stringify(s)}).join(""),o&&o.proxy,a.map(({vnode:s})=>`at <${rd(o,s.type)}>`).join(`
`),a]);else{const s=[`[Vue warn]: ${e}`,...t];a.length&&s.push(`
`,...gh(a)),console.warn(...s)}qn(),Br=!1}function ph(){let e=Ja[Ja.length-1];if(!e)return[];const t=[];for(;e;){const o=t[0];o&&o.vnode===e?o.recurseCount++:t.push({vnode:e,recurseCount:0});const n=e.component&&e.component.parent;e=n&&n.vnode}return t}function gh(e){const t=[];return e.forEach((o,n)=>{t.push(...n===0?[]:[`
`],...mh(o))}),t}function mh({vnode:e,recurseCount:t}){const o=t>0?`... (${t} recursive calls)`:"",n=e.component?e.component.parent==null:!1,a=` at <${rd(e.component,e.type,n)}`,s=">"+o;return e.props?[a,...hh(e.props),s]:[a+s]}function hh(e){const t=[],o=Object.keys(e);return o.slice(0,3).forEach(n=>{t.push(...nc(n,e[n]))}),o.length>3&&t.push(" ..."),t}function nc(e,t,o){return Nt(t)?(t=JSON.stringify(t),o?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?o?t:[`${e}=${t}`]:Rt(t)?(t=nc(e,at(t.value),!0),o?t:[`${e}=Ref<`,t,">"]):Ge(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=at(t),o?t:[`${e}=`,t])}function ga(e,t,o,n){try{return n?e(...n):e()}catch(a){al(a,t,o)}}function Rn(e,t,o,n){if(Ge(e)){const a=ga(e,t,o,n);return a&&ku(a)&&a.catch(s=>{al(s,t,o)}),a}if(je(e)){const a=[];for(let s=0;s<e.length;s++)a.push(Rn(e[s],t,o,n));return a}}function al(e,t,o,n=!0){const a=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||kt;if(t){let r=t.parent;const u=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${o}`;for(;r;){const c=r.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,u,d)===!1)return}r=r.parent}if(s){zn(),ga(s,null,10,[e,u,d]),qn();return}}vh(e,o,a,n,l)}function vh(e,t,o,n=!0,a=!1){if(a)throw e;console.error(e)}const un=[];let Gn=-1;const ma=[];let Eo=null,ha=0;const oc=Promise.resolve();let sl=null;function Qe(e){const t=sl||oc;return e?t.then(this?e.bind(this):e):t}function _h(e){let t=Gn+1,o=un.length;for(;t<o;){const n=t+o>>>1,a=un[n],s=Ka(a);s<e||s===e&&a.flags&2?t=n+1:o=n}return t}function Ur(e){if(!(e.flags&1)){const t=Ka(e),o=un[un.length-1];!o||!(e.flags&2)&&t>=Ka(o)?un.push(e):un.splice(_h(t),0,e),e.flags|=1,ac()}}function ac(){sl||(sl=oc.then(rc))}function yh(e){je(e)?ma.push(...e):Eo&&e.id===-1?Eo.splice(ha+1,0,e):e.flags&1||(ma.push(e),e.flags|=1),ac()}function sc(e,t,o=Gn+1){for(;o<un.length;o++){const n=un[o];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;un.splice(o,1),o--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function lc(e){if(ma.length){const t=[...new Set(ma)].sort((o,n)=>Ka(o)-Ka(n));if(ma.length=0,Eo){Eo.push(...t);return}for(Eo=t,ha=0;ha<Eo.length;ha++){const o=Eo[ha];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}Eo=null,ha=0}}const Ka=e=>e.id==null?e.flags&2?-1:1/0:e.id;function rc(e){try{for(Gn=0;Gn<un.length;Gn++){const t=un[Gn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ga(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Gn<un.length;Gn++){const t=un[Gn];t&&(t.flags&=-2)}Gn=-1,un.length=0,lc(),sl=null,(un.length||ma.length)&&rc()}}let Kt=null,ic=null;function ll(e){const t=Kt;return Kt=e,ic=e&&e.type.__scopeId||null,t}function it(e,t=Kt,o){if(!t||e._n)return e;const n=(...a)=>{n._d&&hl(-1);const s=ll(t);let l;try{l=e(...a)}finally{ll(s),n._d&&hl(1)}return l};return n._n=!0,n._c=!0,n._d=!0,n}function ye(e,t){if(Kt===null)return e;const o=yl(Kt),n=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[s,l,r,u=kt]=t[a];s&&(Ge(s)&&(s={mounted:s,updated:s}),s.deep&&ao(l),n.push({dir:s,instance:o,value:l,oldValue:void 0,arg:r,modifiers:u}))}return e}function Qo(e,t,o,n){const a=e.dirs,s=t&&t.dirs;for(let l=0;l<a.length;l++){const r=a[l];s&&(r.oldValue=s[l].value);let u=r.dir[n];u&&(zn(),Rn(u,o,8,[e.el,r,e,t]),qn())}}const uc=Symbol("_vte"),cc=e=>e.__isTeleport,Xa=e=>e&&(e.disabled||e.disabled===""),dc=e=>e&&(e.defer||e.defer===""),fc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,pc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,jr=(e,t)=>{const o=e&&e.to;return Nt(o)?t?t(o):null:o},gc={name:"Teleport",__isTeleport:!0,process(e,t,o,n,a,s,l,r,u,d){const{mc:c,pc:f,pbc:m,o:{insert:g,querySelector:v,createText:_,createComment:w}}=d,x=Xa(t.props);let{shapeFlag:A,children:W,dynamicChildren:T}=t;if(e==null){const P=t.el=_(""),q=t.anchor=_("");g(P,o,n),g(q,o,n);const G=(J,ve)=>{A&16&&(a&&a.isCE&&(a.ce._teleportTarget=J),c(W,J,ve,a,s,l,r,u))},z=()=>{const J=t.target=jr(t.props,v),ve=hc(J,t,_,g);J&&(l!=="svg"&&fc(J)?l="svg":l!=="mathml"&&pc(J)&&(l="mathml"),x||(G(J,ve),il(t,!1)))};x&&(G(o,q),il(t,!0)),dc(t.props)?(t.el.__isMounted=!1,dn(()=>{z(),delete t.el.__isMounted},s)):z()}else{if(dc(t.props)&&e.el.__isMounted===!1){dn(()=>{gc.process(e,t,o,n,a,s,l,r,u,d)},s);return}t.el=e.el,t.targetStart=e.targetStart;const P=t.anchor=e.anchor,q=t.target=e.target,G=t.targetAnchor=e.targetAnchor,z=Xa(e.props),J=z?o:q,ve=z?P:G;if(l==="svg"||fc(q)?l="svg":(l==="mathml"||pc(q))&&(l="mathml"),T?(m(e.dynamicChildren,T,J,a,s,l,r),Xr(e,t,!0)):u||f(e,t,J,ve,a,s,l,r,!1),x)z?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):rl(t,o,P,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ae=t.target=jr(t.props,v);ae&&rl(t,ae,null,d,0)}else z&&rl(t,q,G,d,1);il(t,x)}},remove(e,t,o,{um:n,o:{remove:a}},s){const{shapeFlag:l,children:r,anchor:u,targetStart:d,targetAnchor:c,target:f,props:m}=e;if(f&&(a(d),a(c)),s&&a(u),l&16){const g=s||!Xa(m);for(let v=0;v<r.length;v++){const _=r[v];n(_,t,o,g,!!_.dynamicChildren)}}},move:rl,hydrate:bh};function rl(e,t,o,{o:{insert:n},m:a},s=2){s===0&&n(e.targetAnchor,t,o);const{el:l,anchor:r,shapeFlag:u,children:d,props:c}=e,f=s===2;if(f&&n(l,t,o),(!f||Xa(c))&&u&16)for(let m=0;m<d.length;m++)a(d[m],t,o,2);f&&n(r,t,o)}function bh(e,t,o,n,a,s,{o:{nextSibling:l,parentNode:r,querySelector:u,insert:d,createText:c}},f){function m(_,w,x,A){w.anchor=f(l(_),w,r(_),o,n,a,s),w.targetStart=x,w.targetAnchor=A}const g=t.target=jr(t.props,u),v=Xa(t.props);if(g){const _=g._lpa||g.firstChild;if(t.shapeFlag&16)if(v)m(e,t,_,_&&l(_));else{t.anchor=l(e);let w=_;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")t.targetStart=w;else if(w.data==="teleport anchor"){t.targetAnchor=w,g._lpa=t.targetAnchor&&l(t.targetAnchor);break}}w=l(w)}t.targetAnchor||hc(g,t,c,d),f(_&&l(_),t,g,o,n,a,s)}il(t,v)}else v&&t.shapeFlag&16&&m(e,t,e,l(e));return t.anchor&&l(t.anchor)}const mc=gc;function il(e,t){const o=e.ctx;if(o&&o.ut){let n,a;for(t?(n=e.el,a=e.anchor):(n=e.targetStart,a=e.targetAnchor);n&&n!==a;)n.nodeType===1&&n.setAttribute("data-v-owner",o.uid),n=n.nextSibling;o.ut()}}function hc(e,t,o,n){const a=t.targetStart=o(""),s=t.targetAnchor=o("");return a[uc]=s,e&&(n(a,e),n(s,e)),s}const so=Symbol("_leaveCb"),ul=Symbol("_enterCb");function vc(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ut(()=>{e.isMounted=!0}),Lo(()=>{e.isUnmounting=!0}),e}const Ln=[Function,Array],_c={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ln,onEnter:Ln,onAfterEnter:Ln,onEnterCancelled:Ln,onBeforeLeave:Ln,onLeave:Ln,onAfterLeave:Ln,onLeaveCancelled:Ln,onBeforeAppear:Ln,onAppear:Ln,onAfterAppear:Ln,onAppearCancelled:Ln},yc=e=>{const t=e.subTree;return t.component?yc(t.component):t},wh={name:"BaseTransition",props:_c,setup(e,{slots:t}){const o=io(),n=vc();return()=>{const a=t.default&&Wr(t.default(),!0);if(!a||!a.length)return;const s=bc(a),l=at(e),{mode:r}=l;if(n.isLeaving)return Hr(s);const u=xc(s);if(!u)return Hr(s);let d=Za(u,l,n,o,f=>d=f);u.type!==tn&&Yo(u,d);let c=o.subTree&&xc(o.subTree);if(c&&c.type!==tn&&!Xo(c,u)&&yc(o).type!==tn){let f=Za(c,l,n,o);if(Yo(c,f),r==="out-in"&&u.type!==tn)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,o.job.flags&8||o.update(),delete f.afterLeave,c=void 0},Hr(s);r==="in-out"&&u.type!==tn?f.delayLeave=(m,g,v)=>{const _=wc(n,c);_[String(c.key)]=c,m[so]=()=>{g(),m[so]=void 0,delete d.delayedLeave,c=void 0},d.delayedLeave=()=>{v(),delete d.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return s}}};function bc(e){let t=e[0];if(e.length>1){for(const o of e)if(o.type!==tn){t=o;break}}return t}const xh=wh;function wc(e,t){const{leavingVNodes:o}=e;let n=o.get(t.type);return n||(n=Object.create(null),o.set(t.type,n)),n}function Za(e,t,o,n,a){const{appear:s,mode:l,persisted:r=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:m,onLeave:g,onAfterLeave:v,onLeaveCancelled:_,onBeforeAppear:w,onAppear:x,onAfterAppear:A,onAppearCancelled:W}=t,T=String(e.key),P=wc(o,e),q=(J,ve)=>{J&&Rn(J,n,9,ve)},G=(J,ve)=>{const ae=ve[1];q(J,ve),je(J)?J.every(F=>F.length<=1)&&ae():J.length<=1&&ae()},z={mode:l,persisted:r,beforeEnter(J){let ve=u;if(!o.isMounted)if(s)ve=w||u;else return;J[so]&&J[so](!0);const ae=P[T];ae&&Xo(e,ae)&&ae.el[so]&&ae.el[so](),q(ve,[J])},enter(J){let ve=d,ae=c,F=f;if(!o.isMounted)if(s)ve=x||d,ae=A||c,F=W||f;else return;let K=!1;const ee=J[ul]=Q=>{K||(K=!0,Q?q(F,[J]):q(ae,[J]),z.delayedLeave&&z.delayedLeave(),J[ul]=void 0)};ve?G(ve,[J,ee]):ee()},leave(J,ve){const ae=String(e.key);if(J[ul]&&J[ul](!0),o.isUnmounting)return ve();q(m,[J]);let F=!1;const K=J[so]=ee=>{F||(F=!0,ve(),ee?q(_,[J]):q(v,[J]),J[so]=void 0,P[ae]===e&&delete P[ae])};P[ae]=e,g?G(g,[J,K]):K()},clone(J){const ve=Za(J,t,o,n,a);return a&&a(ve),ve}};return z}function Hr(e){if(dl(e))return e=$o(e),e.children=null,e}function xc(e){if(!dl(e))return cc(e.type)&&e.children?bc(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:o}=e;if(o){if(t&16)return o[0];if(t&32&&Ge(o.default))return o.default()}}function Yo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Yo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Wr(e,t=!1,o){let n=[],a=0;for(let s=0;s<e.length;s++){let l=e[s];const r=o==null?l.key:String(o)+String(l.key!=null?l.key:s);l.type===Oe?(l.patchFlag&128&&a++,n=n.concat(Wr(l.children,t,r))):(t||l.type!==tn)&&n.push(r!=null?$o(l,{key:r}):l)}if(a>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function hn(e,t){return Ge(e)?Wt({name:e.name},t,{setup:e}):e}function Tc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const cl=new WeakMap;function es(e,t,o,n,a=!1){if(je(e)){e.forEach((v,_)=>es(v,t&&(je(t)?t[_]:t),o,n,a));return}if(va(n)&&!a){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&es(e,t,o,n.component.subTree);return}const s=n.shapeFlag&4?yl(n.component):n.el,l=a?null:s,{i:r,r:u}=e,d=t&&t.r,c=r.refs===kt?r.refs={}:r.refs,f=r.setupState,m=at(f),g=f===kt?Tu:v=>ht(m,v);if(d!=null&&d!==u){if(Sc(t),Nt(d))c[d]=null,g(d)&&(f[d]=null);else if(Rt(d)){d.value=null;const v=t;v.k&&(c[v.k]=null)}}if(Ge(u))ga(u,r,12,[l,c]);else{const v=Nt(u),_=Rt(u);if(v||_){const w=()=>{if(e.f){const x=v?g(u)?f[u]:c[u]:u.value;if(a)je(x)&&wr(x,s);else if(je(x))x.includes(s)||x.push(s);else if(v)c[u]=[s],g(u)&&(f[u]=c[u]);else{const A=[s];u.value=A,e.k&&(c[e.k]=A)}}else v?(c[u]=l,g(u)&&(f[u]=l)):_&&(u.value=l,e.k&&(c[e.k]=l))};if(l){const x=()=>{w(),cl.delete(e)};x.id=-1,cl.set(e,x),dn(x,o)}else Sc(e),w()}}}function Sc(e){const t=cl.get(e);t&&(t.flags|=8,cl.delete(e))}Gs().requestIdleCallback,Gs().cancelIdleCallback;const va=e=>!!e.type.__asyncLoader,dl=e=>e.type.__isKeepAlive;function Th(e,t){kc(e,"a",t)}function Sh(e,t){kc(e,"da",t)}function kc(e,t,o=nn){const n=e.__wdc||(e.__wdc=()=>{let a=o;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(fl(t,n,o),o){let a=o.parent;for(;a&&a.parent;)dl(a.parent.vnode)&&kh(n,t,o,a),a=a.parent}}function kh(e,t,o,n){const a=fl(t,e,n,!0);Dn(()=>{wr(n[t],a)},o)}function fl(e,t,o=nn,n=!1){if(o){const a=o[e]||(o[e]=[]),s=t.__weh||(t.__weh=(...l)=>{zn();const r=is(o),u=Rn(t,o,e,l);return r(),qn(),u});return n?a.unshift(s):a.push(s),s}}const lo=e=>(t,o=nn)=>{(!us||e==="sp")&&fl(e,(...n)=>t(...n),o)},Ch=lo("bm"),ut=lo("m"),Cc=lo("bu"),Ec=lo("u"),Lo=lo("bum"),Dn=lo("um"),Eh=lo("sp"),Lh=lo("rtg"),$h=lo("rtc");function Ah(e,t=nn){fl("ec",e,t)}const Ih="components";function Mh(e,t){return Nh(Ih,e,!0,t)||e}const Oh=Symbol.for("v-ndc");function Nh(e,t,o=!0,n=!1){const a=Kt||nn;if(a){const s=a.type;{const r=ld(s,!1);if(r&&(r===t||r===Cn(t)||r===Vs(Cn(t))))return s}const l=Lc(a[e]||s[e],t)||Lc(a.appContext[e],t);return!l&&n?s:l}}function Lc(e,t){return e&&(e[t]||e[Cn(t)]||e[Vs(Cn(t))])}function He(e,t,o,n){let a;const s=o,l=je(e);if(l||Nt(e)){const r=l&&ko(e);let u=!1,d=!1;r&&(u=!En(e),d=Co(e),e=Ys(e)),a=new Array(e.length);for(let c=0,f=e.length;c<f;c++)a[c]=t(u?d?tl(Jt(e[c])):Jt(e[c]):e[c],c,void 0,s)}else if(typeof e=="number"){a=new Array(e);for(let r=0;r<e;r++)a[r]=t(r+1,r,void 0,s)}else if(Ct(e))if(e[Symbol.iterator])a=Array.from(e,(r,u)=>t(r,u,void 0,s));else{const r=Object.keys(e);a=new Array(r.length);for(let u=0,d=r.length;u<d;u++){const c=r[u];a[u]=t(e[c],c,u,s)}}else a=[];return a}function ts(e,t,o={},n,a){if(Kt.ce||Kt.parent&&va(Kt.parent)&&Kt.parent.ce)return t!=="default"&&(o.name=t),S(),wt(Oe,null,[Ve("slot",o,n&&n())],64);let s=e[t];s&&s._c&&(s._d=!1),S();const l=s&&$c(s(o)),r=o.key||l&&l.key,u=wt(Oe,{key:(r&&!On(r)?r:`_${t}`)+(!l&&n?"_fb":"")},l||(n?n():[]),l&&e._===1?64:-2);return!a&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),s&&s._c&&(s._d=!0),u}function $c(e){return e.some(t=>rs(t)?!(t.type===tn||t.type===Oe&&!$c(t.children)):!0)?e:null}const Vr=e=>e?od(e)?yl(e):Vr(e.parent):null,ns=Wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Vr(e.parent),$root:e=>Vr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Oc(e),$forceUpdate:e=>e.f||(e.f=()=>{Ur(e.update)}),$nextTick:e=>e.n||(e.n=Qe.bind(e.proxy)),$watch:e=>nv.bind(e)}),zr=(e,t)=>e!==kt&&!e.__isScriptSetup&&ht(e,t),Rh={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:o,setupState:n,data:a,props:s,accessCache:l,type:r,appContext:u}=e;let d;if(t[0]!=="$"){const g=l[t];if(g!==void 0)switch(g){case 1:return n[t];case 2:return a[t];case 4:return o[t];case 3:return s[t]}else{if(zr(n,t))return l[t]=1,n[t];if(a!==kt&&ht(a,t))return l[t]=2,a[t];if((d=e.propsOptions[0])&&ht(d,t))return l[t]=3,s[t];if(o!==kt&&ht(o,t))return l[t]=4,o[t];qr&&(l[t]=0)}}const c=ns[t];let f,m;if(c)return t==="$attrs"&&en(e.attrs,"get",""),c(e);if((f=r.__cssModules)&&(f=f[t]))return f;if(o!==kt&&ht(o,t))return l[t]=4,o[t];if(m=u.config.globalProperties,ht(m,t))return m[t]},set({_:e},t,o){const{data:n,setupState:a,ctx:s}=e;return zr(a,t)?(a[t]=o,!0):n!==kt&&ht(n,t)?(n[t]=o,!0):ht(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=o,!0)},has({_:{data:e,setupState:t,accessCache:o,ctx:n,appContext:a,propsOptions:s,type:l}},r){let u,d;return!!(o[r]||e!==kt&&r[0]!=="$"&&ht(e,r)||zr(t,r)||(u=s[0])&&ht(u,r)||ht(n,r)||ht(ns,r)||ht(a.config.globalProperties,r)||(d=l.__cssModules)&&d[r])},defineProperty(e,t,o){return o.get!=null?e._.accessCache[t]=0:ht(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}};function Ac(e){return je(e)?e.reduce((t,o)=>(t[o]=null,t),{}):e}let qr=!0;function Dh(e){const t=Oc(e),o=e.proxy,n=e.ctx;qr=!1,t.beforeCreate&&Ic(t.beforeCreate,e,"bc");const{data:a,computed:s,methods:l,watch:r,provide:u,inject:d,created:c,beforeMount:f,mounted:m,beforeUpdate:g,updated:v,activated:_,deactivated:w,beforeDestroy:x,beforeUnmount:A,destroyed:W,unmounted:T,render:P,renderTracked:q,renderTriggered:G,errorCaptured:z,serverPrefetch:J,expose:ve,inheritAttrs:ae,components:F,directives:K,filters:ee}=t;if(d&&Ph(d,n,null),l)for(const ne in l){const U=l[ne];Ge(U)&&(n[ne]=U.bind(o))}if(a){const ne=a.call(o,o);Ct(ne)&&(e.data=Zs(ne))}if(qr=!0,s)for(const ne in s){const U=s[ne],j=Ge(U)?U.bind(o,o):Ge(U.get)?U.get.bind(o,o):Vn,ue=!Ge(U)&&Ge(U.set)?U.set.bind(o):Vn,xe=tt({get:j,set:ue});Object.defineProperty(n,ne,{enumerable:!0,configurable:!0,get:()=>xe.value,set:oe=>xe.value=oe})}if(r)for(const ne in r)Mc(r[ne],n,o,ne);if(u){const ne=Ge(u)?u.call(o):u;Reflect.ownKeys(ne).forEach(U=>{gl(U,ne[U])})}c&&Ic(c,e,"c");function te(ne,U){je(U)?U.forEach(j=>ne(j.bind(o))):U&&ne(U.bind(o))}if(te(Ch,f),te(ut,m),te(Cc,g),te(Ec,v),te(Th,_),te(Sh,w),te(Ah,z),te($h,q),te(Lh,G),te(Lo,A),te(Dn,T),te(Eh,J),je(ve))if(ve.length){const ne=e.exposed||(e.exposed={});ve.forEach(U=>{Object.defineProperty(ne,U,{get:()=>o[U],set:j=>o[U]=j,enumerable:!0})})}else e.exposed||(e.exposed={});P&&e.render===Vn&&(e.render=P),ae!=null&&(e.inheritAttrs=ae),F&&(e.components=F),K&&(e.directives=K),J&&Tc(e)}function Ph(e,t,o=Vn){je(e)&&(e=Gr(e));for(const n in e){const a=e[n];let s;Ct(a)?"default"in a?s=ro(a.from||n,a.default,!0):s=ro(a.from||n):s=ro(a),Rt(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:l=>s.value=l}):t[n]=s}}function Ic(e,t,o){Rn(je(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,o)}function Mc(e,t,o,n){let a=n.includes(".")?Yc(o,n):()=>o[n];if(Nt(e)){const s=t[e];Ge(s)&&et(a,s)}else if(Ge(e))et(a,e.bind(o));else if(Ct(e))if(je(e))e.forEach(s=>Mc(s,t,o,n));else{const s=Ge(e.handler)?e.handler.bind(o):t[e.handler];Ge(s)&&et(a,s,e)}}function Oc(e){const t=e.type,{mixins:o,extends:n}=t,{mixins:a,optionsCache:s,config:{optionMergeStrategies:l}}=e.appContext,r=s.get(t);let u;return r?u=r:!a.length&&!o&&!n?u=t:(u={},a.length&&a.forEach(d=>pl(u,d,l,!0)),pl(u,t,l)),Ct(t)&&s.set(t,u),u}function pl(e,t,o,n=!1){const{mixins:a,extends:s}=t;s&&pl(e,s,o,!0),a&&a.forEach(l=>pl(e,l,o,!0));for(const l in t)if(!(n&&l==="expose")){const r=Fh[l]||o&&o[l];e[l]=r?r(e[l],t[l]):t[l]}return e}const Fh={data:Nc,props:Rc,emits:Rc,methods:os,computed:os,beforeCreate:cn,created:cn,beforeMount:cn,mounted:cn,beforeUpdate:cn,updated:cn,beforeDestroy:cn,beforeUnmount:cn,destroyed:cn,unmounted:cn,activated:cn,deactivated:cn,errorCaptured:cn,serverPrefetch:cn,components:os,directives:os,watch:Uh,provide:Nc,inject:Bh};function Nc(e,t){return t?e?function(){return Wt(Ge(e)?e.call(this,this):e,Ge(t)?t.call(this,this):t)}:t:e}function Bh(e,t){return os(Gr(e),Gr(t))}function Gr(e){if(je(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function cn(e,t){return e?[...new Set([].concat(e,t))]:t}function os(e,t){return e?Wt(Object.create(null),e,t):t}function Rc(e,t){return e?je(e)&&je(t)?[...new Set([...e,...t])]:Wt(Object.create(null),Ac(e),Ac(t??{})):t}function Uh(e,t){if(!e)return t;if(!t)return e;const o=Wt(Object.create(null),e);for(const n in t)o[n]=cn(e[n],t[n]);return o}function Dc(){return{app:null,config:{isNativeTag:Tu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jh=0;function Hh(e,t){return function(n,a=null){Ge(n)||(n=Wt({},n)),a!=null&&!Ct(a)&&(a=null);const s=Dc(),l=new WeakSet,r=[];let u=!1;const d=s.app={_uid:jh++,_component:n,_props:a,_container:null,_context:s,_instance:null,version:kv,get config(){return s.config},set config(c){},use(c,...f){return l.has(c)||(c&&Ge(c.install)?(l.add(c),c.install(d,...f)):Ge(c)&&(l.add(c),c(d,...f))),d},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),d},component(c,f){return f?(s.components[c]=f,d):s.components[c]},directive(c,f){return f?(s.directives[c]=f,d):s.directives[c]},mount(c,f,m){if(!u){const g=d._ceVNode||Ve(n,a);return g.appContext=s,m===!0?m="svg":m===!1&&(m=void 0),e(g,c,m),u=!0,d._container=c,c.__vue_app__=d,yl(g.component)}},onUnmount(c){r.push(c)},unmount(){u&&(Rn(r,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(c,f){return s.provides[c]=f,d},runWithContext(c){const f=Jo;Jo=d;try{return c()}finally{Jo=f}}};return d}}let Jo=null;function gl(e,t){if(nn){let o=nn.provides;const n=nn.parent&&nn.parent.provides;n===o&&(o=nn.provides=Object.create(n)),o[e]=t}}function ro(e,t,o=!1){const n=io();if(n||Jo){let a=Jo?Jo._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return o&&Ge(t)?t.call(n&&n.proxy):t}}function Wh(){return!!(io()||Jo)}const Pc={},Fc=()=>Object.create(Pc),Bc=e=>Object.getPrototypeOf(e)===Pc;function Vh(e,t,o,n=!1){const a={},s=Fc();e.propsDefaults=Object.create(null),Uc(e,t,a,s);for(const l in e.propsOptions[0])l in a||(a[l]=void 0);o?e.props=n?a:nh(a):e.type.props?e.props=a:e.props=s,e.attrs=s}function zh(e,t,o,n){const{props:a,attrs:s,vnode:{patchFlag:l}}=e,r=at(a),[u]=e.propsOptions;let d=!1;if((n||l>0)&&!(l&16)){if(l&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let m=c[f];if(ml(e.emitsOptions,m))continue;const g=t[m];if(u)if(ht(s,m))g!==s[m]&&(s[m]=g,d=!0);else{const v=Cn(m);a[v]=Qr(u,r,v,g,e,!1)}else g!==s[m]&&(s[m]=g,d=!0)}}}else{Uc(e,t,a,s)&&(d=!0);let c;for(const f in r)(!t||!ht(t,f)&&((c=To(f))===f||!ht(t,c)))&&(u?o&&(o[f]!==void 0||o[c]!==void 0)&&(a[f]=Qr(u,r,f,void 0,e,!0)):delete a[f]);if(s!==r)for(const f in s)(!t||!ht(t,f))&&(delete s[f],d=!0)}d&&no(e.attrs,"set","")}function Uc(e,t,o,n){const[a,s]=e.propsOptions;let l=!1,r;if(t)for(let u in t){if(Va(u))continue;const d=t[u];let c;a&&ht(a,c=Cn(u))?!s||!s.includes(c)?o[c]=d:(r||(r={}))[c]=d:ml(e.emitsOptions,u)||(!(u in n)||d!==n[u])&&(n[u]=d,l=!0)}if(s){const u=at(o),d=r||kt;for(let c=0;c<s.length;c++){const f=s[c];o[f]=Qr(a,u,f,d[f],e,!ht(d,f))}}return l}function Qr(e,t,o,n,a,s){const l=e[o];if(l!=null){const r=ht(l,"default");if(r&&n===void 0){const u=l.default;if(l.type!==Function&&!l.skipFactory&&Ge(u)){const{propsDefaults:d}=a;if(o in d)n=d[o];else{const c=is(a);n=d[o]=u.call(null,t),c()}}else n=u;a.ce&&a.ce._setProp(o,n)}l[0]&&(s&&!r?n=!1:l[1]&&(n===""||n===To(o))&&(n=!0))}return n}const qh=new WeakMap;function jc(e,t,o=!1){const n=o?qh:t.propsCache,a=n.get(e);if(a)return a;const s=e.props,l={},r=[];let u=!1;if(!Ge(e)){const c=f=>{u=!0;const[m,g]=jc(f,t,!0);Wt(l,m),g&&r.push(...g)};!o&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!u)return Ct(e)&&n.set(e,ca),ca;if(je(s))for(let c=0;c<s.length;c++){const f=Cn(s[c]);Hc(f)&&(l[f]=kt)}else if(s)for(const c in s){const f=Cn(c);if(Hc(f)){const m=s[c],g=l[f]=je(m)||Ge(m)?{type:m}:Wt({},m),v=g.type;let _=!1,w=!0;if(je(v))for(let x=0;x<v.length;++x){const A=v[x],W=Ge(A)&&A.name;if(W==="Boolean"){_=!0;break}else W==="String"&&(w=!1)}else _=Ge(v)&&v.name==="Boolean";g[0]=_,g[1]=w,(_||ht(g,"default"))&&r.push(f)}}const d=[l,r];return Ct(e)&&n.set(e,d),d}function Hc(e){return e[0]!=="$"&&!Va(e)}const Yr=e=>e==="_"||e==="_ctx"||e==="$stable",Jr=e=>je(e)?e.map(Qn):[Qn(e)],Gh=(e,t,o)=>{if(t._n)return t;const n=it((...a)=>Jr(t(...a)),o);return n._c=!1,n},Wc=(e,t,o)=>{const n=e._ctx;for(const a in e){if(Yr(a))continue;const s=e[a];if(Ge(s))t[a]=Gh(a,s,n);else if(s!=null){const l=Jr(s);t[a]=()=>l}}},Vc=(e,t)=>{const o=Jr(t);e.slots.default=()=>o},zc=(e,t,o)=>{for(const n in t)(o||!Yr(n))&&(e[n]=t[n])},Qh=(e,t,o)=>{const n=e.slots=Fc();if(e.vnode.shapeFlag&32){const a=t._;a?(zc(n,t,o),o&&Lu(n,"_",a,!0)):Wc(t,n)}else t&&Vc(e,t)},Yh=(e,t,o)=>{const{vnode:n,slots:a}=e;let s=!0,l=kt;if(n.shapeFlag&32){const r=t._;r?o&&r===1?s=!1:zc(a,t,o):(s=!t.$stable,Wc(t,a)),l=t}else t&&(Vc(e,t),l={default:1});if(s)for(const r in a)!Yr(r)&&l[r]==null&&delete a[r]},dn=cv;function Jh(e){return Kh(e)}function Kh(e,t){const o=Gs();o.__VUE__=!0;const{insert:n,remove:a,patchProp:s,createElement:l,createText:r,createComment:u,setText:d,setElementText:c,parentNode:f,nextSibling:m,setScopeId:g=Vn,insertStaticContent:v}=e,_=(k,E,D,Y=null,ie=null,re=null,C=void 0,b=null,R=!!E.dynamicChildren)=>{if(k===E)return;k&&!Xo(k,E)&&(Y=I(k),oe(k,ie,re,!0),k=null),E.patchFlag===-2&&(R=!1,E.dynamicChildren=null);const{type:V,ref:me,shapeFlag:fe}=E;switch(V){case as:w(k,E,D,Y);break;case tn:x(k,E,D,Y);break;case Zr:k==null&&A(E,D,Y,C);break;case Oe:F(k,E,D,Y,ie,re,C,b,R);break;default:fe&1?P(k,E,D,Y,ie,re,C,b,R):fe&6?K(k,E,D,Y,ie,re,C,b,R):(fe&64||fe&128)&&V.process(k,E,D,Y,ie,re,C,b,R,O)}me!=null&&ie?es(me,k&&k.ref,re,E||k,!E):me==null&&k&&k.ref!=null&&es(k.ref,null,re,k,!0)},w=(k,E,D,Y)=>{if(k==null)n(E.el=r(E.children),D,Y);else{const ie=E.el=k.el;E.children!==k.children&&d(ie,E.children)}},x=(k,E,D,Y)=>{k==null?n(E.el=u(E.children||""),D,Y):E.el=k.el},A=(k,E,D,Y)=>{[k.el,k.anchor]=v(k.children,E,D,Y,k.el,k.anchor)},W=({el:k,anchor:E},D,Y)=>{let ie;for(;k&&k!==E;)ie=m(k),n(k,D,Y),k=ie;n(E,D,Y)},T=({el:k,anchor:E})=>{let D;for(;k&&k!==E;)D=m(k),a(k),k=D;a(E)},P=(k,E,D,Y,ie,re,C,b,R)=>{E.type==="svg"?C="svg":E.type==="math"&&(C="mathml"),k==null?q(E,D,Y,ie,re,C,b,R):J(k,E,ie,re,C,b,R)},q=(k,E,D,Y,ie,re,C,b)=>{let R,V;const{props:me,shapeFlag:fe,transition:X,dirs:le}=k;if(R=k.el=l(k.type,re,me&&me.is,me),fe&8?c(R,k.children):fe&16&&z(k.children,R,null,Y,ie,Kr(k,re),C,b),le&&Qo(k,null,Y,"created"),G(R,k,k.scopeId,C,Y),me){for(const Pe in me)Pe!=="value"&&!Va(Pe)&&s(R,Pe,null,me[Pe],re,Y);"value"in me&&s(R,"value",null,me.value,re),(V=me.onVnodeBeforeMount)&&Yn(V,Y,k)}le&&Qo(k,null,Y,"beforeMount");const Ne=Xh(ie,X);Ne&&X.beforeEnter(R),n(R,E,D),((V=me&&me.onVnodeMounted)||Ne||le)&&dn(()=>{V&&Yn(V,Y,k),Ne&&X.enter(R),le&&Qo(k,null,Y,"mounted")},ie)},G=(k,E,D,Y,ie)=>{if(D&&g(k,D),Y)for(let re=0;re<Y.length;re++)g(k,Y[re]);if(ie){let re=ie.subTree;if(E===re||Zc(re.type)&&(re.ssContent===E||re.ssFallback===E)){const C=ie.vnode;G(k,C,C.scopeId,C.slotScopeIds,ie.parent)}}},z=(k,E,D,Y,ie,re,C,b,R=0)=>{for(let V=R;V<k.length;V++){const me=k[V]=b?Ao(k[V]):Qn(k[V]);_(null,me,E,D,Y,ie,re,C,b)}},J=(k,E,D,Y,ie,re,C)=>{const b=E.el=k.el;let{patchFlag:R,dynamicChildren:V,dirs:me}=E;R|=k.patchFlag&16;const fe=k.props||kt,X=E.props||kt;let le;if(D&&Ko(D,!1),(le=X.onVnodeBeforeUpdate)&&Yn(le,D,E,k),me&&Qo(E,k,D,"beforeUpdate"),D&&Ko(D,!0),(fe.innerHTML&&X.innerHTML==null||fe.textContent&&X.textContent==null)&&c(b,""),V?ve(k.dynamicChildren,V,b,D,Y,Kr(E,ie),re):C||U(k,E,b,null,D,Y,Kr(E,ie),re,!1),R>0){if(R&16)ae(b,fe,X,D,ie);else if(R&2&&fe.class!==X.class&&s(b,"class",null,X.class,ie),R&4&&s(b,"style",fe.style,X.style,ie),R&8){const Ne=E.dynamicProps;for(let Pe=0;Pe<Ne.length;Pe++){const We=Ne[Pe],ze=fe[We],rt=X[We];(rt!==ze||We==="value")&&s(b,We,ze,rt,ie,D)}}R&1&&k.children!==E.children&&c(b,E.children)}else!C&&V==null&&ae(b,fe,X,D,ie);((le=X.onVnodeUpdated)||me)&&dn(()=>{le&&Yn(le,D,E,k),me&&Qo(E,k,D,"updated")},Y)},ve=(k,E,D,Y,ie,re,C)=>{for(let b=0;b<E.length;b++){const R=k[b],V=E[b],me=R.el&&(R.type===Oe||!Xo(R,V)||R.shapeFlag&198)?f(R.el):D;_(R,V,me,null,Y,ie,re,C,!0)}},ae=(k,E,D,Y,ie)=>{if(E!==D){if(E!==kt)for(const re in E)!Va(re)&&!(re in D)&&s(k,re,E[re],null,ie,Y);for(const re in D){if(Va(re))continue;const C=D[re],b=E[re];C!==b&&re!=="value"&&s(k,re,b,C,ie,Y)}"value"in D&&s(k,"value",E.value,D.value,ie)}},F=(k,E,D,Y,ie,re,C,b,R)=>{const V=E.el=k?k.el:r(""),me=E.anchor=k?k.anchor:r("");let{patchFlag:fe,dynamicChildren:X,slotScopeIds:le}=E;le&&(b=b?b.concat(le):le),k==null?(n(V,D,Y),n(me,D,Y),z(E.children||[],D,me,ie,re,C,b,R)):fe>0&&fe&64&&X&&k.dynamicChildren?(ve(k.dynamicChildren,X,D,ie,re,C,b),(E.key!=null||ie&&E===ie.subTree)&&Xr(k,E,!0)):U(k,E,D,me,ie,re,C,b,R)},K=(k,E,D,Y,ie,re,C,b,R)=>{E.slotScopeIds=b,k==null?E.shapeFlag&512?ie.ctx.activate(E,D,Y,C,R):ee(E,D,Y,ie,re,C,R):Q(k,E,R)},ee=(k,E,D,Y,ie,re,C)=>{const b=k.component=vv(k,Y,ie);if(dl(k)&&(b.ctx.renderer=O),_v(b,!1,C),b.asyncDep){if(ie&&ie.registerDep(b,te,C),!k.el){const R=b.subTree=Ve(tn);x(null,R,E,D),k.placeholder=R.el}}else te(b,k,E,D,ie,re,C)},Q=(k,E,D)=>{const Y=E.component=k.component;if(iv(k,E,D))if(Y.asyncDep&&!Y.asyncResolved){ne(Y,E,D);return}else Y.next=E,Y.update();else E.el=k.el,Y.vnode=E},te=(k,E,D,Y,ie,re,C)=>{const b=()=>{if(k.isMounted){let{next:fe,bu:X,u:le,parent:Ne,vnode:Pe}=k;{const Ht=qc(k);if(Ht){fe&&(fe.el=Pe.el,ne(k,fe,C)),Ht.asyncDep.then(()=>{k.isUnmounted||b()});return}}let We=fe,ze;Ko(k,!1),fe?(fe.el=Pe.el,ne(k,fe,C)):fe=Pe,X&&zs(X),(ze=fe.props&&fe.props.onVnodeBeforeUpdate)&&Yn(ze,Ne,fe,Pe),Ko(k,!0);const rt=Kc(k),dt=k.subTree;k.subTree=rt,_(dt,rt,f(dt.el),I(dt),k,ie,re),fe.el=rt.el,We===null&&uv(k,rt.el),le&&dn(le,ie),(ze=fe.props&&fe.props.onVnodeUpdated)&&dn(()=>Yn(ze,Ne,fe,Pe),ie)}else{let fe;const{el:X,props:le}=E,{bm:Ne,m:Pe,parent:We,root:ze,type:rt}=k,dt=va(E);Ko(k,!1),Ne&&zs(Ne),!dt&&(fe=le&&le.onVnodeBeforeMount)&&Yn(fe,We,E),Ko(k,!0);{ze.ce&&ze.ce._def.shadowRoot!==!1&&ze.ce._injectChildStyle(rt);const Ht=k.subTree=Kc(k);_(null,Ht,D,Y,k,ie,re),E.el=Ht.el}if(Pe&&dn(Pe,ie),!dt&&(fe=le&&le.onVnodeMounted)){const Ht=E;dn(()=>Yn(fe,We,Ht),ie)}(E.shapeFlag&256||We&&va(We.vnode)&&We.vnode.shapeFlag&256)&&k.a&&dn(k.a,ie),k.isMounted=!0,E=D=Y=null}};k.scope.on();const R=k.effect=new Ru(b);k.scope.off();const V=k.update=R.run.bind(R),me=k.job=R.runIfDirty.bind(R);me.i=k,me.id=k.uid,R.scheduler=()=>Ur(me),Ko(k,!0),V()},ne=(k,E,D)=>{E.component=k;const Y=k.vnode.props;k.vnode=E,k.next=null,zh(k,E.props,Y,D),Yh(k,E.children,D),zn(),sc(k),qn()},U=(k,E,D,Y,ie,re,C,b,R=!1)=>{const V=k&&k.children,me=k?k.shapeFlag:0,fe=E.children,{patchFlag:X,shapeFlag:le}=E;if(X>0){if(X&128){ue(V,fe,D,Y,ie,re,C,b,R);return}else if(X&256){j(V,fe,D,Y,ie,re,C,b,R);return}}le&8?(me&16&&_e(V,ie,re),fe!==V&&c(D,fe)):me&16?le&16?ue(V,fe,D,Y,ie,re,C,b,R):_e(V,ie,re,!0):(me&8&&c(D,""),le&16&&z(fe,D,Y,ie,re,C,b,R))},j=(k,E,D,Y,ie,re,C,b,R)=>{k=k||ca,E=E||ca;const V=k.length,me=E.length,fe=Math.min(V,me);let X;for(X=0;X<fe;X++){const le=E[X]=R?Ao(E[X]):Qn(E[X]);_(k[X],le,D,null,ie,re,C,b,R)}V>me?_e(k,ie,re,!0,!1,fe):z(E,D,Y,ie,re,C,b,R,fe)},ue=(k,E,D,Y,ie,re,C,b,R)=>{let V=0;const me=E.length;let fe=k.length-1,X=me-1;for(;V<=fe&&V<=X;){const le=k[V],Ne=E[V]=R?Ao(E[V]):Qn(E[V]);if(Xo(le,Ne))_(le,Ne,D,null,ie,re,C,b,R);else break;V++}for(;V<=fe&&V<=X;){const le=k[fe],Ne=E[X]=R?Ao(E[X]):Qn(E[X]);if(Xo(le,Ne))_(le,Ne,D,null,ie,re,C,b,R);else break;fe--,X--}if(V>fe){if(V<=X){const le=X+1,Ne=le<me?E[le].el:Y;for(;V<=X;)_(null,E[V]=R?Ao(E[V]):Qn(E[V]),D,Ne,ie,re,C,b,R),V++}}else if(V>X)for(;V<=fe;)oe(k[V],ie,re,!0),V++;else{const le=V,Ne=V,Pe=new Map;for(V=Ne;V<=X;V++){const Ce=E[V]=R?Ao(E[V]):Qn(E[V]);Ce.key!=null&&Pe.set(Ce.key,V)}let We,ze=0;const rt=X-Ne+1;let dt=!1,Ht=0;const Fe=new Array(rt);for(V=0;V<rt;V++)Fe[V]=0;for(V=le;V<=fe;V++){const Ce=k[V];if(ze>=rt){oe(Ce,ie,re,!0);continue}let st;if(Ce.key!=null)st=Pe.get(Ce.key);else for(We=Ne;We<=X;We++)if(Fe[We-Ne]===0&&Xo(Ce,E[We])){st=We;break}st===void 0?oe(Ce,ie,re,!0):(Fe[st-Ne]=V+1,st>=Ht?Ht=st:dt=!0,_(Ce,E[st],D,null,ie,re,C,b,R),ze++)}const Le=dt?Zh(Fe):ca;for(We=Le.length-1,V=rt-1;V>=0;V--){const Ce=Ne+V,st=E[Ce],mn=E[Ce+1],la=Ce+1<me?mn.el||mn.placeholder:Y;Fe[V]===0?_(null,st,D,la,ie,re,C,b,R):dt&&(We<0||V!==Le[We]?xe(st,D,la,2):We--)}}},xe=(k,E,D,Y,ie=null)=>{const{el:re,type:C,transition:b,children:R,shapeFlag:V}=k;if(V&6){xe(k.component.subTree,E,D,Y);return}if(V&128){k.suspense.move(E,D,Y);return}if(V&64){C.move(k,E,D,O);return}if(C===Oe){n(re,E,D);for(let fe=0;fe<R.length;fe++)xe(R[fe],E,D,Y);n(k.anchor,E,D);return}if(C===Zr){W(k,E,D);return}if(Y!==2&&V&1&&b)if(Y===0)b.beforeEnter(re),n(re,E,D),dn(()=>b.enter(re),ie);else{const{leave:fe,delayLeave:X,afterLeave:le}=b,Ne=()=>{k.ctx.isUnmounted?a(re):n(re,E,D)},Pe=()=>{re._isLeaving&&re[so](!0),fe(re,()=>{Ne(),le&&le()})};X?X(re,Ne,Pe):Pe()}else n(re,E,D)},oe=(k,E,D,Y=!1,ie=!1)=>{const{type:re,props:C,ref:b,children:R,dynamicChildren:V,shapeFlag:me,patchFlag:fe,dirs:X,cacheIndex:le}=k;if(fe===-2&&(ie=!1),b!=null&&(zn(),es(b,null,D,k,!0),qn()),le!=null&&(E.renderCache[le]=void 0),me&256){E.ctx.deactivate(k);return}const Ne=me&1&&X,Pe=!va(k);let We;if(Pe&&(We=C&&C.onVnodeBeforeUnmount)&&Yn(We,E,k),me&6)ke(k.component,D,Y);else{if(me&128){k.suspense.unmount(D,Y);return}Ne&&Qo(k,null,E,"beforeUnmount"),me&64?k.type.remove(k,E,D,O,Y):V&&!V.hasOnce&&(re!==Oe||fe>0&&fe&64)?_e(V,E,D,!1,!0):(re===Oe&&fe&384||!ie&&me&16)&&_e(R,E,D),Y&&de(k)}(Pe&&(We=C&&C.onVnodeUnmounted)||Ne)&&dn(()=>{We&&Yn(We,E,k),Ne&&Qo(k,null,E,"unmounted")},D)},de=k=>{const{type:E,el:D,anchor:Y,transition:ie}=k;if(E===Oe){be(D,Y);return}if(E===Zr){T(k);return}const re=()=>{a(D),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(k.shapeFlag&1&&ie&&!ie.persisted){const{leave:C,delayLeave:b}=ie,R=()=>C(D,re);b?b(k.el,re,R):R()}else re()},be=(k,E)=>{let D;for(;k!==E;)D=m(k),a(k),k=D;a(E)},ke=(k,E,D)=>{const{bum:Y,scope:ie,job:re,subTree:C,um:b,m:R,a:V}=k;Gc(R),Gc(V),Y&&zs(Y),ie.stop(),re&&(re.flags|=8,oe(C,k,E,D)),b&&dn(b,E),dn(()=>{k.isUnmounted=!0},E)},_e=(k,E,D,Y=!1,ie=!1,re=0)=>{for(let C=re;C<k.length;C++)oe(k[C],E,D,Y,ie)},I=k=>{if(k.shapeFlag&6)return I(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const E=m(k.anchor||k.el),D=E&&E[uc];return D?m(D):E};let N=!1;const H=(k,E,D)=>{k==null?E._vnode&&oe(E._vnode,null,null,!0):_(E._vnode||null,k,E,null,null,null,D),E._vnode=k,N||(N=!0,sc(),lc(),N=!1)},O={p:_,um:oe,m:xe,r:de,mt:ee,mc:z,pc:U,pbc:ve,n:I,o:e};return{render:H,hydrate:void 0,createApp:Hh(H)}}function Kr({type:e,props:t},o){return o==="svg"&&e==="foreignObject"||o==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:o}function Ko({effect:e,job:t},o){o?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Xh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Xr(e,t,o=!1){const n=e.children,a=t.children;if(je(n)&&je(a))for(let s=0;s<n.length;s++){const l=n[s];let r=a[s];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=a[s]=Ao(a[s]),r.el=l.el),!o&&r.patchFlag!==-2&&Xr(l,r)),r.type===as&&r.patchFlag!==-1&&(r.el=l.el),r.type===tn&&!r.el&&(r.el=l.el)}}function Zh(e){const t=e.slice(),o=[0];let n,a,s,l,r;const u=e.length;for(n=0;n<u;n++){const d=e[n];if(d!==0){if(a=o[o.length-1],e[a]<d){t[n]=a,o.push(n);continue}for(s=0,l=o.length-1;s<l;)r=s+l>>1,e[o[r]]<d?s=r+1:l=r;d<e[o[s]]&&(s>0&&(t[n]=o[s-1]),o[s]=n)}}for(s=o.length,l=o[s-1];s-- >0;)o[s]=l,l=t[l];return o}function qc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:qc(t)}function Gc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ev=Symbol.for("v-scx"),tv=()=>ro(ev);function et(e,t,o){return Qc(e,t,o)}function Qc(e,t,o=kt){const{immediate:n,deep:a,flush:s,once:l}=o,r=Wt({},o),u=t&&n||!t&&s!=="post";let d;if(us){if(s==="sync"){const g=tv();d=g.__watcherHandles||(g.__watcherHandles=[])}else if(!u){const g=()=>{};return g.stop=Vn,g.resume=Vn,g.pause=Vn,g}}const c=nn;r.call=(g,v,_)=>Rn(g,c,v,_);let f=!1;s==="post"?r.scheduler=g=>{dn(g,c&&c.suspense)}:s!=="sync"&&(f=!0,r.scheduler=(g,v)=>{v?g():Ur(g)}),r.augmentJob=g=>{t&&(g.flags|=4),f&&(g.flags|=2,c&&(g.id=c.uid,g.i=c))};const m=fh(e,t,r);return us&&(d?d.push(m):u&&m()),m}function nv(e,t,o){const n=this.proxy,a=Nt(e)?e.includes(".")?Yc(n,e):()=>n[e]:e.bind(n,n);let s;Ge(t)?s=t:(s=t.handler,o=t);const l=is(this),r=Qc(a,s.bind(n),o);return l(),r}function Yc(e,t){const o=t.split(".");return()=>{let n=e;for(let a=0;a<o.length&&n;a++)n=n[o[a]];return n}}const ov=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Cn(t)}Modifiers`]||e[`${To(t)}Modifiers`];function av(e,t,...o){if(e.isUnmounted)return;const n=e.vnode.props||kt;let a=o;const s=t.startsWith("update:"),l=s&&ov(n,t.slice(7));l&&(l.trim&&(a=o.map(c=>Nt(c)?c.trim():c)),l.number&&(a=o.map(qs)));let r,u=n[r=Tr(t)]||n[r=Tr(Cn(t))];!u&&s&&(u=n[r=Tr(To(t))]),u&&Rn(u,e,6,a);const d=n[r+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,Rn(d,e,6,a)}}const sv=new WeakMap;function Jc(e,t,o=!1){const n=o?sv:t.emitsCache,a=n.get(e);if(a!==void 0)return a;const s=e.emits;let l={},r=!1;if(!Ge(e)){const u=d=>{const c=Jc(d,t,!0);c&&(r=!0,Wt(l,c))};!o&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!s&&!r?(Ct(e)&&n.set(e,null),null):(je(s)?s.forEach(u=>l[u]=null):Wt(l,s),Ct(e)&&n.set(e,l),l)}function ml(e,t){return!e||!Hs(t)?!1:(t=t.slice(2).replace(/Once$/,""),ht(e,t[0].toLowerCase()+t.slice(1))||ht(e,To(t))||ht(e,t))}function lM(){}function Kc(e){const{type:t,vnode:o,proxy:n,withProxy:a,propsOptions:[s],slots:l,attrs:r,emit:u,render:d,renderCache:c,props:f,data:m,setupState:g,ctx:v,inheritAttrs:_}=e,w=ll(e);let x,A;try{if(o.shapeFlag&4){const T=a||n,P=T;x=Qn(d.call(P,T,c,f,g,m,v)),A=r}else{const T=t;x=Qn(T.length>1?T(f,{attrs:r,slots:l,emit:u}):T(f,null)),A=t.props?r:lv(r)}}catch(T){ss.length=0,al(T,e,1),x=Ve(tn)}let W=x;if(A&&_!==!1){const T=Object.keys(A),{shapeFlag:P}=W;T.length&&P&7&&(s&&T.some(br)&&(A=rv(A,s)),W=$o(W,A,!1,!0))}return o.dirs&&(W=$o(W,null,!1,!0),W.dirs=W.dirs?W.dirs.concat(o.dirs):o.dirs),o.transition&&Yo(W,o.transition),x=W,ll(w),x}const lv=e=>{let t;for(const o in e)(o==="class"||o==="style"||Hs(o))&&((t||(t={}))[o]=e[o]);return t},rv=(e,t)=>{const o={};for(const n in e)(!br(n)||!(n.slice(9)in t))&&(o[n]=e[n]);return o};function iv(e,t,o){const{props:n,children:a,component:s}=e,{props:l,children:r,patchFlag:u}=t,d=s.emitsOptions;if(t.dirs||t.transition)return!0;if(o&&u>=0){if(u&1024)return!0;if(u&16)return n?Xc(n,l,d):!!l;if(u&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const m=c[f];if(l[m]!==n[m]&&!ml(d,m))return!0}}}else return(a||r)&&(!r||!r.$stable)?!0:n===l?!1:n?l?Xc(n,l,d):!0:!!l;return!1}function Xc(e,t,o){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let a=0;a<n.length;a++){const s=n[a];if(t[s]!==e[s]&&!ml(o,s))return!0}return!1}function uv({vnode:e,parent:t},o){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=o,t=t.parent;else break}}const Zc=e=>e.__isSuspense;function cv(e,t){t&&t.pendingBranch?je(e)?t.effects.push(...e):t.effects.push(e):yh(e)}const Oe=Symbol.for("v-fgt"),as=Symbol.for("v-txt"),tn=Symbol.for("v-cmt"),Zr=Symbol.for("v-stc"),ss=[];let xn=null;function S(e=!1){ss.push(xn=e?null:[])}function dv(){ss.pop(),xn=ss[ss.length-1]||null}let ls=1;function hl(e,t=!1){ls+=e,e<0&&xn&&t&&(xn.hasOnce=!0)}function ed(e){return e.dynamicChildren=ls>0?xn||ca:null,dv(),ls>0&&xn&&xn.push(e),e}function L(e,t,o,n,a,s){return ed(i(e,t,o,n,a,s,!0))}function wt(e,t,o,n,a){return ed(Ve(e,t,o,n,a,!0))}function rs(e){return e?e.__v_isVNode===!0:!1}function Xo(e,t){return e.type===t.type&&e.key===t.key}const td=({key:e})=>e??null,vl=({ref:e,ref_key:t,ref_for:o})=>(typeof e=="number"&&(e=""+e),e!=null?Nt(e)||Rt(e)||Ge(e)?{i:Kt,r:e,k:t,f:!!o}:e:null);function i(e,t=null,o=null,n=0,a=null,s=e===Oe?0:1,l=!1,r=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&td(t),ref:t&&vl(t),scopeId:ic,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Kt};return r?(ei(u,o),s&128&&e.normalize(u)):o&&(u.shapeFlag|=Nt(o)?8:16),ls>0&&!l&&xn&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&xn.push(u),u}const Ve=fv;function fv(e,t=null,o=null,n=0,a=null,s=!1){if((!e||e===Oh)&&(e=tn),rs(e)){const r=$o(e,t,!0);return o&&ei(r,o),ls>0&&!s&&xn&&(r.shapeFlag&6?xn[xn.indexOf(e)]=r:xn.push(r)),r.patchFlag=-2,r}if(Sv(e)&&(e=e.__vccOpts),t){t=pv(t);let{class:r,style:u}=t;r&&!Nt(r)&&(t.class=Ee(r)),Ct(u)&&(Pr(u)&&!je(u)&&(u=Wt({},u)),t.style=pt(u))}const l=Nt(e)?1:Zc(e)?128:cc(e)?64:Ct(e)?4:Ge(e)?2:0;return i(e,t,o,n,a,l,s,!0)}function pv(e){return e?Pr(e)||Bc(e)?Wt({},e):e:null}function $o(e,t,o=!1,n=!1){const{props:a,ref:s,patchFlag:l,children:r,transition:u}=e,d=t?gv(a||{},t):a,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&td(d),ref:t&&t.ref?o&&s?je(s)?s.concat(vl(t)):[s,vl(t)]:vl(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Oe?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&$o(e.ssContent),ssFallback:e.ssFallback&&$o(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&n&&Yo(c,u.clone(c)),c}function qe(e=" ",t=0){return Ve(as,null,e,t)}function pe(e="",t=!1){return t?(S(),wt(tn,null,e)):Ve(tn,null,e)}function Qn(e){return e==null||typeof e=="boolean"?Ve(tn):je(e)?Ve(Oe,null,e.slice()):rs(e)?Ao(e):Ve(as,null,String(e))}function Ao(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:$o(e)}function ei(e,t){let o=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(je(t))o=16;else if(typeof t=="object")if(n&65){const a=t.default;a&&(a._c&&(a._d=!1),ei(e,a()),a._c&&(a._d=!0));return}else{o=32;const a=t._;!a&&!Bc(t)?t._ctx=Kt:a===3&&Kt&&(Kt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ge(t)?(t={default:t,_ctx:Kt},o=32):(t=String(t),n&64?(o=16,t=[qe(t)]):o=8);e.children=t,e.shapeFlag|=o}function gv(...e){const t={};for(let o=0;o<e.length;o++){const n=e[o];for(const a in n)if(a==="class")t.class!==n.class&&(t.class=Ee([t.class,n.class]));else if(a==="style")t.style=pt([t.style,n.style]);else if(Hs(a)){const s=t[a],l=n[a];l&&s!==l&&!(je(s)&&s.includes(l))&&(t[a]=s?[].concat(s,l):l)}else a!==""&&(t[a]=n[a])}return t}function Yn(e,t,o,n=null){Rn(e,t,7,[o,n])}const mv=Dc();let hv=0;function vv(e,t,o){const n=e.type,a=(t?t.appContext:e.appContext)||mv,s={uid:hv++,vnode:e,type:n,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ou(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jc(n,a),emitsOptions:Jc(n,a),emit:null,emitted:null,propsDefaults:kt,inheritAttrs:n.inheritAttrs,ctx:kt,data:kt,props:kt,attrs:kt,slots:kt,refs:kt,setupState:kt,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=av.bind(null,s),e.ce&&e.ce(s),s}let nn=null;const io=()=>nn||Kt;let _l,ti;{const e=Gs(),t=(o,n)=>{let a;return(a=e[o])||(a=e[o]=[]),a.push(n),s=>{a.length>1?a.forEach(l=>l(s)):a[0](s)}};_l=t("__VUE_INSTANCE_SETTERS__",o=>nn=o),ti=t("__VUE_SSR_SETTERS__",o=>us=o)}const is=e=>{const t=nn;return _l(e),e.scope.on(),()=>{e.scope.off(),_l(t)}},nd=()=>{nn&&nn.scope.off(),_l(null)};function od(e){return e.vnode.shapeFlag&4}let us=!1;function _v(e,t=!1,o=!1){t&&ti(t);const{props:n,children:a}=e.vnode,s=od(e);Vh(e,n,s,t),Qh(e,a,o||t);const l=s?yv(e,t):void 0;return t&&ti(!1),l}function yv(e,t){const o=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Rh);const{setup:n}=o;if(n){zn();const a=e.setupContext=n.length>1?wv(e):null,s=is(e),l=ga(n,e,0,[e.props,a]),r=ku(l);if(qn(),s(),(r||e.sp)&&!va(e)&&Tc(e),r){if(l.then(nd,nd),t)return l.then(u=>{ad(e,u)}).catch(u=>{al(u,e,0)});e.asyncDep=l}else ad(e,l)}else sd(e)}function ad(e,t,o){Ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ct(t)&&(e.setupState=tc(t)),sd(e)}function sd(e,t,o){const n=e.type;e.render||(e.render=n.render||Vn);{const a=is(e);zn();try{Dh(e)}finally{qn(),a()}}}const bv={get(e,t){return en(e,"get",""),e[t]}};function wv(e){const t=o=>{e.exposed=o||{}};return{attrs:new Proxy(e.attrs,bv),slots:e.slots,emit:e.emit,expose:t}}function yl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(tc(Fr(e.exposed)),{get(t,o){if(o in t)return t[o];if(o in ns)return ns[o](e)},has(t,o){return o in t||o in ns}})):e.proxy}const xv=/(?:^|[-_])\w/g,Tv=e=>e.replace(xv,t=>t.toUpperCase()).replace(/[-_]/g,"");function ld(e,t=!0){return Ge(e)?e.displayName||e.name:e.name||t&&e.__name}function rd(e,t,o=!1){let n=ld(t);if(!n&&t.__file){const a=t.__file.match(/([^/\\]+)\.\w+$/);a&&(n=a[1])}if(!n&&e&&e.parent){const a=s=>{for(const l in s)if(s[l]===t)return l};n=a(e.components||e.parent.type.components)||a(e.appContext.components)}return n?Tv(n):o?"App":"Anonymous"}function Sv(e){return Ge(e)&&"__vccOpts"in e}const tt=(e,t)=>ch(e,t,us);function Et(e,t,o){const n=(s,l,r)=>{hl(-1);try{return Ve(s,l,r)}finally{hl(1)}},a=arguments.length;return a===2?Ct(t)&&!je(t)?rs(t)?n(e,null,[t]):n(e,t):n(e,null,t):(a>3?o=Array.prototype.slice.call(arguments,2):a===3&&rs(o)&&(o=[o]),n(e,t,o))}const kv="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ni;const id=typeof window<"u"&&window.trustedTypes;if(id)try{ni=id.createPolicy("vue",{createHTML:e=>e})}catch{}const ud=ni?e=>ni.createHTML(e):e=>e,Cv="http://www.w3.org/2000/svg",Ev="http://www.w3.org/1998/Math/MathML",uo=typeof document<"u"?document:null,cd=uo&&uo.createElement("template"),Lv={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,n)=>{const a=t==="svg"?uo.createElementNS(Cv,e):t==="mathml"?uo.createElementNS(Ev,e):o?uo.createElement(e,{is:o}):uo.createElement(e);return e==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:e=>uo.createTextNode(e),createComment:e=>uo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>uo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,o,n,a,s){const l=o?o.previousSibling:t.lastChild;if(a&&(a===s||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),o),!(a===s||!(a=a.nextSibling)););else{cd.innerHTML=ud(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const r=cd.content;if(n==="svg"||n==="mathml"){const u=r.firstChild;for(;u.firstChild;)r.appendChild(u.firstChild);r.removeChild(u)}t.insertBefore(r,o)}return[l?l.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}},Io="transition",cs="animation",_a=Symbol("_vtc"),dd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},fd=Wt({},_c,dd),bl=(e=>(e.displayName="Transition",e.props=fd,e))((e,{slots:t})=>Et(xh,gd(e),t)),Zo=(e,t=[])=>{je(e)?e.forEach(o=>o(...t)):e&&e(...t)},pd=e=>e?je(e)?e.some(t=>t.length>1):e.length>1:!1;function gd(e){const t={};for(const F in e)F in dd||(t[F]=e[F]);if(e.css===!1)return t;const{name:o="v",type:n,duration:a,enterFromClass:s=`${o}-enter-from`,enterActiveClass:l=`${o}-enter-active`,enterToClass:r=`${o}-enter-to`,appearFromClass:u=s,appearActiveClass:d=l,appearToClass:c=r,leaveFromClass:f=`${o}-leave-from`,leaveActiveClass:m=`${o}-leave-active`,leaveToClass:g=`${o}-leave-to`}=e,v=$v(a),_=v&&v[0],w=v&&v[1],{onBeforeEnter:x,onEnter:A,onEnterCancelled:W,onLeave:T,onLeaveCancelled:P,onBeforeAppear:q=x,onAppear:G=A,onAppearCancelled:z=W}=t,J=(F,K,ee,Q)=>{F._enterCancelled=Q,Mo(F,K?c:r),Mo(F,K?d:l),ee&&ee()},ve=(F,K)=>{F._isLeaving=!1,Mo(F,f),Mo(F,g),Mo(F,m),K&&K()},ae=F=>(K,ee)=>{const Q=F?G:A,te=()=>J(K,F,ee);Zo(Q,[K,te]),md(()=>{Mo(K,F?u:s),Jn(K,F?c:r),pd(Q)||hd(K,n,_,te)})};return Wt(t,{onBeforeEnter(F){Zo(x,[F]),Jn(F,s),Jn(F,l)},onBeforeAppear(F){Zo(q,[F]),Jn(F,u),Jn(F,d)},onEnter:ae(!1),onAppear:ae(!0),onLeave(F,K){F._isLeaving=!0;const ee=()=>ve(F,K);Jn(F,f),F._enterCancelled?(Jn(F,m),ai()):(ai(),Jn(F,m)),md(()=>{F._isLeaving&&(Mo(F,f),Jn(F,g),pd(T)||hd(F,n,w,ee))}),Zo(T,[F,ee])},onEnterCancelled(F){J(F,!1,void 0,!0),Zo(W,[F])},onAppearCancelled(F){J(F,!0,void 0,!0),Zo(z,[F])},onLeaveCancelled(F){ve(F),Zo(P,[F])}})}function $v(e){if(e==null)return null;if(Ct(e))return[oi(e.enter),oi(e.leave)];{const t=oi(e);return[t,t]}}function oi(e){return $m(e)}function Jn(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.add(o)),(e[_a]||(e[_a]=new Set)).add(t)}function Mo(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const o=e[_a];o&&(o.delete(t),o.size||(e[_a]=void 0))}function md(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Av=0;function hd(e,t,o,n){const a=e._endId=++Av,s=()=>{a===e._endId&&n()};if(o!=null)return setTimeout(s,o);const{type:l,timeout:r,propCount:u}=vd(e,t);if(!l)return n();const d=l+"end";let c=0;const f=()=>{e.removeEventListener(d,m),s()},m=g=>{g.target===e&&++c>=u&&f()};setTimeout(()=>{c<u&&f()},r+1),e.addEventListener(d,m)}function vd(e,t){const o=window.getComputedStyle(e),n=v=>(o[v]||"").split(", "),a=n(`${Io}Delay`),s=n(`${Io}Duration`),l=_d(a,s),r=n(`${cs}Delay`),u=n(`${cs}Duration`),d=_d(r,u);let c=null,f=0,m=0;t===Io?l>0&&(c=Io,f=l,m=s.length):t===cs?d>0&&(c=cs,f=d,m=u.length):(f=Math.max(l,d),c=f>0?l>d?Io:cs:null,m=c?c===Io?s.length:u.length:0);const g=c===Io&&/\b(?:transform|all)(?:,|$)/.test(n(`${Io}Property`).toString());return{type:c,timeout:f,propCount:m,hasTransform:g}}function _d(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((o,n)=>yd(o)+yd(e[n])))}function yd(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ai(){return document.body.offsetHeight}function Iv(e,t,o){const n=e[_a];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}const wl=Symbol("_vod"),bd=Symbol("_vsh"),ds={name:"show",beforeMount(e,{value:t},{transition:o}){e[wl]=e.style.display==="none"?"":e.style.display,o&&t?o.beforeEnter(e):fs(e,t)},mounted(e,{value:t},{transition:o}){o&&t&&o.enter(e)},updated(e,{value:t,oldValue:o},{transition:n}){!t!=!o&&(n?t?(n.beforeEnter(e),fs(e,!0),n.enter(e)):n.leave(e,()=>{fs(e,!1)}):fs(e,t))},beforeUnmount(e,{value:t}){fs(e,t)}};function fs(e,t){e.style.display=t?e[wl]:"none",e[bd]=!t}const Mv=Symbol(""),Ov=/(?:^|;)\s*display\s*:/;function Nv(e,t,o){const n=e.style,a=Nt(o);let s=!1;if(o&&!a){if(t)if(Nt(t))for(const l of t.split(";")){const r=l.slice(0,l.indexOf(":")).trim();o[r]==null&&xl(n,r,"")}else for(const l in t)o[l]==null&&xl(n,l,"");for(const l in o)l==="display"&&(s=!0),xl(n,l,o[l])}else if(a){if(t!==o){const l=n[Mv];l&&(o+=";"+l),n.cssText=o,s=Ov.test(o)}}else t&&e.removeAttribute("style");wl in e&&(e[wl]=s?n.display:"",e[bd]&&(n.display="none"))}const wd=/\s*!important$/;function xl(e,t,o){if(je(o))o.forEach(n=>xl(e,t,n));else if(o==null&&(o=""),t.startsWith("--"))e.setProperty(t,o);else{const n=Rv(e,t);wd.test(o)?e.setProperty(To(n),o.replace(wd,""),"important"):e[n]=o}}const xd=["Webkit","Moz","ms"],si={};function Rv(e,t){const o=si[t];if(o)return o;let n=Cn(t);if(n!=="filter"&&n in e)return si[t]=n;n=Vs(n);for(let a=0;a<xd.length;a++){const s=xd[a]+n;if(s in e)return si[t]=s}return t}const Td="http://www.w3.org/1999/xlink";function Sd(e,t,o,n,a,s=Nm(t)){n&&t.startsWith("xlink:")?o==null?e.removeAttributeNS(Td,t.slice(6,t.length)):e.setAttributeNS(Td,t,o):o==null||s&&!Au(o)?e.removeAttribute(t):e.setAttribute(t,s?"":On(o)?String(o):o)}function kd(e,t,o,n,a){if(t==="innerHTML"||t==="textContent"){o!=null&&(e[t]=t==="innerHTML"?ud(o):o);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const r=s==="OPTION"?e.getAttribute("value")||"":e.value,u=o==null?e.type==="checkbox"?"on":"":String(o);(r!==u||!("_value"in e))&&(e.value=u),o==null&&e.removeAttribute(t),e._value=o;return}let l=!1;if(o===""||o==null){const r=typeof e[t];r==="boolean"?o=Au(o):o==null&&r==="string"?(o="",l=!0):r==="number"&&(o=0,l=!0)}try{e[t]=o}catch{}l&&e.removeAttribute(a||t)}function co(e,t,o,n){e.addEventListener(t,o,n)}function Dv(e,t,o,n){e.removeEventListener(t,o,n)}const Cd=Symbol("_vei");function Pv(e,t,o,n,a=null){const s=e[Cd]||(e[Cd]={}),l=s[t];if(n&&l)l.value=n;else{const[r,u]=Fv(t);if(n){const d=s[t]=jv(n,a);co(e,r,d,u)}else l&&(Dv(e,r,l,u),s[t]=void 0)}}const Ed=/(?:Once|Passive|Capture)$/;function Fv(e){let t;if(Ed.test(e)){t={};let n;for(;n=e.match(Ed);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):To(e.slice(2)),t]}let li=0;const Bv=Promise.resolve(),Uv=()=>li||(Bv.then(()=>li=0),li=Date.now());function jv(e,t){const o=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=o.attached)return;Rn(Hv(n,o.value),t,5,[n])};return o.value=e,o.attached=Uv(),o}function Hv(e,t){if(je(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(n=>a=>!a._stopped&&n&&n(a))}else return t}const Ld=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Wv=(e,t,o,n,a,s)=>{const l=a==="svg";t==="class"?Iv(e,n,l):t==="style"?Nv(e,o,n):Hs(t)?br(t)||Pv(e,t,o,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Vv(e,t,n,l))?(kd(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Sd(e,t,n,l,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Nt(n))?kd(e,Cn(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Sd(e,t,n,l))};function Vv(e,t,o,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ld(t)&&Ge(o));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Ld(t)&&Nt(o)?!1:t in e}const $d=new WeakMap,Ad=new WeakMap,Tl=Symbol("_moveCb"),Id=Symbol("_enterCb"),zv=(e=>(delete e.props.mode,e))({name:"TransitionGroup",props:Wt({},fd,{tag:String,moveClass:String}),setup(e,{slots:t}){const o=io(),n=vc();let a,s;return Ec(()=>{if(!a.length)return;const l=e.moveClass||`${e.name||"v"}-move`;if(!Yv(a[0].el,o.vnode.el,l)){a=[];return}a.forEach(qv),a.forEach(Gv);const r=a.filter(Qv);ai(),r.forEach(u=>{const d=u.el,c=d.style;Jn(d,l),c.transform=c.webkitTransform=c.transitionDuration="";const f=d[Tl]=m=>{m&&m.target!==d||(!m||m.propertyName.endsWith("transform"))&&(d.removeEventListener("transitionend",f),d[Tl]=null,Mo(d,l))};d.addEventListener("transitionend",f)}),a=[]}),()=>{const l=at(e),r=gd(l);let u=l.tag||Oe;if(a=[],s)for(let d=0;d<s.length;d++){const c=s[d];c.el&&c.el instanceof Element&&(a.push(c),Yo(c,Za(c,r,n,o)),$d.set(c,c.el.getBoundingClientRect()))}s=t.default?Wr(t.default()):[];for(let d=0;d<s.length;d++){const c=s[d];c.key!=null&&Yo(c,Za(c,r,n,o))}return Ve(u,null,s)}}});function qv(e){const t=e.el;t[Tl]&&t[Tl](),t[Id]&&t[Id]()}function Gv(e){Ad.set(e,e.el.getBoundingClientRect())}function Qv(e){const t=$d.get(e),o=Ad.get(e),n=t.left-o.left,a=t.top-o.top;if(n||a){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${a}px)`,s.transitionDuration="0s",e}}function Yv(e,t,o){const n=e.cloneNode(),a=e[_a];a&&a.forEach(r=>{r.split(/\s+/).forEach(u=>u&&n.classList.remove(u))}),o.split(/\s+/).forEach(r=>r&&n.classList.add(r)),n.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(n);const{hasTransform:l}=vd(n);return s.removeChild(n),l}const Oo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return je(t)?o=>zs(t,o):t};function Jv(e){e.target.composing=!0}function Md(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const $n=Symbol("_assign"),Ae={created(e,{modifiers:{lazy:t,trim:o,number:n}},a){e[$n]=Oo(a);const s=n||a.props&&a.props.type==="number";co(e,t?"change":"input",l=>{if(l.target.composing)return;let r=e.value;o&&(r=r.trim()),s&&(r=qs(r)),e[$n](r)}),o&&co(e,"change",()=>{e.value=e.value.trim()}),t||(co(e,"compositionstart",Jv),co(e,"compositionend",Md),co(e,"change",Md))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:o,modifiers:{lazy:n,trim:a,number:s}},l){if(e[$n]=Oo(l),e.composing)return;const r=(s||e.type==="number")&&!/^0\d/.test(e.value)?qs(e.value):e.value,u=t??"";r!==u&&(document.activeElement===e&&e.type!=="range"&&(n&&t===o||a&&e.value.trim()===u)||(e.value=u))}},Ft={deep:!0,created(e,t,o){e[$n]=Oo(o),co(e,"change",()=>{const n=e._modelValue,a=ya(e),s=e.checked,l=e[$n];if(je(n)){const r=Sr(n,a),u=r!==-1;if(s&&!u)l(n.concat(a));else if(!s&&u){const d=[...n];d.splice(r,1),l(d)}}else if(fa(n)){const r=new Set(n);s?r.add(a):r.delete(a),l(r)}else l(Rd(e,s))})},mounted:Od,beforeUpdate(e,t,o){e[$n]=Oo(o),Od(e,t,o)}};function Od(e,{value:t,oldValue:o},n){e._modelValue=t;let a;if(je(t))a=Sr(t,n.props.value)>-1;else if(fa(t))a=t.has(n.props.value);else{if(t===o)return;a=zo(t,Rd(e,!0))}e.checked!==a&&(e.checked=a)}const fo={created(e,{value:t},o){e.checked=zo(t,o.props.value),e[$n]=Oo(o),co(e,"change",()=>{e[$n](ya(e))})},beforeUpdate(e,{value:t,oldValue:o},n){e[$n]=Oo(n),t!==o&&(e.checked=zo(t,n.props.value))}},Vt={deep:!0,created(e,{value:t,modifiers:{number:o}},n){const a=fa(t);co(e,"change",()=>{const s=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>o?qs(ya(l)):ya(l));e[$n](e.multiple?a?new Set(s):s:s[0]),e._assigning=!0,Qe(()=>{e._assigning=!1})}),e[$n]=Oo(n)},mounted(e,{value:t}){Nd(e,t)},beforeUpdate(e,t,o){e[$n]=Oo(o)},updated(e,{value:t}){e._assigning||Nd(e,t)}};function Nd(e,t){const o=e.multiple,n=je(t);if(!(o&&!n&&!fa(t))){for(let a=0,s=e.options.length;a<s;a++){const l=e.options[a],r=ya(l);if(o)if(n){const u=typeof r;u==="string"||u==="number"?l.selected=t.some(d=>String(d)===String(r)):l.selected=Sr(t,r)>-1}else l.selected=t.has(r);else if(zo(ya(l),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ya(e){return"_value"in e?e._value:e.value}function Rd(e,t){const o=t?"_trueValue":"_falseValue";return o in e?e[o]:t}const Dd={created(e,t,o){Sl(e,t,o,null,"created")},mounted(e,t,o){Sl(e,t,o,null,"mounted")},beforeUpdate(e,t,o,n){Sl(e,t,o,n,"beforeUpdate")},updated(e,t,o,n){Sl(e,t,o,n,"updated")}};function Kv(e,t){switch(e){case"SELECT":return Vt;case"TEXTAREA":return Ae;default:switch(t){case"checkbox":return Ft;case"radio":return fo;default:return Ae}}}function Sl(e,t,o,n,a){const l=Kv(e.tagName,o.props&&o.props.type)[a];l&&l(e,t,o,n)}const Xv=["ctrl","shift","alt","meta"],Zv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Xv.some(o=>e[`${o}Key`]&&!t.includes(o))},Ke=(e,t)=>{const o=e._withMods||(e._withMods={}),n=t.join(".");return o[n]||(o[n]=((a,...s)=>{for(let l=0;l<t.length;l++){const r=Zv[t[l]];if(r&&r(a,t))return}return e(a,...s)}))},e1={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},on=(e,t)=>{const o=e._withKeys||(e._withKeys={}),n=t.join(".");return o[n]||(o[n]=(a=>{if(!("key"in a))return;const s=To(a.key);if(t.some(l=>l===s||e1[l]===s))return e(a)}))},t1=Wt({patchProp:Wv},Lv);let Pd;function Fd(){return Pd||(Pd=Jh(t1))}const Bd=((...e)=>{Fd().render(...e)}),n1=((...e)=>{const t=Fd().createApp(...e),{mount:o}=t;return t.mount=n=>{const a=a1(n);if(!a)return;const s=t._component;!Ge(s)&&!s.render&&!s.template&&(s.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const l=o(a,!1,o1(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),l},t});function o1(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function a1(e){return Nt(e)?document.querySelector(e):e}/*!
  * shared v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function s1(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const kl=typeof window<"u",No=(e,t=!1)=>t?Symbol.for(e):Symbol(e),l1=(e,t,o)=>r1({l:e,k:t,s:o}),r1=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Bt=e=>typeof e=="number"&&isFinite(e),i1=e=>ri(e)==="[object Date]",ba=e=>ri(e)==="[object RegExp]",Cl=e=>nt(e)&&Object.keys(e).length===0,zt=Object.assign,u1=Object.create,xt=(e=null)=>u1(e);let Ud;const ea=()=>Ud||(Ud=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:xt());function jd(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function Hd(e){return e.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c1(e){return e=e.replace(/(\w+)\s*=\s*"([^"]*)"/g,(n,a,s)=>`${a}="${Hd(s)}"`),e=e.replace(/(\w+)\s*=\s*'([^']*)'/g,(n,a,s)=>`${a}='${Hd(s)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(e)&&(e=e.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(n=>{e=e.replace(n,"$1javascript&#58;")}),e}const d1=Object.prototype.hasOwnProperty;function Pn(e,t){return d1.call(e,t)}const Pt=Array.isArray,It=e=>typeof e=="function",De=e=>typeof e=="string",ct=e=>typeof e=="boolean",gt=e=>e!==null&&typeof e=="object",f1=e=>gt(e)&&It(e.then)&&It(e.catch),Wd=Object.prototype.toString,ri=e=>Wd.call(e),nt=e=>ri(e)==="[object Object]",p1=e=>e==null?"":Pt(e)||nt(e)&&e.toString===Wd?JSON.stringify(e,null,2):String(e);function ii(e,t=""){return e.reduce((o,n,a)=>a===0?o+n:o+t+n,"")}const El=e=>!gt(e)||Pt(e);function Ll(e,t){if(El(e)||El(t))throw new Error("Invalid value");const o=[{src:e,des:t}];for(;o.length;){const{src:n,des:a}=o.pop();Object.keys(n).forEach(s=>{s!=="__proto__"&&(gt(n[s])&&!gt(a[s])&&(a[s]=Array.isArray(n[s])?[]:xt()),El(a[s])||El(n[s])?a[s]=n[s]:o.push({src:n[s],des:a[s]}))})}}/*!
  * message-compiler v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function g1(e,t,o){return{line:e,column:t,offset:o}}function ui(e,t,o){return{start:e,end:t}}const vt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},m1=17;function $l(e,t,o={}){const{domain:n,messages:a,args:s}=o,l=e,r=new SyntaxError(String(l));return r.code=e,t&&(r.location=t),r.domain=n,r}function h1(e){throw e}const Kn=" ",v1="\r",an=`
`,_1="\u2028",y1="\u2029";function b1(e){const t=e;let o=0,n=1,a=1,s=0;const l=G=>t[G]===v1&&t[G+1]===an,r=G=>t[G]===an,u=G=>t[G]===y1,d=G=>t[G]===_1,c=G=>l(G)||r(G)||u(G)||d(G),f=()=>o,m=()=>n,g=()=>a,v=()=>s,_=G=>l(G)||u(G)||d(G)?an:t[G],w=()=>_(o),x=()=>_(o+s);function A(){return s=0,c(o)&&(n++,a=0),l(o)&&o++,o++,a++,t[o]}function W(){return l(o+s)&&s++,s++,t[o+s]}function T(){o=0,n=1,a=1,s=0}function P(G=0){s=G}function q(){const G=o+s;for(;G!==o;)A();s=0}return{index:f,line:m,column:g,peekOffset:v,charAt:_,currentChar:w,currentPeek:x,next:A,peek:W,reset:T,resetPeek:P,skipToPeek:q}}const po=void 0,w1=".",Vd="'",x1="tokenizer";function T1(e,t={}){const o=t.location!==!1,n=b1(e),a=()=>n.index(),s=()=>g1(n.line(),n.column(),n.index()),l=s(),r=a(),u={currentType:13,offset:r,startLoc:l,endLoc:l,lastType:13,lastOffset:r,lastStartLoc:l,lastEndLoc:l,braceNest:0,inLinked:!1,text:""},d=()=>u,{onError:c}=t;function f(C,b,R,...V){const me=d();if(b.column+=R,b.offset+=R,c){const fe=o?ui(me.startLoc,b):null,X=$l(C,fe,{domain:x1,args:V});c(X)}}function m(C,b,R){C.endLoc=s(),C.currentType=b;const V={type:b};return o&&(V.loc=ui(C.startLoc,C.endLoc)),R!=null&&(V.value=R),V}const g=C=>m(C,13);function v(C,b){return C.currentChar()===b?(C.next(),b):(f(vt.EXPECTED_TOKEN,s(),0,b),"")}function _(C){let b="";for(;C.currentPeek()===Kn||C.currentPeek()===an;)b+=C.currentPeek(),C.peek();return b}function w(C){const b=_(C);return C.skipToPeek(),b}function x(C){if(C===po)return!1;const b=C.charCodeAt(0);return b>=97&&b<=122||b>=65&&b<=90||b===95}function A(C){if(C===po)return!1;const b=C.charCodeAt(0);return b>=48&&b<=57}function W(C,b){const{currentType:R}=b;if(R!==2)return!1;_(C);const V=x(C.currentPeek());return C.resetPeek(),V}function T(C,b){const{currentType:R}=b;if(R!==2)return!1;_(C);const V=C.currentPeek()==="-"?C.peek():C.currentPeek(),me=A(V);return C.resetPeek(),me}function P(C,b){const{currentType:R}=b;if(R!==2)return!1;_(C);const V=C.currentPeek()===Vd;return C.resetPeek(),V}function q(C,b){const{currentType:R}=b;if(R!==7)return!1;_(C);const V=C.currentPeek()===".";return C.resetPeek(),V}function G(C,b){const{currentType:R}=b;if(R!==8)return!1;_(C);const V=x(C.currentPeek());return C.resetPeek(),V}function z(C,b){const{currentType:R}=b;if(!(R===7||R===11))return!1;_(C);const V=C.currentPeek()===":";return C.resetPeek(),V}function J(C,b){const{currentType:R}=b;if(R!==9)return!1;const V=()=>{const fe=C.currentPeek();return fe==="{"?x(C.peek()):fe==="@"||fe==="|"||fe===":"||fe==="."||fe===Kn||!fe?!1:fe===an?(C.peek(),V()):ae(C,!1)},me=V();return C.resetPeek(),me}function ve(C){_(C);const b=C.currentPeek()==="|";return C.resetPeek(),b}function ae(C,b=!0){const R=(me=!1,fe="")=>{const X=C.currentPeek();return X==="{"||X==="@"||!X?me:X==="|"?!(fe===Kn||fe===an):X===Kn?(C.peek(),R(!0,Kn)):X===an?(C.peek(),R(!0,an)):!0},V=R();return b&&C.resetPeek(),V}function F(C,b){const R=C.currentChar();return R===po?po:b(R)?(C.next(),R):null}function K(C){const b=C.charCodeAt(0);return b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||b===95||b===36}function ee(C){return F(C,K)}function Q(C){const b=C.charCodeAt(0);return b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||b===95||b===36||b===45}function te(C){return F(C,Q)}function ne(C){const b=C.charCodeAt(0);return b>=48&&b<=57}function U(C){return F(C,ne)}function j(C){const b=C.charCodeAt(0);return b>=48&&b<=57||b>=65&&b<=70||b>=97&&b<=102}function ue(C){return F(C,j)}function xe(C){let b="",R="";for(;b=U(C);)R+=b;return R}function oe(C){let b="";for(;;){const R=C.currentChar();if(R==="{"||R==="}"||R==="@"||R==="|"||!R)break;if(R===Kn||R===an)if(ae(C))b+=R,C.next();else{if(ve(C))break;b+=R,C.next()}else b+=R,C.next()}return b}function de(C){w(C);let b="",R="";for(;b=te(C);)R+=b;const V=C.currentChar();if(V&&V!=="}"&&V!==po&&V!==Kn&&V!==an&&V!==""){const me=O(C);return f(vt.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,R+me),R+me}return C.currentChar()===po&&f(vt.UNTERMINATED_CLOSING_BRACE,s(),0),R}function be(C){w(C);let b="";return C.currentChar()==="-"?(C.next(),b+=`-${xe(C)}`):b+=xe(C),C.currentChar()===po&&f(vt.UNTERMINATED_CLOSING_BRACE,s(),0),b}function ke(C){return C!==Vd&&C!==an}function _e(C){w(C),v(C,"'");let b="",R="";for(;b=F(C,ke);)b==="\\"?R+=I(C):R+=b;const V=C.currentChar();return V===an||V===po?(f(vt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),V===an&&(C.next(),v(C,"'")),R):(v(C,"'"),R)}function I(C){const b=C.currentChar();switch(b){case"\\":case"'":return C.next(),`\\${b}`;case"u":return N(C,b,4);case"U":return N(C,b,6);default:return f(vt.UNKNOWN_ESCAPE_SEQUENCE,s(),0,b),""}}function N(C,b,R){v(C,b);let V="";for(let me=0;me<R;me++){const fe=ue(C);if(!fe){f(vt.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${b}${V}${C.currentChar()}`);break}V+=fe}return`\\${b}${V}`}function H(C){return C!=="{"&&C!=="}"&&C!==Kn&&C!==an}function O(C){w(C);let b="",R="";for(;b=F(C,H);)R+=b;return R}function B(C){let b="",R="";for(;b=ee(C);)R+=b;return R}function k(C){const b=R=>{const V=C.currentChar();return V==="{"||V==="@"||V==="|"||V==="("||V===")"||!V||V===Kn?R:(R+=V,C.next(),b(R))};return b("")}function E(C){w(C);const b=v(C,"|");return w(C),b}function D(C,b){let R=null;switch(C.currentChar()){case"{":return b.braceNest>=1&&f(vt.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),C.next(),R=m(b,2,"{"),w(C),b.braceNest++,R;case"}":return b.braceNest>0&&b.currentType===2&&f(vt.EMPTY_PLACEHOLDER,s(),0),C.next(),R=m(b,3,"}"),b.braceNest--,b.braceNest>0&&w(C),b.inLinked&&b.braceNest===0&&(b.inLinked=!1),R;case"@":return b.braceNest>0&&f(vt.UNTERMINATED_CLOSING_BRACE,s(),0),R=Y(C,b)||g(b),b.braceNest=0,R;default:{let me=!0,fe=!0,X=!0;if(ve(C))return b.braceNest>0&&f(vt.UNTERMINATED_CLOSING_BRACE,s(),0),R=m(b,1,E(C)),b.braceNest=0,b.inLinked=!1,R;if(b.braceNest>0&&(b.currentType===4||b.currentType===5||b.currentType===6))return f(vt.UNTERMINATED_CLOSING_BRACE,s(),0),b.braceNest=0,ie(C,b);if(me=W(C,b))return R=m(b,4,de(C)),w(C),R;if(fe=T(C,b))return R=m(b,5,be(C)),w(C),R;if(X=P(C,b))return R=m(b,6,_e(C)),w(C),R;if(!me&&!fe&&!X)return R=m(b,12,O(C)),f(vt.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,R.value),w(C),R;break}}return R}function Y(C,b){const{currentType:R}=b;let V=null;const me=C.currentChar();switch((R===7||R===8||R===11||R===9)&&(me===an||me===Kn)&&f(vt.INVALID_LINKED_FORMAT,s(),0),me){case"@":return C.next(),V=m(b,7,"@"),b.inLinked=!0,V;case".":return w(C),C.next(),m(b,8,".");case":":return w(C),C.next(),m(b,9,":");default:return ve(C)?(V=m(b,1,E(C)),b.braceNest=0,b.inLinked=!1,V):q(C,b)||z(C,b)?(w(C),Y(C,b)):G(C,b)?(w(C),m(b,11,B(C))):J(C,b)?(w(C),me==="{"?D(C,b)||V:m(b,10,k(C))):(R===7&&f(vt.INVALID_LINKED_FORMAT,s(),0),b.braceNest=0,b.inLinked=!1,ie(C,b))}}function ie(C,b){let R={type:13};if(b.braceNest>0)return D(C,b)||g(b);if(b.inLinked)return Y(C,b)||g(b);switch(C.currentChar()){case"{":return D(C,b)||g(b);case"}":return f(vt.UNBALANCED_CLOSING_BRACE,s(),0),C.next(),m(b,3,"}");case"@":return Y(C,b)||g(b);default:{if(ve(C))return R=m(b,1,E(C)),b.braceNest=0,b.inLinked=!1,R;if(ae(C))return m(b,0,oe(C));break}}return R}function re(){const{currentType:C,offset:b,startLoc:R,endLoc:V}=u;return u.lastType=C,u.lastOffset=b,u.lastStartLoc=R,u.lastEndLoc=V,u.offset=a(),u.startLoc=s(),n.currentChar()===po?m(u,13):ie(n,u)}return{nextToken:re,currentOffset:a,currentPosition:s,context:d}}const S1="parser",k1=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function C1(e,t,o){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(t||o,16);return n<=55295||n>=57344?String.fromCodePoint(n):""}}}function E1(e={}){const t=e.location!==!1,{onError:o}=e;function n(x,A,W,T,...P){const q=x.currentPosition();if(q.offset+=T,q.column+=T,o){const G=t?ui(W,q):null,z=$l(A,G,{domain:S1,args:P});o(z)}}function a(x,A,W){const T={type:x};return t&&(T.start=A,T.end=A,T.loc={start:W,end:W}),T}function s(x,A,W,T){t&&(x.end=A,x.loc&&(x.loc.end=W))}function l(x,A){const W=x.context(),T=a(3,W.offset,W.startLoc);return T.value=A,s(T,x.currentOffset(),x.currentPosition()),T}function r(x,A){const W=x.context(),{lastOffset:T,lastStartLoc:P}=W,q=a(5,T,P);return q.index=parseInt(A,10),x.nextToken(),s(q,x.currentOffset(),x.currentPosition()),q}function u(x,A){const W=x.context(),{lastOffset:T,lastStartLoc:P}=W,q=a(4,T,P);return q.key=A,x.nextToken(),s(q,x.currentOffset(),x.currentPosition()),q}function d(x,A){const W=x.context(),{lastOffset:T,lastStartLoc:P}=W,q=a(9,T,P);return q.value=A.replace(k1,C1),x.nextToken(),s(q,x.currentOffset(),x.currentPosition()),q}function c(x){const A=x.nextToken(),W=x.context(),{lastOffset:T,lastStartLoc:P}=W,q=a(8,T,P);return A.type!==11?(n(x,vt.UNEXPECTED_EMPTY_LINKED_MODIFIER,W.lastStartLoc,0),q.value="",s(q,T,P),{nextConsumeToken:A,node:q}):(A.value==null&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,Xn(A)),q.value=A.value||"",s(q,x.currentOffset(),x.currentPosition()),{node:q})}function f(x,A){const W=x.context(),T=a(7,W.offset,W.startLoc);return T.value=A,s(T,x.currentOffset(),x.currentPosition()),T}function m(x){const A=x.context(),W=a(6,A.offset,A.startLoc);let T=x.nextToken();if(T.type===8){const P=c(x);W.modifier=P.node,T=P.nextConsumeToken||x.nextToken()}switch(T.type!==9&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(T)),T=x.nextToken(),T.type===2&&(T=x.nextToken()),T.type){case 10:T.value==null&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(T)),W.key=f(x,T.value||"");break;case 4:T.value==null&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(T)),W.key=u(x,T.value||"");break;case 5:T.value==null&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(T)),W.key=r(x,T.value||"");break;case 6:T.value==null&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(T)),W.key=d(x,T.value||"");break;default:{n(x,vt.UNEXPECTED_EMPTY_LINKED_KEY,A.lastStartLoc,0);const P=x.context(),q=a(7,P.offset,P.startLoc);return q.value="",s(q,P.offset,P.startLoc),W.key=q,s(W,P.offset,P.startLoc),{nextConsumeToken:T,node:W}}}return s(W,x.currentOffset(),x.currentPosition()),{node:W}}function g(x){const A=x.context(),W=A.currentType===1?x.currentOffset():A.offset,T=A.currentType===1?A.endLoc:A.startLoc,P=a(2,W,T);P.items=[];let q=null;do{const J=q||x.nextToken();switch(q=null,J.type){case 0:J.value==null&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(J)),P.items.push(l(x,J.value||""));break;case 5:J.value==null&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(J)),P.items.push(r(x,J.value||""));break;case 4:J.value==null&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(J)),P.items.push(u(x,J.value||""));break;case 6:J.value==null&&n(x,vt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,Xn(J)),P.items.push(d(x,J.value||""));break;case 7:{const ve=m(x);P.items.push(ve.node),q=ve.nextConsumeToken||null;break}}}while(A.currentType!==13&&A.currentType!==1);const G=A.currentType===1?A.lastOffset:x.currentOffset(),z=A.currentType===1?A.lastEndLoc:x.currentPosition();return s(P,G,z),P}function v(x,A,W,T){const P=x.context();let q=T.items.length===0;const G=a(1,A,W);G.cases=[],G.cases.push(T);do{const z=g(x);q||(q=z.items.length===0),G.cases.push(z)}while(P.currentType!==13);return q&&n(x,vt.MUST_HAVE_MESSAGES_IN_PLURAL,W,0),s(G,x.currentOffset(),x.currentPosition()),G}function _(x){const A=x.context(),{offset:W,startLoc:T}=A,P=g(x);return A.currentType===13?P:v(x,W,T,P)}function w(x){const A=T1(x,zt({},e)),W=A.context(),T=a(0,W.offset,W.startLoc);return t&&T.loc&&(T.loc.source=x),T.body=_(A),e.onCacheKey&&(T.cacheKey=e.onCacheKey(x)),W.currentType!==13&&n(A,vt.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,x[W.offset]||""),s(T,A.currentOffset(),A.currentPosition()),T}return{parse:w}}function Xn(e){if(e.type===13)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"":t}function L1(e,t={}){const o={ast:e,helpers:new Set};return{context:()=>o,helper:s=>(o.helpers.add(s),s)}}function zd(e,t){for(let o=0;o<e.length;o++)ci(e[o],t)}function ci(e,t){switch(e.type){case 1:zd(e.cases,t),t.helper("plural");break;case 2:zd(e.items,t);break;case 6:{ci(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function $1(e,t={}){const o=L1(e);o.helper("normalize"),e.body&&ci(e.body,o);const n=o.context();e.helpers=Array.from(n.helpers)}function A1(e){const t=e.body;return t.type===2?qd(t):t.cases.forEach(o=>qd(o)),e}function qd(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let o=0;o<e.items.length;o++){const n=e.items[o];if(!(n.type===3||n.type===9)||n.value==null)break;t.push(n.value)}if(t.length===e.items.length){e.static=ii(t);for(let o=0;o<e.items.length;o++){const n=e.items[o];(n.type===3||n.type===9)&&delete n.value}}}}function wa(e){switch(e.t=e.type,e.type){case 0:{const t=e;wa(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,o=t.cases;for(let n=0;n<o.length;n++)wa(o[n]);t.c=o,delete t.cases;break}case 2:{const t=e,o=t.items;for(let n=0;n<o.length;n++)wa(o[n]);t.i=o,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;wa(t.key),t.k=t.key,delete t.key,t.modifier&&(wa(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function I1(e,t){const{filename:o,breakLineCode:n,needIndent:a}=t,s=t.location!==!1,l={filename:o,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:n,needIndent:a,indentLevel:0};s&&e.loc&&(l.source=e.loc.source);const r=()=>l;function u(_,w){l.code+=_}function d(_,w=!0){const x=w?n:"";u(a?x+"  ".repeat(_):x)}function c(_=!0){const w=++l.indentLevel;_&&d(w)}function f(_=!0){const w=--l.indentLevel;_&&d(w)}function m(){d(l.indentLevel)}return{context:r,push:u,indent:c,deindent:f,newline:m,helper:_=>`_${_}`,needIndent:()=>l.needIndent}}function M1(e,t){const{helper:o}=e;e.push(`${o("linked")}(`),xa(e,t.key),t.modifier?(e.push(", "),xa(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function O1(e,t){const{helper:o,needIndent:n}=e;e.push(`${o("normalize")}([`),e.indent(n());const a=t.items.length;for(let s=0;s<a&&(xa(e,t.items[s]),s!==a-1);s++)e.push(", ");e.deindent(n()),e.push("])")}function N1(e,t){const{helper:o,needIndent:n}=e;if(t.cases.length>1){e.push(`${o("plural")}([`),e.indent(n());const a=t.cases.length;for(let s=0;s<a&&(xa(e,t.cases[s]),s!==a-1);s++)e.push(", ");e.deindent(n()),e.push("])")}}function R1(e,t){t.body?xa(e,t.body):e.push("null")}function xa(e,t){const{helper:o}=e;switch(t.type){case 0:R1(e,t);break;case 1:N1(e,t);break;case 2:O1(e,t);break;case 6:M1(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${o("interpolate")}(${o("list")}(${t.index}))`,t);break;case 4:e.push(`${o("interpolate")}(${o("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const D1=(e,t={})=>{const o=De(t.mode)?t.mode:"normal",n=De(t.filename)?t.filename:"message.intl";t.sourceMap;const a=t.breakLineCode!=null?t.breakLineCode:o==="arrow"?";":`
`,s=t.needIndent?t.needIndent:o!=="arrow",l=e.helpers||[],r=I1(e,{filename:n,breakLineCode:a,needIndent:s});r.push(o==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),r.indent(s),l.length>0&&(r.push(`const { ${ii(l.map(c=>`${c}: _${c}`),", ")} } = ctx`),r.newline()),r.push("return "),xa(r,e),r.deindent(s),r.push("}"),delete e.helpers;const{code:u,map:d}=r.context();return{ast:e,code:u,map:d?d.toJSON():void 0}};function P1(e,t={}){const o=zt({},t),n=!!o.jit,a=!!o.minify,s=o.optimize==null?!0:o.optimize,r=E1(o).parse(e);return n?(s&&A1(r),a&&wa(r),{ast:r,code:""}):($1(r,o),D1(r,o))}/*!
  * core-base v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function F1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(ea().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(ea().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Zn(e){return gt(e)&&di(e)===0&&(Pn(e,"b")||Pn(e,"body"))}const Gd=["b","body"];function B1(e){return Ro(e,Gd)}const Qd=["c","cases"];function U1(e){return Ro(e,Qd,[])}const Yd=["s","static"];function j1(e){return Ro(e,Yd)}const Jd=["i","items"];function H1(e){return Ro(e,Jd,[])}const Kd=["t","type"];function di(e){return Ro(e,Kd)}const Xd=["v","value"];function Al(e,t){const o=Ro(e,Xd);if(o!=null)return o;throw ps(t)}const Zd=["m","modifier"];function W1(e){return Ro(e,Zd)}const ef=["k","key"];function V1(e){const t=Ro(e,ef);if(t)return t;throw ps(6)}function Ro(e,t,o){for(let n=0;n<t.length;n++){const a=t[n];if(Pn(e,a)&&e[a]!=null)return e[a]}return o}const tf=[...Gd,...Qd,...Yd,...Jd,...ef,...Zd,...Xd,...Kd];function ps(e){return new Error(`unhandled node type: ${e}`)}function fi(e){return o=>z1(o,e)}function z1(e,t){const o=B1(t);if(o==null)throw ps(0);if(di(o)===1){const s=U1(o);return e.plural(s.reduce((l,r)=>[...l,nf(e,r)],[]))}else return nf(e,o)}function nf(e,t){const o=j1(t);if(o!=null)return e.type==="text"?o:e.normalize([o]);{const n=H1(t).reduce((a,s)=>[...a,pi(e,s)],[]);return e.normalize(n)}}function pi(e,t){const o=di(t);switch(o){case 3:return Al(t,o);case 9:return Al(t,o);case 4:{const n=t;if(Pn(n,"k")&&n.k)return e.interpolate(e.named(n.k));if(Pn(n,"key")&&n.key)return e.interpolate(e.named(n.key));throw ps(o)}case 5:{const n=t;if(Pn(n,"i")&&Bt(n.i))return e.interpolate(e.list(n.i));if(Pn(n,"index")&&Bt(n.index))return e.interpolate(e.list(n.index));throw ps(o)}case 6:{const n=t,a=W1(n),s=V1(n);return e.linked(pi(e,s),a?pi(e,a):void 0,e.type)}case 7:return Al(t,o);case 8:return Al(t,o);default:throw new Error(`unhandled node on format message part: ${o}`)}}const q1=e=>e;let Il=xt();function G1(e,t={}){let o=!1;const n=t.onError||h1;return t.onError=a=>{o=!0,n(a)},{...P1(e,t),detectError:o}}function Q1(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&De(e)){ct(t.warnHtmlMessage)&&t.warnHtmlMessage;const n=(t.onCacheKey||q1)(e),a=Il[n];if(a)return a;const{ast:s,detectError:l}=G1(e,{...t,location:!1,jit:!0}),r=fi(s);return l?r:Il[n]=r}else{const o=e.cacheKey;if(o){const n=Il[o];return n||(Il[o]=fi(e))}else return fi(e)}}let gs=null;function Y1(e){gs=e}function J1(e,t,o){gs&&gs.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:o})}const K1=X1("function:translate");function X1(e){return t=>gs&&gs.emit(e,t)}const go={INVALID_ARGUMENT:m1,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},Z1=24;function mo(e){return $l(e,null,void 0)}function gi(e,t){return t.locale!=null?of(t.locale):of(e.locale)}let mi;function of(e){if(De(e))return e;if(It(e)){if(e.resolvedOnce&&mi!=null)return mi;if(e.constructor.name==="Function"){const t=e();if(f1(t))throw mo(go.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return mi=t}else throw mo(go.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw mo(go.NOT_SUPPORT_LOCALE_TYPE)}function e0(e,t,o){return[...new Set([o,...Pt(t)?t:gt(t)?Object.keys(t):De(t)?[t]:[o]])]}function af(e,t,o){const n=De(o)?o:ms,a=e;a.__localeChainCache||(a.__localeChainCache=new Map);let s=a.__localeChainCache.get(n);if(!s){s=[];let l=[o];for(;Pt(l);)l=sf(s,l,t);const r=Pt(t)||!nt(t)?t:t.default?t.default:null;l=De(r)?[r]:r,Pt(l)&&sf(s,l,!1),a.__localeChainCache.set(n,s)}return s}function sf(e,t,o){let n=!0;for(let a=0;a<t.length&&ct(n);a++){const s=t[a];De(s)&&(n=t0(e,t[a],o))}return n}function t0(e,t,o){let n;const a=t.split("-");do{const s=a.join("-");n=n0(e,s,o),a.splice(-1,1)}while(a.length&&n===!0);return n}function n0(e,t,o){let n=!1;if(!e.includes(t)&&(n=!0,t)){n=t[t.length-1]!=="!";const a=t.replace(/!/g,"");e.push(a),(Pt(o)||nt(o))&&o[a]&&(n=o[a])}return n}const Do=[];Do[0]={w:[0],i:[3,0],"[":[4],o:[7]},Do[1]={w:[1],".":[2],"[":[4],o:[7]},Do[2]={w:[2],i:[3,0],0:[3,0]},Do[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},Do[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},Do[5]={"'":[4,0],o:8,l:[5,0]},Do[6]={'"':[4,0],o:8,l:[6,0]};const o0=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function a0(e){return o0.test(e)}function s0(e){const t=e.charCodeAt(0),o=e.charCodeAt(e.length-1);return t===o&&(t===34||t===39)?e.slice(1,-1):e}function l0(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function r0(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:a0(t)?s0(t):"*"+t}function i0(e){const t=[];let o=-1,n=0,a=0,s,l,r,u,d,c,f;const m=[];m[0]=()=>{l===void 0?l=r:l+=r},m[1]=()=>{l!==void 0&&(t.push(l),l=void 0)},m[2]=()=>{m[0](),a++},m[3]=()=>{if(a>0)a--,n=4,m[0]();else{if(a=0,l===void 0||(l=r0(l),l===!1))return!1;m[1]()}};function g(){const v=e[o+1];if(n===5&&v==="'"||n===6&&v==='"')return o++,r="\\"+v,m[0](),!0}for(;n!==null;)if(o++,s=e[o],!(s==="\\"&&g())){if(u=l0(s),f=Do[n],d=f[u]||f.l||8,d===8||(n=d[0],d[1]!==void 0&&(c=m[d[1]],c&&(r=s,c()===!1))))return;if(n===7)return t}}const lf=new Map;function u0(e,t){return gt(e)?e[t]:null}function c0(e,t){if(!gt(e))return null;let o=lf.get(t);if(o||(o=i0(t),o&&lf.set(t,o)),!o)return null;const n=o.length;let a=e,s=0;for(;s<n;){const l=o[s];if(tf.includes(l)&&Zn(a))return null;const r=a[l];if(r===void 0||It(a))return null;a=r,s++}return a}const d0="11.1.12",Ml=-1,ms="en-US",rf="",uf=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function f0(){return{upper:(e,t)=>t==="text"&&De(e)?e.toUpperCase():t==="vnode"&&gt(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&De(e)?e.toLowerCase():t==="vnode"&&gt(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&De(e)?uf(e):t==="vnode"&&gt(e)&&"__v_isVNode"in e?uf(e.children):e}}let cf;function p0(e){cf=e}let df;function g0(e){df=e}let ff;function m0(e){ff=e}let pf=null;const h0=e=>{pf=e},v0=()=>pf;let gf=null;const mf=e=>{gf=e},_0=()=>gf;let hf=0;function y0(e={}){const t=It(e.onWarn)?e.onWarn:s1,o=De(e.version)?e.version:d0,n=De(e.locale)||It(e.locale)?e.locale:ms,a=It(n)?ms:n,s=Pt(e.fallbackLocale)||nt(e.fallbackLocale)||De(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a,l=nt(e.messages)?e.messages:hi(a),r=nt(e.datetimeFormats)?e.datetimeFormats:hi(a),u=nt(e.numberFormats)?e.numberFormats:hi(a),d=zt(xt(),e.modifiers,f0()),c=e.pluralRules||xt(),f=It(e.missing)?e.missing:null,m=ct(e.missingWarn)||ba(e.missingWarn)?e.missingWarn:!0,g=ct(e.fallbackWarn)||ba(e.fallbackWarn)?e.fallbackWarn:!0,v=!!e.fallbackFormat,_=!!e.unresolving,w=It(e.postTranslation)?e.postTranslation:null,x=nt(e.processor)?e.processor:null,A=ct(e.warnHtmlMessage)?e.warnHtmlMessage:!0,W=!!e.escapeParameter,T=It(e.messageCompiler)?e.messageCompiler:cf,P=It(e.messageResolver)?e.messageResolver:df||u0,q=It(e.localeFallbacker)?e.localeFallbacker:ff||e0,G=gt(e.fallbackContext)?e.fallbackContext:void 0,z=e,J=gt(z.__datetimeFormatters)?z.__datetimeFormatters:new Map,ve=gt(z.__numberFormatters)?z.__numberFormatters:new Map,ae=gt(z.__meta)?z.__meta:{};hf++;const F={version:o,cid:hf,locale:n,fallbackLocale:s,messages:l,modifiers:d,pluralRules:c,missing:f,missingWarn:m,fallbackWarn:g,fallbackFormat:v,unresolving:_,postTranslation:w,processor:x,warnHtmlMessage:A,escapeParameter:W,messageCompiler:T,messageResolver:P,localeFallbacker:q,fallbackContext:G,onWarn:t,__meta:ae};return F.datetimeFormats=r,F.numberFormats=u,F.__datetimeFormatters=J,F.__numberFormatters=ve,__INTLIFY_PROD_DEVTOOLS__&&J1(F,o,ae),F}const hi=e=>({[e]:xt()});function vi(e,t,o,n,a){const{missing:s,onWarn:l}=e;if(s!==null){const r=s(e,o,t,a);return De(r)?r:t}else return t}function hs(e,t,o){const n=e;n.__localeChainCache=new Map,e.localeFallbacker(e,o,t)}function b0(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function w0(e,t){const o=t.indexOf(e);if(o===-1)return!1;for(let n=o+1;n<t.length;n++)if(b0(e,t[n]))return!0;return!1}function vf(e,...t){const{datetimeFormats:o,unresolving:n,fallbackLocale:a,onWarn:s,localeFallbacker:l}=e,{__datetimeFormatters:r}=e,[u,d,c,f]=_i(...t),m=ct(c.missingWarn)?c.missingWarn:e.missingWarn;ct(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const g=!!c.part,v=gi(e,c),_=l(e,a,v);if(!De(u)||u==="")return new Intl.DateTimeFormat(v,f).format(d);let w={},x,A=null;const W="datetime format";for(let q=0;q<_.length&&(x=_[q],w=o[x]||{},A=w[u],!nt(A));q++)vi(e,u,x,m,W);if(!nt(A)||!De(x))return n?Ml:u;let T=`${x}__${u}`;Cl(f)||(T=`${T}__${JSON.stringify(f)}`);let P=r.get(T);return P||(P=new Intl.DateTimeFormat(x,zt({},A,f)),r.set(T,P)),g?P.formatToParts(d):P.format(d)}const _f=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function _i(...e){const[t,o,n,a]=e,s=xt();let l=xt(),r;if(De(t)){const u=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw mo(go.INVALID_ISO_DATE_ARGUMENT);const d=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();r=new Date(d);try{r.toISOString()}catch{throw mo(go.INVALID_ISO_DATE_ARGUMENT)}}else if(i1(t)){if(isNaN(t.getTime()))throw mo(go.INVALID_DATE_ARGUMENT);r=t}else if(Bt(t))r=t;else throw mo(go.INVALID_ARGUMENT);return De(o)?s.key=o:nt(o)&&Object.keys(o).forEach(u=>{_f.includes(u)?l[u]=o[u]:s[u]=o[u]}),De(n)?s.locale=n:nt(n)&&(l=n),nt(a)&&(l=a),[s.key||"",r,s,l]}function yf(e,t,o){const n=e;for(const a in o){const s=`${t}__${a}`;n.__datetimeFormatters.has(s)&&n.__datetimeFormatters.delete(s)}}function bf(e,...t){const{numberFormats:o,unresolving:n,fallbackLocale:a,onWarn:s,localeFallbacker:l}=e,{__numberFormatters:r}=e,[u,d,c,f]=yi(...t),m=ct(c.missingWarn)?c.missingWarn:e.missingWarn;ct(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const g=!!c.part,v=gi(e,c),_=l(e,a,v);if(!De(u)||u==="")return new Intl.NumberFormat(v,f).format(d);let w={},x,A=null;const W="number format";for(let q=0;q<_.length&&(x=_[q],w=o[x]||{},A=w[u],!nt(A));q++)vi(e,u,x,m,W);if(!nt(A)||!De(x))return n?Ml:u;let T=`${x}__${u}`;Cl(f)||(T=`${T}__${JSON.stringify(f)}`);let P=r.get(T);return P||(P=new Intl.NumberFormat(x,zt({},A,f)),r.set(T,P)),g?P.formatToParts(d):P.format(d)}const wf=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function yi(...e){const[t,o,n,a]=e,s=xt();let l=xt();if(!Bt(t))throw mo(go.INVALID_ARGUMENT);const r=t;return De(o)?s.key=o:nt(o)&&Object.keys(o).forEach(u=>{wf.includes(u)?l[u]=o[u]:s[u]=o[u]}),De(n)?s.locale=n:nt(n)&&(l=n),nt(a)&&(l=a),[s.key||"",r,s,l]}function xf(e,t,o){const n=e;for(const a in o){const s=`${t}__${a}`;n.__numberFormatters.has(s)&&n.__numberFormatters.delete(s)}}const x0=e=>e,T0=e=>"",S0="text",k0=e=>e.length===0?"":ii(e),C0=p1;function Tf(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function E0(e){const t=Bt(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Bt(e.named.count)||Bt(e.named.n))?Bt(e.named.count)?e.named.count:Bt(e.named.n)?e.named.n:t:t}function L0(e,t){t.count||(t.count=e),t.n||(t.n=e)}function $0(e={}){const t=e.locale,o=E0(e),n=gt(e.pluralRules)&&De(t)&&It(e.pluralRules[t])?e.pluralRules[t]:Tf,a=gt(e.pluralRules)&&De(t)&&It(e.pluralRules[t])?Tf:void 0,s=x=>x[n(o,x.length,a)],l=e.list||[],r=x=>l[x],u=e.named||xt();Bt(e.pluralIndex)&&L0(o,u);const d=x=>u[x];function c(x,A){const W=It(e.messages)?e.messages(x,!!A):gt(e.messages)?e.messages[x]:!1;return W||(e.parent?e.parent.message(x):T0)}const f=x=>e.modifiers?e.modifiers[x]:x0,m=nt(e.processor)&&It(e.processor.normalize)?e.processor.normalize:k0,g=nt(e.processor)&&It(e.processor.interpolate)?e.processor.interpolate:C0,v=nt(e.processor)&&De(e.processor.type)?e.processor.type:S0,w={list:r,named:d,plural:s,linked:(x,...A)=>{const[W,T]=A;let P="text",q="";A.length===1?gt(W)?(q=W.modifier||q,P=W.type||P):De(W)&&(q=W||q):A.length===2&&(De(W)&&(q=W||q),De(T)&&(P=T||P));const G=c(x,!0)(w),z=P==="vnode"&&Pt(G)&&q?G[0]:G;return q?f(q)(z,P):z},message:c,type:v,interpolate:g,normalize:m,values:zt(xt(),l,u)};return w}const Sf=()=>"",An=e=>It(e);function kf(e,...t){const{fallbackFormat:o,postTranslation:n,unresolving:a,messageCompiler:s,fallbackLocale:l,messages:r}=e,[u,d]=bi(...t),c=ct(d.missingWarn)?d.missingWarn:e.missingWarn,f=ct(d.fallbackWarn)?d.fallbackWarn:e.fallbackWarn,m=ct(d.escapeParameter)?d.escapeParameter:e.escapeParameter,g=!!d.resolvedMessage,v=De(d.default)||ct(d.default)?ct(d.default)?s?u:()=>u:d.default:o?s?u:()=>u:null,_=o||v!=null&&(De(v)||It(v)),w=gi(e,d);m&&A0(d);let[x,A,W]=g?[u,w,r[w]||xt()]:Cf(e,u,w,l,f,c),T=x,P=u;if(!g&&!(De(T)||Zn(T)||An(T))&&_&&(T=v,P=T),!g&&(!(De(T)||Zn(T)||An(T))||!De(A)))return a?Ml:u;let q=!1;const G=()=>{q=!0},z=An(T)?T:Ef(e,u,A,T,P,G);if(q)return T;const J=O0(e,A,W,d),ve=$0(J),ae=I0(e,z,ve);let F=n?n(ae,u):ae;if(m&&De(F)&&(F=c1(F)),__INTLIFY_PROD_DEVTOOLS__){const K={timestamp:Date.now(),key:De(u)?u:An(T)?T.key:"",locale:A||(An(T)?T.locale:""),format:De(T)?T:An(T)?T.source:"",message:F};K.meta=zt({},e.__meta,v0()||{}),K1(K)}return F}function A0(e){Pt(e.list)?e.list=e.list.map(t=>De(t)?jd(t):t):gt(e.named)&&Object.keys(e.named).forEach(t=>{De(e.named[t])&&(e.named[t]=jd(e.named[t]))})}function Cf(e,t,o,n,a,s){const{messages:l,onWarn:r,messageResolver:u,localeFallbacker:d}=e,c=d(e,n,o);let f=xt(),m,g=null;const v="translate";for(let _=0;_<c.length&&(m=c[_],f=l[m]||xt(),(g=u(f,t))===null&&(g=f[t]),!(De(g)||Zn(g)||An(g)));_++)if(!w0(m,c)){const w=vi(e,t,m,s,v);w!==t&&(g=w)}return[g,m,f]}function Ef(e,t,o,n,a,s){const{messageCompiler:l,warnHtmlMessage:r}=e;if(An(n)){const d=n;return d.locale=d.locale||o,d.key=d.key||t,d}if(l==null){const d=(()=>n);return d.locale=o,d.key=t,d}const u=l(n,M0(e,o,a,n,r,s));return u.locale=o,u.key=t,u.source=n,u}function I0(e,t,o){return t(o)}function bi(...e){const[t,o,n]=e,a=xt();if(!De(t)&&!Bt(t)&&!An(t)&&!Zn(t))throw mo(go.INVALID_ARGUMENT);const s=Bt(t)?String(t):(An(t),t);return Bt(o)?a.plural=o:De(o)?a.default=o:nt(o)&&!Cl(o)?a.named=o:Pt(o)&&(a.list=o),Bt(n)?a.plural=n:De(n)?a.default=n:nt(n)&&zt(a,n),[s,a]}function M0(e,t,o,n,a,s){return{locale:t,key:o,warnHtmlMessage:a,onError:l=>{throw s&&s(l),l},onCacheKey:l=>l1(t,o,l)}}function O0(e,t,o,n){const{modifiers:a,pluralRules:s,messageResolver:l,fallbackLocale:r,fallbackWarn:u,missingWarn:d,fallbackContext:c}=e,m={locale:t,modifiers:a,pluralRules:s,messages:(g,v)=>{let _=l(o,g);if(_==null&&(c||v)){const[,,w]=Cf(c||e,g,t,r,u,d);_=l(w,g)}if(De(_)||Zn(_)){let w=!1;const A=Ef(e,g,t,_,g,()=>{w=!0});return w?Sf:A}else return An(_)?_:Sf}};return e.processor&&(m.processor=e.processor),n.list&&(m.list=n.list),n.named&&(m.named=n.named),Bt(n.plural)&&(m.pluralIndex=n.plural),m}F1();/*!
  * vue-i18n v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const N0="11.1.12";function R0(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(ea().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(ea().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(ea().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(ea().__INTLIFY_PROD_DEVTOOLS__=!1)}const vn={UNEXPECTED_RETURN_TYPE:Z1,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Tn(e,...t){return $l(e,null,void 0)}const wi=No("__translateVNode"),xi=No("__datetimeParts"),Ti=No("__numberParts"),Lf=No("__setPluralRules"),$f=No("__injectWithOption"),Si=No("__dispose");function vs(e){if(!gt(e)||Zn(e))return e;for(const t in e)if(Pn(e,t))if(!t.includes("."))gt(e[t])&&vs(e[t]);else{const o=t.split("."),n=o.length-1;let a=e,s=!1;for(let l=0;l<n;l++){if(o[l]==="__proto__")throw new Error(`unsafe key: ${o[l]}`);if(o[l]in a||(a[o[l]]=xt()),!gt(a[o[l]])){s=!0;break}a=a[o[l]]}if(s||(Zn(a)?tf.includes(o[n])||delete e[t]:(a[o[n]]=e[t],delete e[t])),!Zn(a)){const l=a[o[n]];gt(l)&&vs(l)}}return e}function ki(e,t){const{messages:o,__i18n:n,messageResolver:a,flatJson:s}=t,l=nt(o)?o:Pt(n)?xt():{[e]:xt()};if(Pt(n)&&n.forEach(r=>{if("locale"in r&&"resource"in r){const{locale:u,resource:d}=r;u?(l[u]=l[u]||xt(),Ll(d,l[u])):Ll(d,l)}else De(r)&&Ll(JSON.parse(r),l)}),a==null&&s)for(const r in l)Pn(l,r)&&vs(l[r]);return l}function Af(e){return e.type}function If(e,t,o){let n=gt(t.messages)?t.messages:xt();"__i18nGlobal"in o&&(n=ki(e.locale.value,{messages:n,__i18n:o.__i18nGlobal}));const a=Object.keys(n);a.length&&a.forEach(s=>{e.mergeLocaleMessage(s,n[s])});{if(gt(t.datetimeFormats)){const s=Object.keys(t.datetimeFormats);s.length&&s.forEach(l=>{e.mergeDateTimeFormat(l,t.datetimeFormats[l])})}if(gt(t.numberFormats)){const s=Object.keys(t.numberFormats);s.length&&s.forEach(l=>{e.mergeNumberFormat(l,t.numberFormats[l])})}}}function Mf(e){return Ve(as,null,e,0)}const Of="__INTLIFY_META__",Nf=()=>[],D0=()=>!1;let Rf=0;function Df(e){return((t,o,n,a)=>e(o,n,io()||void 0,a))}const P0=()=>{const e=io();let t=null;return e&&(t=Af(e)[Of])?{[Of]:t}:null};function Ci(e={}){const{__root:t,__injectWithOption:o}=e,n=t===void 0,a=e.flatJson,s=kl?y:oh;let l=ct(e.inheritLocale)?e.inheritLocale:!0;const r=s(t&&l?t.locale.value:De(e.locale)?e.locale:ms),u=s(t&&l?t.fallbackLocale.value:De(e.fallbackLocale)||Pt(e.fallbackLocale)||nt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:r.value),d=s(ki(r.value,e)),c=s(nt(e.datetimeFormats)?e.datetimeFormats:{[r.value]:{}}),f=s(nt(e.numberFormats)?e.numberFormats:{[r.value]:{}});let m=t?t.missingWarn:ct(e.missingWarn)||ba(e.missingWarn)?e.missingWarn:!0,g=t?t.fallbackWarn:ct(e.fallbackWarn)||ba(e.fallbackWarn)?e.fallbackWarn:!0,v=t?t.fallbackRoot:ct(e.fallbackRoot)?e.fallbackRoot:!0,_=!!e.fallbackFormat,w=It(e.missing)?e.missing:null,x=It(e.missing)?Df(e.missing):null,A=It(e.postTranslation)?e.postTranslation:null,W=t?t.warnHtmlMessage:ct(e.warnHtmlMessage)?e.warnHtmlMessage:!0,T=!!e.escapeParameter;const P=t?t.modifiers:nt(e.modifiers)?e.modifiers:{};let q=e.pluralRules||t&&t.pluralRules,G;G=(()=>{n&&mf(null);const X={version:N0,locale:r.value,fallbackLocale:u.value,messages:d.value,modifiers:P,pluralRules:q,missing:x===null?void 0:x,missingWarn:m,fallbackWarn:g,fallbackFormat:_,unresolving:!0,postTranslation:A===null?void 0:A,warnHtmlMessage:W,escapeParameter:T,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};X.datetimeFormats=c.value,X.numberFormats=f.value,X.__datetimeFormatters=nt(G)?G.__datetimeFormatters:void 0,X.__numberFormatters=nt(G)?G.__numberFormatters:void 0;const le=y0(X);return n&&mf(le),le})(),hs(G,r.value,u.value);function J(){return[r.value,u.value,d.value,c.value,f.value]}const ve=tt({get:()=>r.value,set:X=>{G.locale=X,r.value=X}}),ae=tt({get:()=>u.value,set:X=>{G.fallbackLocale=X,u.value=X,hs(G,r.value,X)}}),F=tt(()=>d.value),K=tt(()=>c.value),ee=tt(()=>f.value);function Q(){return It(A)?A:null}function te(X){A=X,G.postTranslation=X}function ne(){return w}function U(X){X!==null&&(x=Df(X)),w=X,G.missing=x}const j=(X,le,Ne,Pe,We,ze)=>{J();let rt;try{__INTLIFY_PROD_DEVTOOLS__,n||(G.fallbackContext=t?_0():void 0),rt=X(G)}finally{__INTLIFY_PROD_DEVTOOLS__,n||(G.fallbackContext=void 0)}if(Ne!=="translate exists"&&Bt(rt)&&rt===Ml||Ne==="translate exists"&&!rt){const[dt,Ht]=le();return t&&v?Pe(t):We(dt)}else{if(ze(rt))return rt;throw Tn(vn.UNEXPECTED_RETURN_TYPE)}};function ue(...X){return j(le=>Reflect.apply(kf,null,[le,...X]),()=>bi(...X),"translate",le=>Reflect.apply(le.t,le,[...X]),le=>le,le=>De(le))}function xe(...X){const[le,Ne,Pe]=X;if(Pe&&!gt(Pe))throw Tn(vn.INVALID_ARGUMENT);return ue(le,Ne,zt({resolvedMessage:!0},Pe||{}))}function oe(...X){return j(le=>Reflect.apply(vf,null,[le,...X]),()=>_i(...X),"datetime format",le=>Reflect.apply(le.d,le,[...X]),()=>rf,le=>De(le)||Pt(le))}function de(...X){return j(le=>Reflect.apply(bf,null,[le,...X]),()=>yi(...X),"number format",le=>Reflect.apply(le.n,le,[...X]),()=>rf,le=>De(le)||Pt(le))}function be(X){return X.map(le=>De(le)||Bt(le)||ct(le)?Mf(String(le)):le)}const _e={normalize:be,interpolate:X=>X,type:"vnode"};function I(...X){return j(le=>{let Ne;const Pe=le;try{Pe.processor=_e,Ne=Reflect.apply(kf,null,[Pe,...X])}finally{Pe.processor=null}return Ne},()=>bi(...X),"translate",le=>le[wi](...X),le=>[Mf(le)],le=>Pt(le))}function N(...X){return j(le=>Reflect.apply(bf,null,[le,...X]),()=>yi(...X),"number format",le=>le[Ti](...X),Nf,le=>De(le)||Pt(le))}function H(...X){return j(le=>Reflect.apply(vf,null,[le,...X]),()=>_i(...X),"datetime format",le=>le[xi](...X),Nf,le=>De(le)||Pt(le))}function O(X){q=X,G.pluralRules=q}function B(X,le){return j(()=>{if(!X)return!1;const Ne=De(le)?le:r.value,Pe=D(Ne),We=G.messageResolver(Pe,X);return Zn(We)||An(We)||De(We)},()=>[X],"translate exists",Ne=>Reflect.apply(Ne.te,Ne,[X,le]),D0,Ne=>ct(Ne))}function k(X){let le=null;const Ne=af(G,u.value,r.value);for(let Pe=0;Pe<Ne.length;Pe++){const We=d.value[Ne[Pe]]||{},ze=G.messageResolver(We,X);if(ze!=null){le=ze;break}}return le}function E(X){const le=k(X);return le??(t?t.tm(X)||{}:{})}function D(X){return d.value[X]||{}}function Y(X,le){if(a){const Ne={[X]:le};for(const Pe in Ne)Pn(Ne,Pe)&&vs(Ne[Pe]);le=Ne[X]}d.value[X]=le,G.messages=d.value}function ie(X,le){d.value[X]=d.value[X]||{};const Ne={[X]:le};if(a)for(const Pe in Ne)Pn(Ne,Pe)&&vs(Ne[Pe]);le=Ne[X],Ll(le,d.value[X]),G.messages=d.value}function re(X){return c.value[X]||{}}function C(X,le){c.value[X]=le,G.datetimeFormats=c.value,yf(G,X,le)}function b(X,le){c.value[X]=zt(c.value[X]||{},le),G.datetimeFormats=c.value,yf(G,X,le)}function R(X){return f.value[X]||{}}function V(X,le){f.value[X]=le,G.numberFormats=f.value,xf(G,X,le)}function me(X,le){f.value[X]=zt(f.value[X]||{},le),G.numberFormats=f.value,xf(G,X,le)}Rf++,t&&kl&&(et(t.locale,X=>{l&&(r.value=X,G.locale=X,hs(G,r.value,u.value))}),et(t.fallbackLocale,X=>{l&&(u.value=X,G.fallbackLocale=X,hs(G,r.value,u.value))}));const fe={id:Rf,locale:ve,fallbackLocale:ae,get inheritLocale(){return l},set inheritLocale(X){l=X,X&&t&&(r.value=t.locale.value,u.value=t.fallbackLocale.value,hs(G,r.value,u.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:F,get modifiers(){return P},get pluralRules(){return q||{}},get isGlobal(){return n},get missingWarn(){return m},set missingWarn(X){m=X,G.missingWarn=m},get fallbackWarn(){return g},set fallbackWarn(X){g=X,G.fallbackWarn=g},get fallbackRoot(){return v},set fallbackRoot(X){v=X},get fallbackFormat(){return _},set fallbackFormat(X){_=X,G.fallbackFormat=_},get warnHtmlMessage(){return W},set warnHtmlMessage(X){W=X,G.warnHtmlMessage=X},get escapeParameter(){return T},set escapeParameter(X){T=X,G.escapeParameter=X},t:ue,getLocaleMessage:D,setLocaleMessage:Y,mergeLocaleMessage:ie,getPostTranslationHandler:Q,setPostTranslationHandler:te,getMissingHandler:ne,setMissingHandler:U,[Lf]:O};return fe.datetimeFormats=K,fe.numberFormats=ee,fe.rt=xe,fe.te=B,fe.tm=E,fe.d=oe,fe.n=de,fe.getDateTimeFormat=re,fe.setDateTimeFormat=C,fe.mergeDateTimeFormat=b,fe.getNumberFormat=R,fe.setNumberFormat=V,fe.mergeNumberFormat=me,fe[$f]=o,fe[wi]=I,fe[xi]=H,fe[Ti]=N,fe}function F0(e){const t=De(e.locale)?e.locale:ms,o=De(e.fallbackLocale)||Pt(e.fallbackLocale)||nt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,n=It(e.missing)?e.missing:void 0,a=ct(e.silentTranslationWarn)||ba(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,s=ct(e.silentFallbackWarn)||ba(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,l=ct(e.fallbackRoot)?e.fallbackRoot:!0,r=!!e.formatFallbackMessages,u=nt(e.modifiers)?e.modifiers:{},d=e.pluralizationRules,c=It(e.postTranslation)?e.postTranslation:void 0,f=De(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,m=!!e.escapeParameterHtml,g=ct(e.sync)?e.sync:!0;let v=e.messages;if(nt(e.sharedMessages)){const P=e.sharedMessages;v=Object.keys(P).reduce((G,z)=>{const J=G[z]||(G[z]={});return zt(J,P[z]),G},v||{})}const{__i18n:_,__root:w,__injectWithOption:x}=e,A=e.datetimeFormats,W=e.numberFormats,T=e.flatJson;return{locale:t,fallbackLocale:o,messages:v,flatJson:T,datetimeFormats:A,numberFormats:W,missing:n,missingWarn:a,fallbackWarn:s,fallbackRoot:l,fallbackFormat:r,modifiers:u,pluralRules:d,postTranslation:c,warnHtmlMessage:f,escapeParameter:m,messageResolver:e.messageResolver,inheritLocale:g,__i18n:_,__root:w,__injectWithOption:x}}function Ei(e={}){const t=Ci(F0(e)),{__extender:o}=e,n={id:t.id,get locale(){return t.locale.value},set locale(a){t.locale.value=a},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(a){t.fallbackLocale.value=a},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get missing(){return t.getMissingHandler()},set missing(a){t.setMissingHandler(a)},get silentTranslationWarn(){return ct(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(a){t.missingWarn=ct(a)?!a:a},get silentFallbackWarn(){return ct(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(a){t.fallbackWarn=ct(a)?!a:a},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(a){t.fallbackFormat=a},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(a){t.setPostTranslationHandler(a)},get sync(){return t.inheritLocale},set sync(a){t.inheritLocale=a},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(a){t.warnHtmlMessage=a!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(a){t.escapeParameter=a},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...a){return Reflect.apply(t.t,t,[...a])},rt(...a){return Reflect.apply(t.rt,t,[...a])},te(a,s){return t.te(a,s)},tm(a){return t.tm(a)},getLocaleMessage(a){return t.getLocaleMessage(a)},setLocaleMessage(a,s){t.setLocaleMessage(a,s)},mergeLocaleMessage(a,s){t.mergeLocaleMessage(a,s)},d(...a){return Reflect.apply(t.d,t,[...a])},getDateTimeFormat(a){return t.getDateTimeFormat(a)},setDateTimeFormat(a,s){t.setDateTimeFormat(a,s)},mergeDateTimeFormat(a,s){t.mergeDateTimeFormat(a,s)},n(...a){return Reflect.apply(t.n,t,[...a])},getNumberFormat(a){return t.getNumberFormat(a)},setNumberFormat(a,s){t.setNumberFormat(a,s)},mergeNumberFormat(a,s){t.mergeNumberFormat(a,s)}};return n.__extender=o,n}function B0(e,t,o){return{beforeCreate(){const n=io();if(!n)throw Tn(vn.UNEXPECTED_ERROR);const a=this.$options;if(a.i18n){const s=a.i18n;if(a.__i18n&&(s.__i18n=a.__i18n),s.__root=t,this===this.$root)this.$i18n=Pf(e,s);else{s.__injectWithOption=!0,s.__extender=o.__vueI18nExtend,this.$i18n=Ei(s);const l=this.$i18n;l.__extender&&(l.__disposer=l.__extender(this.$i18n))}}else if(a.__i18n)if(this===this.$root)this.$i18n=Pf(e,a);else{this.$i18n=Ei({__i18n:a.__i18n,__injectWithOption:!0,__extender:o.__vueI18nExtend,__root:t});const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}else this.$i18n=e;a.__i18nGlobal&&If(t,a,a),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$te=(s,l)=>this.$i18n.te(s,l),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s),o.__setInstance(n,this.$i18n)},mounted(){},unmounted(){const n=io();if(!n)throw Tn(vn.UNEXPECTED_ERROR);const a=this.$i18n;delete this.$t,delete this.$rt,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,a.__disposer&&(a.__disposer(),delete a.__disposer,delete a.__extender),o.__deleteInstance(n),delete this.$i18n}}}function Pf(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Lf](t.pluralizationRules||e.pluralizationRules);const o=ki(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(o).forEach(n=>e.mergeLocaleMessage(n,o[n])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(n=>e.mergeDateTimeFormat(n,t.datetimeFormats[n])),t.numberFormats&&Object.keys(t.numberFormats).forEach(n=>e.mergeNumberFormat(n,t.numberFormats[n])),e}const Li={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function U0({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((n,a)=>[...n,...a.type===Oe?a.children:[a]],[]):t.reduce((o,n)=>{const a=e[n];return a&&(o[n]=a()),o},xt())}function Ff(){return Oe}const Bf=hn({name:"i18n-t",props:zt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Bt(e)||!isNaN(e)}},Li),setup(e,t){const{slots:o,attrs:n}=t,a=e.i18n||_t({useScope:e.scope,__useComponent:!0});return()=>{const s=Object.keys(o).filter(f=>f[0]!=="_"),l=xt();e.locale&&(l.locale=e.locale),e.plural!==void 0&&(l.plural=De(e.plural)?+e.plural:e.plural);const r=U0(t,s),u=a[wi](e.keypath,r,l),d=zt(xt(),n),c=De(e.tag)||gt(e.tag)?e.tag:Ff();return Et(c,d,u)}}});function j0(e){return Pt(e)&&!De(e[0])}function Uf(e,t,o,n){const{slots:a,attrs:s}=t;return()=>{const l={part:!0};let r=xt();e.locale&&(l.locale=e.locale),De(e.format)?l.key=e.format:gt(e.format)&&(De(e.format.key)&&(l.key=e.format.key),r=Object.keys(e.format).reduce((m,g)=>o.includes(g)?zt(xt(),m,{[g]:e.format[g]}):m,xt()));const u=n(e.value,l,r);let d=[l.key];Pt(u)?d=u.map((m,g)=>{const v=a[m.type],_=v?v({[m.type]:m.value,index:g,parts:u}):[m.value];return j0(_)&&(_[0].key=`${m.type}-${g}`),_}):De(u)&&(d=[u]);const c=zt(xt(),s),f=De(e.tag)||gt(e.tag)?e.tag:Ff();return Et(f,c,d)}}const jf=hn({name:"i18n-n",props:zt({value:{type:Number,required:!0},format:{type:[String,Object]}},Li),setup(e,t){const o=e.i18n||_t({useScope:e.scope,__useComponent:!0});return Uf(e,t,wf,(...n)=>o[Ti](...n))}});function H0(e,t){const o=e;if(e.mode==="composition")return o.__getInstance(t)||e.global;{const n=o.__getInstance(t);return n!=null?n.__composer:e.global.__composer}}function W0(e){const t=l=>{const{instance:r,value:u}=l;if(!r||!r.$)throw Tn(vn.UNEXPECTED_ERROR);const d=H0(e,r.$),c=Hf(u);return[Reflect.apply(d.t,d,[...Wf(c)]),d]};return{created:(l,r)=>{const[u,d]=t(r);kl&&e.global===d&&(l.__i18nWatcher=et(d.locale,()=>{r.instance&&r.instance.$forceUpdate()})),l.__composer=d,l.textContent=u},unmounted:l=>{kl&&l.__i18nWatcher&&(l.__i18nWatcher(),l.__i18nWatcher=void 0,delete l.__i18nWatcher),l.__composer&&(l.__composer=void 0,delete l.__composer)},beforeUpdate:(l,{value:r})=>{if(l.__composer){const u=l.__composer,d=Hf(r);l.textContent=Reflect.apply(u.t,u,[...Wf(d)])}},getSSRProps:l=>{const[r]=t(l);return{textContent:r}}}}function Hf(e){if(De(e))return{path:e};if(nt(e)){if(!("path"in e))throw Tn(vn.REQUIRED_VALUE,"path");return e}else throw Tn(vn.INVALID_VALUE)}function Wf(e){const{path:t,locale:o,args:n,choice:a,plural:s}=e,l={},r=n||{};return De(o)&&(l.locale=o),Bt(a)&&(l.plural=a),Bt(s)&&(l.plural=s),[t,r,l]}function V0(e,t,...o){const n=nt(o[0])?o[0]:{};(ct(n.globalInstall)?n.globalInstall:!0)&&([Bf.name,"I18nT"].forEach(s=>e.component(s,Bf)),[jf.name,"I18nN"].forEach(s=>e.component(s,jf)),[zf.name,"I18nD"].forEach(s=>e.component(s,zf))),e.directive("t",W0(t))}const z0=No("global-vue-i18n");function q0(e={}){const t=__VUE_I18N_LEGACY_API__&&ct(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,o=ct(e.globalInjection)?e.globalInjection:!0,n=new Map,[a,s]=G0(e,t),l=No("");function r(f){return n.get(f)||null}function u(f,m){n.set(f,m)}function d(f){n.delete(f)}const c={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(f,...m){if(f.__VUE_I18N_SYMBOL__=l,f.provide(f.__VUE_I18N_SYMBOL__,c),nt(m[0])){const _=m[0];c.__composerExtend=_.__composerExtend,c.__vueI18nExtend=_.__vueI18nExtend}let g=null;!t&&o&&(g=t2(f,c.global)),__VUE_I18N_FULL_INSTALL__&&V0(f,c,...m),__VUE_I18N_LEGACY_API__&&t&&f.mixin(B0(s,s.__composer,c));const v=f.unmount;f.unmount=()=>{g&&g(),c.dispose(),v()}},get global(){return s},dispose(){a.stop()},__instances:n,__getInstance:r,__setInstance:u,__deleteInstance:d};return c}function _t(e={}){const t=io();if(t==null)throw Tn(vn.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw Tn(vn.NOT_INSTALLED);const o=Q0(t),n=J0(o),a=Af(t),s=Y0(e,a);if(s==="global")return If(n,e,a),n;if(s==="parent"){let u=K0(o,t,e.__useComponent);return u==null&&(u=n),u}const l=o;let r=l.__getInstance(t);if(r==null){const u=zt({},e);"__i18n"in a&&(u.__i18n=a.__i18n),n&&(u.__root=n),r=Ci(u),l.__composerExtend&&(r[Si]=l.__composerExtend(r)),Z0(l,t,r),l.__setInstance(t,r)}return r}function G0(e,t){const o=Cr(),n=__VUE_I18N_LEGACY_API__&&t?o.run(()=>Ei(e)):o.run(()=>Ci(e));if(n==null)throw Tn(vn.UNEXPECTED_ERROR);return[o,n]}function Q0(e){const t=ro(e.isCE?z0:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw Tn(e.isCE?vn.NOT_INSTALLED_WITH_PROVIDE:vn.UNEXPECTED_ERROR);return t}function Y0(e,t){return Cl(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function J0(e){return e.mode==="composition"?e.global:e.global.__composer}function K0(e,t,o=!1){let n=null;const a=t.root;let s=X0(t,o);for(;s!=null;){const l=e;if(e.mode==="composition")n=l.__getInstance(s);else if(__VUE_I18N_LEGACY_API__){const r=l.__getInstance(s);r!=null&&(n=r.__composer,o&&n&&!n[$f]&&(n=null))}if(n!=null||a===s)break;s=s.parent}return n}function X0(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function Z0(e,t,o){ut(()=>{},t),Dn(()=>{const n=o;e.__deleteInstance(t);const a=n[Si];a&&(a(),delete n[Si])},t)}const e2=["locale","fallbackLocale","availableLocales"],Vf=["t","rt","d","n","tm","te"];function t2(e,t){const o=Object.create(null);return e2.forEach(a=>{const s=Object.getOwnPropertyDescriptor(t,a);if(!s)throw Tn(vn.UNEXPECTED_ERROR);const l=Rt(s.value)?{get(){return s.value.value},set(r){s.value.value=r}}:{get(){return s.get&&s.get()}};Object.defineProperty(o,a,l)}),e.config.globalProperties.$i18n=o,Vf.forEach(a=>{const s=Object.getOwnPropertyDescriptor(t,a);if(!s||!s.value)throw Tn(vn.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${a}`,s)}),()=>{delete e.config.globalProperties.$i18n,Vf.forEach(a=>{delete e.config.globalProperties[`$${a}`]})}}const zf=hn({name:"i18n-d",props:zt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Li),setup(e,t){const o=e.i18n||_t({useScope:e.scope,__useComponent:!0});return Uf(e,t,_f,(...n)=>o[xi](...n))}});if(R0(),p0(Q1),g0(c0),m0(af),__INTLIFY_PROD_DEVTOOLS__){const e=ea();e.__INTLIFY__=!0,Y1(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const yt=(e,t)=>{const o=e.__vccOpts||e;for(const[n,a]of t)o[n]=a;return o},n2={class:"weilin_prompt_ui_window-title"},o2=["title"],Sn=yt({__name:"DraggableWindow",props:{title:{type:String,required:!0},position:{type:Object,required:!0},size:{type:Object,required:!0},zIndex:{type:Number,default:1},name:{type:String,default:"default_window_name"}},emits:["update:position","update:size","active","close"],setup(e,{emit:t}){const o=e,{t:n}=_t(),a=t,s=y({x:0,y:0}),l=y({width:600,height:400});et(()=>o.position,q=>{q&&(s.value={...q},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${o.name}_position`},"*"))},{immediate:!0,deep:!0}),et(()=>o.size,q=>{q&&(l.value={...q},window.parent.postMessage({type:`weilin_prompt_ui_window_change_${o.name}_size`},"*"))},{immediate:!0,deep:!0});const r=()=>{window.parent.postMessage({type:`weilin_prompt_ui_window_change_${o.name}_scroll`},"*")};ut(()=>{var q;if(o.position){const G=window.innerWidth,z=window.innerHeight,J=100;let ve=o.position.x,ae=o.position.y;ve=Math.max(J-(((q=o.size)==null?void 0:q.width)||l.value.width),ve),ve=Math.min(ve,G-100),ae=Math.max(100,ae),ae=Math.min(ae,z-100),s.value={x:ve,y:ae}}o.size&&(l.value={...o.size})});const u=y(!1),d=y({x:0,y:0}),c=q=>{u.value=!0,d.value={x:q.clientX-s.value.x,y:q.clientY-s.value.y},document.addEventListener("mousemove",f),document.addEventListener("mouseup",m)},f=q=>{if(u.value){const G=window.innerWidth,z=window.innerHeight,J=100;let ve=q.clientX-d.value.x,ae=q.clientY-d.value.y;ve=Math.max(J-l.value.width,ve),ve=Math.min(ve,G-100),ae=Math.max(100,ae),ae=Math.min(ae,z-100);const F={x:ve,y:ae};s.value=F,a("update:position",F)}},m=()=>{u.value=!1,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",m)},g=y(!1),v=y({x:0,y:0}),_=y({width:0,height:0}),w=q=>{g.value=!0,v.value={x:q.clientX,y:q.clientY},_.value={...l.value},document.addEventListener("mousemove",x),document.addEventListener("mouseup",A)},x=q=>{if(g.value){const G=q.clientX-v.value.x,z=q.clientY-v.value.y,J={width:Math.max(200,_.value.width+G),height:Math.max(200,_.value.height+z)};l.value=J,a("update:size",J)}},A=()=>{g.value=!1,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",A)},W=()=>{a("active")},T=()=>{a("close")},P=q=>{W(),c(q)};return(q,G)=>(S(),wt(mc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[i("div",{class:"weilin_prompt_ui_draggable-window",style:pt({left:`${s.value.x}px`,top:`${s.value.y}px`,width:`${l.value.width}px`,height:`${l.value.height}px`,zIndex:e.zIndex}),onMousedown:W},[i("div",{class:"weilin_prompt_ui_window-header",onMousedown:Ke(P,["stop"])},[i("div",n2,h(e.title),1),i("button",{class:"weilin_prompt_ui_close-btn",onClick:T},"")],32),i("div",{class:"weilin_prompt_ui_window-content",onScroll:r},[ts(q.$slots,"default",{},void 0,!0)],32),i("div",{class:"weilin_prompt_ui_resize-handle",title:p(n)("common.windowSize"),onMousedown:Ke(w,["stop"])},null,40,o2)],36)]))}},[["__scopeId","data-v-cbc46280"]]),ho="v0.0.68",a2={promptBox:{placeholder:"...",delete:"",newline:"",tab:"",windowTitle:"WeiLinUI "+ho,windowTitleGlobal:"WeiLinUI "+ho,translate:"",translatePlaceholder:",",weight:"",weightPlaceholder:"",addBracket:"",removeLayer:"",hiddenHint:"",tagTips:"Tag<br>Tag<br>Tag",oneClickRandomTag:"Tag",oneClickCleanAll:"",randomTagSettings:"Tag",oneClickTranslate:"Tag",modelWeight:"",textWeight:"",favour:"",lineToken:"",addLineToken:"",settings:{title:"",cancel:"",save:"",translator:"",sourceLanguage:"",targetLanguage:"",chinese_simplified:"",english:"",close:"",auto_detect:"",setting_floating_ball:"",setting_prompt_box:"",enablePromptCommaShow:"",floatingBallCount:"",floatingBallCountPlaceholder:"",floatingBallSize:"",floatingBallSizePlaceholder:"",floatingBallHeight:"",floatingBallHeightPlaceholder:"",enableFloatingBall:"",enableCommaConversion:"",enablePeriodConversion:"",enableBracketConversion:"",enableAngleBracketConversion:"",enableUnderscoreToBracket:"",enableBracketEscape:"\\",enableCommaCloseAutocomplete:"",setting_openai_box:"OpenAI",openai_api_key:"API Key",openai_api_key_placeholder:"API Key",openai_api_key_save:"",openaiSettings:"OpenAI",openai_base_url:"Base URL",openai_base_url_placeholder:"Base URL",openai_model:"",openai_model_placeholder:"",not_set:"",edit:"",delete:"",selectedOpenaiConfig:"OpenAI",addNewConfig:"OpenAI",setting_sponsor_me:"",sponsorMe:"",sponsorMeTip:"",sponsorMeLink:" https://afdian.com/a/weilin9999",setting_start_panel:"",startPanel:"",startPanelTip:"",selectTranslater:"",selectOptionNetworkTranslater:"",selectOptionPythonTranslater:"",apply:"",selectOptionNetworkTranslaterTitle:"",selectOptionPythonTranslaterTitle:"",selectOptionNetworkTranslaterInfo:"",selectOptionPythonTranslaterInfo:"translators",install:"",nowTranlaterPackageState:"",tranlaterPackageStateTrue:"",tranlaterPackageStateFlase:"",installed:"...",installTranslaterPackageInfo:"",translaterSetting:"",chooseTranslaterSetting:"",translaterLangSourceSetting:"",translaterLangTargeSetting:"",saveTranslaterSetting:"",testTranslaterTitle:"",inputTestTranslater:"",outPutTestTranslater:"",testingTranslater:"",inputTestTranslaterPlaceholder:"",outPutTestTranslaterPlaceholder:"",errorPrompt:"",setting_auto_complete_limit:"",show_auto_limit:"",showAutoLimitPlaceholder:"",settingAutoCompleteWidth:"",settingAutoCompleteWidthPlaceholder:"",settingAutoCompleteHeight:"",settingAutoCompleteHeightPlaceholder:"",skinSetting:"",defaultSkin:"",customSkin:"",uploadSkin:"",bgSetting:"",gradientBg:"",transparentBg:"",gradientColor:"",borderRadius:"",resetToDefault:""}},controls:{language:"",settings:"",switchTheme:"",darkMode:"",lightMode:"",tagManager:"",loraStack:"Lora",loraManager:"Lora",history:"",addLora:"Lora",removeLora:"Lora",lookOnLora:"Lora",aiChat:"AI",github:"Github",shareCloudData:"",tutorialVideo:"",sponsor:"",danbooruManager:"Danbooru"},theme:{toggle:""},common:{confirmDelete:"",delete:"",cancel:"",confirm:"",edit:"",save:"",refresh:"",copy:"",copySuccess:"",copyFailed:"",windowSize:"",showMore:"",showLess:""},cloudWindow:{windowTitle:"",back:"",currentPath:"",tagDatabase:"Tag ",danbooruDatabase:"Danbooru ",open:"",installed:"",install:"",installing:"..."},nodeListWindow:{windowTitle:"",openPromptUI:""},lora:{title:"Lora ",rawTitle:"LoraRaw",file:"",hash:"Hash",civitai:"Civitai",viewOnCivitai:" Civitai ",fetchFromCivitai:" Civitai ",modelNotFound:"",modelNotFoundTip:" Civitai ",name:"",nameTip:"",type:"",baseModel:"",trainedWords:"",trainedWordsTip:"",selectedWords:" {count} ",strengthMin:"",strengthMinTip:"",strengthMax:"",strengthMaxTip:"",promptWords:"",promptWordsTip:"",loraWorks:"Lora",strWeight:"",hideLora:"Lora",showLora:"Lora",baseModel:"",skipClip:"",seeLoraRaw:"LoraRaw",addDiyFiled:"",getCivitData:"Civitai",copy:""},tagManager:{deletePrimaryCategoryConfirm:" {name} ",deleteGroupConfirm:" {name} ",deleteTagConfirm:" {name} ",windowTitle:"",categories:"",groups:"",selectCategory:"",selectGroup:"",addPrimaryCategory:"",addGroup:"",editPrimaryCategory:"",editGroup:"",editTag:"",categoryName:"",categoryNamePlaceholder:"",categoryNameRequired:"",groupName:"",groupNamePlaceholder:"",groupNameRequired:"",addTag:"Tag",text:"Tag",textPlaceholder:"Tag",description:"Tag",descriptionPlaceholder:"Tag",textRequired:"TagTag",favourRequired:"TagTag",backgroundColor:"",colorPickerTitle:"",opacity:"",searchPlaceholder:"Tag...",noResults:"",searchInCategory:"",searchInTag:"Tag",save:"",cancel:"",confirm:"",delete:"",addSubCategory:"",editSubCategory:"",subCategoryName:"",subCategoryNamePlaceholder:"",subCategoryNameRequired:"",deleteConfirmTitle:"",deleteConfirmMessage:"{type}",deleteSuccess:"",deleteFailed:"",saveSuccess:"",saveFailed:"",colorPickerAlpha:"",colorPickerHex:"",colorPreview:"",dragToSort:"",searchTags:"",noTagsFound:"",noGroupsFound:"",noCategoriesFound:"",refresh:"",refreshing:"...",refreshSuccess:"",refreshFailed:"",search:"",searching:"...",searchResult:"",searchInPath:": {path}",category:"",group:"",tag:"",resultType:{category:"",group:"",tag:""},hasDeleteAction:"",deleteSelected:"",confirmDeleteSelected:"",cancelDelete:"",moveTag:"",targetTag:"",movePosition:"",moveBefore:"",moveAfter:"",editTag:"",deleteTag:"",editGroupMode:"",exitEditMode:"",autoAddSearchTag:"Tag",importTags:"Tag",share:"",delete:"",edit:"",outputSuccess:"",noTagsSelected:"Tag",shareSelected:"Tag",batchShare:"Tag",cancelShare:"",moveGroup:"",targetGroup:"",moveGroupBefore:"",moveGroupAfter:"",importDanbooru:"",modifyTabSize:"",tabSizeConfig:"",primaryTabConfig:"",groupTabConfig:"",tabWidth:"",tabHeight:"",fontSize:"",fitContent:"",customWidth:"",resetDefault:"",tabSizeConfigSaved:"",tabSizeConfigSaveFailed:""},loraManager:{windowTitle:"Lora",modelWeight:"",textEncoderWeight:"",all:"",root:"",refresh:"",cacheAll:"Lora",searchPlaceholder:"Lora...",prevPage:"",nextPage:"",noResults:"",loadingMore:"...",noMoreData:""},message:{copySuccess:"",copyFailed:"",saveSuccess:"",saveFailed:"",deleteSuccess:"",deleteFailed:"",operationSuccess:"",operationFailed:"",networkError:"",unknownError:"",refreshSuccess:"",refreshFailed:"",loadingData:"...",dataLoaded:"",editSuccess:"",editFailed:"",addSuccess:"",addFailed:"",addFavoriteSuccess:"",addFavoriteIsExist:"",error:"",editNameExist:"",moveSuccess:"",moveFailed:"",setLanguageSuccess:"",setLanguageFailed:"",startPanelSuccess:"",startPanelFailed:"",isLoading:"",loaddingPrc:" {name}%",loaddingSuccess:"",noFinishKuo:"",getTranslaterFail:"",applyTranslaterFail:"",applyToTranslaterFail:"",applyTranslaterSuccess:"",tranlaterPackageInstallFail:"",tranlaterPackageInstallSuccess:"",translaterTestFail:"",installPackageSuccess:"",installPackageFail:"",loadFailed:"",jsonErrorMesg:"JSON",pleaseAddSub:"",pleaseAddMainCeb:"",pleaseSelectGroup:"",isLoadingPleaseWait:"",shareGroupError:"",shareTagError:"Tag"},history:{title:"",search_placeholder:"...",search:"",windowTitle:"",favorites:"",history:"",refresh:"",refresh_history:"",refresh_favorites:"",add_to_favorites:"",delete_history:"",use_item:"",add_new:"",bulk_delete:"",deleteHistoryConfirm:" {name} ",deleteFavoriteConfirm:" {name} ",confirmDeleteSelected:"",cancel_delete:"",sure_delete:"",deleteSelected:"",dialog:{add_tag:"",edit_tag:"",name:"",name_placeholder:"",tag:"",tag_placeholder:"",background_color:"",background_color_placeholder:"",edit_favorite:"",delete_favorite:""},edit_favorite:"",delete_favorite:"",use_favorite:""},floatingBall:{promptBox:"",tagManager:"",loraManager:"Lora",aiWindow:"AI",restoreWindow:"",openNodeListWindow:"",tranToWeb:"",openSetting:""},aiWindow:{windowTitle:"AI",newChat:"",chatName:"",thinking:"...",send:"",inputMessage:"..."},translaterService:{niutrans:"",mymemory:"MyMemory",alibaba:"",baidu:"",modernmt:"ModernMT",volcengine:"",iciba:"",iflytek:"",google:"",bing:"",lingvanex:"Lingvanex",yandex:"Yandex",itranslate:"iTranslate",systran:"SYSTRAN",argos:"Argos",apertium:"Apertium",reverso:"Reverso",deepl:"DeepL",cloudtranslation:"",qqtransmart:"",translatecom:"Translate.com",sogou:"",tilde:"Tilde",caiyun:"",qqfanyi:"",translateme:"TranslateMe",papago:"Papago",mirai:"",youdao:"",iflyrec:"",hujiang:"",yeekit:"",languagewire:"LanguageWire",elia:"Elia",judic:"Judic",mglip:"",utibet:""},translaterLanguage:{english:"",chinese:"",arabic:"",russian:"",french:"",german:"",spanish:"",portuguese:"",italian:"",japanese:"",korean:"",greek:"",dutch:"",hindi:"",turkish:"",malay:"",thai:"",vietnamese:"",indonesian:"",hebrew:"",polish:"",mongolian:"",czech:"",hungarian:"",estonian:"",bulgarian:"",danish:"",finnish:"",romanian:"",swedish:"",slovenian:"","persian/farsi":"/",bosnian:"",serbian:"",fijian:"",filipino:"",haitiancreole:"",catalan:"",croatian:"",latvian:"",lithuanian:"",urdu:"",ukrainian:"",welsh:"",tahiti:"",tongan:"",swahili:"",samoan:"",slovak:"",afrikaans:"",norwegian:"",bengali:"",malagasy:"",maltese:"","queretaro otomi":"","klingon/tlhingan hol":"",gujarati:"",tamil:"",telugu:"",punjabi:"",amharic:"",azerbaijani:"",bashkir:"",belarusian:"",cebuano:"",chuvash:"",esperanto:"",basque:"",irish:""},utils:{tranToWeb:"HTML",dropOrPasteImage:"",downloadHtml:"HTML",copyHtml:"HTML",copySuccess:"HTML",copyFailed:"HTML",clear:""},importDialog:{title:"Tag",sure:"",cleanAll:"",dumpSQL:"SQL",uploadSQL:"SQL",setMainCeb:"",setSubCeb:"",addTag:"Tag",fromJSONImput:"JSONTag",fromTxtInput:"TXTTag",fromYmalInput:"YAMLTag",selectMainCeb:"",selectSubCeb:"",selectGroup:"",sureSelect:"",pleaseAddGroupName:"",pleaseAddSubGroupName:"",pleaseFullRequest:"",successImport:"",importFail:"",dumpOnlySQL:"TagSQL",settingOutputName:"",sureYes:"",cancel:"",edit:"",delete:"",add:"Tag",pleaseMainCebUuid:"UUID",pleaseSubGroupUuid:"UUID",pleaseSubGroup:"",pleaseMainCeb:"",translater:"",tips1:"",tips1text:"B",tips2:"Tag",tips2text:"GitHub",tips3:"",tips3text:"",selectTitle:"",selectedCategories:"",clearAll:"",primaryCategories:"",subCategories:"",noSelectedCategories:"",selectCategory:"",selectSubcategory:"",sureSelect:""},randomUtils:{title:"Tag",generalSettings:"",totalTags:"Tag",rules:"",addRule:"",rule:"",range:"",tagType:"",category:"Tag",specificTags:"",selectCategory:"",addTagPlaceholder:"",addTag:"",testRandom:"",generatedTags:"",selectTagGroup:"Tag",ruleTemplates:"",saveAsTemplate:"",selectTemplate:"",applyTemplate:"",templateNamePlaceholder:"",templateNameRequired:"",templateSaved:"",templateApplied:"",errorSavingTemplates:"",save:"",cancel:"",editTemplate:"",deleteTemplate:"",confirmDeleteTemplate:"",templateDeleted:"",templateUpdated:"",errorUpdatingTemplate:"",errorLoadingTemplate:"",errorDeletingTemplate:"",errorApplyingTemplate:"",pleaseChooseTemplate:"",errorSavingTemplate:"",newTemplate:"",rulesReminder:"1"},danbooruManager:{title:"Danbooru",controle:"",translatePlaceholder:"",searchPlaceholder:"Danbooru...",pageShow:":",pageLimit:"",hot:"",aliases:"",sureBatchDelete:"",sureBatchDeleteTips1:"",sureBatchDeleteTips2:"",sureDelete:"",import:"Danbooru",importBatchTitle:"Danbooru",importTitle:"Danbooru ",add:"Danbooru",edit:"Danbooru"}},s2={promptBox:{placeholder:"Please enter text...",delete:"Delete",newline:"New Line",tab:"Tab",windowTitle:"WeiLin Prompt UI Window "+ho,windowTitleGlobal:"WeiLin Global Prompt UI Window "+ho,translate:"Translate",translatePlaceholder:"Please enter the text to be translated",weight:"Weight",weightPlaceholder:"Please enter the weight",addBracket:"Add Bracket",removeLayer:"Remove Bracket",hiddenHint:"Double-click to show",tagTips:"Double-click the left mouse button to mask the Tag<br>click the Tag to edit<br>and drag the Tag to drag",oneClickRandomTag:"one Click Random Tag",oneClickCleanAll:"one Click Clean All",randomTagSettings:"setting Random Tag",oneClickTranslate:"one Click Translate Tag",modelWeight:"Model Weight",textWeight:"Text Weight",favour:"Favour",lineToken:"Line Break",addLineToken:"Add Line Break Token",settings:{title:"Settings",cancel:"Cancel",save:"Save",translator:"Translator",sourceLanguage:"Source Language",targetLanguage:"Target Language",chinese_simplified:"Chinese Simplified",english:"English",close:"Close",auto_detect:"Auto Detect",setting_floating_ball:"Setting Floating Ball",setting_prompt_box:"Setting Prompt Box",enablePromptCommaShow:"Show Prompt Comma",floatingBallCount:"Floating Ball Count",floatingBallCountPlaceholder:"Please enter the number of floating balls",floatingBallSize:"Width of suspended ball",floatingBallSizePlaceholder:"Please enter the width of the suspension ball",floatingBallHeight:"Height of suspended ball",floatingBallHeightPlaceholder:"Please input the height of the suspension ball",enableFloatingBall:"Enable Floating Ball",enableCommaConversion:"Enable Comma Conversion",enablePeriodConversion:"Enable Period Conversion",enableBracketConversion:"Enable Bracket Conversion",enableAngleBracketConversion:"Enable Angle Bracket Conversion",enableUnderscoreToBracket:"Enable Underscore to Bracket",setting_openai_box:"OpenAI Settings",openai_api_key:"API Key",openai_api_key_placeholder:"Please enter API Key",openai_api_key_save:"Save",openaiSettings:"OpenAI Settings",openaiSettings_api_key:"API Key",openaiSettings_api_key_placeholder:"Please enter API Key",openaiSettings_api_key_save:"Save",openai_base_url:"Base URL",openai_base_url_placeholder:"Please enter Base URL",openai_model:"Model",openai_model_placeholder:"Please enter Model",not_set:"Not Set",edit:"Edit",delete:"Delete",selectedOpenaiConfig:"Selected OpenAI Config",addNewConfig:"Add New Config",setting_sponsor_me:"Sponsor Me",sponsorMe:"Sponsor Me",sponsorMeTip:"Sponsor Me, Support Me to Continue Development",sponsorMeLink:"Unique Sponsor Link https://afdian.com/a/weilin9999",setting_start_panel:"Start Panel",startPanel:"Start Panel",startPanelTip:"Click Start Panel, after successful startup, the panel page will be automatically opened",selectTranslater:"select translater",selectOptionNetworkTranslater:"Three party online translation",selectOptionPythonTranslater:"Translation Library Translation",apply:"Apply",selectOptionNetworkTranslaterTitle:"Three party network translation settings",selectOptionPythonTranslaterTitle:"Translation library settings",selectOptionNetworkTranslaterInfo:"The third-party tool used is (only for online translation)",selectOptionPythonTranslaterInfo:"The translation package used is translators",install:"Install",nowTranlaterPackageState:"now transtler package state:",tranlaterPackageStateTrue:"installed",tranlaterPackageStateFlase:"not installed",installed:"is installed ....",installTranslaterPackageInfo:"Currently installing translation library, please do not close the window! Wait for installation to complete",translaterSetting:"Translation Settings",chooseTranslaterSetting:"Choose a translation service:",translaterLangSourceSetting:"Translation language:",translaterLangTargeSetting:"Translation target language:",saveTranslaterSetting:"Save Settings",testTranslaterTitle:"Test translation",inputTestTranslater:"Enter translation content:",outPutTestTranslater:"Translation result:",testingTranslater:"Test translation",inputTestTranslaterPlaceholder:"Please enter the content to be translated",outPutTestTranslaterPlaceholder:"The translation result will be displayed here",errorPrompt:"Read the prompt node failed",skinSetting:"skin setting",defaultSkin:"default skin",customSkin:"custom skin",uploadSkin:"upload skin",bgSetting:"background setting",gradientBg:"gradient color",transparentBg:"transparent",gradientColor:"gradient color select",borderRadius:"border radius",resetToDefault:"reset to default"}},controls:{language:"Language",settings:"Settings",switchTheme:"Switch Theme",darkMode:"Dark Mode",lightMode:"Light Mode",tagManager:"Tag Manager",loraStack:"Lora Stack",loraManager:"Lora Manager",history:"History",addLora:"Add Lora",removeLora:"Remove Lora",lookOnLora:"Look On Lora",aiChat:"AI Chat",github:"Github Home",shareCloudData:"Share Cloud Data",tutorialVideo:"Tutorial Video",sponsor:"Sponsor Me",danbooruManager:"danbooru Manager"},theme:{toggle:"Switch Theme"},lora:{title:"Lora Information",rawTitle:"LoraRaw",file:"File",hash:"Hash",civitai:"Civitai",viewOnCivitai:"View on Civitai",fetchFromCivitai:"Fetch from Civitai",modelNotFound:"Model not found",modelNotFoundTip:"The model was not found on Civitai. It might be private or deleted",name:"Name",nameTip:"Display name of the model",type:"Type",baseModel:"Base Model",trainedWords:"Trained Words",trainedWordsTip:"Keywords used in model training, click to select for copying",selectedWords:"{count} words selected",strengthMin:"Min Strength",strengthMinTip:"Recommended minimum strength value",strengthMax:"Max Strength",strengthMaxTip:"Recommended maximum strength value",promptWords:"Prompt Words",promptWordsTip:"Recommended prompt words when using this model",loraWorks:"Lora Prompt Words",strWeight:"Text Strength Weight",hideLora:"Disable Lora",showLora:"Enable Lora",baseModel:"Base Model",skipClip:"Clip Skip",seeLoraRaw:"LoraRaw",addDiyFiled:"Add DIY Filed",getCivitData:"Get Civitai Data",copy:"Copy"},common:{confirmDelete:"Confirm Delete",delete:"Delete",cancel:"Cancel",confirm:"Confirm",edit:"Edit",save:"Save",refresh:"Refresh",copy:"Copy",copySuccess:"Copied successfully",copyFailed:"Copy failed",windowSize:"Adjust window size",showMore:"show more",showLess:"show less"},nodeListWindow:{windowTitle:"Node List",openPromptUI:"Open Prompt UI"},tagManager:{deletePrimaryCategoryConfirm:"Are you sure you want to delete category {name}?",deleteGroupConfirm:"Are you sure you want to delete group {name}?",deleteTagConfirm:"Are you sure you want to delete tag {name}?",windowTitle:"Tag Manager",categories:"Categories",groups:"Groups",selectCategory:"Please select a category",selectGroup:"Please select a group",addPrimaryCategory:"Add Category",addGroup:"Add Group",editPrimaryCategory:"Edit Category",editGroup:"Edit Group",editTag:"Edit Tag",categoryName:"Category Name",categoryNamePlaceholder:"Enter category name",categoryNameRequired:"Category name is required",groupName:"Group Name",groupNamePlaceholder:"Enter group name",groupNameRequired:"Group name is required",addTag:"Add Tag",text:"Tag Description",textPlaceholder:"Enter tag Description",description:"Tag",descriptionPlaceholder:"Enter tag",textRequired:"Tag and Tag description cannot be empty",favourRequired:"Tag and Tag description cannot be empty, and a group must be selected",backgroundColor:"Background Color",colorPickerTitle:"Select Color",opacity:"Opacity",searchPlaceholder:"Search tags...",noResults:"No results found",searchInCategory:"in category",searchInTag:"in tag",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",addSubCategory:"Add Sub-category",editSubCategory:"Edit Sub-category",subCategoryName:"Sub-category Name",subCategoryNamePlaceholder:"Enter sub-category name",subCategoryNameRequired:"Sub-category name is required",deleteConfirmTitle:"Confirm Delete",deleteConfirmMessage:"This action will permanently delete this {type}. Continue?",deleteSuccess:"Deleted successfully",deleteFailed:"Delete failed",saveSuccess:"Saved successfully",saveFailed:"Save failed",colorPickerAlpha:"Opacity",colorPickerHex:"Hex Color Value",colorPreview:"Color Preview",dragToSort:"Drag to Sort",searchTags:"Search Tags",noTagsFound:"No tags found",noGroupsFound:"No groups found",noCategoriesFound:"No categories found",refresh:"Refresh",refreshing:"Refreshing...",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",search:"Search",searching:"Searching...",searchResult:"Search Result",searchInPath:"Located in: {path}",category:"Category",group:"Group",tag:"Tag",resultType:{category:"Category",group:"Group",tag:"Tag"},hasDeleteAction:"Batch Delete",deleteSelected:"Delete Selected",confirmDeleteSelected:"Are you sure you want to delete the selected tags?",cancelDelete:"Cancel Delete",moveTag:"Move Tag",targetTag:"Target Tag",movePosition:"Move Position",moveBefore:"Move Before",moveAfter:"Move After",editTag:"Edit Tag",deleteTag:"Delete Tag",editGroupMode:"Edit Group Mode",exitEditMode:"Exit Edit Mode",autoAddSearchTag:"Auto Add Search Tag With Prompt",importTags:"Import Tags",share:"Share",delete:"Delete",edit:"Edit",outputSuccess:"Share successfully",noTagsSelected:"No share tags selected",shareSelected:"Share selected Tag",batchShare:"Batch Share Tag",cancelShare:"Cancel Share",moveGroup:"Move Group",targetGroup:"Target Group",moveGroupBefore:"Move Before",moveGroupAfter:"Move After",importDanbooru:"Batch import",modifyTabSize:"Modify Tag Size",tabSizeConfig:"Tag Size Configuration",primaryTabConfig:"Primary Category Tab Configuration",groupTabConfig:"Group Category Tab Configuration",tabWidth:"Tab Width",tabHeight:"Tab Height",fontSize:"Font Size",fitContent:"Fit Content",customWidth:"Custom Width",resetDefault:"Reset to Default",tabSizeConfigSaved:"Tag size configuration saved",tabSizeConfigSaveFailed:"Failed to save tag size configuration"},loraManager:{windowTitle:"Lora Manager",modelWeight:"Model Weight",textEncoderWeight:"Text Encoder Weight",all:"All",root:"Root",refresh:"Refresh",cacheAll:"Cache all Lora information",searchPlaceholder:"Search Lora...",noResults:"No results found",prevPage:"prev page",nextPage:"next page",loadingMore:"Loadding more ...",noMoreData:"No more data"},message:{copySuccess:"Copy successful",copyFailed:"Copy failed",saveSuccess:"Save successful",saveFailed:"Save failed",deleteSuccess:"Delete successful",deleteFailed:"Delete failed",operationSuccess:"Operation successful",operationFailed:"Operation failed",networkError:"Network error",unknownError:"Unknown error",refreshSuccess:"Refresh successful",refreshFailed:"Refresh failed",loadingData:"Loading data...",dataLoaded:"Data loaded",editSuccess:"Edit successful",editFailed:"Edit failed",addSuccess:"Add successful",addFailed:"Add failed",addFavoriteSuccess:"Added to favorites",addFavoriteIsExist:"Added to favorites",error:"Error",moveSuccess:"Move successful",moveFailed:"Move failed",setLanguageSuccess:"Set language successful",setLanguageFailed:"Set language failed",startPanelSuccess:"Start panel successful",startPanelFailed:"Start panel failed",isLoading:"Loading...",loaddingPrc:"Execution progress {name}%",loaddingSuccess:"All loaded successfully",noFinishKuo:"The parentheses are incomplete. Please check the input",getTranslaterFail:"Get translator failed",applyTranslaterFail:"Apply translator failed",applyToTranslaterFail:"Switching to a translation library requires installing a translation library. Please install the translation library first and then apply the settings",applyTranslaterSuccess:"Apply translator successful",tranlaterPackageInstallFail:"Waiting for installation timeout, please check the background installation status. If the installation is successful, click install again to verify",tranlaterPackageInstallSuccess:"Successfully installed translation package",translaterTestFail:"Translation failed, please try using another translation service",installPackageSuccess:"Successfully installed translation package",installPackageFail:"Failed to install translation package, please check the background installation status",loadFailed:"load failed",jsonErrorMesg:"The format of the JSON file is incorrect",pleaseAddSub:"Please add the secondary classification first",pleaseAddMainCeb:"Please add the first-level category first",pleaseSelectGroup:"Please select the complete grouping path",isLoadingPleaseWait:"It is being executed. Please check the progress in the background",shareGroupError:"Failed to share and failed to obtain group information",shareTagError:"Failed to share and failed to obtain group tag information"},cloudWindow:{windowTitle:"Share Cloud Window",back:"Back",currentPath:"Current Path",tagDatabase:"Tag Database",danbooruDatabase:"Danbooru Database",open:"Open Folder",installed:"Installed",install:"Install",installing:"Installing..."},history:{title:"History",search_placeholder:"Search history...",windowTitle:"History",search:"Search",favorites:"Favorites",history:"History",refresh:"Refresh",refresh_history:"Refresh history",refresh_favorites:"Refresh favorites",add_to_favorites:"Add to favorites",delete_history:"Delete history",use_item:"Use",add_new:"Add new",bulk_delete:"Bulk delete",deleteHistoryConfirm:"Are you sure you want to delete history {name}?",deleteFavoriteConfirm:"Are you sure you want to delete favorite {name}?",confirmDeleteSelected:"Are you sure you want to delete selected information?",cancel_delete:"Cancel delete",sure_delete:"Sure delete",deleteSelected:"Delete selected",dialog:{add_tag:"Add favorite",edit_tag:"Edit favorite",name:"Name",name_placeholder:"Please enter name",tag:"Tag",tag_placeholder:"Please enter tag",background_color:"Background color",background_color_placeholder:"Please select background color",edit_favorite:"Edit favorite",delete_favorite:"Delete favorite"},edit_favorite:"Edit favorite",delete_favorite:"Delete favorite",use_favorite:"Use favorite"},floatingBall:{promptBox:"open Global Prompt Box",tagManager:"open Tag Manager",loraManager:"open Lora Manager",aiWindow:"open AI Chat",restoreWindow:"reset all windows",openNodeListWindow:"open Node List",tranToWeb:"Image to Web Utils",openSetting:"open Setting"},aiWindow:{windowTitle:"AI Chat Window",newChat:"New Chat",chatName:"Chat",thinking:"Thinking...",send:"Send",inputMessage:"Enter your message..."},translaterService:{niutrans:"niutrans",mymemory:"mymemory",alibaba:"alibaba",baidu:"baidu",modernmt:"modernmt",volcengine:"volcengine",iciba:"iciba",iflytek:"iflytek",google:"google",bing:"bing",lingvanex:"lingvanex",yandex:"yandex",itranslate:"itranslate",systran:"systran",argos:"argos",apertium:"apertium",reverso:"reverso",deepl:"deepl",cloudtranslation:"cloudtranslation",qqtransmart:"qqtransmart",translatecom:"translatecom",sogou:"sogou",tilde:"tilde",caiyun:"caiyun",qqfanyi:"qqfanyi",translateme:"translateme",papago:"papago",mirai:"mirai",youdao:"youdao",iflyrec:"iflyrec",hujiang:"hujiang",yeekit:"yeekit",languagewire:"languagewire",elia:"elia",judic:"judic",mglip:"mglip",utibet:"utibet"},translaterLanguage:{english:"english",chinese:"chinese",arabic:"arabic",russian:"russian",french:"french",german:"german",spanish:"spanish",portuguese:"portuguese",italian:"italian",japanese:"japanese",korean:"korean",greek:"greek",dutch:"dutch",hindi:"hindi",turkish:"turkish",malay:"malay",thai:"thai",vietnamese:"vietnamese",indonesian:"indonesian",hebrew:"hebrew",polish:"polish",mongolian:"mongolian",czech:"czech",hungarian:"hungarian",estonian:"estonian",bulgarian:"bulgarian",danish:"danish",finnish:"finnish",romanian:"romanian",swedish:"swedish",slovenian:"slovenian","persian/farsi":"persian/farsi",bosnian:"bosnian",serbian:"serbian",fijian:"fijian",filipino:"filipino",haitiancreole:"haitiancreole",catalan:"catalan",croatian:"croatian",latvian:"latvian",lithuanian:"lithuanian",urdu:"urdu",ukrainian:"ukrainian",welsh:"welsh",tahiti:"tahiti",tongan:"tongan",swahili:"swahili",samoan:"samoan",slovak:"slovak",afrikaans:"afrikaans",norwegian:"norwegian",bengali:"bengali",malagasy:"malagasy",maltese:"maltese","queretaro otomi":"queretaro otomi","klingon/tlhingan hol":"klingon/tlhingan hol",gujarati:"gujarati",tamil:"tamil",telugu:"telugu",punjabi:"punjabi",amharic:"amharic",azerbaijani:"azerbaijani",bashkir:"bashkir",belarusian:"belarusian",cebuano:"cebuano",chuvash:"chuvash",esperanto:"esperanto",basque:"basque",irish:"irish"},utils:{tranToWeb:"Image to HTML",dropOrPasteImage:"Drop or paste image here",downloadHtml:"Download HTML",copyHtml:"Copy HTML",copySuccess:"HTML copied to clipboard",copyFailed:"Failed to copy HTML",clear:"Clear"},importDialog:{title:"Batch import of Tags",sure:"Confirm and import",cleanAll:"Empty all",dumpSQL:"Export All SQL",uploadSQL:"Upload the original SQL file",setMainCeb:"Set up a first-level classification",setSubCeb:"Set up secondary classification",addTag:"Add Tag",fromJSONImput:"Import tags from the JSON file",fromTxtInput:"Batch import tags from TXT files",fromYmalInput:"Batch import tags from YMAL files",selectMainCeb:"Select the first-level classification",selectSubCeb:"Select the secondary classification",selectGroup:"Select the existing classification",sureSelect:"Confirm the selection",pleaseAddGroupName:"Please fill in the name of the first-level classification",pleaseAddSubGroupName:"Please fill in the name of the secondary classification",pleaseFullRequest:"Please fill in the information of the first-level and second-level classifications completely",successImport:"Import successful",importFail:"Import failed",dumpOnlySQL:"Only export the SQL of the Tag",settingOutputName:"Set the name of the export file",sureYes:"Sure",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add Tag",pleaseMainCebUuid:"The original UUID of the first-level division is only required for incremental updates and cannot be modified",pleaseSubGroupUuid:"The secondary division of the original UUID is only required for incremental updates and cannot be modified",pleaseSubGroup:"Secondary classification name",pleaseMainCeb:"First-level classification name",translater:"Description",tips1:"Usage Tutorial:",tips1text:"Bilibili video tutorial",tips2:"Tag Cloud Warehouse:",tips2text:"GitHub repository",tips3:"Online batch editing:",tips3text:"Online editor",selectTitle:"Select Category",selectedCategories:"Selected Categories",clearAll:"Clear All",primaryCategories:"Primary Categories",subCategories:"Sub Categories",noSelectedCategories:"No categories selected",selectCategory:"Select this category",selectSubcategory:"Select this subcategory",sureSelect:"Confirm Selection"},randomUtils:{title:"Random Tag Rules Settings",generalSettings:"General Settings",totalTags:"Random Tag Total Number (If the rule range exceeds the total quantity, the maximum range is calculated by the total quantity)",rules:"Rules",addRule:"Add Rule",rule:"Rule",range:"Range",tagType:"Tag Type",category:"Tag Category",specificTags:"Specific Tags",selectCategory:"Select Category",addTagPlaceholder:"Enter tag and press Enter",addTag:"Add Tag",testRandom:"Test Random",generatedTags:"Generated Tags",selectTagGroup:"Select Tag Group",ruleTemplates:"Rule Templates",saveAsTemplate:"Save as Template",selectTemplate:"Select Template",applyTemplate:"Apply Template",templateNamePlaceholder:"Enter template name",templateNameRequired:"Template name is required",templateSaved:"Template saved",templateApplied:"Template applied",errorSavingTemplates:"Error saving templates",save:"Save",cancel:"Cancel",editTemplate:"Edit Name",deleteTemplate:"Delete",confirmDeleteTemplate:"Are you sure you want to delete this template?",templateDeleted:"Template deleted",templateUpdated:"Template name updated",errorUpdatingTemplate:"Update template failed",errorLoadingTemplate:"Load template failed",errorDeletingTemplate:"Delete template failed",pleaseChooseTemplate:"Please choose a template",errorApplyingTemplate:"Apply template failed",errorSavingTemplate:"Save template failed",newTemplate:"New Template",rulesReminder:"Reminder: The range of the first rule must start at 1! If the range exceeds the total number of random, it will simply display all not random!"},danbooruManager:{title:"Danbooru Manager",controle:"Controle",translatePlaceholder:"Please enter the tag to be translated",searchPlaceholder:"Input need search danbooru tag",pageShow:"Display per page:",pageLimit:"article",hot:"hot",aliases:"aliases",sureBatchDelete:"Batch deletion confirmation",sureBatchDeleteTips1:"You are sure you want to delete the selected one",sureBatchDeleteTips2:"A label? This operation is irrevocable.",sureDelete:"Confirm deletion",import:"Import in Danbooru format",importBatchTitle:"Batch import Danbooru data",importTitle:"Danbooru Import data display",add:"Add Danbooru Tag",edit:"Edit Danbooru Tag"}};/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let qf;const Ol=e=>qf=e,Gf=Symbol();function $i(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var _s;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(_s||(_s={}));function l2(){const e=Cr(!0),t=e.run(()=>y({}));let o=[],n=[];const a=Fr({install(s){Ol(a),a._a=s,s.provide(Gf,a),s.config.globalProperties.$pinia=a,n.forEach(l=>o.push(l)),n=[]},use(s){return this._a?o.push(s):n.push(s),this},_p:o,_a:null,_e:e,_s:new Map,state:t});return a}const Qf=()=>{};function Yf(e,t,o,n=Qf){e.push(t);const a=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),n())};return!o&&Nu()&&Dm(a),a}function Ta(e,...t){e.slice().forEach(o=>{o(...t)})}const r2=e=>e(),Jf=Symbol(),Ai=Symbol();function Ii(e,t){e instanceof Map&&t instanceof Map?t.forEach((o,n)=>e.set(n,o)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const o in t){if(!t.hasOwnProperty(o))continue;const n=t[o],a=e[o];$i(a)&&$i(n)&&e.hasOwnProperty(o)&&!Rt(n)&&!ko(n)?e[o]=Ii(a,n):e[o]=n}return e}const i2=Symbol();function u2(e){return!$i(e)||!Object.prototype.hasOwnProperty.call(e,i2)}const{assign:Po}=Object;function c2(e){return!!(Rt(e)&&e.effect)}function d2(e,t,o,n){const{state:a,actions:s,getters:l}=t,r=o.state.value[e];let u;function d(){r||(o.state.value[e]=a?a():{});const c=lh(o.state.value[e]);return Po(c,s,Object.keys(l||{}).reduce((f,m)=>(f[m]=Fr(tt(()=>{Ol(o);const g=o._s.get(e);return l[m].call(g,g)})),f),{}))}return u=Kf(e,d,t,o,n,!0),u}function Kf(e,t,o={},n,a,s){let l;const r=Po({actions:{}},o),u={deep:!0};let d,c,f=[],m=[],g;const v=n.state.value[e];!s&&!v&&(n.state.value[e]={}),y({});let _;function w(z){let J;d=c=!1,typeof z=="function"?(z(n.state.value[e]),J={type:_s.patchFunction,storeId:e,events:g}):(Ii(n.state.value[e],z),J={type:_s.patchObject,payload:z,storeId:e,events:g});const ve=_=Symbol();Qe().then(()=>{_===ve&&(d=!0)}),c=!0,Ta(f,J,n.state.value[e])}const x=s?function(){const{state:J}=o,ve=J?J():{};this.$patch(ae=>{Po(ae,ve)})}:Qf;function A(){l.stop(),f=[],m=[],n._s.delete(e)}const W=(z,J="")=>{if(Jf in z)return z[Ai]=J,z;const ve=function(){Ol(n);const ae=Array.from(arguments),F=[],K=[];function ee(ne){F.push(ne)}function Q(ne){K.push(ne)}Ta(m,{args:ae,name:ve[Ai],store:P,after:ee,onError:Q});let te;try{te=z.apply(this&&this.$id===e?this:P,ae)}catch(ne){throw Ta(K,ne),ne}return te instanceof Promise?te.then(ne=>(Ta(F,ne),ne)).catch(ne=>(Ta(K,ne),Promise.reject(ne))):(Ta(F,te),te)};return ve[Jf]=!0,ve[Ai]=J,ve},T={_p:n,$id:e,$onAction:Yf.bind(null,m),$patch:w,$reset:x,$subscribe(z,J={}){const ve=Yf(f,z,J.detached,()=>ae()),ae=l.run(()=>et(()=>n.state.value[e],F=>{(J.flush==="sync"?c:d)&&z({storeId:e,type:_s.direct,events:g},F)},Po({},u,J)));return ve},$dispose:A},P=Zs(T);n._s.set(e,P);const G=(n._a&&n._a.runWithContext||r2)(()=>n._e.run(()=>(l=Cr()).run(()=>t({action:W}))));for(const z in G){const J=G[z];if(Rt(J)&&!c2(J)||ko(J))s||(v&&u2(J)&&(Rt(J)?J.value=v[z]:Ii(J,v[z])),n.state.value[e][z]=J);else if(typeof J=="function"){const ve=W(J,z);G[z]=ve,r.actions[z]=J}}return Po(P,G),Po(at(P),G),Object.defineProperty(P,"$state",{get:()=>n.state.value[e],set:z=>{w(J=>{Po(J,z)})}}),n._p.forEach(z=>{Po(P,l.run(()=>z({store:P,app:n._a,pinia:n,options:r})))}),v&&s&&o.hydrate&&o.hydrate(P.$state,v),d=!0,c=!0,P}/*! #__NO_SIDE_EFFECTS__ */function f2(e,t,o){let n;const a=typeof t=="function";n=a?o:t;function s(l,r){const u=Wh();return l=l||(u?ro(Gf,null):null),l&&Ol(l),l=qf,l._s.has(e)||(a?Kf(e,t,n,l):d2(e,n,l)),l._s.get(e)}return s.$id=e,s}const Nl=f2("tag",()=>{const e=y([]),t=y({user_lang:"zh_CN"}),o=y(0);return{categories:e,setCategories:l=>{e.value=l},userSetting:t,setUserSetting:l=>{t.value=l},isFirstLoading:o,setisFirstLoading:l=>{o.value=l}}});function Xf(e,t){return function(){return e.apply(t,arguments)}}const{toString:p2}=Object.prototype,{getPrototypeOf:Mi}=Object,{iterator:Rl,toStringTag:Zf}=Symbol,Dl=(e=>t=>{const o=p2.call(t);return e[o]||(e[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),Fn=e=>(e=e.toLowerCase(),t=>Dl(t)===e),Pl=e=>t=>typeof t===e,{isArray:Sa}=Array,ys=Pl("undefined");function bs(e){return e!==null&&!ys(e)&&e.constructor!==null&&!ys(e.constructor)&&_n(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ep=Fn("ArrayBuffer");function g2(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ep(e.buffer),t}const m2=Pl("string"),_n=Pl("function"),tp=Pl("number"),ws=e=>e!==null&&typeof e=="object",h2=e=>e===!0||e===!1,Fl=e=>{if(Dl(e)!=="object")return!1;const t=Mi(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Zf in e)&&!(Rl in e)},v2=e=>{if(!ws(e)||bs(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},_2=Fn("Date"),y2=Fn("File"),b2=Fn("Blob"),w2=Fn("FileList"),x2=e=>ws(e)&&_n(e.pipe),T2=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_n(e.append)&&((t=Dl(e))==="formdata"||t==="object"&&_n(e.toString)&&e.toString()==="[object FormData]"))},S2=Fn("URLSearchParams"),[k2,C2,E2,L2]=["ReadableStream","Request","Response","Headers"].map(Fn),$2=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xs(e,t,{allOwnKeys:o=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Sa(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(bs(e))return;const s=o?Object.getOwnPropertyNames(e):Object.keys(e),l=s.length;let r;for(n=0;n<l;n++)r=s[n],t.call(null,e[r],r,e)}}function np(e,t){if(bs(e))return null;t=t.toLowerCase();const o=Object.keys(e);let n=o.length,a;for(;n-- >0;)if(a=o[n],t===a.toLowerCase())return a;return null}const ta=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,op=e=>!ys(e)&&e!==ta;function Oi(){const{caseless:e}=op(this)&&this||{},t={},o=(n,a)=>{const s=e&&np(t,a)||a;Fl(t[s])&&Fl(n)?t[s]=Oi(t[s],n):Fl(n)?t[s]=Oi({},n):Sa(n)?t[s]=n.slice():t[s]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&xs(arguments[n],o);return t}const A2=(e,t,o,{allOwnKeys:n}={})=>(xs(t,(a,s)=>{o&&_n(a)?e[s]=Xf(a,o):e[s]=a},{allOwnKeys:n}),e),I2=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),M2=(e,t,o,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),o&&Object.assign(e.prototype,o)},O2=(e,t,o,n)=>{let a,s,l;const r={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)l=a[s],(!n||n(l,e,t))&&!r[l]&&(t[l]=e[l],r[l]=!0);e=o!==!1&&Mi(e)}while(e&&(!o||o(e,t))&&e!==Object.prototype);return t},N2=(e,t,o)=>{e=String(e),(o===void 0||o>e.length)&&(o=e.length),o-=t.length;const n=e.indexOf(t,o);return n!==-1&&n===o},R2=e=>{if(!e)return null;if(Sa(e))return e;let t=e.length;if(!tp(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=e[t];return o},D2=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Mi(Uint8Array)),P2=(e,t)=>{const n=(e&&e[Rl]).call(e);let a;for(;(a=n.next())&&!a.done;){const s=a.value;t.call(e,s[0],s[1])}},F2=(e,t)=>{let o;const n=[];for(;(o=e.exec(t))!==null;)n.push(o);return n},B2=Fn("HTMLFormElement"),U2=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,n,a){return n.toUpperCase()+a}),ap=(({hasOwnProperty:e})=>(t,o)=>e.call(t,o))(Object.prototype),j2=Fn("RegExp"),sp=(e,t)=>{const o=Object.getOwnPropertyDescriptors(e),n={};xs(o,(a,s)=>{let l;(l=t(a,s,e))!==!1&&(n[s]=l||a)}),Object.defineProperties(e,n)},H2=e=>{sp(e,(t,o)=>{if(_n(e)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const n=e[o];if(_n(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},W2=(e,t)=>{const o={},n=a=>{a.forEach(s=>{o[s]=!0})};return Sa(e)?n(e):n(String(e).split(t)),o},V2=()=>{},z2=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function q2(e){return!!(e&&_n(e.append)&&e[Zf]==="FormData"&&e[Rl])}const G2=e=>{const t=new Array(10),o=(n,a)=>{if(ws(n)){if(t.indexOf(n)>=0)return;if(bs(n))return n;if(!("toJSON"in n)){t[a]=n;const s=Sa(n)?[]:{};return xs(n,(l,r)=>{const u=o(l,a+1);!ys(u)&&(s[r]=u)}),t[a]=void 0,s}}return n};return o(e,0)},Q2=Fn("AsyncFunction"),Y2=e=>e&&(ws(e)||_n(e))&&_n(e.then)&&_n(e.catch),lp=((e,t)=>e?setImmediate:t?((o,n)=>(ta.addEventListener("message",({source:a,data:s})=>{a===ta&&s===o&&n.length&&n.shift()()},!1),a=>{n.push(a),ta.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",_n(ta.postMessage)),J2=typeof queueMicrotask<"u"?queueMicrotask.bind(ta):typeof process<"u"&&process.nextTick||lp,Te={isArray:Sa,isArrayBuffer:ep,isBuffer:bs,isFormData:T2,isArrayBufferView:g2,isString:m2,isNumber:tp,isBoolean:h2,isObject:ws,isPlainObject:Fl,isEmptyObject:v2,isReadableStream:k2,isRequest:C2,isResponse:E2,isHeaders:L2,isUndefined:ys,isDate:_2,isFile:y2,isBlob:b2,isRegExp:j2,isFunction:_n,isStream:x2,isURLSearchParams:S2,isTypedArray:D2,isFileList:w2,forEach:xs,merge:Oi,extend:A2,trim:$2,stripBOM:I2,inherits:M2,toFlatObject:O2,kindOf:Dl,kindOfTest:Fn,endsWith:N2,toArray:R2,forEachEntry:P2,matchAll:F2,isHTMLForm:B2,hasOwnProperty:ap,hasOwnProp:ap,reduceDescriptors:sp,freezeMethods:H2,toObjectSet:W2,toCamelCase:U2,noop:V2,toFiniteNumber:z2,findKey:np,global:ta,isContextDefined:op,isSpecCompliantForm:q2,toJSONObject:G2,isAsyncFn:Q2,isThenable:Y2,setImmediate:lp,asap:J2,isIterable:e=>e!=null&&_n(e[Rl])};function Ye(e,t,o,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Te.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const rp=Ye.prototype,ip={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ip[e]={value:e}}),Object.defineProperties(Ye,ip),Object.defineProperty(rp,"isAxiosError",{value:!0}),Ye.from=(e,t,o,n,a,s)=>{const l=Object.create(rp);return Te.toFlatObject(e,l,function(u){return u!==Error.prototype},r=>r!=="isAxiosError"),Ye.call(l,e.message,t,o,n,a),l.cause=e,l.name=e.name,s&&Object.assign(l,s),l};const K2=null;function Ni(e){return Te.isPlainObject(e)||Te.isArray(e)}function up(e){return Te.endsWith(e,"[]")?e.slice(0,-2):e}function cp(e,t,o){return e?e.concat(t).map(function(a,s){return a=up(a),!o&&s?"["+a+"]":a}).join(o?".":""):t}function X2(e){return Te.isArray(e)&&!e.some(Ni)}const Z2=Te.toFlatObject(Te,{},null,function(t){return/^is[A-Z]/.test(t)});function Bl(e,t,o){if(!Te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,o=Te.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,w){return!Te.isUndefined(w[_])});const n=o.metaTokens,a=o.visitor||c,s=o.dots,l=o.indexes,u=(o.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(t);if(!Te.isFunction(a))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(Te.isDate(v))return v.toISOString();if(Te.isBoolean(v))return v.toString();if(!u&&Te.isBlob(v))throw new Ye("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(v)||Te.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,_,w){let x=v;if(v&&!w&&typeof v=="object"){if(Te.endsWith(_,"{}"))_=n?_:_.slice(0,-2),v=JSON.stringify(v);else if(Te.isArray(v)&&X2(v)||(Te.isFileList(v)||Te.endsWith(_,"[]"))&&(x=Te.toArray(v)))return _=up(_),x.forEach(function(W,T){!(Te.isUndefined(W)||W===null)&&t.append(l===!0?cp([_],T,s):l===null?_:_+"[]",d(W))}),!1}return Ni(v)?!0:(t.append(cp(w,_,s),d(v)),!1)}const f=[],m=Object.assign(Z2,{defaultVisitor:c,convertValue:d,isVisitable:Ni});function g(v,_){if(!Te.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+_.join("."));f.push(v),Te.forEach(v,function(x,A){(!(Te.isUndefined(x)||x===null)&&a.call(t,x,Te.isString(A)?A.trim():A,_,m))===!0&&g(x,_?_.concat(A):[A])}),f.pop()}}if(!Te.isObject(e))throw new TypeError("data must be an object");return g(e),t}function dp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Ri(e,t){this._pairs=[],e&&Bl(e,this,t)}const fp=Ri.prototype;fp.append=function(t,o){this._pairs.push([t,o])},fp.toString=function(t){const o=t?function(n){return t.call(this,n,dp)}:dp;return this._pairs.map(function(a){return o(a[0])+"="+o(a[1])},"").join("&")};function e_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pp(e,t,o){if(!t)return e;const n=o&&o.encode||e_;Te.isFunction(o)&&(o={serialize:o});const a=o&&o.serialize;let s;if(a?s=a(t,o):s=Te.isURLSearchParams(t)?t.toString():new Ri(t,o).toString(n),s){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class gp{constructor(){this.handlers=[]}use(t,o,n){return this.handlers.push({fulfilled:t,rejected:o,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Te.forEach(this.handlers,function(n){n!==null&&t(n)})}}const mp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},t_={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Ri,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Di=typeof window<"u"&&typeof document<"u",Pi=typeof navigator=="object"&&navigator||void 0,n_=Di&&(!Pi||["ReactNative","NativeScript","NS"].indexOf(Pi.product)<0),o_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",a_=Di&&window.location.href||"http://localhost",sn={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Di,hasStandardBrowserEnv:n_,hasStandardBrowserWebWorkerEnv:o_,navigator:Pi,origin:a_},Symbol.toStringTag,{value:"Module"})),...t_};function s_(e,t){return Bl(e,new sn.classes.URLSearchParams,{visitor:function(o,n,a,s){return sn.isNode&&Te.isBuffer(o)?(this.append(n,o.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function l_(e){return Te.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function r_(e){const t={},o=Object.keys(e);let n;const a=o.length;let s;for(n=0;n<a;n++)s=o[n],t[s]=e[s];return t}function hp(e){function t(o,n,a,s){let l=o[s++];if(l==="__proto__")return!0;const r=Number.isFinite(+l),u=s>=o.length;return l=!l&&Te.isArray(a)?a.length:l,u?(Te.hasOwnProp(a,l)?a[l]=[a[l],n]:a[l]=n,!r):((!a[l]||!Te.isObject(a[l]))&&(a[l]=[]),t(o,n,a[l],s)&&Te.isArray(a[l])&&(a[l]=r_(a[l])),!r)}if(Te.isFormData(e)&&Te.isFunction(e.entries)){const o={};return Te.forEachEntry(e,(n,a)=>{t(l_(n),a,o,0)}),o}return null}function i_(e,t,o){if(Te.isString(e))try{return(t||JSON.parse)(e),Te.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(o||JSON.stringify)(e)}const Ts={transitional:mp,adapter:["xhr","http","fetch"],transformRequest:[function(t,o){const n=o.getContentType()||"",a=n.indexOf("application/json")>-1,s=Te.isObject(t);if(s&&Te.isHTMLForm(t)&&(t=new FormData(t)),Te.isFormData(t))return a?JSON.stringify(hp(t)):t;if(Te.isArrayBuffer(t)||Te.isBuffer(t)||Te.isStream(t)||Te.isFile(t)||Te.isBlob(t)||Te.isReadableStream(t))return t;if(Te.isArrayBufferView(t))return t.buffer;if(Te.isURLSearchParams(t))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return s_(t,this.formSerializer).toString();if((r=Te.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Bl(r?{"files[]":t}:t,u&&new u,this.formSerializer)}}return s||a?(o.setContentType("application/json",!1),i_(t)):t}],transformResponse:[function(t){const o=this.transitional||Ts.transitional,n=o&&o.forcedJSONParsing,a=this.responseType==="json";if(Te.isResponse(t)||Te.isReadableStream(t))return t;if(t&&Te.isString(t)&&(n&&!this.responseType||a)){const l=!(o&&o.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(r){if(l)throw r.name==="SyntaxError"?Ye.from(r,Ye.ERR_BAD_RESPONSE,this,null,this.response):r}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sn.classes.FormData,Blob:sn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],e=>{Ts.headers[e]={}});const u_=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c_=e=>{const t={};let o,n,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),o=l.substring(0,a).trim().toLowerCase(),n=l.substring(a+1).trim(),!(!o||t[o]&&u_[o])&&(o==="set-cookie"?t[o]?t[o].push(n):t[o]=[n]:t[o]=t[o]?t[o]+", "+n:n)}),t},vp=Symbol("internals");function Ss(e){return e&&String(e).trim().toLowerCase()}function Ul(e){return e===!1||e==null?e:Te.isArray(e)?e.map(Ul):String(e)}function d_(e){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(e);)t[n[1]]=n[2];return t}const f_=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Fi(e,t,o,n,a){if(Te.isFunction(n))return n.call(this,t,o);if(a&&(t=o),!!Te.isString(t)){if(Te.isString(n))return t.indexOf(n)!==-1;if(Te.isRegExp(n))return n.test(t)}}function p_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,n)=>o.toUpperCase()+n)}function g_(e,t){const o=Te.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+o,{value:function(a,s,l){return this[n].call(this,t,a,s,l)},configurable:!0})})}let yn=class{constructor(t){t&&this.set(t)}set(t,o,n){const a=this;function s(r,u,d){const c=Ss(u);if(!c)throw new Error("header name must be a non-empty string");const f=Te.findKey(a,c);(!f||a[f]===void 0||d===!0||d===void 0&&a[f]!==!1)&&(a[f||u]=Ul(r))}const l=(r,u)=>Te.forEach(r,(d,c)=>s(d,c,u));if(Te.isPlainObject(t)||t instanceof this.constructor)l(t,o);else if(Te.isString(t)&&(t=t.trim())&&!f_(t))l(c_(t),o);else if(Te.isObject(t)&&Te.isIterable(t)){let r={},u,d;for(const c of t){if(!Te.isArray(c))throw TypeError("Object iterator must return a key-value pair");r[d=c[0]]=(u=r[d])?Te.isArray(u)?[...u,c[1]]:[u,c[1]]:c[1]}l(r,o)}else t!=null&&s(o,t,n);return this}get(t,o){if(t=Ss(t),t){const n=Te.findKey(this,t);if(n){const a=this[n];if(!o)return a;if(o===!0)return d_(a);if(Te.isFunction(o))return o.call(this,a,n);if(Te.isRegExp(o))return o.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,o){if(t=Ss(t),t){const n=Te.findKey(this,t);return!!(n&&this[n]!==void 0&&(!o||Fi(this,this[n],n,o)))}return!1}delete(t,o){const n=this;let a=!1;function s(l){if(l=Ss(l),l){const r=Te.findKey(n,l);r&&(!o||Fi(n,n[r],r,o))&&(delete n[r],a=!0)}}return Te.isArray(t)?t.forEach(s):s(t),a}clear(t){const o=Object.keys(this);let n=o.length,a=!1;for(;n--;){const s=o[n];(!t||Fi(this,this[s],s,t,!0))&&(delete this[s],a=!0)}return a}normalize(t){const o=this,n={};return Te.forEach(this,(a,s)=>{const l=Te.findKey(n,s);if(l){o[l]=Ul(a),delete o[s];return}const r=t?p_(s):String(s).trim();r!==s&&delete o[s],o[r]=Ul(a),n[r]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const o=Object.create(null);return Te.forEach(this,(n,a)=>{n!=null&&n!==!1&&(o[a]=t&&Te.isArray(n)?n.join(", "):n)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,o])=>t+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...o){const n=new this(t);return o.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[vp]=this[vp]={accessors:{}}).accessors,a=this.prototype;function s(l){const r=Ss(l);n[r]||(g_(a,l),n[r]=!0)}return Te.isArray(t)?t.forEach(s):s(t),this}};yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Te.reduceDescriptors(yn.prototype,({value:e},t)=>{let o=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[o]=n}}}),Te.freezeMethods(yn);function Bi(e,t){const o=this||Ts,n=t||o,a=yn.from(n.headers);let s=n.data;return Te.forEach(e,function(r){s=r.call(o,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function _p(e){return!!(e&&e.__CANCEL__)}function ka(e,t,o){Ye.call(this,e??"canceled",Ye.ERR_CANCELED,t,o),this.name="CanceledError"}Te.inherits(ka,Ye,{__CANCEL__:!0});function yp(e,t,o){const n=o.config.validateStatus;!o.status||!n||n(o.status)?e(o):t(new Ye("Request failed with status code "+o.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function m_(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function h_(e,t){e=e||10;const o=new Array(e),n=new Array(e);let a=0,s=0,l;return t=t!==void 0?t:1e3,function(u){const d=Date.now(),c=n[s];l||(l=d),o[a]=u,n[a]=d;let f=s,m=0;for(;f!==a;)m+=o[f++],f=f%e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),d-l<t)return;const g=c&&d-c;return g?Math.round(m*1e3/g):void 0}}function v_(e,t){let o=0,n=1e3/t,a,s;const l=(d,c=Date.now())=>{o=c,a=null,s&&(clearTimeout(s),s=null),e(...d)};return[(...d)=>{const c=Date.now(),f=c-o;f>=n?l(d,c):(a=d,s||(s=setTimeout(()=>{s=null,l(a)},n-f)))},()=>a&&l(a)]}const jl=(e,t,o=3)=>{let n=0;const a=h_(50,250);return v_(s=>{const l=s.loaded,r=s.lengthComputable?s.total:void 0,u=l-n,d=a(u),c=l<=r;n=l;const f={loaded:l,total:r,progress:r?l/r:void 0,bytes:u,rate:d||void 0,estimated:d&&r&&c?(r-l)/d:void 0,event:s,lengthComputable:r!=null,[t?"download":"upload"]:!0};e(f)},o)},bp=(e,t)=>{const o=e!=null;return[n=>t[0]({lengthComputable:o,total:e,loaded:n}),t[1]]},wp=e=>(...t)=>Te.asap(()=>e(...t)),__=sn.hasStandardBrowserEnv?((e,t)=>o=>(o=new URL(o,sn.origin),e.protocol===o.protocol&&e.host===o.host&&(t||e.port===o.port)))(new URL(sn.origin),sn.navigator&&/(msie|trident)/i.test(sn.navigator.userAgent)):()=>!0,y_=sn.hasStandardBrowserEnv?{write(e,t,o,n,a,s){const l=[e+"="+encodeURIComponent(t)];Te.isNumber(o)&&l.push("expires="+new Date(o).toGMTString()),Te.isString(n)&&l.push("path="+n),Te.isString(a)&&l.push("domain="+a),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function b_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function w_(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function xp(e,t,o){let n=!b_(t);return e&&(n||o==!1)?w_(e,t):t}const Tp=e=>e instanceof yn?{...e}:e;function na(e,t){t=t||{};const o={};function n(d,c,f,m){return Te.isPlainObject(d)&&Te.isPlainObject(c)?Te.merge.call({caseless:m},d,c):Te.isPlainObject(c)?Te.merge({},c):Te.isArray(c)?c.slice():c}function a(d,c,f,m){if(Te.isUndefined(c)){if(!Te.isUndefined(d))return n(void 0,d,f,m)}else return n(d,c,f,m)}function s(d,c){if(!Te.isUndefined(c))return n(void 0,c)}function l(d,c){if(Te.isUndefined(c)){if(!Te.isUndefined(d))return n(void 0,d)}else return n(void 0,c)}function r(d,c,f){if(f in t)return n(d,c);if(f in e)return n(void 0,d)}const u={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:r,headers:(d,c,f)=>a(Tp(d),Tp(c),f,!0)};return Te.forEach(Object.keys({...e,...t}),function(c){const f=u[c]||a,m=f(e[c],t[c],c);Te.isUndefined(m)&&f!==r||(o[c]=m)}),o}const Sp=e=>{const t=na({},e);let{data:o,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:l,auth:r}=t;t.headers=l=yn.from(l),t.url=pp(xp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),r&&l.set("Authorization","Basic "+btoa((r.username||"")+":"+(r.password?unescape(encodeURIComponent(r.password)):"")));let u;if(Te.isFormData(o)){if(sn.hasStandardBrowserEnv||sn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((u=l.getContentType())!==!1){const[d,...c]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...c].join("; "))}}if(sn.hasStandardBrowserEnv&&(n&&Te.isFunction(n)&&(n=n(t)),n||n!==!1&&__(t.url))){const d=a&&s&&y_.read(s);d&&l.set(a,d)}return t},x_=typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(o,n){const a=Sp(e);let s=a.data;const l=yn.from(a.headers).normalize();let{responseType:r,onUploadProgress:u,onDownloadProgress:d}=a,c,f,m,g,v;function _(){g&&g(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(c),a.signal&&a.signal.removeEventListener("abort",c)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function x(){if(!w)return;const W=yn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),P={data:!r||r==="text"||r==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:W,config:e,request:w};yp(function(G){o(G),_()},function(G){n(G),_()},P),w=null}"onloadend"in w?w.onloadend=x:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(x)},w.onabort=function(){w&&(n(new Ye("Request aborted",Ye.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new Ye("Network Error",Ye.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let T=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||mp;a.timeoutErrorMessage&&(T=a.timeoutErrorMessage),n(new Ye(T,P.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,e,w)),w=null},s===void 0&&l.setContentType(null),"setRequestHeader"in w&&Te.forEach(l.toJSON(),function(T,P){w.setRequestHeader(P,T)}),Te.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),r&&r!=="json"&&(w.responseType=a.responseType),d&&([m,v]=jl(d,!0),w.addEventListener("progress",m)),u&&w.upload&&([f,g]=jl(u),w.upload.addEventListener("progress",f),w.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(c=W=>{w&&(n(!W||W.type?new ka(null,e,w):W),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(c),a.signal&&(a.signal.aborted?c():a.signal.addEventListener("abort",c)));const A=m_(a.url);if(A&&sn.protocols.indexOf(A)===-1){n(new Ye("Unsupported protocol "+A+":",Ye.ERR_BAD_REQUEST,e));return}w.send(s||null)})},T_=(e,t)=>{const{length:o}=e=e?e.filter(Boolean):[];if(t||o){let n=new AbortController,a;const s=function(d){if(!a){a=!0,r();const c=d instanceof Error?d:this.reason;n.abort(c instanceof Ye?c:new ka(c instanceof Error?c.message:c))}};let l=t&&setTimeout(()=>{l=null,s(new Ye(`timeout ${t} of ms exceeded`,Ye.ETIMEDOUT))},t);const r=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),e=null)};e.forEach(d=>d.addEventListener("abort",s));const{signal:u}=n;return u.unsubscribe=()=>Te.asap(r),u}},S_=function*(e,t){let o=e.byteLength;if(o<t){yield e;return}let n=0,a;for(;n<o;)a=n+t,yield e.slice(n,a),n=a},k_=async function*(e,t){for await(const o of C_(e))yield*S_(o,t)},C_=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:o,value:n}=await t.read();if(o)break;yield n}}finally{await t.cancel()}},kp=(e,t,o,n)=>{const a=k_(e,t);let s=0,l,r=u=>{l||(l=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:d,value:c}=await a.next();if(d){r(),u.close();return}let f=c.byteLength;if(o){let m=s+=f;o(m)}u.enqueue(new Uint8Array(c))}catch(d){throw r(d),d}},cancel(u){return r(u),a.return()}},{highWaterMark:2})},Hl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Cp=Hl&&typeof ReadableStream=="function",E_=Hl&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ep=(e,...t)=>{try{return!!e(...t)}catch{return!1}},L_=Cp&&Ep(()=>{let e=!1;const t=new Request(sn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Lp=64*1024,Ui=Cp&&Ep(()=>Te.isReadableStream(new Response("").body)),Wl={stream:Ui&&(e=>e.body)};Hl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Wl[t]&&(Wl[t]=Te.isFunction(e[t])?o=>o[t]():(o,n)=>{throw new Ye(`Response type '${t}' is not supported`,Ye.ERR_NOT_SUPPORT,n)})})})(new Response);const $_=async e=>{if(e==null)return 0;if(Te.isBlob(e))return e.size;if(Te.isSpecCompliantForm(e))return(await new Request(sn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(e)||Te.isArrayBuffer(e))return e.byteLength;if(Te.isURLSearchParams(e)&&(e=e+""),Te.isString(e))return(await E_(e)).byteLength},A_=async(e,t)=>{const o=Te.toFiniteNumber(e.getContentLength());return o??$_(t)},ji={http:K2,xhr:x_,fetch:Hl&&(async e=>{let{url:t,method:o,data:n,signal:a,cancelToken:s,timeout:l,onDownloadProgress:r,onUploadProgress:u,responseType:d,headers:c,withCredentials:f="same-origin",fetchOptions:m}=Sp(e);d=d?(d+"").toLowerCase():"text";let g=T_([a,s&&s.toAbortSignal()],l),v;const _=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let w;try{if(u&&L_&&o!=="get"&&o!=="head"&&(w=await A_(c,n))!==0){let P=new Request(t,{method:"POST",body:n,duplex:"half"}),q;if(Te.isFormData(n)&&(q=P.headers.get("content-type"))&&c.setContentType(q),P.body){const[G,z]=bp(w,jl(wp(u)));n=kp(P.body,Lp,G,z)}}Te.isString(f)||(f=f?"include":"omit");const x="credentials"in Request.prototype;v=new Request(t,{...m,signal:g,method:o.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:x?f:void 0});let A=await fetch(v,m);const W=Ui&&(d==="stream"||d==="response");if(Ui&&(r||W&&_)){const P={};["status","statusText","headers"].forEach(J=>{P[J]=A[J]});const q=Te.toFiniteNumber(A.headers.get("content-length")),[G,z]=r&&bp(q,jl(wp(r),!0))||[];A=new Response(kp(A.body,Lp,G,()=>{z&&z(),_&&_()}),P)}d=d||"text";let T=await Wl[Te.findKey(Wl,d)||"text"](A,e);return!W&&_&&_(),await new Promise((P,q)=>{yp(P,q,{data:T,headers:yn.from(A.headers),status:A.status,statusText:A.statusText,config:e,request:v})})}catch(x){throw _&&_(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,e,v),{cause:x.cause||x}):Ye.from(x,x&&x.code,e,v)}})};Te.forEach(ji,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const $p=e=>`- ${e}`,I_=e=>Te.isFunction(e)||e===null||e===!1,Ap={getAdapter:e=>{e=Te.isArray(e)?e:[e];const{length:t}=e;let o,n;const a={};for(let s=0;s<t;s++){o=e[s];let l;if(n=o,!I_(o)&&(n=ji[(l=String(o)).toLowerCase()],n===void 0))throw new Ye(`Unknown adapter '${l}'`);if(n)break;a[l||"#"+s]=n}if(!n){const s=Object.entries(a).map(([r,u])=>`adapter ${r} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=t?s.length>1?`since :
`+s.map($p).join(`
`):" "+$p(s[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:ji};function Hi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ka(null,e)}function Ip(e){return Hi(e),e.headers=yn.from(e.headers),e.data=Bi.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ap.getAdapter(e.adapter||Ts.adapter)(e).then(function(n){return Hi(e),n.data=Bi.call(e,e.transformResponse,n),n.headers=yn.from(n.headers),n},function(n){return _p(n)||(Hi(e),n&&n.response&&(n.response.data=Bi.call(e,e.transformResponse,n.response),n.response.headers=yn.from(n.response.headers))),Promise.reject(n)})}const Mp="1.11.0",Vl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Vl[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Op={};Vl.transitional=function(t,o,n){function a(s,l){return"[Axios v"+Mp+"] Transitional option '"+s+"'"+l+(n?". "+n:"")}return(s,l,r)=>{if(t===!1)throw new Ye(a(l," has been removed"+(o?" in "+o:"")),Ye.ERR_DEPRECATED);return o&&!Op[l]&&(Op[l]=!0,console.warn(a(l," has been deprecated since v"+o+" and will be removed in the near future"))),t?t(s,l,r):!0}},Vl.spelling=function(t){return(o,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function M_(e,t,o){if(typeof e!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],l=t[s];if(l){const r=e[s],u=r===void 0||l(r,s,e);if(u!==!0)throw new Ye("option "+s+" must be "+u,Ye.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new Ye("Unknown option "+s,Ye.ERR_BAD_OPTION)}}const zl={assertOptions:M_,validators:Vl},eo=zl.validators;let oa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new gp,response:new gp}}async request(t,o){try{return await this._request(t,o)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,o){typeof t=="string"?(o=o||{},o.url=t):o=t||{},o=na(this.defaults,o);const{transitional:n,paramsSerializer:a,headers:s}=o;n!==void 0&&zl.assertOptions(n,{silentJSONParsing:eo.transitional(eo.boolean),forcedJSONParsing:eo.transitional(eo.boolean),clarifyTimeoutError:eo.transitional(eo.boolean)},!1),a!=null&&(Te.isFunction(a)?o.paramsSerializer={serialize:a}:zl.assertOptions(a,{encode:eo.function,serialize:eo.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),zl.assertOptions(o,{baseUrl:eo.spelling("baseURL"),withXsrfToken:eo.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let l=s&&Te.merge(s.common,s[o.method]);s&&Te.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),o.headers=yn.concat(l,s);const r=[];let u=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(o)===!1||(u=u&&_.synchronous,r.unshift(_.fulfilled,_.rejected))});const d=[];this.interceptors.response.forEach(function(_){d.push(_.fulfilled,_.rejected)});let c,f=0,m;if(!u){const v=[Ip.bind(this),void 0];for(v.unshift(...r),v.push(...d),m=v.length,c=Promise.resolve(o);f<m;)c=c.then(v[f++],v[f++]);return c}m=r.length;let g=o;for(f=0;f<m;){const v=r[f++],_=r[f++];try{g=v(g)}catch(w){_.call(this,w);break}}try{c=Ip.call(this,g)}catch(v){return Promise.reject(v)}for(f=0,m=d.length;f<m;)c=c.then(d[f++],d[f++]);return c}getUri(t){t=na(this.defaults,t);const o=xp(t.baseURL,t.url,t.allowAbsoluteUrls);return pp(o,t.params,t.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(t){oa.prototype[t]=function(o,n){return this.request(na(n||{},{method:t,url:o,data:(n||{}).data}))}}),Te.forEach(["post","put","patch"],function(t){function o(n){return function(s,l,r){return this.request(na(r||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}oa.prototype[t]=o(),oa.prototype[t+"Form"]=o(!0)});let O_=class Sm{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(s){o=s});const n=this;this.promise.then(a=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](a);n._listeners=null}),this.promise.then=a=>{let s;const l=new Promise(r=>{n.subscribe(r),s=r}).then(a);return l.cancel=function(){n.unsubscribe(s)},l},t(function(s,l,r){n.reason||(n.reason=new ka(s,l,r),o(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const t=new AbortController,o=n=>{t.abort(n)};return this.subscribe(o),t.signal.unsubscribe=()=>this.unsubscribe(o),t.signal}static source(){let t;return{token:new Sm(function(a){t=a}),cancel:t}}};function N_(e){return function(o){return e.apply(null,o)}}function R_(e){return Te.isObject(e)&&e.isAxiosError===!0}const Wi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wi).forEach(([e,t])=>{Wi[t]=e});function Np(e){const t=new oa(e),o=Xf(oa.prototype.request,t);return Te.extend(o,oa.prototype,t,{allOwnKeys:!0}),Te.extend(o,t,null,{allOwnKeys:!0}),o.create=function(a){return Np(na(e,a))},o}const Dt=Np(Ts);Dt.Axios=oa,Dt.CanceledError=ka,Dt.CancelToken=O_,Dt.isCancel=_p,Dt.VERSION=Mp,Dt.toFormData=Bl,Dt.AxiosError=Ye,Dt.Cancel=Dt.CanceledError,Dt.all=function(t){return Promise.all(t)},Dt.spread=N_,Dt.isAxiosError=R_,Dt.mergeConfig=na,Dt.AxiosHeaders=yn,Dt.formToJSON=e=>hp(Te.isHTMLForm(e)?new FormData(e):e),Dt.getAdapter=Ap.getAdapter,Dt.HttpStatusCode=Wi,Dt.default=Dt;const{Axios:wM,AxiosError:xM,CanceledError:TM,isCancel:SM,CancelToken:kM,VERSION:CM,all:EM,Cancel:LM,isAxiosError:$M,spread:AM,toFormData:IM,AxiosHeaders:MM,HttpStatusCode:OM,formToJSON:NM,getAdapter:RM,mergeConfig:DM}=Dt,Me=Dt.create({baseURL:"/weilin/prompt_ui/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Me.interceptors.request.use(e=>e,e=>Promise.reject(e)),Me.interceptors.response.use(e=>e.data,e=>Promise.reject(e));const ql={getUserSetting:async()=>await Me({url:"/user_init/get_settings",method:"get"}),setUserLanguage:async e=>await Me({url:"/user_init/set_user_lang",method:"post",data:{user_lang:e}}),startPanel:async()=>await Me({url:"/panel/start",method:"post"})},Rp=()=>Nl(),ks=q0({legacy:!1,locale:"zh_CN",fallbackLocale:"zh_CN",messages:{zh_CN:a2,en_US:s2}}),D_=()=>{const e=Rp();ql.getUserSetting().then(t=>{var n;e.setUserSetting(t.data);const o=((n=e.userSetting)==null?void 0:n.user_lang)||"zh_CN";ks.global.locale.value=o})},P_=e=>{ks.global.locale.value=e,Rp().setUserSetting({user_lang:e})},F_=()=>{D_()},B_={name:"popmessage",props:{type:{type:String,default:"success"},str:{type:String,default:""}},setup(){const e={warn:{color:"#E6A23C",backgroundColor:"rgb(253, 246, 236)",borderColor:"rgb(250, 236, 216)"},error:{color:"#F56C6C",backgroundColor:"rgb(254, 240, 240)",borderColor:"rgb(253, 226, 226)"},success:{color:"#67C23A",backgroundColor:"rgb(240, 249, 235)",borderColor:"rgb(225, 243, 216)"}},t=y(!1);return ut(()=>{t.value=!0}),{style:e,visible:t}}},U_={class:"text"};function j_(e,t,o,n,a,s){return ye((S(),L("div",{class:"pop-message",style:pt(n.style[o.type])},[i("i",{class:Ee(["icon",[n.style[o.type].icon]])},null,2),i("span",U_,h(o.str),1)],4)),[[ds,n.visible]])}const H_=yt(B_,[["render",j_],["__scopeId","data-v-7ee59bf2"]]),Vi=document.createElement("div");document.body.appendChild(Vi);let zi=null;const Z=({str:e,type:t,name:o=""})=>{let n=ks.global.t(e);o.length>0&&(n=ks.global.t(e,{name:o}));const a=Ve(H_,{str:n,type:t});Bd(a,Vi),zi&&clearTimeout(zi),zi=setTimeout(()=>{Bd(null,Vi)},2e3)},W_={class:"language-selector-content"},V_=["onClick"],z_={class:"lang-name"},q_=yt({__name:"LanguageSwitcher",emits:["close"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=y(null),s=Nl(),l=tt(()=>s.userSetting.user_lang),r=[{code:"zh_CN",name:""},{code:"en_US",name:"English"}],u=o,d=m=>{c(m),u("close",{})},c=m=>{ql.setUserLanguage(m).then(g=>{P_(m),window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*"),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.setLanguageSuccess"})}).catch(g=>{Z({type:"warn",str:"message.setLanguageFailed"})})};return t({setPosition:m=>{if(!a.value)return;const g=a.value;g.style.position="fixed",g.style.top=`${m.bottom}px`}}),(m,g)=>(S(),L("div",{class:"language-selector",ref_key:"selectorRef",ref:a},[i("div",W_,[(S(),L(Oe,null,He(r,(v,_)=>i("div",{style:pt({"margin-top":_===0?"0":"2px"}),key:v.code,class:Ee(["language-option",{active:l.value===v.code}]),onClick:w=>d(v.code)},[i("span",z_,h(v.name),1)],14,V_)),64))])],512))}},[["__scopeId","data-v-b77d604b"]]),vo="weilin_prompt_ui_",Ca=yt({__name:"Dialog",props:{modelValue:Boolean,title:{type:String,default:""},closeOnClickOverlay:{type:Boolean,default:!1},width:{type:String,default:"60%"}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,n=t,a=()=>{n("update:modelValue",!1)},s=()=>{o.closeOnClickOverlay&&a()};return(l,r)=>(S(),wt(mc,{to:"#weilin_comfyui_tools_prompt_ui_div"},[Ve(bl,{name:`${vo}dialog-fade`},{default:it(()=>[e.modelValue?(S(),L("div",{key:0,class:Ee(`${vo}dialog-overlay`),onClick:s},[Ve(bl,{name:`${vo}dialog-slide`},{default:it(()=>[i("div",{style:pt({width:e.width}),class:Ee(`${vo}dialog`),onClick:r[0]||(r[0]=Ke(()=>{},["stop"]))},[i("div",{class:Ee(`${vo}dialog-header`)},[i("h3",{class:Ee(`${vo}dialog-title`)},h(e.title),3),i("button",{class:Ee(`${vo}dialog-close`),onClick:a},[...r[1]||(r[1]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],2)],2),i("div",{class:Ee(`${vo}dialog-content`)},[ts(l.$slots,"default")],2),l.$slots.footer?(S(),L("div",{key:0,class:Ee(`${vo}dialog-footer`)},[ts(l.$slots,"footer")],2)):pe("",!0)],6)]),_:3},8,["name"])],2)):pe("",!0)]),_:3},8,["name"])]))}},[["__scopeId","data-v-d2e9c495"]]),fn={getTranslateLocal:async e=>await Me({url:"/prompt/local/translate",method:"post",data:{phrase:e}}),getTranslatePackagesState:async()=>await Me({url:"/translate/get/packages/state",method:"post",data:{}}),getTranslateSetting:async()=>await Me({url:"/translate/get/setting",method:"post",data:{}}),applyTranslateSetting:async e=>await Me({url:"/translate/apply_setting",method:"post",data:{setting:e}}),installTranslatePackage:async()=>await Me({url:"/translate/install/translaterpackage",method:"post",timeout:0,data:{}}),getTranslateBuktSetting:async()=>await Me({url:"/translate/get/tran_setting",method:"post",data:{}}),saveTranslateSetting:async(e,t,o)=>await Me({url:"/translate/save_tran/setting",method:"post",data:{service:e,source_lang:t,target_lang:o}}),translaterText:async(e,t)=>await Me({url:"/translate/tran/text",method:"post",timeout:0,data:{str_object:e,text:t}}),translaterInputText:async(e,t)=>await Me({url:"/translate/tran/input",method:"post",timeout:0,data:{str_object:e,text:t}})},qi={getAutocomplete:async e=>await Me({url:"/prompt/fast/autocomplete",method:"post",data:{query:e}}),getAutocompleteLimit:async()=>await Me({url:"/get/setting/get_auto_limit_setting",method:"post"}),updateAutocompleteLimit:async e=>await Me({url:"/update/setting/update_auto_limit_setting",method:"post",data:{limit:e}})},Cs={updateOpenAiSetting:async e=>await Me({url:"/prompt/openai/update_settings",method:"post",data:e}),addOpenAiSetting:async e=>await Me({url:"/prompt/openai/add_setting",method:"post",data:e}),deleteOpenAiSetting:async e=>await Me({url:"/prompt/openai/delete_setting",method:"post",data:e}),setOpenAiSelect:async e=>await Me({url:"/prompt/openai/set_select",method:"post",data:e}),getOpenAiSetting:async()=>await Me({url:"/prompt/openai/get_settings",method:"get"})},G_=["alibaba","baidu","bing","deepl","youdao","qqtransmart","sogou","niutrans","mymemory","modernmt","volcengine","iciba","iflytek","google","lingvanex","yandex","itranslate","systran","argos","apertium","reverso","cloudtranslation","translatecom","tilde","caiyun","qqfanyi","translateme","papago","mirai","iflyrec","hujiang","yeekit","languagewire","elia","judic","mglip","utibet"],Gl=[{language:"chinese",translator:"zh"},{language:"english",translator:"en"},{language:"arabic",translator:"ar"},{language:"russian",translator:"ru"},{language:"french",translator:"fr"},{language:"german",translator:"de"},{language:"spanish",translator:"es"},{language:"portuguese",translator:"pt"},{language:"italian",translator:"it"},{language:"japanese",translator:"ja"},{language:"korean",translator:"ko"},{language:"greek",translator:"el"},{language:"dutch",translator:"nl"},{language:"hindi",translator:"hi"},{language:"turkish",translator:"tr"},{language:"malay",translator:"ms"},{language:"thai",translator:"th"},{language:"vietnamese",translator:"vi"},{language:"indonesian",translator:"id"},{language:"hebrew",translator:"he"},{language:"polish",translator:"pl"},{language:"mongolian",translator:"mn"},{language:"czech",translator:"cs"},{language:"hungarian",translator:"hu"},{language:"estonian",translator:"et"},{language:"bulgarian",translator:"bg"},{language:"danish",translator:"da"},{language:"finnish",translator:"fi"},{language:"romanian",translator:"ro"},{language:"swedish",translator:"sv"},{language:"slovenian",translator:"sl"},{language:"persian/farsi",translator:"fa"},{language:"bosnian",translator:"bs"},{language:"serbian",translator:"sr"},{language:"fijian",translator:"fj"},{language:"filipino",translator:"tl"},{language:"haitiancreole",translator:"ht"},{language:"catalan",translator:"ca"},{language:"croatian",translator:"hr"},{language:"latvian",translator:"lv"},{language:"lithuanian",translator:"lt"},{language:"urdu",translator:"ur"},{language:"ukrainian",translator:"uk"},{language:"welsh",translator:"cy"},{language:"tahiti",translator:"ty"},{language:"tongan",translator:"to"},{language:"swahili",translator:"sw"},{language:"samoan",translator:"sm"},{language:"slovak",translator:"sk"},{language:"afrikaans",translator:"af"},{language:"norwegian",translator:"no"},{language:"bengali",translator:"bn"},{language:"malagasy",translator:"mg"},{language:"maltese",translator:"mt"},{language:"queretaro otomi",translator:"otq"},{language:"klingon/tlhingan hol",translator:"tlh"},{language:"gujarati",translator:"gu"},{language:"tamil",translator:"ta"},{language:"telugu",translator:"te"},{language:"punjabi",translator:"pa"},{language:"amharic",translator:"am"},{language:"azerbaijani",translator:"az"},{language:"bashkir",translator:"ba"},{language:"belarusian",translator:"be"},{language:"cebuano",translator:"ceb"},{language:"chuvash",translator:"cv"},{language:"esperanto",translator:"eo"},{language:"basque",translator:"eu"},{language:"irish",translator:"ga"}],Gi={getAiServerSetting:async e=>await Me({url:"/ai_server/get_settings",method:"post",data:{}}),updateAiServerSetting:async e=>await Me({url:"/ai_server/update_settings",method:"post",data:e}),getAiModels:async()=>await Me({url:"/ai_server/get_ai_models",method:"post",data:{}})},Q_={class:"ai-server-setting-panel"},Y_={class:"weilin-comfyui-translater-setting-box"},J_={class:"weilin-comfyui-setting-item"},K_={class:"weilin-comfyui-setting-item"},X_={class:"weilin-comfyui-setting-item"},Z_={style:{display:"flex",gap:"10px"}},ey=["value"],ty={class:"weilin-comfyui-translater-setting-box"},ny={class:"weilin-comfyui-setting-small-titile"},oy={class:"weilin-comfyui-language-selectors"},ay={class:"weilin-comfyui-setting-item"},sy=["index","value"],ly={class:"weilin-comfyui-setting-item"},ry=["index","value"],iy={class:"weilin-comfyui-translater-setting-box"},uy={class:"weilin-comfyui-setting-small-titile"},cy={class:"weilin-comfyui-setting-item"},dy=["placeholder"],fy={class:"weilin-comfyui-setting-item"},py=["placeholder"],gy=yt({__name:"ai_server_setting",setup(e){const{t}=_t(),o=y(""),n=y(""),a=y(""),s=y(""),l=y(""),r=y({api_key:"",base_url:"https://api.siliconflow.cn/v1",model:"",temperature:0,top_p:.7,max_tokens:4096}),u=y({object:"list",data:[]}),d=()=>{Gi.updateAiServerSetting(r.value).then(_=>{_.info=="ok"?Z({type:"success",str:"message.saveSuccess"}):Z({type:"warn",str:"message.saveFailed"})}).catch(_=>{Z({type:"warn",str:"message.saveFailed"})})},c=()=>{Gi.getAiServerSetting().then(_=>{r.value=_.data}).catch(_=>{Z({type:"warn",str:"message.getTranslaterFail"})})},f=()=>{Gi.getAiModels().then(_=>{u.value=_.data}).catch(_=>{Z({type:"warn",str:"message.getTranslaterFail"})})},m=()=>{fn.getTranslateBuktSetting().then(_=>{o.value=_.data.translate_service,n.value=_.data.translate_source_lang,a.value=_.data.translate_target_lang}).catch(_=>{Z({type:"warn",str:"message.getTranslaterFail"})})},g=()=>{fn.saveTranslateSetting(o.value,n.value,a.value).then(_=>{_.info=="ok"?Z({type:"success",str:"message.saveSuccess"}):Z({type:"warn",str:"message.saveFailed"})}).catch(_=>{Z({type:"warn",str:"message.saveFailed"})})},v=()=>{s.value="";let _={text:l.value,translate:""};const w=JSON.stringify(_);fn.translaterInputText(w,"").then(x=>{if(x&&x.data){const A=JSON.parse(x.data);s.value=A.translate}}).catch(x=>{Z({type:"warn",str:"message.translaterTestFail"})})};return ut(()=>{c(),f(),m()}),(_,w)=>(S(),L("div",Q_,[i("div",Y_,[i("div",J_,[w[7]||(w[7]=i("label",null,"API Key",-1)),ye(i("input",{type:"text","onUpdate:modelValue":w[0]||(w[0]=x=>r.value.api_key=x),placeholder:"API Key",class:"weilin-comfyui-common-select"},null,512),[[Ae,r.value.api_key]])]),i("div",K_,[w[9]||(w[9]=i("label",null,"AI",-1)),ye(i("select",{"onUpdate:modelValue":w[1]||(w[1]=x=>r.value.base_url=x),disabled:"",class:"weilin-comfyui-common-select"},[...w[8]||(w[8]=[i("option",{value:"https://api.siliconflow.cn/v1"},"AI",-1)])],512),[[Vt,r.value.base_url]])]),i("div",X_,[w[10]||(w[10]=i("label",null,"ModelAPI Key",-1)),i("div",Z_,[ye(i("select",{"onUpdate:modelValue":w[2]||(w[2]=x=>r.value.model=x),class:"weilin-comfyui-common-select",style:{flex:"1"}},[(S(!0),L(Oe,null,He(u.value.data,x=>(S(),L("option",{key:x.id,value:x.id},h(x.id),9,ey))),128))],512),[[Vt,r.value.model]]),i("button",{type:"button",class:"weilin-comfyui-install-button",style:{width:"auto","min-width":"120px"},onClick:f},"  ")])]),i("button",{class:"weilin-comfyui-save-button",onClick:d},"AI")]),i("div",ty,[i("div",ny,h(p(t)("promptBox.settings.translaterSetting")),1),i("div",oy,[i("div",ay,[i("label",null,h(p(t)("promptBox.settings.translaterLangSourceSetting")),1),ye(i("select",{"onUpdate:modelValue":w[3]||(w[3]=x=>n.value=x)},[(S(!0),L(Oe,null,He(p(Gl),(x,A)=>(S(),L("option",{index:A,key:"lan-item_"+A,value:x.translator},h(p(t)("translaterLanguage."+x.language)),9,sy))),128))],512),[[Vt,n.value]])]),i("div",ly,[i("label",null,h(p(t)("promptBox.settings.translaterLangTargeSetting")),1),ye(i("select",{"onUpdate:modelValue":w[4]||(w[4]=x=>a.value=x)},[(S(!0),L(Oe,null,He(p(Gl),(x,A)=>(S(),L("option",{index:A,key:"lan-mu-item_"+A,value:x.translator},h(p(t)("translaterLanguage."+x.language)),9,ry))),128))],512),[[Vt,a.value]])])]),i("button",{class:"weilin-comfyui-install-button",onClick:g},h(p(t)("promptBox.settings.saveTranslaterSetting")),1)]),i("div",iy,[i("div",uy,h(p(t)("promptBox.settings.testTranslaterTitle")),1),i("div",cy,[i("label",null,h(p(t)("promptBox.settings.inputTestTranslater")),1),ye(i("input",{type:"text","onUpdate:modelValue":w[5]||(w[5]=x=>l.value=x),placeholder:p(t)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,dy),[[Ae,l.value]])]),i("div",fy,[i("label",null,h(p(t)("promptBox.settings.outPutTestTranslater")),1),ye(i("input",{type:"text","onUpdate:modelValue":w[6]||(w[6]=x=>s.value=x),readonly:"",placeholder:p(t)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,py),[[Ae,s.value]])]),i("button",{class:"weilin-comfyui-install-button",onClick:v},h(p(t)("promptBox.settings.testingTranslater")),1)])]))}},[["__scopeId","data-v-731441c6"]]),my={class:"weilin-comfyui-settings-content"},hy={class:"weilin-comfyui-settings-sidebar"},vy={class:"weilin-comfyui-settings-main"},_y={key:0},yy={class:"weilin-comfyui-setting-select"},by={class:"weilin-comfyui-translator-settings"},wy={key:0,class:"weilin-comfyui-group-box"},xy={key:1,class:"weilin-comfyui-group-box"},Ty={class:"weilin-comfyui-group-title"},Sy={class:"weilin-comfyui-note-top"},ky={class:"weilin-comfyui-setting-item"},Cy={value:"auto"},Ey={value:"chinese_simplified"},Ly={value:"english"},$y={class:"weilin-comfyui-setting-item"},Ay={value:"chinese_simplified"},Iy={value:"english"},My={key:2,class:"weilin-comfyui-group-box"},Oy={class:"weilin-comfyui-group-title"},Ny={class:"weilin-comfyui-note-top"},Ry={class:"weilin-comfyui-translater-innstall-status"},Dy={class:"weilin-comfyui-translater-install-label"},Py={key:0,class:"weilin-comfyui-translater-install-label"},Fy={key:1,class:"weilin-comfyui-translater-install-control"},By=["disabled"],Uy={key:0,class:"weilin-comfyui-translater-setting-box"},jy={class:"weilin-comfyui-setting-small-titile"},Hy={class:"weilin-comfyui-setting-item"},Wy=["index","value"],Vy={class:"weilin-comfyui-language-selectors"},zy={class:"weilin-comfyui-setting-item"},qy=["index","value"],Gy={class:"weilin-comfyui-setting-item"},Qy=["index","value"],Yy={key:1,class:"weilin-comfyui-tranlater-text-box"},Jy={class:"weilin-comfyui-setting-small-titile"},Ky={class:"weilin-comfyui-setting-item"},Xy=["placeholder"],Zy={class:"weilin-comfyui-setting-item"},eb=["placeholder"],tb={key:1},nb={class:"weilin-comfyui-floating-ball-settings"},ob={class:"weilin-comfyui-setting-item"},ab=["placeholder"],sb={class:"weilin-comfyui-setting-item"},lb=["placeholder"],rb={class:"weilin-comfyui-setting-item"},ib=["placeholder"],ub={key:2},cb={class:"weilin-comfyui-floating-ball-settings",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"15px"}},db={class:"weilin-comfyui-settings-column"},fb={class:"weilin-comfyui-setting-item"},pb={class:"weilin-comfyui-setting-item"},gb=["placeholder"],mb={class:"weilin-comfyui-setting-item"},hb=["placeholder"],vb={class:"weilin-comfyui-setting-item"},_b=["placeholder"],yb={class:"weilin-comfyui-settings-column"},bb={class:"weilin-comfyui-setting-item"},wb={value:"default"},xb={value:"custom"},Tb={key:0,class:"weilin-comfyui-setting-item"},Sb={key:0,class:"weilin-comfyui-skin-preview"},kb=["src"],Cb={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},Eb={value:"gradient"},Lb={value:"transparent"},$b={key:0,class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},Ab={style:{display:"flex",gap:"10px","align-items":"center"}},Ib={class:"weilin-comfyui-setting-item",style:{"grid-column":"span 2"}},Mb={key:3},Ob={class:"weilin-comfyui-floating-ball-settings"},Nb={class:"weilin-comfyui-setting-item"},Rb={class:"weilin-comfyui-setting-item"},Db={class:"weilin-comfyui-setting-item"},Pb={class:"weilin-comfyui-setting-item"},Fb={class:"weilin-comfyui-setting-item"},Bb={class:"weilin-comfyui-setting-item"},Ub={class:"weilin-comfyui-setting-item"},jb={key:4},Hb={class:"weilin-comfyui-openai-settings"},Wb={class:"weilin-comfyui-setting-item"},Vb=["value"],zb={class:"weilin-comfyui-config-list"},qb={class:"weilin-comfyui-config-header"},Gb={class:"weilin-comfyui-config-actions"},Qb=["onClick"],Yb=["onClick"],Jb={key:0,class:"weilin-comfyui-config-form"},Kb={class:"weilin-comfyui-form-group"},Xb=["placeholder"],Zb={class:"weilin-comfyui-form-group"},e4=["placeholder"],t4={class:"weilin-comfyui-form-group"},n4=["placeholder"],o4={class:"weilin-comfyui-form-actions"},a4=["onClick"],s4={key:1,class:"weilin-comfyui-config-details"},l4={key:0,class:"weilin-comfyui-config-form"},r4={class:"weilin-comfyui-form-group"},i4=["placeholder"],u4={class:"weilin-comfyui-form-group"},c4=["placeholder"],d4={class:"weilin-comfyui-form-group"},f4=["placeholder"],p4={class:"weilin-comfyui-form-actions"},g4={key:5},m4={class:"weilin-comfyui-sponsor-me-settings"},h4={key:6},v4={class:"weilin-comfyui-start-panel-settings"},Dp=yt({__name:"setting_dialog",setup(e,{expose:t}){const{t:o}=_t(),n=y(!1),a=y("translator"),s=y("baidu"),l=y(""),r=y(localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english"),u=y(localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified"),d=y(localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1),c=y(localStorage.getItem("weilin_prompt_ui_floatingBallSize")||66),f=y(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||c.value),m=y(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true"),g=y(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),v=y(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),_=y(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),w=y(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),x=y(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),A=y(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50),W=y(localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true"),T=y(localStorage.getItem("weilin_prompt_ui_period_conversion")==="true"),P=y(localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true"),q=y(localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true"),G=y(localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"),z=y(localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true"),J=y(localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"),ve=y(""),ae=y(""),F=y(""),K=y(0),ee=y([]),Q=y(!1),te=y({api_key:"",base_url:"https://api.openai.com/v1",model:""}),ne=y(!1),U=y(-1),j=y(""),ue=y(!1),xe=y(!1),oe=y(""),de=y(""),be=y(25),ke=y(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),_e=y(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),I=Fe=>{a.value=Fe,Fe=="setting_auto_complete_limit"&&dt()},N=()=>{localStorage.setItem("weilin_prompt_ui_sourceLanguage",r.value),localStorage.setItem("weilin_prompt_ui_targetLanguage",u.value),window.parent.postMessage({type:"weilin_prompt_ui_translate_setting"},"*"),Z({type:"success",str:"message.saveSuccess"})},H=Fe=>{const Le=Fe.target.files[0];if(Le){const Ce=new FileReader;Ce.onload=st=>{v.value=st.target.result,localStorage.setItem("weilin_prompt_ui_customSkinUrl",st.target.result)},Ce.readAsDataURL(Le)}},O=()=>{w.value="#6a11cb",x.value="#2575fc"},B=()=>{if(d.value<1||c.value<5||f.value<5){Z({type:"warn",str:"message.error"});return}localStorage.setItem("weilin_prompt_ui_floatingBallEnabled",m.value),localStorage.setItem("weilin_prompt_ui_floatingBallCount",d.value),localStorage.setItem("weilin_prompt_ui_floatingBallSize",c.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",f.value),localStorage.setItem("weilin_prompt_ui_ballSkinType",g.value),localStorage.setItem("weilin_prompt_ui_bgType",_.value),localStorage.setItem("weilin_prompt_ui_gradientColor1",w.value),localStorage.setItem("weilin_prompt_ui_gradientColor2",x.value),localStorage.setItem("weilin_prompt_ui_ballBorderRadius",A.value),localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",f.value),window.parent.postMessage({type:"weilin_prompt_ui_floating_ball_setting"},"*"),Z({type:"success",str:"message.saveSuccess"})},k=()=>{localStorage.setItem("weilin_prompt_ui_comma_conversion",W.value),localStorage.setItem("weilin_prompt_ui_period_conversion",T.value),localStorage.setItem("weilin_prompt_ui_bracket_conversion",P.value),localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion",q.value),localStorage.setItem("weilin_prompt_ui_underscore_to_bracket",G.value),localStorage.setItem("weilin_prompt_ui_comma_close_autocomplete",z.value),localStorage.setItem("weilin_prompt_ui_bracket_escape",J.value),Z({type:"success",str:"message.saveSuccess"})},E=()=>{ql.getUserSetting().then(Fe=>{ee.value=Fe.data.openai_settings,K.value=Fe.data.select_openai})},D=()=>{te.value={api_key:"",base_url:"https://api.openai.com/v1",model:""},ne.value=!1,Q.value=!0},Y=Fe=>{Cs.deleteOpenAiSetting({index:Fe}).then(Le=>{E(),Z({type:"success",str:"message.deleteSuccess"})}).catch(Le=>{Z({type:"warn",str:"message.networkError"})})},ie=Fe=>{U.value===Fe?U.value=-1:(te.value={...ee.value[Fe]},U.value=Fe)},re=Fe=>{Cs.updateOpenAiSetting({index:Fe,...te.value}).then(Le=>{E(),U.value=-1,Z({type:"success",str:"message.saveSuccess"})}).catch(Le=>{Z({type:"warn",str:"message.networkError"})})},C=()=>{Cs.addOpenAiSetting({...te.value}).then(Fe=>{E(),Q.value=!1,U.value=-1,Z({type:"success",str:"message.saveSuccess"})}).catch(Fe=>{Z({type:"warn",str:"message.networkError"})})},b=()=>{Q.value=!1,U.value=-1},R=()=>{Cs.setOpenAiSelect({index:K.value}).then(Fe=>{Z({type:"success",str:"message.saveSuccess"})}).catch(Fe=>{Z({type:"warn",str:"message.networkError"})})},V=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},me=()=>{ql.startPanel().then(Fe=>{Z({type:"success",str:"message.startPanelSuccess"})}).catch(Fe=>{Z({type:"warn",str:"message.startPanelFailed"})})},fe=()=>{fn.getTranslatePackagesState().then(Fe=>{Fe.info=="ok"?xe.value=!0:xe.value=!1}).catch(Fe=>{Z({type:"warn",str:"message.getTranslaterFail"})})},X=()=>{fn.getTranslateSetting().then(Fe=>{localStorage.setItem("weilin_prompt_ui_translater_setting",Fe.data),j.value=Fe.data}).catch(Fe=>{Z({type:"warn",str:"message.getTranslaterFail"})})},le=()=>{fn.applyTranslateSetting(j.value).then(Fe=>{Fe.info=="ok"?(localStorage.setItem("weilin_prompt_ui_translater_setting",j.value),Z({type:"success",str:"message.applyTranslaterSuccess"})):Z({type:"warn",str:"message.applyToTranslaterFail"})}).catch(Fe=>{Z({type:"warn",str:"message.applyTranslaterFail"})})},Ne=()=>{fn.getTranslateBuktSetting().then(Fe=>{ve.value=Fe.data.translate_service,ae.value=Fe.data.translate_source_lang,F.value=Fe.data.translate_target_lang}).catch(Fe=>{Z({type:"warn",str:"message.getTranslaterFail"})})},Pe=()=>{fn.saveTranslateSetting(ve.value,ae.value,F.value).then(Fe=>{Fe.info=="ok"?Z({type:"success",str:"message.saveSuccess"}):Z({type:"warn",str:"message.saveFailed"})}).catch(Fe=>{Z({type:"warn",str:"message.saveFailed"})})},We=()=>{fn.translaterInputText(oe.value).then(Fe=>{de.value=Fe.text}).catch(Fe=>{Z({type:"warn",str:"message.translaterTestFail"})})},ze=y(null),rt=()=>{ue.value=!0,fn.installTranslatePackage().then(Fe=>{ue.value=!1,xe.value=!0,Z({type:"success",str:"message.tranlaterPackageInstallSuccess"})}).catch(Fe=>{ue.value=!1,Z({type:"warn",str:"message.tranlaterPackageInstallFail"})})},dt=async()=>{await qi.getAutocompleteLimit().then(Fe=>{be.value=Fe.data}).catch(Fe=>{console.error(Fe),Z({type:"warn",str:"message.networkError"})})},Ht=async()=>{await qi.updateAutocompleteLimit(be.value).then(Fe=>{Z({type:"success",str:"message.saveSuccess"}),localStorage.setItem("weilin_prompt_ui_auto_box_width",ke.value),localStorage.setItem("weilin_prompt_ui_auto_box_height",_e.value)}).catch(Fe=>{console.error(Fe),Z({type:"warn",str:"message.networkError"})})};return ut(()=>{Ne(),fe(),X(),E()}),Dn(()=>{ze.value&&clearInterval(ze.value)}),t({open:()=>{a.value="translator",s.value="baidu",l.value="",r.value=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",u.value=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified",d.value=localStorage.getItem("weilin_prompt_ui_floatingBallCount")||1,c.value=localStorage.getItem("weilin_prompt_ui_floatingBallSize")||5,m.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true",W.value=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",T.value=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",P.value=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",q.value=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true",G.value=localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true",z.value=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",n.value=!0}}),(Fe,Le)=>(S(),wt(Ca,{modelValue:n.value,"onUpdate:modelValue":Le[41]||(Le[41]=Ce=>n.value=Ce),title:p(o)("promptBox.settings.title")},{footer:it(()=>[i("button",{onClick:Le[40]||(Le[40]=Ce=>n.value=!1)},h(p(o)("promptBox.settings.close")),1)]),default:it(()=>[i("div",my,[i("div",hy,[i("ul",null,[i("li",{class:Ee({"weilin-comfyui-active":a.value==="translator"}),onClick:Le[0]||(Le[0]=Ce=>I("translator"))},h(p(o)("promptBox.settings.translator")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_auto_complete_limit"}),onClick:Le[1]||(Le[1]=Ce=>I("setting_auto_complete_limit"))},h(p(o)("promptBox.settings.setting_auto_complete_limit")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_floating_ball"}),onClick:Le[2]||(Le[2]=Ce=>I("setting_floating_ball"))},h(p(o)("promptBox.settings.setting_floating_ball")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_prompt_box"}),onClick:Le[3]||(Le[3]=Ce=>I("setting_prompt_box"))},h(p(o)("promptBox.settings.setting_prompt_box")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_openai_box"}),onClick:Le[4]||(Le[4]=Ce=>I("setting_openai_box"))},h(p(o)("promptBox.settings.setting_openai_box")),3),i("li",{class:Ee({"weilin-comfyui-active":a.value==="setting_sponsor_me"}),onClick:Le[5]||(Le[5]=Ce=>I("setting_sponsor_me"))},h(p(o)("promptBox.settings.setting_sponsor_me")),3)])]),i("div",vy,[a.value==="translator"?(S(),L("div",_y,[i("h3",null,h(p(o)("promptBox.settings.translator")),1),i("div",yy,[i("label",null,h(p(o)("promptBox.settings.selectTranslater")),1),ye(i("select",{style:{"margin-left":"10px"},"onUpdate:modelValue":Le[6]||(Le[6]=Ce=>j.value=Ce),class:"weilin-comfyui-common-select"},[...Le[42]||(Le[42]=[i("option",{value:"other_ai_plate"},"AI",-1),i("option",{value:"openai"},"OpenAI API ",-1)])],512),[[Vt,j.value]]),i("button",{class:"weilin-comfyui-install-button",onClick:le},h(p(o)("promptBox.settings.apply")),1)]),i("div",by,[j.value=="other_ai_plate"?(S(),L("div",wy,[Ve(gy)])):pe("",!0),j.value=="network"?(S(),L("div",xy,[i("div",Ty,h(p(o)("promptBox.settings.selectOptionNetworkTranslaterTitle")),1),i("div",Sy,h(p(o)("promptBox.settings.selectOptionNetworkTranslaterInfo"))+"https://github.com/xnx3/translate",1),i("div",ky,[i("label",null,h(p(o)("promptBox.settings.sourceLanguage")),1),ye(i("select",{"onUpdate:modelValue":Le[7]||(Le[7]=Ce=>r.value=Ce),class:"weilin-comfyui-common-select"},[i("option",Cy,h(p(o)("promptBox.settings.auto_detect")),1),i("option",Ey,h(p(o)("promptBox.settings.chinese_simplified")),1),i("option",Ly,h(p(o)("promptBox.settings.english")),1)],512),[[Vt,r.value]])]),i("div",$y,[i("label",null,h(p(o)("promptBox.settings.targetLanguage")),1),ye(i("select",{"onUpdate:modelValue":Le[8]||(Le[8]=Ce=>u.value=Ce),class:"weilin-comfyui-common-select"},[i("option",Ay,h(p(o)("promptBox.settings.chinese_simplified")),1),i("option",Iy,h(p(o)("promptBox.settings.english")),1)],512),[[Vt,u.value]])]),i("button",{class:"weilin-comfyui-save-button",onClick:N},h(p(o)("promptBox.settings.save")),1)])):pe("",!0),j.value=="translater"?(S(),L("div",My,[i("div",Oy,h(p(o)("promptBox.settings.selectOptionPythonTranslaterTitle")),1),i("div",Ny,h(p(o)("promptBox.settings.selectOptionPythonTranslaterInfo"))+"https://github.com/UlionTse/translators",1),i("div",Ry,[i("div",Dy,h(p(o)("promptBox.settings.nowTranlaterPackageState"))+" "+h(xe.value?p(o)("promptBox.settings.tranlaterPackageStateTrue"):p(o)("promptBox.settings.tranlaterPackageStateFlase")),1),ue.value?(S(),L("div",Py,h(p(o)("promptBox.settings.installTranslaterPackageInfo")),1)):pe("",!0),xe.value?pe("",!0):(S(),L("div",Fy,[i("button",{disabled:ue.value,class:"weilin-comfyui-install-button",onClick:rt},h(ue.value?p(o)("promptBox.settings.installed"):p(o)("promptBox.settings.install")),9,By)]))]),xe.value?(S(),L("div",Uy,[i("div",jy,h(p(o)("promptBox.settings.translaterSetting")),1),i("div",Hy,[i("label",null,h(p(o)("promptBox.settings.chooseTranslaterSetting")),1),ye(i("select",{"onUpdate:modelValue":Le[9]||(Le[9]=Ce=>ve.value=Ce)},[(S(!0),L(Oe,null,He(p(G_),(Ce,st)=>(S(),L("option",{index:st,key:"tran-item_"+st,value:Ce},h(p(o)("translaterService."+Ce)),9,Wy))),128))],512),[[Vt,ve.value]])]),i("div",Vy,[i("div",zy,[i("label",null,h(p(o)("promptBox.settings.translaterLangSourceSetting")),1),ye(i("select",{"onUpdate:modelValue":Le[10]||(Le[10]=Ce=>ae.value=Ce)},[(S(!0),L(Oe,null,He(p(Gl),(Ce,st)=>(S(),L("option",{index:st,key:"lan-item_"+st,value:Ce.translator},h(p(o)("translaterLanguage."+Ce.language)),9,qy))),128))],512),[[Vt,ae.value]])]),i("div",Gy,[i("label",null,h(p(o)("promptBox.settings.translaterLangTargeSetting")),1),ye(i("select",{"onUpdate:modelValue":Le[11]||(Le[11]=Ce=>F.value=Ce)},[(S(!0),L(Oe,null,He(p(Gl),(Ce,st)=>(S(),L("option",{index:st,key:"lan-mu-item_"+st,value:Ce.translator},h(p(o)("translaterLanguage."+Ce.language)),9,Qy))),128))],512),[[Vt,F.value]])])]),i("button",{class:"weilin-comfyui-install-button",onClick:Pe},h(p(o)("promptBox.settings.saveTranslaterSetting")),1)])):pe("",!0),xe.value?(S(),L("div",Yy,[i("div",Jy,h(p(o)("promptBox.settings.testTranslaterTitle")),1),i("div",Ky,[i("label",null,h(p(o)("promptBox.settings.inputTestTranslater")),1),ye(i("input",{type:"text","onUpdate:modelValue":Le[12]||(Le[12]=Ce=>oe.value=Ce),placeholder:p(o)("promptBox.settings.inputTestTranslaterPlaceholder")},null,8,Xy),[[Ae,oe.value]])]),i("div",Zy,[i("label",null,h(p(o)("promptBox.settings.outPutTestTranslater")),1),ye(i("input",{type:"text","onUpdate:modelValue":Le[13]||(Le[13]=Ce=>de.value=Ce),readonly:"",placeholder:p(o)("promptBox.settings.outPutTestTranslaterPlaceholder")},null,8,eb),[[Ae,de.value]])]),i("button",{class:"weilin-comfyui-install-button",onClick:We},h(p(o)("promptBox.settings.testingTranslater")),1)])):pe("",!0)])):pe("",!0)])])):pe("",!0),a.value==="setting_auto_complete_limit"?(S(),L("div",tb,[i("h3",null,h(p(o)("promptBox.settings.setting_auto_complete_limit")),1),i("div",nb,[i("div",ob,[i("label",null,h(p(o)("promptBox.settings.show_auto_limit")),1),ye(i("input",{type:"number","onUpdate:modelValue":Le[14]||(Le[14]=Ce=>be.value=Ce),min:"1",max:"99999999",style:{width:"100px"},placeholder:p(o)("promptBox.settings.showAutoLimitPlaceholder")},null,8,ab),[[Ae,be.value,void 0,{number:!0}]])]),i("div",sb,[i("label",null,h(p(o)("promptBox.settings.settingAutoCompleteWidth")),1),ye(i("input",{type:"number","onUpdate:modelValue":Le[15]||(Le[15]=Ce=>ke.value=Ce),min:"5",style:{width:"100px"},placeholder:p(o)("promptBox.settings.settingAutoCompleteWidthPlaceholder")},null,8,lb),[[Ae,ke.value,void 0,{number:!0}]])]),i("div",rb,[i("label",null,h(p(o)("promptBox.settings.settingAutoCompleteHeight")),1),ye(i("input",{type:"number","onUpdate:modelValue":Le[16]||(Le[16]=Ce=>_e.value=Ce),min:"5",style:{width:"100px"},placeholder:p(o)("promptBox.settings.settingAutoCompleteHeightPlaceholder")},null,8,ib),[[Ae,_e.value,void 0,{number:!0}]])]),i("button",{class:"weilin-comfyui-save-button",onClick:Ht},h(p(o)("promptBox.settings.save")),1)])])):pe("",!0),a.value==="setting_floating_ball"?(S(),L("div",ub,[i("h3",null,h(p(o)("promptBox.settings.setting_floating_ball")),1),i("div",cb,[i("div",db,[i("div",fb,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":Le[17]||(Le[17]=Ce=>m.value=Ce)},null,512),[[Ft,m.value]]),qe(" "+h(p(o)("promptBox.settings.enableFloatingBall")),1)])]),i("div",pb,[i("label",null,h(p(o)("promptBox.settings.floatingBallCount")),1),ye(i("input",{type:"number","onUpdate:modelValue":Le[18]||(Le[18]=Ce=>d.value=Ce),min:"1",max:"100",placeholder:p(o)("promptBox.settings.floatingBallCountPlaceholder")},null,8,gb),[[Ae,d.value,void 0,{number:!0}]])]),i("div",mb,[i("label",null,h(p(o)("promptBox.settings.floatingBallSize")),1),ye(i("input",{type:"number","onUpdate:modelValue":Le[19]||(Le[19]=Ce=>c.value=Ce),min:"5",max:"999999",placeholder:p(o)("promptBox.settings.floatingBallSizePlaceholder")},null,8,hb),[[Ae,c.value,void 0,{number:!0}]])]),i("div",vb,[i("label",null,h(p(o)("promptBox.settings.floatingBallHeight")),1),ye(i("input",{type:"number","onUpdate:modelValue":Le[20]||(Le[20]=Ce=>f.value=Ce),min:"5",max:"999999",placeholder:p(o)("promptBox.settings.floatingBallHeightPlaceholder")},null,8,_b),[[Ae,f.value,void 0,{number:!0}]])])]),i("div",yb,[i("div",bb,[i("label",null,h(p(o)("promptBox.settings.skinSetting")),1),ye(i("select",{"onUpdate:modelValue":Le[21]||(Le[21]=Ce=>g.value=Ce)},[i("option",wb,h(p(o)("promptBox.settings.defaultSkin")),1),i("option",xb,h(p(o)("promptBox.settings.customSkin")),1)],512),[[Vt,g.value]])]),g.value==="custom"?(S(),L("div",Tb,[i("label",null,h(p(o)("promptBox.settings.uploadSkin")),1),i("input",{type:"file",accept:"image/*",onChange:H,ref:"skinUploader"},null,544),v.value?(S(),L("div",Sb,[i("img",{src:v.value,alt:"Custom Skin Preview"},null,8,kb)])):pe("",!0)])):pe("",!0)]),i("div",Cb,[i("label",null,h(p(o)("promptBox.settings.bgSetting")),1),ye(i("select",{"onUpdate:modelValue":Le[22]||(Le[22]=Ce=>_.value=Ce)},[i("option",Eb,h(p(o)("promptBox.settings.gradientBg")),1),i("option",Lb,h(p(o)("promptBox.settings.transparentBg")),1)],512),[[Vt,_.value]])]),_.value==="gradient"?(S(),L("div",$b,[i("label",null,h(p(o)("promptBox.settings.gradientColor")),1),i("div",Ab,[ye(i("input",{type:"color","onUpdate:modelValue":Le[23]||(Le[23]=Ce=>w.value=Ce)},null,512),[[Ae,w.value]]),ye(i("input",{type:"color","onUpdate:modelValue":Le[24]||(Le[24]=Ce=>x.value=Ce)},null,512),[[Ae,x.value]]),i("button",{onClick:O,style:{"margin-left":"10px",width:"200px"}},h(p(o)("promptBox.settings.resetToDefault")),1)])])):pe("",!0),i("div",Ib,[i("label",null,h(p(o)("promptBox.settings.borderRadius")),1),ye(i("input",{type:"number","onUpdate:modelValue":Le[25]||(Le[25]=Ce=>A.value=Ce),min:"0",max:"50"},null,512),[[Ae,A.value,void 0,{number:!0}]])]),i("button",{class:"weilin-comfyui-save-button",style:{"grid-column":"span 2"},onClick:B},h(p(o)("promptBox.settings.save")),1)])])):pe("",!0),a.value==="setting_prompt_box"?(S(),L("div",Mb,[i("h3",null,h(p(o)("promptBox.settings.setting_prompt_box")),1),i("div",Ob,[i("div",Nb,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":Le[26]||(Le[26]=Ce=>W.value=Ce)},null,512),[[Ft,W.value]]),qe(" "+h(p(o)("promptBox.settings.enableCommaConversion")),1)])]),i("div",Rb,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":Le[27]||(Le[27]=Ce=>T.value=Ce)},null,512),[[Ft,T.value]]),qe(" "+h(p(o)("promptBox.settings.enablePeriodConversion")),1)])]),i("div",Db,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":Le[28]||(Le[28]=Ce=>P.value=Ce)},null,512),[[Ft,P.value]]),qe(" "+h(p(o)("promptBox.settings.enableBracketConversion")),1)])]),i("div",Pb,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":Le[29]||(Le[29]=Ce=>q.value=Ce)},null,512),[[Ft,q.value]]),qe(" "+h(p(o)("promptBox.settings.enableAngleBracketConversion")),1)])]),i("div",Fb,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":Le[30]||(Le[30]=Ce=>G.value=Ce)},null,512),[[Ft,G.value]]),qe(" "+h(p(o)("promptBox.settings.enableUnderscoreToBracket")),1)])]),i("div",Bb,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":Le[31]||(Le[31]=Ce=>z.value=Ce)},null,512),[[Ft,z.value]]),qe(" "+h(p(o)("promptBox.settings.enableCommaCloseAutocomplete")),1)])]),i("div",Ub,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":Le[32]||(Le[32]=Ce=>J.value=Ce)},null,512),[[Ft,J.value]]),qe(" "+h(p(o)("promptBox.settings.enableBracketEscape")),1)])]),i("button",{class:"weilin-comfyui-save-button",onClick:k},h(p(o)("promptBox.settings.save")),1)])])):pe("",!0),a.value==="setting_openai_box"?(S(),L("div",jb,[i("h3",null,h(p(o)("promptBox.settings.openaiSettings")),1),i("div",Hb,[i("div",Wb,[i("label",null,h(p(o)("promptBox.settings.selectedOpenaiConfig")),1),ye(i("select",{"onUpdate:modelValue":Le[33]||(Le[33]=Ce=>K.value=Ce),onChange:R},[(S(!0),L(Oe,null,He(ee.value,(Ce,st)=>(S(),L("option",{key:st,value:st},h(Ce.model)+" ("+h(Ce.base_url)+") ",9,Vb))),128))],544),[[Vt,K.value]])]),i("div",zb,[(S(!0),L(Oe,null,He(ee.value,(Ce,st)=>(S(),L("div",{key:st,class:"weilin-comfyui-config-item"},[i("div",qb,[i("span",null,h(Ce.model),1),i("div",Gb,[i("button",{onClick:mn=>ie(st)},h(U.value===st?p(o)("promptBox.settings.cancel"):p(o)("promptBox.settings.edit")),9,Qb),i("button",{onClick:mn=>Y(st)},h(p(o)("promptBox.settings.delete")),9,Yb)])]),U.value===st?(S(),L("div",Jb,[i("div",Kb,[i("label",null,h(p(o)("promptBox.settings.openai_api_key"))+":",1),ye(i("input",{type:"text","onUpdate:modelValue":Le[34]||(Le[34]=mn=>te.value.api_key=mn),placeholder:p(o)("promptBox.settings.openai_api_key_placeholder")},null,8,Xb),[[Ae,te.value.api_key]])]),i("div",Zb,[i("label",null,h(p(o)("promptBox.settings.openai_base_url"))+":",1),ye(i("input",{type:"text","onUpdate:modelValue":Le[35]||(Le[35]=mn=>te.value.base_url=mn),placeholder:p(o)("promptBox.settings.openai_base_url_placeholder")},null,8,e4),[[Ae,te.value.base_url]])]),i("div",t4,[i("label",null,h(p(o)("promptBox.settings.openai_model"))+":",1),ye(i("input",{type:"text","onUpdate:modelValue":Le[36]||(Le[36]=mn=>te.value.model=mn),placeholder:p(o)("promptBox.settings.openai_model_placeholder")},null,8,n4),[[Ae,te.value.model]])]),i("div",o4,[i("button",{onClick:mn=>re(st)},h(p(o)("promptBox.settings.save")),9,a4)])])):(S(),L("div",s4,[i("div",null,h(p(o)("promptBox.settings.openai_api_key"))+": "+h(Ce.api_key?"******":p(o)("promptBox.settings.not_set")),1),i("div",null,h(p(o)("promptBox.settings.openai_base_url"))+": "+h(Ce.base_url),1)]))]))),128))]),Q.value?(S(),L("div",l4,[i("div",r4,[i("label",null,h(p(o)("promptBox.settings.openai_api_key"))+":",1),ye(i("input",{type:"text","onUpdate:modelValue":Le[37]||(Le[37]=Ce=>te.value.api_key=Ce),placeholder:p(o)("promptBox.settings.openai_api_key_placeholder")},null,8,i4),[[Ae,te.value.api_key]])]),i("div",u4,[i("label",null,h(p(o)("promptBox.settings.openai_base_url"))+":",1),ye(i("input",{type:"text","onUpdate:modelValue":Le[38]||(Le[38]=Ce=>te.value.base_url=Ce),placeholder:p(o)("promptBox.settings.openai_base_url_placeholder")},null,8,c4),[[Ae,te.value.base_url]])]),i("div",d4,[i("label",null,h(p(o)("promptBox.settings.openai_model"))+":",1),ye(i("input",{type:"text","onUpdate:modelValue":Le[39]||(Le[39]=Ce=>te.value.model=Ce),placeholder:p(o)("promptBox.settings.openai_model_placeholder")},null,8,f4),[[Ae,te.value.model]])]),i("div",p4,[i("button",{onClick:b},h(p(o)("promptBox.settings.cancel")),1),i("button",{onClick:C},h(p(o)("promptBox.settings.save")),1)])])):pe("",!0),Q.value?pe("",!0):(S(),L("button",{key:1,class:"weilin-comfyui-add-button",onClick:D},h(p(o)("promptBox.settings.addNewConfig")),1))])])):pe("",!0),a.value==="setting_sponsor_me"?(S(),L("div",g4,[i("h3",null,h(p(o)("promptBox.settings.setting_sponsor_me")),1),i("div",m4,[i("h1",null,h(p(o)("promptBox.settings.sponsorMeTip")),1),i("h2",null,h(p(o)("promptBox.settings.sponsorMeLink")),1),i("button",{class:"weilin-comfyui-sponsor-me-button",onClick:V},h(p(o)("promptBox.settings.sponsorMe")),1)])])):pe("",!0),a.value==="setting_start_panel"?(S(),L("div",h4,[i("h3",null,h(p(o)("promptBox.settings.setting_start_panel")),1),i("div",v4,[i("h4",null,h(p(o)("promptBox.settings.startPanelTip")),1),i("button",{class:"weilin-comfyui-start-panel-button",onClick:me},h(p(o)("promptBox.settings.startPanel")),1)])])):pe("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-d84f82b1"]]),_4=["title"],y4={class:"switch-icon"},b4={key:0,class:"moon",viewBox:"0 0 24 24"},w4={key:1,class:"sun",viewBox:"0 0 24 24"},x4="weilin_tools_",T4=yt({__name:"ThemeSwitch",setup(e){const{t}=_t(),o=`${x4}theme`,n=y(localStorage.getItem(o)==="dark"),a=()=>{n.value=!n.value;const s=document.getElementById("weilin_comfyui_tools_prompt_ui_div");s&&s.setAttribute("data-theme",n.value?"dark":"light"),localStorage.setItem(o,n.value?"dark":"light")};return(s,l)=>(S(),L("button",{class:"theme-switch",onClick:a,title:p(t)("theme.toggle")},[i("div",y4,[n.value?(S(),L("svg",b4,[...l[0]||(l[0]=[i("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])])):(S(),L("svg",w4,[...l[1]||(l[1]=[i("circle",{cx:"12",cy:"12",r:"5"},null,-1),i("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"},null,-1)])]))]),ts(s.$slots,"default",{isDark:n.value},void 0,!0)],8,_4))}},[["__scopeId","data-v-e8b2125f"]]),bn="weilin_tools_",Mt={getTagsList:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/get_group_tags",method:"get",params:{...e,lang:t}})},addPrimaryCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/add_new_f_group",method:"post",data:{...e,lang:t}})},editPrimaryCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/edit_f_group",method:"post",data:{...e,lang:t}})},deletePrimaryCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/delete_f_group",method:"post",data:{...e,lang:t}})},addSubCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/add_new_s_group",method:"post",data:{...e,lang:t}})},editSubCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/edit_s_group",method:"post",data:{...e,lang:t}})},deleteSubCategory:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/delete_s_group",method:"post",data:{...e,lang:t}})},addNewTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/new_tags",method:"post",data:{...e,lang:t}})},editTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/edit_tags",method:"post",data:{...e,lang:t}})},deleteTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/delete_tags",method:"post",data:{...e,lang:t}})},batchDeleteTags:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/batch_delete_tags",method:"post",data:{...e,lang:t}})},moveTag:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/move_tag",method:"post",data:{...e,lang:t}})},getTagsGroupList:async()=>await Me({url:"/prompt/get_groups_list",method:"post"}),runSQLToServer:async e=>await Me({url:"/prompt/run_sql_text",method:"post",timeout:0,data:{sql:e}}),moveMainGroup:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/move_group",method:"post",data:{...e,lang:t}})},moveSubGroup:async e=>{const t=localStorage.getItem(`${bn}userLocale`)||"zh_CN";return await Me({url:"/prompt/move_subgroup",method:"post",data:{...e,lang:t}})},getTagMainGroup:async()=>await Me({url:"/prompt/get_tag_groups",method:"post"}),getTagSubGroup:async e=>await Me({url:"/prompt/get_tag_subgroups",method:"post",data:{p_uuid:e}}),getTagList:async e=>await Me({url:"/prompt/get_tag_tags",method:"post",data:{g_uuid:e}}),searchTag:async e=>await Me({url:"/prompt/search_tags",method:"post",data:{keyword:e}})};/**
 * uuidv7: A JavaScript implementation of UUID version 7
 *
 * Copyright 2021-2024 LiosK
 *
 * @license Apache-2.0
 * @packageDocumentation
 */const Ql="0123456789abcdef";class aa{constructor(t){this.bytes=t}static ofInner(t){if(t.length!==16)throw new TypeError("not 128-bit length");return new aa(t)}static fromFieldsV7(t,o,n,a){if(!Number.isInteger(t)||!Number.isInteger(o)||!Number.isInteger(n)||!Number.isInteger(a)||t<0||o<0||n<0||a<0||t>0xffffffffffff||o>4095||n>1073741823||a>4294967295)throw new RangeError("invalid field value");const s=new Uint8Array(16);return s[0]=t/2**40,s[1]=t/2**32,s[2]=t/2**24,s[3]=t/2**16,s[4]=t/2**8,s[5]=t,s[6]=112|o>>>8,s[7]=o,s[8]=128|n>>>24,s[9]=n>>>16,s[10]=n>>>8,s[11]=n,s[12]=a>>>24,s[13]=a>>>16,s[14]=a>>>8,s[15]=a,new aa(s)}static parse(t){var o,n,a,s;let l;switch(t.length){case 32:l=(o=/^[0-9a-f]{32}$/i.exec(t))===null||o===void 0?void 0:o[0];break;case 36:l=(n=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||n===void 0?void 0:n.slice(1,6).join("");break;case 38:l=(a=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(t))===null||a===void 0?void 0:a.slice(1,6).join("");break;case 45:l=(s=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(t))===null||s===void 0?void 0:s.slice(1,6).join("");break}if(l){const r=new Uint8Array(16);for(let u=0;u<16;u+=4){const d=parseInt(l.substring(2*u,2*u+8),16);r[u+0]=d>>>24,r[u+1]=d>>>16,r[u+2]=d>>>8,r[u+3]=d}return new aa(r)}else throw new SyntaxError("could not parse UUID string")}toString(){let t="";for(let o=0;o<this.bytes.length;o++)t+=Ql.charAt(this.bytes[o]>>>4),t+=Ql.charAt(this.bytes[o]&15),(o===3||o===5||o===7||o===9)&&(t+="-");return t}toHex(){let t="";for(let o=0;o<this.bytes.length;o++)t+=Ql.charAt(this.bytes[o]>>>4),t+=Ql.charAt(this.bytes[o]&15);return t}toJSON(){return this.toString()}getVariant(){const t=this.bytes[8]>>>4;if(t<0)throw new Error("unreachable");if(t<=7)return this.bytes.every(o=>o===0)?"NIL":"VAR_0";if(t<=11)return"VAR_10";if(t<=13)return"VAR_110";if(t<=15)return this.bytes.every(o=>o===255)?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return this.getVariant()==="VAR_10"?this.bytes[6]>>>4:void 0}clone(){return new aa(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(let o=0;o<16;o++){const n=this.bytes[o]-t.bytes[o];if(n!==0)return Math.sign(n)}return 0}}class S4{constructor(t){this.timestamp=0,this.counter=0,this.random=t??k4()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(t,o){let n=this.generateOrAbortCore(t,o);return n===void 0&&(this.timestamp=0,n=this.generateOrAbortCore(t,o)),n}generateOrAbortCore(t,o){if(!Number.isInteger(t)||t<1||t>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit positive integer");if(o<0||o>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(t>this.timestamp)this.timestamp=t,this.resetCounter();else if(t+o>=this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return aa.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}generateV4(){const t=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return t[6]=64|t[6]>>>4,t[8]=128|t[8]>>>2,aa.ofInner(t)}}const k4=()=>{if(typeof crypto<"u"&&typeof crypto.getRandomValues<"u")return new C4;if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");return{nextUint32:()=>Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536)}};class C4{constructor(){this.buffer=new Uint32Array(8),this.cursor=65535}nextUint32(){return this.cursor>=this.buffer.length&&(crypto.getRandomValues(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}let Pp;const Fo=()=>E4().toString(),E4=()=>(Pp||(Pp=new S4)).generate(),L4={class:"tag-manager"},$4={class:"category-tabs"},A4={class:"tabs-wrapper primary-tabs"},I4={class:"tabs-scroll"},M4=["onClick"],O4={class:"tab-text"},N4={key:0,class:"tabs-wrapper group-tabs"},R4={class:"tabs-scroll"},D4=["onClick"],P4={class:"tab-text"},Fp=yt({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=o,s=y([]),l=y(null),r=y(null),u=y([]),d=y(!1),c=y(!1),f=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},m=async()=>{try{const A=await Mt.getTagsGroupList();if(s.value=A.info,r.value){const W=s.value.flatMap(T=>T.groups).find(T=>T.p_uuid===r.value.p_uuid);W?r.value=W:r.value=null}if(l.value){const W=s.value.find(T=>T.p_uuid===l.value.p_uuid);W?l.value=W:l.value=null}}catch(A){console.error(":",A)}},g=A=>{if(!A||A==="transparent")return"var(--primary-text)";let W,T,P,q=1;if(A.startsWith("rgba")){const z=A.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);z&&([,W,T,P,q]=z.map(Number))}else if(A.startsWith("rgb")){const z=A.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);z&&([,W,T,P]=z.map(Number))}return q<.5?"var(--primary-text)":(W*299+T*587+P*114)/1e3>128?"#000000":"#ffffff"};ut(()=>{window.addEventListener("message",w)}),Lo(()=>{window.removeEventListener("message",w)});const v=A=>{l.value=A,r.value=null,d.value=!1,u.value=[]},_=A=>{r.value=A,d.value=!1,u.value=[]},w=A=>{A.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&m()},x=()=>{if(r.value==null||l.value==null){Z({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{group:l.value,sub:r.value}),c.value=!1};return t({open:()=>{f(),c.value=!0}}),(A,W)=>(S(),wt(Ca,{modelValue:c.value,"onUpdate:modelValue":W[1]||(W[1]=T=>c.value=T),title:p(n)("importDialog.selectTitle")},{footer:it(()=>[i("button",{onClick:W[0]||(W[0]=T=>c.value=!1)},h(p(n)("promptBox.settings.close")),1),i("button",{onClick:x},h(p(n)("importDialog.sureSelect")),1)]),default:it(()=>[i("div",L4,[i("div",$4,[i("div",A4,[i("div",I4,[(S(!0),L(Oe,null,He(s.value,(T,P)=>{var q,G,z;return S(),L("div",{key:"Tabss-"+P,class:Ee(["tab-item",{active:((q=l.value)==null?void 0:q.name)===T.name}]),style:pt({backgroundColor:((G=l.value)==null?void 0:G.name)===T.name?"var(--primary-color)":T.color,color:((z=l.value)==null?void 0:z.name)===T.name?"#ffffff":g(T.color)}),onClick:J=>v(T)},[i("span",O4,h(T.name),1)],14,M4)}),128))])]),l.value?(S(),L("div",N4,[i("div",R4,[(S(!0),L(Oe,null,He(l.value.groups,(T,P)=>{var q,G,z;return S(),L("div",{key:"TabsSw-"+P,class:Ee(["tab-item",{active:((q=r.value)==null?void 0:q.name)===T.name}]),style:pt({backgroundColor:((G=r.value)==null?void 0:G.name)===T.name?"var(--primary-color)":T.color,color:((z=r.value)==null?void 0:z.name)===T.name?"#ffffff":g(T.color)}),onClick:J=>_(T)},[i("span",P4,h(T.name),1)],14,D4)}),128))])])):pe("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-6031c9d4"]]);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Bp(e){return typeof e>"u"||e===null}function F4(e){return typeof e=="object"&&e!==null}function B4(e){return Array.isArray(e)?e:Bp(e)?[]:[e]}function U4(e,t){var o,n,a,s;if(t)for(s=Object.keys(t),o=0,n=s.length;o<n;o+=1)a=s[o],e[a]=t[a];return e}function j4(e,t){var o="",n;for(n=0;n<t;n+=1)o+=e;return o}function H4(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var W4=Bp,V4=F4,z4=B4,q4=j4,G4=H4,Q4=U4,qt={isNothing:W4,isObject:V4,toArray:z4,repeat:q4,isNegativeZero:G4,extend:Q4};function Up(e,t){var o="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(o+='in "'+e.mark.name+'" '),o+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(o+=`

`+e.mark.snippet),n+" "+o):n}function Es(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Up(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Es.prototype=Object.create(Error.prototype),Es.prototype.constructor=Es,Es.prototype.toString=function(t){return this.name+": "+Up(this,t)};var pn=Es;function Qi(e,t,o,n,a){var s="",l="",r=Math.floor(a/2)-1;return n-t>r&&(s=" ... ",t=n-r+s.length),o-n>r&&(l=" ...",o=n+r-l.length),{str:s+e.slice(t,o).replace(/\t/g,"")+l,pos:n-t+s.length}}function Yi(e,t){return qt.repeat(" ",t-e.length)+e}function Y4(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var o=/\r?\n|\r|\0/g,n=[0],a=[],s,l=-1;s=o.exec(e.buffer);)a.push(s.index),n.push(s.index+s[0].length),e.position<=s.index&&l<0&&(l=n.length-2);l<0&&(l=n.length-1);var r="",u,d,c=Math.min(e.line+t.linesAfter,a.length).toString().length,f=t.maxLength-(t.indent+c+3);for(u=1;u<=t.linesBefore&&!(l-u<0);u++)d=Qi(e.buffer,n[l-u],a[l-u],e.position-(n[l]-n[l-u]),f),r=qt.repeat(" ",t.indent)+Yi((e.line-u+1).toString(),c)+" | "+d.str+`
`+r;for(d=Qi(e.buffer,n[l],a[l],e.position,f),r+=qt.repeat(" ",t.indent)+Yi((e.line+1).toString(),c)+" | "+d.str+`
`,r+=qt.repeat("-",t.indent+c+3+d.pos)+`^
`,u=1;u<=t.linesAfter&&!(l+u>=a.length);u++)d=Qi(e.buffer,n[l+u],a[l+u],e.position-(n[l]-n[l+u]),f),r+=qt.repeat(" ",t.indent)+Yi((e.line+u+1).toString(),c)+" | "+d.str+`
`;return r.replace(/\n$/,"")}var J4=Y4,K4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],X4=["scalar","sequence","mapping"];function Z4(e){var t={};return e!==null&&Object.keys(e).forEach(function(o){e[o].forEach(function(n){t[String(n)]=o})}),t}function ew(e,t){if(t=t||{},Object.keys(t).forEach(function(o){if(K4.indexOf(o)===-1)throw new pn('Unknown option "'+o+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(o){return o},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Z4(t.styleAliases||null),X4.indexOf(this.kind)===-1)throw new pn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Xt=ew;function jp(e,t){var o=[];return e[t].forEach(function(n){var a=o.length;o.forEach(function(s,l){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(a=l)}),o[a]=n}),o}function tw(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,o;function n(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,o=arguments.length;t<o;t+=1)arguments[t].forEach(n);return e}function Ji(e){return this.extend(e)}Ji.prototype.extend=function(t){var o=[],n=[];if(t instanceof Xt)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(o=o.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new pn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");o.forEach(function(s){if(!(s instanceof Xt))throw new pn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new pn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new pn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Xt))throw new pn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(Ji.prototype);return a.implicit=(this.implicit||[]).concat(o),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=jp(a,"implicit"),a.compiledExplicit=jp(a,"explicit"),a.compiledTypeMap=tw(a.compiledImplicit,a.compiledExplicit),a};var Hp=Ji,Wp=new Xt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Vp=new Xt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),zp=new Xt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),qp=new Hp({explicit:[Wp,Vp,zp]});function nw(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function ow(){return null}function aw(e){return e===null}var Gp=new Xt("tag:yaml.org,2002:null",{kind:"scalar",resolve:nw,construct:ow,predicate:aw,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function sw(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function lw(e){return e==="true"||e==="True"||e==="TRUE"}function rw(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Qp=new Xt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:sw,construct:lw,predicate:rw,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function iw(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function uw(e){return 48<=e&&e<=55}function cw(e){return 48<=e&&e<=57}function dw(e){if(e===null)return!1;var t=e.length,o=0,n=!1,a;if(!t)return!1;if(a=e[o],(a==="-"||a==="+")&&(a=e[++o]),a==="0"){if(o+1===t)return!0;if(a=e[++o],a==="b"){for(o++;o<t;o++)if(a=e[o],a!=="_"){if(a!=="0"&&a!=="1")return!1;n=!0}return n&&a!=="_"}if(a==="x"){for(o++;o<t;o++)if(a=e[o],a!=="_"){if(!iw(e.charCodeAt(o)))return!1;n=!0}return n&&a!=="_"}if(a==="o"){for(o++;o<t;o++)if(a=e[o],a!=="_"){if(!uw(e.charCodeAt(o)))return!1;n=!0}return n&&a!=="_"}}if(a==="_")return!1;for(;o<t;o++)if(a=e[o],a!=="_"){if(!cw(e.charCodeAt(o)))return!1;n=!0}return!(!n||a==="_")}function fw(e){var t=e,o=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(o=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return o*parseInt(t.slice(2),2);if(t[1]==="x")return o*parseInt(t.slice(2),16);if(t[1]==="o")return o*parseInt(t.slice(2),8)}return o*parseInt(t,10)}function pw(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!qt.isNegativeZero(e)}var Yp=new Xt("tag:yaml.org,2002:int",{kind:"scalar",resolve:dw,construct:fw,predicate:pw,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),gw=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function mw(e){return!(e===null||!gw.test(e)||e[e.length-1]==="_")}function hw(e){var t,o;return t=e.replace(/_/g,"").toLowerCase(),o=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?o===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:o*parseFloat(t,10)}var vw=/^[-+]?[0-9]+e/;function _w(e,t){var o;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qt.isNegativeZero(e))return"-0.0";return o=e.toString(10),vw.test(o)?o.replace("e",".e"):o}function yw(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||qt.isNegativeZero(e))}var Jp=new Xt("tag:yaml.org,2002:float",{kind:"scalar",resolve:mw,construct:hw,predicate:yw,represent:_w,defaultStyle:"lowercase"}),Kp=qp.extend({implicit:[Gp,Qp,Yp,Jp]}),Xp=Kp,Zp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),eg=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function bw(e){return e===null?!1:Zp.exec(e)!==null||eg.exec(e)!==null}function ww(e){var t,o,n,a,s,l,r,u=0,d=null,c,f,m;if(t=Zp.exec(e),t===null&&(t=eg.exec(e)),t===null)throw new Error("Date resolve error");if(o=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(o,n,a));if(s=+t[4],l=+t[5],r=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(c=+t[10],f=+(t[11]||0),d=(c*60+f)*6e4,t[9]==="-"&&(d=-d)),m=new Date(Date.UTC(o,n,a,s,l,r,u)),d&&m.setTime(m.getTime()-d),m}function xw(e){return e.toISOString()}var tg=new Xt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:bw,construct:ww,instanceOf:Date,represent:xw});function Tw(e){return e==="<<"||e===null}var ng=new Xt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Tw}),Ki=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Sw(e){if(e===null)return!1;var t,o,n=0,a=e.length,s=Ki;for(o=0;o<a;o++)if(t=s.indexOf(e.charAt(o)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function kw(e){var t,o,n=e.replace(/[\r\n=]/g,""),a=n.length,s=Ki,l=0,r=[];for(t=0;t<a;t++)t%4===0&&t&&(r.push(l>>16&255),r.push(l>>8&255),r.push(l&255)),l=l<<6|s.indexOf(n.charAt(t));return o=a%4*6,o===0?(r.push(l>>16&255),r.push(l>>8&255),r.push(l&255)):o===18?(r.push(l>>10&255),r.push(l>>2&255)):o===12&&r.push(l>>4&255),new Uint8Array(r)}function Cw(e){var t="",o=0,n,a,s=e.length,l=Ki;for(n=0;n<s;n++)n%3===0&&n&&(t+=l[o>>18&63],t+=l[o>>12&63],t+=l[o>>6&63],t+=l[o&63]),o=(o<<8)+e[n];return a=s%3,a===0?(t+=l[o>>18&63],t+=l[o>>12&63],t+=l[o>>6&63],t+=l[o&63]):a===2?(t+=l[o>>10&63],t+=l[o>>4&63],t+=l[o<<2&63],t+=l[64]):a===1&&(t+=l[o>>2&63],t+=l[o<<4&63],t+=l[64],t+=l[64]),t}function Ew(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var og=new Xt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Sw,construct:kw,predicate:Ew,represent:Cw}),Lw=Object.prototype.hasOwnProperty,$w=Object.prototype.toString;function Aw(e){if(e===null)return!0;var t=[],o,n,a,s,l,r=e;for(o=0,n=r.length;o<n;o+=1){if(a=r[o],l=!1,$w.call(a)!=="[object Object]")return!1;for(s in a)if(Lw.call(a,s))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function Iw(e){return e!==null?e:[]}var ag=new Xt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Aw,construct:Iw}),Mw=Object.prototype.toString;function Ow(e){if(e===null)return!0;var t,o,n,a,s,l=e;for(s=new Array(l.length),t=0,o=l.length;t<o;t+=1){if(n=l[t],Mw.call(n)!=="[object Object]"||(a=Object.keys(n),a.length!==1))return!1;s[t]=[a[0],n[a[0]]]}return!0}function Nw(e){if(e===null)return[];var t,o,n,a,s,l=e;for(s=new Array(l.length),t=0,o=l.length;t<o;t+=1)n=l[t],a=Object.keys(n),s[t]=[a[0],n[a[0]]];return s}var sg=new Xt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Ow,construct:Nw}),Rw=Object.prototype.hasOwnProperty;function Dw(e){if(e===null)return!0;var t,o=e;for(t in o)if(Rw.call(o,t)&&o[t]!==null)return!1;return!0}function Pw(e){return e!==null?e:{}}var lg=new Xt("tag:yaml.org,2002:set",{kind:"mapping",resolve:Dw,construct:Pw}),Xi=Xp.extend({implicit:[tg,ng],explicit:[og,ag,sg,lg]}),Bo=Object.prototype.hasOwnProperty,Yl=1,rg=2,ig=3,Jl=4,Zi=1,Fw=2,ug=3,Bw=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Uw=/[\x85\u2028\u2029]/,jw=/[,\[\]\{\}]/,cg=/^(?:!|!!|![a-z\-]+!)$/i,dg=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function fg(e){return Object.prototype.toString.call(e)}function to(e){return e===10||e===13}function sa(e){return e===9||e===32}function wn(e){return e===9||e===32||e===10||e===13}function Ea(e){return e===44||e===91||e===93||e===123||e===125}function Hw(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function Ww(e){return e===120?2:e===117?4:e===85?8:0}function Vw(e){return 48<=e&&e<=57?e-48:-1}function pg(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function zw(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var gg=new Array(256),mg=new Array(256),La=0;La<256;La++)gg[La]=pg(La)?1:0,mg[La]=pg(La);function qw(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Xi,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function hg(e,t){var o={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return o.snippet=J4(o),new pn(t,o)}function Be(e,t){throw hg(e,t)}function Kl(e,t){e.onWarning&&e.onWarning.call(null,hg(e,t))}var vg={YAML:function(t,o,n){var a,s,l;t.version!==null&&Be(t,"duplication of %YAML directive"),n.length!==1&&Be(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),a===null&&Be(t,"ill-formed argument of the YAML directive"),s=parseInt(a[1],10),l=parseInt(a[2],10),s!==1&&Be(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=l<2,l!==1&&l!==2&&Kl(t,"unsupported YAML version of the document")},TAG:function(t,o,n){var a,s;n.length!==2&&Be(t,"TAG directive accepts exactly two arguments"),a=n[0],s=n[1],cg.test(a)||Be(t,"ill-formed tag handle (first argument) of the TAG directive"),Bo.call(t.tagMap,a)&&Be(t,'there is a previously declared suffix for "'+a+'" tag handle'),dg.test(s)||Be(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Be(t,"tag prefix is malformed: "+s)}t.tagMap[a]=s}};function Uo(e,t,o,n){var a,s,l,r;if(t<o){if(r=e.input.slice(t,o),n)for(a=0,s=r.length;a<s;a+=1)l=r.charCodeAt(a),l===9||32<=l&&l<=1114111||Be(e,"expected valid JSON character");else Bw.test(r)&&Be(e,"the stream contains non-printable characters");e.result+=r}}function _g(e,t,o,n){var a,s,l,r;for(qt.isObject(o)||Be(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(o),l=0,r=a.length;l<r;l+=1)s=a[l],Bo.call(t,s)||(t[s]=o[s],n[s]=!0)}function $a(e,t,o,n,a,s,l,r,u){var d,c;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),d=0,c=a.length;d<c;d+=1)Array.isArray(a[d])&&Be(e,"nested arrays are not supported inside keys"),typeof a=="object"&&fg(a[d])==="[object Object]"&&(a[d]="[object Object]");if(typeof a=="object"&&fg(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(d=0,c=s.length;d<c;d+=1)_g(e,t,s[d],o);else _g(e,t,s,o);else!e.json&&!Bo.call(o,a)&&Bo.call(t,a)&&(e.line=l||e.line,e.lineStart=r||e.lineStart,e.position=u||e.position,Be(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[a]=s,delete o[a];return t}function eu(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Be(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Ut(e,t,o){for(var n=0,a=e.input.charCodeAt(e.position);a!==0;){for(;sa(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(to(a))for(eu(e),a=e.input.charCodeAt(e.position),n++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return o!==-1&&n!==0&&e.lineIndent<o&&Kl(e,"deficient indentation"),n}function Xl(e){var t=e.position,o;return o=e.input.charCodeAt(t),!!((o===45||o===46)&&o===e.input.charCodeAt(t+1)&&o===e.input.charCodeAt(t+2)&&(t+=3,o=e.input.charCodeAt(t),o===0||wn(o)))}function tu(e,t){t===1?e.result+=" ":t>1&&(e.result+=qt.repeat(`
`,t-1))}function Gw(e,t,o){var n,a,s,l,r,u,d,c,f=e.kind,m=e.result,g;if(g=e.input.charCodeAt(e.position),wn(g)||Ea(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(a=e.input.charCodeAt(e.position+1),wn(a)||o&&Ea(a)))return!1;for(e.kind="scalar",e.result="",s=l=e.position,r=!1;g!==0;){if(g===58){if(a=e.input.charCodeAt(e.position+1),wn(a)||o&&Ea(a))break}else if(g===35){if(n=e.input.charCodeAt(e.position-1),wn(n))break}else{if(e.position===e.lineStart&&Xl(e)||o&&Ea(g))break;if(to(g))if(u=e.line,d=e.lineStart,c=e.lineIndent,Ut(e,!1,-1),e.lineIndent>=t){r=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=l,e.line=u,e.lineStart=d,e.lineIndent=c;break}}r&&(Uo(e,s,l,!1),tu(e,e.line-u),s=l=e.position,r=!1),sa(g)||(l=e.position+1),g=e.input.charCodeAt(++e.position)}return Uo(e,s,l,!1),e.result?!0:(e.kind=f,e.result=m,!1)}function Qw(e,t){var o,n,a;if(o=e.input.charCodeAt(e.position),o!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;(o=e.input.charCodeAt(e.position))!==0;)if(o===39)if(Uo(e,n,e.position,!0),o=e.input.charCodeAt(++e.position),o===39)n=e.position,e.position++,a=e.position;else return!0;else to(o)?(Uo(e,n,a,!0),tu(e,Ut(e,!1,t)),n=a=e.position):e.position===e.lineStart&&Xl(e)?Be(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);Be(e,"unexpected end of the stream within a single quoted scalar")}function Yw(e,t){var o,n,a,s,l,r;if(r=e.input.charCodeAt(e.position),r!==34)return!1;for(e.kind="scalar",e.result="",e.position++,o=n=e.position;(r=e.input.charCodeAt(e.position))!==0;){if(r===34)return Uo(e,o,e.position,!0),e.position++,!0;if(r===92){if(Uo(e,o,e.position,!0),r=e.input.charCodeAt(++e.position),to(r))Ut(e,!1,t);else if(r<256&&gg[r])e.result+=mg[r],e.position++;else if((l=Ww(r))>0){for(a=l,s=0;a>0;a--)r=e.input.charCodeAt(++e.position),(l=Hw(r))>=0?s=(s<<4)+l:Be(e,"expected hexadecimal character");e.result+=zw(s),e.position++}else Be(e,"unknown escape sequence");o=n=e.position}else to(r)?(Uo(e,o,n,!0),tu(e,Ut(e,!1,t)),o=n=e.position):e.position===e.lineStart&&Xl(e)?Be(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Be(e,"unexpected end of the stream within a double quoted scalar")}function Jw(e,t){var o=!0,n,a,s,l=e.tag,r,u=e.anchor,d,c,f,m,g,v=Object.create(null),_,w,x,A;if(A=e.input.charCodeAt(e.position),A===91)c=93,g=!1,r=[];else if(A===123)c=125,g=!0,r={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),A=e.input.charCodeAt(++e.position);A!==0;){if(Ut(e,!0,t),A=e.input.charCodeAt(e.position),A===c)return e.position++,e.tag=l,e.anchor=u,e.kind=g?"mapping":"sequence",e.result=r,!0;o?A===44&&Be(e,"expected the node content, but found ','"):Be(e,"missed comma between flow collection entries"),w=_=x=null,f=m=!1,A===63&&(d=e.input.charCodeAt(e.position+1),wn(d)&&(f=m=!0,e.position++,Ut(e,!0,t))),n=e.line,a=e.lineStart,s=e.position,Aa(e,t,Yl,!1,!0),w=e.tag,_=e.result,Ut(e,!0,t),A=e.input.charCodeAt(e.position),(m||e.line===n)&&A===58&&(f=!0,A=e.input.charCodeAt(++e.position),Ut(e,!0,t),Aa(e,t,Yl,!1,!0),x=e.result),g?$a(e,r,v,w,_,x,n,a,s):f?r.push($a(e,null,v,w,_,x,n,a,s)):r.push(_),Ut(e,!0,t),A=e.input.charCodeAt(e.position),A===44?(o=!0,A=e.input.charCodeAt(++e.position)):o=!1}Be(e,"unexpected end of the stream within a flow collection")}function Kw(e,t){var o,n,a=Zi,s=!1,l=!1,r=t,u=0,d=!1,c,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Zi===a?a=f===43?ug:Fw:Be(e,"repeat of a chomping mode identifier");else if((c=Vw(f))>=0)c===0?Be(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Be(e,"repeat of an indentation width identifier"):(r=t+c-1,l=!0);else break;if(sa(f)){do f=e.input.charCodeAt(++e.position);while(sa(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!to(f)&&f!==0)}for(;f!==0;){for(eu(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!l||e.lineIndent<r)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>r&&(r=e.lineIndent),to(f)){u++;continue}if(e.lineIndent<r){a===ug?e.result+=qt.repeat(`
`,s?1+u:u):a===Zi&&s&&(e.result+=`
`);break}for(n?sa(f)?(d=!0,e.result+=qt.repeat(`
`,s?1+u:u)):d?(d=!1,e.result+=qt.repeat(`
`,u+1)):u===0?s&&(e.result+=" "):e.result+=qt.repeat(`
`,u):e.result+=qt.repeat(`
`,s?1+u:u),s=!0,l=!0,u=0,o=e.position;!to(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Uo(e,o,e.position,!1)}return!0}function yg(e,t){var o,n=e.tag,a=e.anchor,s=[],l,r=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Be(e,"tab characters must not be used in indentation")),!(u!==45||(l=e.input.charCodeAt(e.position+1),!wn(l))));){if(r=!0,e.position++,Ut(e,!0,-1)&&e.lineIndent<=t){s.push(null),u=e.input.charCodeAt(e.position);continue}if(o=e.line,Aa(e,t,ig,!1,!0),s.push(e.result),Ut(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===o||e.lineIndent>t)&&u!==0)Be(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return r?(e.tag=n,e.anchor=a,e.kind="sequence",e.result=s,!0):!1}function Xw(e,t,o){var n,a,s,l,r,u,d=e.tag,c=e.anchor,f={},m=Object.create(null),g=null,v=null,_=null,w=!1,x=!1,A;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),A=e.input.charCodeAt(e.position);A!==0;){if(!w&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Be(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,(A===63||A===58)&&wn(n))A===63?(w&&($a(e,f,m,g,v,null,l,r,u),g=v=_=null),x=!0,w=!0,a=!0):w?(w=!1,a=!0):Be(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,A=n;else{if(l=e.line,r=e.lineStart,u=e.position,!Aa(e,o,rg,!1,!0))break;if(e.line===s){for(A=e.input.charCodeAt(e.position);sa(A);)A=e.input.charCodeAt(++e.position);if(A===58)A=e.input.charCodeAt(++e.position),wn(A)||Be(e,"a whitespace character is expected after the key-value separator within a block mapping"),w&&($a(e,f,m,g,v,null,l,r,u),g=v=_=null),x=!0,w=!1,a=!1,g=e.tag,v=e.result;else if(x)Be(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=c,!0}else if(x)Be(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=c,!0}if((e.line===s||e.lineIndent>t)&&(w&&(l=e.line,r=e.lineStart,u=e.position),Aa(e,t,Jl,!0,a)&&(w?v=e.result:_=e.result),w||($a(e,f,m,g,v,_,l,r,u),g=v=_=null),Ut(e,!0,-1),A=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&A!==0)Be(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return w&&$a(e,f,m,g,v,null,l,r,u),x&&(e.tag=d,e.anchor=c,e.kind="mapping",e.result=f),x}function Zw(e){var t,o=!1,n=!1,a,s,l;if(l=e.input.charCodeAt(e.position),l!==33)return!1;if(e.tag!==null&&Be(e,"duplication of a tag property"),l=e.input.charCodeAt(++e.position),l===60?(o=!0,l=e.input.charCodeAt(++e.position)):l===33?(n=!0,a="!!",l=e.input.charCodeAt(++e.position)):a="!",t=e.position,o){do l=e.input.charCodeAt(++e.position);while(l!==0&&l!==62);e.position<e.length?(s=e.input.slice(t,e.position),l=e.input.charCodeAt(++e.position)):Be(e,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!wn(l);)l===33&&(n?Be(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),cg.test(a)||Be(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),l=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),jw.test(s)&&Be(e,"tag suffix cannot contain flow indicator characters")}s&&!dg.test(s)&&Be(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Be(e,"tag name is malformed: "+s)}return o?e.tag=s:Bo.call(e.tagMap,a)?e.tag=e.tagMap[a]+s:a==="!"?e.tag="!"+s:a==="!!"?e.tag="tag:yaml.org,2002:"+s:Be(e,'undeclared tag handle "'+a+'"'),!0}function e3(e){var t,o;if(o=e.input.charCodeAt(e.position),o!==38)return!1;for(e.anchor!==null&&Be(e,"duplication of an anchor property"),o=e.input.charCodeAt(++e.position),t=e.position;o!==0&&!wn(o)&&!Ea(o);)o=e.input.charCodeAt(++e.position);return e.position===t&&Be(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function t3(e){var t,o,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!wn(n)&&!Ea(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Be(e,"name of an alias node must contain at least one character"),o=e.input.slice(t,e.position),Bo.call(e.anchorMap,o)||Be(e,'unidentified alias "'+o+'"'),e.result=e.anchorMap[o],Ut(e,!0,-1),!0}function Aa(e,t,o,n,a){var s,l,r,u=1,d=!1,c=!1,f,m,g,v,_,w;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=l=r=Jl===o||ig===o,n&&Ut(e,!0,-1)&&(d=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;Zw(e)||e3(e);)Ut(e,!0,-1)?(d=!0,r=s,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):r=!1;if(r&&(r=d||a),(u===1||Jl===o)&&(Yl===o||rg===o?_=t:_=t+1,w=e.position-e.lineStart,u===1?r&&(yg(e,w)||Xw(e,w,_))||Jw(e,_)?c=!0:(l&&Kw(e,_)||Qw(e,_)||Yw(e,_)?c=!0:t3(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&Be(e,"alias node should not have any properties")):Gw(e,_,Yl===o)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(c=r&&yg(e,w))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Be(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,m=e.implicitTypes.length;f<m;f+=1)if(v=e.implicitTypes[f],v.resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Bo.call(e.typeMap[e.kind||"fallback"],e.tag))v=e.typeMap[e.kind||"fallback"][e.tag];else for(v=null,g=e.typeMap.multi[e.kind||"fallback"],f=0,m=g.length;f<m;f+=1)if(e.tag.slice(0,g[f].tag.length)===g[f].tag){v=g[f];break}v||Be(e,"unknown tag !<"+e.tag+">"),e.result!==null&&v.kind!==e.kind&&Be(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result,e.tag)?(e.result=v.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Be(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function n3(e){var t=e.position,o,n,a,s=!1,l;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(l=e.input.charCodeAt(e.position))!==0&&(Ut(e,!0,-1),l=e.input.charCodeAt(e.position),!(e.lineIndent>0||l!==37));){for(s=!0,l=e.input.charCodeAt(++e.position),o=e.position;l!==0&&!wn(l);)l=e.input.charCodeAt(++e.position);for(n=e.input.slice(o,e.position),a=[],n.length<1&&Be(e,"directive name must not be less than one character in length");l!==0;){for(;sa(l);)l=e.input.charCodeAt(++e.position);if(l===35){do l=e.input.charCodeAt(++e.position);while(l!==0&&!to(l));break}if(to(l))break;for(o=e.position;l!==0&&!wn(l);)l=e.input.charCodeAt(++e.position);a.push(e.input.slice(o,e.position))}l!==0&&eu(e),Bo.call(vg,n)?vg[n](e,n,a):Kl(e,'unknown document directive "'+n+'"')}if(Ut(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ut(e,!0,-1)):s&&Be(e,"directives end mark is expected"),Aa(e,e.lineIndent-1,Jl,!1,!0),Ut(e,!0,-1),e.checkLineBreaks&&Uw.test(e.input.slice(t,e.position))&&Kl(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Xl(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ut(e,!0,-1));return}if(e.position<e.length-1)Be(e,"end of the stream or a document separator is expected");else return}function bg(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var o=new qw(e,t),n=e.indexOf("\0");for(n!==-1&&(o.position=n,Be(o,"null byte is not allowed in input")),o.input+="\0";o.input.charCodeAt(o.position)===32;)o.lineIndent+=1,o.position+=1;for(;o.position<o.length-1;)n3(o);return o.documents}function o3(e,t,o){t!==null&&typeof t=="object"&&typeof o>"u"&&(o=t,t=null);var n=bg(e,o);if(typeof t!="function")return n;for(var a=0,s=n.length;a<s;a+=1)t(n[a])}function a3(e,t){var o=bg(e,t);if(o.length!==0){if(o.length===1)return o[0];throw new pn("expected a single document in the stream, but found more")}}var s3=o3,l3=a3,wg={loadAll:s3,load:l3},xg=Object.prototype.toString,Tg=Object.prototype.hasOwnProperty,nu=65279,r3=9,Ls=10,i3=13,u3=32,c3=33,d3=34,ou=35,f3=37,p3=38,g3=39,m3=42,Sg=44,h3=45,Zl=58,v3=61,_3=62,y3=63,b3=64,kg=91,Cg=93,w3=96,Eg=123,x3=124,Lg=125,ln={};ln[0]="\\0",ln[7]="\\a",ln[8]="\\b",ln[9]="\\t",ln[10]="\\n",ln[11]="\\v",ln[12]="\\f",ln[13]="\\r",ln[27]="\\e",ln[34]='\\"',ln[92]="\\\\",ln[133]="\\N",ln[160]="\\_",ln[8232]="\\L",ln[8233]="\\P";var T3=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],S3=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function k3(e,t){var o,n,a,s,l,r,u;if(t===null)return{};for(o={},n=Object.keys(t),a=0,s=n.length;a<s;a+=1)l=n[a],r=String(t[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),u=e.compiledTypeMap.fallback[l],u&&Tg.call(u.styleAliases,r)&&(r=u.styleAliases[r]),o[l]=r;return o}function C3(e){var t,o,n;if(t=e.toString(16).toUpperCase(),e<=255)o="x",n=2;else if(e<=65535)o="u",n=4;else if(e<=4294967295)o="U",n=8;else throw new pn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+o+qt.repeat("0",n-t.length)+t}var E3=1,$s=2;function L3(e){this.schema=e.schema||Xi,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=qt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=k3(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?$s:E3,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function $g(e,t){for(var o=qt.repeat(" ",t),n=0,a=-1,s="",l,r=e.length;n<r;)a=e.indexOf(`
`,n),a===-1?(l=e.slice(n),n=r):(l=e.slice(n,a+1),n=a+1),l.length&&l!==`
`&&(s+=o),s+=l;return s}function au(e,t){return`
`+qt.repeat(" ",e.indent*t)}function $3(e,t){var o,n,a;for(o=0,n=e.implicitTypes.length;o<n;o+=1)if(a=e.implicitTypes[o],a.resolve(t))return!0;return!1}function er(e){return e===u3||e===r3}function As(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==nu||65536<=e&&e<=1114111}function Ag(e){return As(e)&&e!==nu&&e!==i3&&e!==Ls}function Ig(e,t,o){var n=Ag(e),a=n&&!er(e);return(o?n:n&&e!==Sg&&e!==kg&&e!==Cg&&e!==Eg&&e!==Lg)&&e!==ou&&!(t===Zl&&!a)||Ag(t)&&!er(t)&&e===ou||t===Zl&&a}function A3(e){return As(e)&&e!==nu&&!er(e)&&e!==h3&&e!==y3&&e!==Zl&&e!==Sg&&e!==kg&&e!==Cg&&e!==Eg&&e!==Lg&&e!==ou&&e!==p3&&e!==m3&&e!==c3&&e!==x3&&e!==v3&&e!==_3&&e!==g3&&e!==d3&&e!==f3&&e!==b3&&e!==w3}function I3(e){return!er(e)&&e!==Zl}function Is(e,t){var o=e.charCodeAt(t),n;return o>=55296&&o<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(o-55296)*1024+n-56320+65536:o}function Mg(e){var t=/^\n* /;return t.test(e)}var Og=1,su=2,Ng=3,Rg=4,Ia=5;function M3(e,t,o,n,a,s,l,r){var u,d=0,c=null,f=!1,m=!1,g=n!==-1,v=-1,_=A3(Is(e,0))&&I3(Is(e,e.length-1));if(t||l)for(u=0;u<e.length;d>=65536?u+=2:u++){if(d=Is(e,u),!As(d))return Ia;_=_&&Ig(d,c,r),c=d}else{for(u=0;u<e.length;d>=65536?u+=2:u++){if(d=Is(e,u),d===Ls)f=!0,g&&(m=m||u-v-1>n&&e[v+1]!==" ",v=u);else if(!As(d))return Ia;_=_&&Ig(d,c,r),c=d}m=m||g&&u-v-1>n&&e[v+1]!==" "}return!f&&!m?_&&!l&&!a(e)?Og:s===$s?Ia:su:o>9&&Mg(e)?Ia:l?s===$s?Ia:su:m?Rg:Ng}function O3(e,t,o,n,a){e.dump=(function(){if(t.length===0)return e.quotingType===$s?'""':"''";if(!e.noCompatMode&&(T3.indexOf(t)!==-1||S3.test(t)))return e.quotingType===$s?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,o),l=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),r=n||e.flowLevel>-1&&o>=e.flowLevel;function u(d){return $3(e,d)}switch(M3(t,r,e.indent,l,u,e.quotingType,e.forceQuotes&&!n,a)){case Og:return t;case su:return"'"+t.replace(/'/g,"''")+"'";case Ng:return"|"+Dg(t,e.indent)+Pg($g(t,s));case Rg:return">"+Dg(t,e.indent)+Pg($g(N3(t,l),s));case Ia:return'"'+R3(t)+'"';default:throw new pn("impossible error: invalid scalar style")}})()}function Dg(e,t){var o=Mg(e)?String(t):"",n=e[e.length-1]===`
`,a=n&&(e[e.length-2]===`
`||e===`
`),s=a?"+":n?"":"-";return o+s+`
`}function Pg(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function N3(e,t){for(var o=/(\n+)([^\n]*)/g,n=(function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,o.lastIndex=d,Fg(e.slice(0,d),t)})(),a=e[0]===`
`||e[0]===" ",s,l;l=o.exec(e);){var r=l[1],u=l[2];s=u[0]===" ",n+=r+(!a&&!s&&u!==""?`
`:"")+Fg(u,t),a=s}return n}function Fg(e,t){if(e===""||e[0]===" ")return e;for(var o=/ [^ ]/g,n,a=0,s,l=0,r=0,u="";n=o.exec(e);)r=n.index,r-a>t&&(s=l>a?l:r,u+=`
`+e.slice(a,s),a=s+1),l=r;return u+=`
`,e.length-a>t&&l>a?u+=e.slice(a,l)+`
`+e.slice(l+1):u+=e.slice(a),u.slice(1)}function R3(e){for(var t="",o=0,n,a=0;a<e.length;o>=65536?a+=2:a++)o=Is(e,a),n=ln[o],!n&&As(o)?(t+=e[a],o>=65536&&(t+=e[a+1])):t+=n||C3(o);return t}function D3(e,t,o){var n="",a=e.tag,s,l,r;for(s=0,l=o.length;s<l;s+=1)r=o[s],e.replacer&&(r=e.replacer.call(o,String(s),r)),(_o(e,t,r,!1,!1)||typeof r>"u"&&_o(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=a,e.dump="["+n+"]"}function Bg(e,t,o,n){var a="",s=e.tag,l,r,u;for(l=0,r=o.length;l<r;l+=1)u=o[l],e.replacer&&(u=e.replacer.call(o,String(l),u)),(_o(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&_o(e,t+1,null,!0,!0,!1,!0))&&((!n||a!=="")&&(a+=au(e,t)),e.dump&&Ls===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=s,e.dump=a||"[]"}function P3(e,t,o){var n="",a=e.tag,s=Object.keys(o),l,r,u,d,c;for(l=0,r=s.length;l<r;l+=1)c="",n!==""&&(c+=", "),e.condenseFlow&&(c+='"'),u=s[l],d=o[u],e.replacer&&(d=e.replacer.call(o,u,d)),_o(e,t,u,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),_o(e,t,d,!1,!1)&&(c+=e.dump,n+=c));e.tag=a,e.dump="{"+n+"}"}function F3(e,t,o,n){var a="",s=e.tag,l=Object.keys(o),r,u,d,c,f,m;if(e.sortKeys===!0)l.sort();else if(typeof e.sortKeys=="function")l.sort(e.sortKeys);else if(e.sortKeys)throw new pn("sortKeys must be a boolean or a function");for(r=0,u=l.length;r<u;r+=1)m="",(!n||a!=="")&&(m+=au(e,t)),d=l[r],c=o[d],e.replacer&&(c=e.replacer.call(o,d,c)),_o(e,t+1,d,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Ls===e.dump.charCodeAt(0)?m+="?":m+="? "),m+=e.dump,f&&(m+=au(e,t)),_o(e,t+1,c,!0,f)&&(e.dump&&Ls===e.dump.charCodeAt(0)?m+=":":m+=": ",m+=e.dump,a+=m));e.tag=s,e.dump=a||"{}"}function Ug(e,t,o){var n,a,s,l,r,u;for(a=o?e.explicitTypes:e.implicitTypes,s=0,l=a.length;s<l;s+=1)if(r=a[s],(r.instanceOf||r.predicate)&&(!r.instanceOf||typeof t=="object"&&t instanceof r.instanceOf)&&(!r.predicate||r.predicate(t))){if(o?r.multi&&r.representName?e.tag=r.representName(t):e.tag=r.tag:e.tag="?",r.represent){if(u=e.styleMap[r.tag]||r.defaultStyle,xg.call(r.represent)==="[object Function]")n=r.represent(t,u);else if(Tg.call(r.represent,u))n=r.represent[u](t,u);else throw new pn("!<"+r.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}function _o(e,t,o,n,a,s,l){e.tag=null,e.dump=o,Ug(e,o,!1)||Ug(e,o,!0);var r=xg.call(e.dump),u=n,d;n&&(n=e.flowLevel<0||e.flowLevel>t);var c=r==="[object Object]"||r==="[object Array]",f,m;if(c&&(f=e.duplicates.indexOf(o),m=f!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&t>0)&&(a=!1),m&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(c&&m&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),r==="[object Object]")n&&Object.keys(e.dump).length!==0?(F3(e,t,e.dump,a),m&&(e.dump="&ref_"+f+e.dump)):(P3(e,t,e.dump),m&&(e.dump="&ref_"+f+" "+e.dump));else if(r==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!l&&t>0?Bg(e,t-1,e.dump,a):Bg(e,t,e.dump,a),m&&(e.dump="&ref_"+f+e.dump)):(D3(e,t,e.dump),m&&(e.dump="&ref_"+f+" "+e.dump));else if(r==="[object String]")e.tag!=="?"&&O3(e,e.dump,t,s,u);else{if(r==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new pn("unacceptable kind of an object to dump "+r)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function B3(e,t){var o=[],n=[],a,s;for(lu(e,o,n),a=0,s=n.length;a<s;a+=1)t.duplicates.push(o[n[a]]);t.usedDuplicates=new Array(s)}function lu(e,t,o){var n,a,s;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)o.indexOf(a)===-1&&o.push(a);else if(t.push(e),Array.isArray(e))for(a=0,s=e.length;a<s;a+=1)lu(e[a],t,o);else for(n=Object.keys(e),a=0,s=n.length;a<s;a+=1)lu(e[n[a]],t,o)}function U3(e,t){t=t||{};var o=new L3(t);o.noRefs||B3(e,o);var n=e;return o.replacer&&(n=o.replacer.call({"":n},"",n)),_o(o,0,n,!0,!0)?o.dump+`
`:""}var j3=U3,H3={dump:j3};function ru(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var W3=Xt,V3=Hp,z3=qp,q3=Kp,G3=Xp,Q3=Xi,Y3=wg.load,J3=wg.loadAll,K3=H3.dump,X3=pn,Z3={binary:og,float:Jp,map:zp,null:Gp,pairs:sg,set:lg,timestamp:tg,bool:Qp,int:Yp,merge:ng,omap:ag,seq:Vp,str:Wp},e5=ru("safeLoad","load"),t5=ru("safeLoadAll","loadAll"),n5=ru("safeDump","dump"),jg={Type:W3,Schema:V3,FAILSAFE_SCHEMA:z3,JSON_SCHEMA:q3,CORE_SCHEMA:G3,DEFAULT_SCHEMA:Q3,load:Y3,loadAll:J3,dump:K3,YAMLException:X3,types:Z3,safeLoad:e5,safeLoadAll:t5,safeDump:n5};const o5={key:0,class:"loading-overlay"},a5={class:"settings-content"},s5={class:"info-links"},l5={class:"info-link-item"},r5={class:"info-link-label"},i5={href:"https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X",target:"_blank",class:"info-link"},u5={class:"info-link-item"},c5={class:"info-link-label"},d5={href:"https://github.com/weilin9999/WeiLin-Comfyui-Tools-Prompt",target:"_blank",class:"info-link"},f5={class:"info-link-item"},p5={class:"info-link-label"},g5={href:"https://weilin9999.github.io/WeiLin-Share-Prompt-Web/#/",target:"_blank",class:"info-link"},m5={style:{"margin-bottom":"16px"}},h5=["placeholder"],v5={style:{"margin-bottom":"16px"}},_5=["placeholder"],y5=["placeholder"],b5={style:{"margin-bottom":"16px"}},w5=["placeholder"],x5=["placeholder"],T5={style:{"margin-bottom":"16px"}},S5=["placeholder"],k5={class:"data-container"},C5={key:0},E5={key:0},L5={class:"tag-group-container"},$5={style:{display:"flex","align-items":"center"}},A5={key:0},I5=["placeholder"],M5=["onClick"],O5=["onClick"],N5=["onClick"],R5=yt({__name:"import_tag",setup(e,{expose:t}){const{t:o}=_t(),n=y(!1),a=y(""),s=y(""),l=y(""),r=y(""),u=y(""),d=y(""),c=y(""),f=y(""),m=y(""),g=y([]),v=y(-1),_=y(""),w=y(""),x=y(null),A=y(null),W=y(null),T=y(!1),P=y(""),q=y(null);function G(){if(r.value.length<=0||u.value.length<=0){Z({type:"warn",str:"importDialog.pleaseFullRequest"});return}q.value.click()}function z(){a.value="",s.value="",l.value="",r.value="",u.value="",d.value="",c.value="",f.value="",m.value="",g.value=[],v.value=-1,_.value="",w.value="",T.value=!1}function J(E){const D=E.target.files[0];if(D){const Y=new FileReader;Y.onload=ie=>{const C=ie.target.result.split(`
`).filter(R=>R.trim());let b=0;C.forEach(R=>{const[V,me]=R.split(",");if(V&&me){const fe=V.trim().replace(/'/g,"''"),X=me.trim().replace(/'/g,"''"),le=Fo();b=b+1;const Ne=parseInt(new Date().getTime()/1e3)+b,Pe=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${fe}', '${X}', 'rgba(255, 123, 2, .4)', ${Ne}, '${m.value}', '${le}');`;g.value.push(Pe)}})},Y.readAsText(D)}E.target.value=""}function ve(E){const D=E.target.files[0];if(D){const Y=new FileReader;Y.onload=ie=>{try{const re=JSON.parse(ie.target.result);let C=0;Object.entries(re).forEach(([b,R])=>{const V=b.replace(/'/g,"''"),me=R.replace(/'/g,"''"),fe=Fo();C=C+1;const X=parseInt(new Date().getTime()/1e3)+C,le=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${V}', '${me}', 'rgba(255, 123, 2, .4)', ${X}, '${m.value}', '${fe}');`;g.value.push(le)})}catch{Z({type:"warn",str:"message.jsonErrorMesg"})}},Y.readAsText(D)}E.target.value=""}function ae(E){const D=E.target.files[0];if(D){const Y=new FileReader;Y.onload=ie=>{try{const re=jg.load(ie.target.result);let C=0;Object.entries(re).forEach(([b,R])=>{const V=b.replace(/'/g,"''"),me=String(R).replace(/'/g,"''"),fe=Fo();C=C+1;const X=parseInt(new Date().getTime()/1e3)+C,le=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${V}', '${me}', 'rgba(255, 123, 2, .4)', ${X}, '${m.value}', '${fe}');`;g.value.push(le)})}catch{Z({type:"warn",str:"message.yamlErrorMesg"})}},Y.readAsText(D)}E.target.value=""}function F(E){z();const D=E.target.files[0];if(D){const Y=new FileReader;Y.onload=ie=>{ie.target.result.split(";").filter(b=>b.trim()).forEach(b=>{if((b.includes("tag_groups")||b.includes("tag_subgroups"))&&b.includes("p_uuid"))if(b.includes("g_uuid")){u.value=b+";";const V=b.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);V&&(m.value=V[1]);const me=b.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);me&&(c.value=me[1].replace(/''/g,"'"))}else{r.value=b+";";const V=b.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);V&&(f.value=V[1]);const me=b.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);me&&(d.value=me[1].replace(/''/g,"'"))}else b.includes("tag_tags")&&g.value.push(b+";")})},Y.readAsText(D)}E.target.value=""}function K(){if(r.value.length<=0||u.value.length<=0){Z({type:"warn",str:"importDialog.pleaseFullRequest"});return}W.value.click()}function ee(){if(r.value.length<=0||u.value.length<=0){Z({type:"warn",str:"importDialog.pleaseFullRequest"});return}A.value.click()}function Q(){x.value.click()}function te(){const E=[r.value,u.value,...g.value].join(`
`),D=new Blob([E],{type:"text/sql"}),Y=document.createElement("a");if(Y.href=URL.createObjectURL(D),P.value.length<=0){const ie=parseInt(new Date().getTime()/1e3);Y.download="export_"+ie+".sql"}else Y.download=P.value+".sql";Y.click()}const ne=()=>{const E=[...g.value].join(`
`),D=new Blob([E],{type:"text/sql"}),Y=document.createElement("a");if(Y.href=URL.createObjectURL(D),P.value.length<=0){const ie=parseInt(new Date().getTime()/1e3);Y.download="export_tags_"+ie+".sql"}else Y.download=P.value+".sql";Y.click()};function U(E){const D=E.match(/VALUES\s*\([^']*'([^']+)'/),Y=E.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:D?D[1].replace(/''/g,"'"):"",desc:Y?Y[1].replace(/''/g,"'"):""}}function j(E){g.value.splice(E,1)}function ue(E){const D=g.value[E],Y=U(D);_.value=Y.text,w.value=Y.desc,v.value=E}function xe(E){const D=_.value.replace(/'/g,"''"),Y=w.value.replace(/'/g,"''");g.value[E]=g.value[E].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${D}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${Y}'`),v.value=-1}function oe(){v.value=-1}function de(){if(!m.value){Z({type:"warn",str:"message.pleaseAddSub"});return}const E=a.value.replace(/'/g,"''"),D=s.value.replace(/'/g,"''"),Y=Fo(),ie=parseInt(new Date().getTime()/1e3);l.value=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${E}', '${D}', 'rgba(255, 123, 2, .4)', ${ie}, '${m.value}', '${Y}');`,g.value.push(l.value)}function be(){if(d.value.length<=0){Z({type:"warn",str:"importDialog.pleaseAddGroupName"});return}const E=d.value.replace(/'/g,"''");f.value.length<=0&&(f.value=Fo());const D=parseInt(new Date().getTime()/1e3);r.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${E}', 'rgba(255, 123, 2, .4)', ${D}, '${f.value}');`}function ke(){if(c.value.length<=0){Z({type:"warn",str:"importDialog.pleaseAddSubGroupName"});return}if(!f.value){Z({type:"warn",str:"message.pleaseAddMainCeb"});return}const E=c.value.replace(/'/g,"''");m.value.length<=0&&(m.value=Fo());const D=parseInt(new Date().getTime()/1e3);u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${E}', 'rgba(255, 123, 2, .4)', ${D}, '${f.value}', '${m.value}');`}const _e=y(null),I=()=>{_e.value.open()},N=E=>{T.value=!0,d.value=E.group.name,c.value=E.sub.name,f.value=E.group.p_uuid,m.value=E.sub.g_uuid;const D=E.group.name.replace(/'/g,"''"),Y=E.sub.name.replace(/'/g,"''");r.value=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${D}', '${E.group.color}', ${E.group.create_time}, '${E.group.p_uuid}');`,u.value=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${Y}', '${E.sub.color}', ${E.sub.create_time}, '${E.group.p_uuid}', '${E.sub.g_uuid}');`},H=y(!1),O=async E=>{H.value=!0;try{await Mt.runSQLToServer(E).then(D=>{if(D.code!=200){Z({type:"warn",str:D.message});return}else B(),Z({type:"success",str:"importDialog.successImport"})}).catch(D=>{console.error(D),Z({type:"warn",str:"importDialog.importFail"})})}catch(D){console.error(D),Z({type:"warn",str:"importDialog.importFail"})}finally{H.value=!1}},B=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},k=async()=>{if(T.value){if(r.value.length<=0||u.value.length<=0){Z({type:"warn",str:"importDialog.pleaseFullRequest"});return}const E=[...g.value];await O(E)}else{if(r.value.length<=0||u.value.length<=0){Z({type:"warn",str:"importDialog.pleaseFullRequest"});return}const E=[r.value,u.value,...g.value];await O(E)}};return et(r,(E,D)=>{var re,C;if(!E||E===D)return;const Y=(re=E.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:re[1],ie=(C=D==null?void 0:D.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:C[1];Y&&ie&&u.value&&(u.value=u.value.replace(new RegExp(`'${ie}'`,"g"),`'${Y}'`))}),et(u,(E,D)=>{var re,C;if(!E||E===D)return;const Y=(re=E.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:re[1],ie=(C=D==null?void 0:D.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:C[1];Y&&ie&&g.value.length>0&&(g.value=g.value.map(b=>b.replace(new RegExp(`'${ie}'`,"g"),`'${Y}'`)))}),t({open:()=>{n.value=!0}}),(E,D)=>(S(),L(Oe,null,[H.value?(S(),L("div",o5,[...D[11]||(D[11]=[i("div",{class:"loading-spinner"},null,-1)])])):pe("",!0),Ve(Ca,{modelValue:n.value,"onUpdate:modelValue":D[10]||(D[10]=Y=>n.value=Y),title:p(o)("importDialog.title")},{footer:it(()=>[i("button",{onClick:D[9]||(D[9]=Y=>n.value=!1)},h(p(o)("promptBox.settings.close")),1),i("button",{onClick:k},h(p(o)("importDialog.sure")),1)]),default:it(()=>[i("div",a5,[i("div",s5,[i("div",l5,[i("span",r5,h(p(o)("importDialog.tips1")),1),i("a",i5,h(p(o)("importDialog.tips1text")),1)]),i("div",u5,[i("span",c5,h(p(o)("importDialog.tips2")),1),i("a",d5,h(p(o)("importDialog.tips2text")),1)]),i("div",f5,[i("span",p5,h(p(o)("importDialog.tips3")),1),i("a",g5,h(p(o)("importDialog.tips3text")),1)])]),i("div",m5,[i("button",{onClick:z,class:"upload-btn"},h(p(o)("importDialog.cleanAll")),1),i("button",{style:{"margin-left":"10px"},onClick:Q,class:"upload-btn"},h(p(o)("importDialog.uploadSQL")),1),i("button",{style:{"margin-left":"10px"},onClick:I},h(p(o)("importDialog.selectGroup")),1),i("button",{style:{"margin-left":"10px"},onClick:te},h(p(o)("importDialog.dumpSQL")),1),i("button",{style:{"margin-left":"10px"},onClick:ne},h(p(o)("importDialog.dumpOnlySQL")),1),ye(i("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":D[0]||(D[0]=Y=>P.value=Y),placeholder:p(o)("importDialog.settingOutputName")},null,8,h5),[[Ae,P.value]]),i("input",{type:"file",ref_key:"fileInput",ref:x,onChange:F,accept:".sql",style:{display:"none"}},null,544),i("input",{type:"file",ref_key:"jsonFileInput",ref:A,onChange:ve,accept:".json",style:{display:"none"}},null,544),i("input",{type:"file",ref_key:"txtFileInput",ref:W,onChange:J,accept:".txt",style:{display:"none"}},null,544),i("input",{type:"file",ref_key:"yamlFileInput",ref:q,onChange:ae,accept:".yaml,.yml",style:{display:"none"}},null,544)]),i("div",v5,[ye(i("input",{"onUpdate:modelValue":D[1]||(D[1]=Y=>d.value=Y),placeholder:p(o)("importDialog.pleaseMainCeb")},null,8,_5),[[Ae,d.value]]),i("button",{onClick:be},h(p(o)("importDialog.setMainCeb")),1),ye(i("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":D[2]||(D[2]=Y=>f.value=Y),placeholder:p(o)("importDialog.pleaseMainCebUuid")},null,8,y5),[[Ae,f.value]])]),i("div",b5,[ye(i("input",{"onUpdate:modelValue":D[3]||(D[3]=Y=>c.value=Y),placeholder:p(o)("importDialog.pleaseSubGroup")},null,8,w5),[[Ae,c.value]]),i("button",{onClick:ke},h(p(o)("importDialog.setSubCeb")),1),ye(i("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":D[4]||(D[4]=Y=>m.value=Y),placeholder:p(o)("importDialog.pleaseSubGroupUuid")},null,8,x5),[[Ae,m.value]])]),i("div",T5,[ye(i("input",{"onUpdate:modelValue":D[5]||(D[5]=Y=>a.value=Y),placeholder:"Tag"},null,512),[[Ae,a.value]]),ye(i("input",{"onUpdate:modelValue":D[6]||(D[6]=Y=>s.value=Y),placeholder:p(o)("importDialog.translater")},null,8,S5),[[Ae,s.value]]),i("button",{onClick:de},h(p(o)("importDialog.add")),1),i("button",{style:{"margin-left":"10px"},onClick:ee,class:"upload-btn"},h(p(o)("importDialog.fromJSONImput")),1),i("button",{style:{"margin-left":"10px"},onClick:K,class:"upload-btn"},h(p(o)("importDialog.fromTxtInput")),1),i("button",{style:{"margin-left":"10px"},onClick:G,class:"upload-btn"},h(p(o)("importDialog.fromYmalInput")),1)]),i("div",k5,[r.value?(S(),L("div",C5,[i("h3",null,h(U(r.value).text),1),u.value?(S(),L("div",E5,[i("h4",null,h(U(u.value).text),1),i("div",L5,[(S(!0),L(Oe,null,He(g.value,(Y,ie)=>(S(),L("div",{key:ie,style:{display:"flex","flex-direction":"column","align-items":"center"}},[i("p",null,h(U(Y).text)+" - "+h(U(Y).desc),1),i("div",$5,[v.value===ie?(S(),L("div",A5,[ye(i("input",{"onUpdate:modelValue":D[7]||(D[7]=re=>_.value=re),placeholder:"Tag"},null,512),[[Ae,_.value]]),ye(i("input",{"onUpdate:modelValue":D[8]||(D[8]=re=>w.value=re),placeholder:p(o)("importDialog.translater")},null,8,I5),[[Ae,w.value]]),i("button",{onClick:re=>xe(ie)},h(p(o)("importDialog.sureYes")),9,M5),i("button",{style:{"margin-left":"10px"},onClick:oe},h(p(o)("importDialog.cancel")),1)])):(S(),L("button",{key:1,onClick:re=>ue(ie)},h(p(o)("importDialog.edit")),9,O5)),i("button",{style:{"margin-left":"10px"},onClick:re=>j(ie)},h(p(o)("importDialog.delete")),9,N5)])]))),128))])])):pe("",!0)])):pe("",!0)])])]),_:1},8,["modelValue","title"]),Ve(Fp,{ref_key:"tagGroupSelectDialogItem",ref:_e,onSureSelect:N},null,512)],64))}},[["__scopeId","data-v-98758c86"]]),D5={class:"tag-manager"},P5={class:"toolbar"},F5={class:"toolbar-top"},B5={class:"search-container"},U5=["placeholder"],j5={key:0,class:"no-results"},H5=["onClick"],W5={class:"result-content"},V5={class:"result-text"},z5={class:"result-path"},q5={class:"toolbar-bottom"},G5={class:"group-edit-mode"},Q5={class:"category-tabs"},Y5={class:"tabs-wrapper primary-tabs"},J5={class:"tabs-scroll"},K5=["onClick","onMouseenter","onMouseleave"],X5={class:"tab-text"},Z5={key:0,class:"tab-actions"},e6=["onClick","title"],t6=["onClick","title"],n6=["onClick","title"],o6=["onClick","title"],a6={class:"group-edit-mode"},s6={key:0,class:"tabs-wrapper group-tabs"},l6={class:"tabs-scroll"},r6=["onClick","onMouseenter","onMouseleave"],i6={class:"tab-text"},u6={key:0,class:"tab-actions"},c6=["onClick","title"],d6=["onClick","title"],f6=["onClick","title"],p6=["onClick","title"],g6={class:"group-edit-mode"},m6={class:"tags-content"},h6={class:"tags-header"},v6={class:"tags-title"},_6={class:"tags-actions"},y6=["disabled"],b6=["disabled"],w6=["disabled"],x6=["disabled"],T6=["disabled"],S6={key:0,class:"tags-grid"},k6=["onClick"],C6={class:"tag-actions"},E6=["onClick","title"],L6=["onClick","title"],$6=["onClick","title"],A6={class:"tag-desc"},I6=["value"],M6={key:0,class:"weilin-tools-dialog-overlay"},O6={class:"weilin-tools-dialog-header"},N6={class:"weilin-tools-dialog-body"},R6={key:0,class:"form-group"},D6=["placeholder"],P6={key:1,class:"form-group"},F6=["placeholder"],B6={class:"form-group"},U6={class:"color-picker"},j6={class:"color-controls"},H6={class:"alpha-control"},W6={class:"alpha-value"},V6={class:"weilin-tools-dialog-footer"},z6={key:1,class:"weilin-tools-dialog-overlay"},q6={class:"weilin-tools-dialog-header"},G6={class:"weilin-tools-dialog-body"},Q6={class:"form-group"},Y6=["placeholder"],J6={class:"form-group"},K6=["placeholder"],X6={class:"form-group"},Z6={class:"color-picker"},e8={class:"color-controls"},t8={class:"alpha-control"},n8={class:"alpha-value"},o8={class:"weilin-tools-dialog-footer"},a8={key:2,class:"weilin-tools-dialog-overlay"},s8={class:"weilin-tools-dialog-header"},l8={class:"weilin-tools-dialog-body"},r8={class:"confirm-message"},i8={class:"weilin-tools-dialog-footer"},u8={key:3,class:"weilin-tools-dialog-overlay"},c8={class:"weilin-tools-dialog-content"},d8={class:"weilin-tools-dialog-header"},f8={class:"weilin-tools-dialog-body"},p8={class:"form-group"},g8=["value"],m8={class:"form-group"},h8={class:"radio-group"},v8={class:"weilin-tools-dialog-footer"},_8={key:4,class:"weilin-tools-dialog-overlay"},y8={class:"weilin-tools-dialog-content"},b8={class:"weilin-tools-dialog-header"},w8={class:"weilin-tools-dialog-body"},x8={class:"form-group"},T8=["value"],S8={class:"form-group"},k8={class:"radio-group"},C8={class:"weilin-tools-dialog-footer"},E8={key:5,class:"weilin-tools-dialog-overlay"},L8={class:"weilin-tools-dialog-header"},$8={class:"weilin-tools-dialog-body"},A8={class:"config-section"},I8={class:"form-group"},M8={class:"width-control"},O8={class:"radio-label"},N8={class:"radio-label"},R8={class:"form-group"},D8={class:"form-group"},P8={class:"config-section"},F8={class:"form-group"},B8={class:"width-control"},U8={class:"radio-label"},j8={class:"radio-label"},H8={class:"form-group"},W8={class:"form-group"},V8={class:"weilin-tools-dialog-footer"},Hg=yt({__name:"tag_index",props:{tagManager:{type:String,default:"prompt"}},setup(e){Nl();const{t}=_t(),o=y([]),n=y(null),a=y([]),s=y([]),l=y(null),r=y(!1),u=y(!1),d=y(!1),c=y(!1),f=y("primary"),m=y([]),g=y(!1),v=y(!1),_=y("None"),w=y("None"),x=y(0),A=y(0),W=y(null),T=y(0),P=y(!1),q=y(null),G=y("before"),z=y(null),J=y("before"),ve=y(null),ae=y(null),F=y(!1),K=y(!1),ee=y(!1),Q=y({primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}}),te={primaryTab:{width:"fit-content",height:34,fontSize:10},groupTab:{width:"fit-content",height:34,fontSize:10}},ne=e,U=y({name:"",color:"rgba(255, 123, 2, .4)",id_index:"",groups:[]}),j=y({name:"",id_index:"",color:"rgba(255, 123, 2, .4)",tags:[]}),ue=y({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),xe=ge=>{const ce=ge.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(ce){const[,Se,Je,At,Gt]=ce,ft=`#${((1<<24)+(parseInt(Se)<<16)+(parseInt(Je)<<8)+parseInt(At)).toString(16).slice(1)}`,Ot=Gt?Math.round(parseFloat(Gt)*100):100;return{hex:ft,alpha:Ot}}return{hex:"#FFFFFF",alpha:100}},oe=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},de=async()=>{try{await Mt.getTagMainGroup().then(ge=>{o.value=ge}).catch(ge=>{console.error(ge),Z({type:"warn",str:"message.networkError"})}),n.value&&await be(n.value.p_uuid),l.value&&await ke(l.value.g_uuid)}catch(ge){console.error("Tag:",ge)}},be=async ge=>{try{await Mt.getTagSubGroup(ge).then(ce=>{a.value=ce}).catch(ce=>{console.error(ce),Z({type:"warn",str:"message.networkError"})})}catch(ce){console.error(":",ce)}},ke=async ge=>{try{await Mt.getTagList(ge).then(ce=>{s.value=ce}).catch(ce=>{console.error(ce),Z({type:"warn",str:"message.networkError"})})}catch(ce){console.error("Tag:",ce)}};ut(()=>{jn(),window.addEventListener("click",cr),window.addEventListener("resize",jn),window.addEventListener("message",ur),window.addEventListener("keydown",Ds),Ps(),oe()}),Lo(()=>{window.removeEventListener("click",cr),window.removeEventListener("resize",jn),window.removeEventListener("message",ur),window.removeEventListener("keydown",Ds)});const _e=async ge=>{n.value=ge,l.value=null,g.value=!1,m.value=[],await be(ge.p_uuid)},I=async ge=>{l.value=ge,g.value=!1,m.value=[],await ke(ge.g_uuid)},N=ge=>{f.value=ge,d.value=!1,C.value=xe("rgba(255, 123, 2, .4)"),ge==="primary"?U.value={name:"",color:"rgba(255, 123, 2, .4)",groups:[]}:j.value={name:"",color:"rgba(255, 123, 2, .4)",tags:[]},r.value=!0},H=ge=>{d.value=!0,f.value="primary",U.value={...ge},C.value=xe(ge.color),r.value=!0},O=ge=>{d.value=!0,f.value="group",j.value={...ge},C.value=xe(ge.color),r.value=!0},B=()=>{if(f.value==="primary"){if(!U.value.name){Z({type:"warn",str:"tagManager.categoryNameRequired"});return}d.value?o.value.findIndex(ce=>ce.id_index===U.value.id_index)!==-1&&Mt.editPrimaryCategory({id_index:U.value.id_index,name:U.value.name,color:U.value.color}).then(ce=>{ce.code===200?(oe(),Z({type:"success",str:"message.editSuccess"})):ce.code===201?Z({type:"error",str:"message.editNameExist"}):Z({type:"error",str:"message.editFailed"})}).catch(ce=>{Z({type:"warn",str:"message.networkError"})}):Mt.addPrimaryCategory({name:U.value.name,color:U.value.color}).then(ge=>{ge.code===200?(oe(),Z({type:"success",str:"message.addSuccess"})):ge.code===201?Z({type:"error",str:"message.editNameExist"}):Z({type:"error",str:"message.addFailed"})}).catch(ge=>{Z({type:"warn",str:"message.networkError"})})}else{if(!j.value.name){Z({type:"warn",str:"tagManager.groupNameRequired"});return}d.value?Mt.editSubCategory({id_index:j.value.id_index,name:j.value.name,color:j.value.color}).then(ge=>{ge.code===200?(oe(),Z({type:"success",str:"message.editSuccess"})):ge.code===201?Z({type:"error",str:"message.editNameExist"}):Z({type:"error",str:"message.editFailed"})}).catch(ge=>{Z({type:"warn",str:"message.networkError"})}):Mt.addSubCategory({name:j.value.name,color:j.value.color,key:n.value.id_index,p_uuid:n.value.p_uuid}).then(ge=>{ge.code===200?(oe(),Z({type:"success",str:"message.addSuccess"})):ge.code===201?Z({type:"error",str:"message.editNameExist"}):Z({type:"error",str:"message.editFailed"})}).catch(ge=>{Z({type:"warn",str:"message.networkError"})})}E()},k=()=>d.value?f.value==="primary"?t("tagManager.editPrimaryCategory"):t("tagManager.editSubCategory"):f.value==="primary"?t("tagManager.addPrimaryCategory"):t("tagManager.addSubCategory"),E=()=>{r.value=!1,U.value={id:"",name:"",parentId:null,subCategories:[],backgroundColor:"transparent"},C.value={hex:"#FFFFFF",alpha:0}},D=()=>{l.value&&(c.value=!1,ue.value={id:"",text:"",desc:"",categoryId:l.value.id,g_uuid:l.value.g_uuid,backgroundColor:j.value.color},C.value=xe(j.value.color),u.value=!0)},Y=ge=>{c.value=!0,ue.value={...ge},C.value=xe(ge.color),u.value=!0},ie=()=>{if(!ue.value.text||!ue.value.desc){Z({type:"warn",str:"tagManager.textRequired"});return}c.value&&l.value?Mt.editTags({id_index:ue.value.id_index,text:ue.value.text,desc:ue.value.desc,color:ue.value.color}).then(ge=>{oe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.editSuccess"})}).catch(ge=>{Z({type:"warn",str:"message.networkError"})}):l.value&&Mt.addNewTags({id_index:l.value.id_index,g_uuid:l.value.g_uuid,text:ue.value.text,desc:ue.value.desc,color:ue.value.color?ue.value.color:"rgba(255, 123, 2, .4)"}).then(ge=>{oe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.addSuccess"})}).catch(ge=>{Z({type:"warn",str:"message.networkError"})}),re()},re=()=>{u.value=!1,ue.value={text:"",desc:"",color:"rgba(255, 123, 2, .4)"},c.value=!1},C=y({hex:"#FFFFFF",alpha:100}),b=tt(()=>V(C.value.hex,C.value.alpha)),R=()=>{const ge=V(C.value.hex,C.value.alpha);r.value?f.value==="primary"?U.value.color=ge:j.value.color=ge:u.value&&(ue.value.color=ge)},V=(ge,ce)=>{const Se=parseInt(ge.slice(1,3),16),Je=parseInt(ge.slice(3,5),16),At=parseInt(ge.slice(5,7),16);return`rgba(${Se}, ${Je}, ${At}, ${ce/100})`},me=y(""),fe=y([]),X=y(!1),le=async()=>{X.value=me.value.trim().length>0;const ge=me.value.trim().toLowerCase();if(!ge){fe.value=[];return}fe.value=[],await Mt.searchTag(ge).then(ce=>{fe.value=ce}).catch(ce=>{Z({type:"warn",str:"message.networkError"})})};et(me,()=>{le()});const Ne=async ge=>{const ce=o.value.find(Se=>Se.p_uuid===ge.p_uuid);ce&&await _e(ce).then(async()=>{await Qe(async()=>{const Se=a.value.find(Je=>Je.g_uuid===ge.g_uuid);Se&&await I(Se).then(async()=>{await Qe(()=>{T.value==1&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:ge.text},"*"),W.value=ge.id_index,setTimeout(()=>{const Je=document.querySelector(".tag-wrapper.highlight");Je&&Je.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{W.value=null},5e3)})})})}),me.value=""},Pe=ge=>{if(!ge||ge==="transparent")return"var(--primary-text)";let ce,Se,Je,At=1;if(ge.startsWith("rgba")){const ft=ge.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);ft&&([,ce,Se,Je,At]=ft.map(Number))}else if(ge.startsWith("rgb")){const ft=ge.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);ft&&([,ce,Se,Je]=ft.map(Number))}return At<.5?"var(--primary-text)":(ce*299+Se*587+Je*114)/1e3>128?"#000000":"#ffffff"},We=ge=>{ne.tagManager==="prompt"&&window.postMessage({type:"weilin_prompt_ui_insertTag",tagText:ge.text},"*")},ze=y(!1),rt=y(""),dt=y(null),Ht=tt(()=>{if(!dt.value)return"";switch(rt.value){case"category":return t("tagManager.deletePrimaryCategoryConfirm",{name:dt.value.name});case"group":return t("tagManager.deleteGroupConfirm",{name:dt.value.name});case"tag":return t("tagManager.deleteTagConfirm",{name:dt.value.text});case"deleteSelected":return t("tagManager.confirmDeleteSelected");default:return""}}),Fe=ge=>{rt.value="category",dt.value=ge,ze.value=!0},Le=ge=>{rt.value="group",dt.value=ge,ze.value=!0},Ce=ge=>{rt.value="tag",dt.value=ge,ze.value=!0},st=async()=>{try{switch(rt.value){case"category":Mt.deletePrimaryCategory({p_uuid:dt.value.p_uuid}).then(ge=>{oe(),Z({type:"success",str:"message.deleteSuccess"})}).catch(ge=>{Z({type:"warn",str:"message.networkError"})});break;case"group":Mt.deleteSubCategory({g_uuid:dt.value.g_uuid}).then(ge=>{oe(),Z({type:"success",str:"message.deleteSuccess"})}).catch(ge=>{Z({type:"warn",str:"message.networkError"})});break;case"tag":Mt.deleteTags({id_index:dt.value.id_index}).then(ge=>{oe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.deleteSuccess"})}).catch(ge=>{Z({type:"warn",str:"message.networkError"})});break;case"deleteSelected":Mt.batchDeleteTags({id_indexs:m.value}).then(ge=>{oe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.deleteSuccess"})}).catch(ge=>{Z({type:"warn",str:"message.networkError"})});break}Ba()}catch(ge){console.error(":",ge)}},mn=async ge=>{const ce=`INSERT OR REPLACE INTO "tag_groups" ("name", "color", "create_time", "p_uuid") VALUES ('${ge.name.replace(/'/g,"''")}', '${ge.color}', ${ge.create_time}, '${ge.p_uuid}');`;try{const Se=await Mt.getTagSubGroup(ge.p_uuid);let Je=[];Je.push(ce);for(const ft of Se){const Ot=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${ft.name.replace(/'/g,"''")}', '${ft.color}', ${ft.create_time}, '${ft.p_uuid}', '${ft.g_uuid}');`;Je.push(Ot);try{(await Mt.getTagList(ft.g_uuid)).forEach(Qt=>{const hr=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${Qt.text!=null&&Qt.text.length>0?Qt.text.replace(/'/g,"''"):""}', '${Qt.desc!=null&&Qt.desc.length>0?Qt.desc.replace(/'/g,"''"):""}', '${Qt.color}', ${Qt.create_time}, '${Qt.g_uuid}', '${Fo()}');`;Je.push(hr)})}catch(ia){console.error("Tag:",ia),Z({type:"warn",str:"message.shareTagError"})}}const At=new Blob([Je.join(`
`)],{type:"text/sql"}),Gt=document.createElement("a");Gt.href=URL.createObjectURL(At),Gt.download=`${ge.name}_export_${Date.now()}.sql`,Gt.click(),Z({type:"success",str:"tagManager.outputSuccess"})}catch(Se){console.error(":",Se),Z({type:"warn",str:"message.shareGroupError"})}},la=async ge=>{try{let ce=[];const Se=`INSERT OR REPLACE INTO "tag_subgroups" ("name", "color", "create_time", "p_uuid", "g_uuid") VALUES ('${ge.name.replace(/'/g,"''")}', '${ge.color}', ${ge.create_time}, '${ge.p_uuid}', '${ge.g_uuid}');`;ce.push(Se);try{(await Mt.getTagList(ge.g_uuid)).forEach(ft=>{const Ot=`INSERT OR REPLACE INTO "tag_tags" ("text", "desc", "color", "create_time", "g_uuid", "t_uuid") VALUES ('${ft.text!=null&&ft.text.length>0?ft.text.replace(/'/g,"''"):""}', '${ft.desc!=null&&ft.desc.length>0?ft.desc.replace(/'/g,"''"):""}', '${ft.color}', ${ft.create_time}, '${ft.g_uuid}', '${Fo()}');`;ce.push(Ot)})}catch(Gt){console.error("Tag:",Gt),Z({type:"warn",str:"message.shareTagError"})}const Je=new Blob([ce.join(`
`)],{type:"text/sql"}),At=document.createElement("a");At.href=URL.createObjectURL(Je),At.download=`${ge.name}_export_${Date.now()}.sql`,At.click(),Z({type:"success",str:"tagManager.outputSuccess"})}catch(ce){console.error(":",ce),Z({type:"warn",str:"message.shareGroupError"})}},Da=ge=>{z.value=ge.id_index,P.value=!0},rr=async()=>{try{Mt.moveTag({id_index:z.value,reference_id_index:q.value,position:G.value}).then(ge=>{oe(),P.value=!1,Z({type:"success",str:t("message.moveSuccess")})}).catch(ge=>{Z({type:"error",str:t("message.moveFailed")})})}catch(ge){console.error(":",ge),Z({type:"error",str:t("message.moveFailed")})}},Pa=y([]),ra=y(1),Fa=(ge,ce)=>{ra.value=ce,ce===1?(Pa.value=o.value,ve.value=ge.id_index,v.value=!0):(Pa.value=a.value,ve.value=ge.id_index,v.value=!0)},Un=async()=>{if(ra.value===1)try{Mt.moveMainGroup({id_index:ve.value,reference_id_index:ae.value,position:J.value}).then(ge=>{oe(),v.value=!1,Z({type:"success",str:t("message.moveSuccess")})}).catch(ge=>{Z({type:"error",str:t("message.moveFailed")})})}catch(ge){console.error(":",ge),Z({type:"error",str:t("message.moveFailed")})}else try{Mt.moveSubGroup({id_index:ve.value,reference_id_index:ae.value,position:J.value}).then(ge=>{oe(),v.value=!1,Z({type:"success",str:t("message.moveSuccess")})}).catch(ge=>{Z({type:"error",str:t("message.moveFailed")})})}catch(ge){console.error(":",ge),Z({type:"error",str:t("message.moveFailed")})}},hu=()=>{g.value=!0,F.value=!0},ir=()=>{g.value=!1,F.value=!1,m.value=[]},Ho=()=>{m.value.length!==0&&(rt.value="deleteSelected",dt.value={},ze.value=!0)},In=()=>{g.value=!0,K.value=!0},Wo=()=>{g.value=!1,K.value=!1,m.value=[]},Ns=()=>{if(m.value.length===0){Z({type:"warn",str:"tagManager.noTagsSelected"});return}const ge={};m.value.forEach(Je=>{ge[Je.text]=Je.desc});const ce=new Blob([jg.dump(ge)],{type:"text/yaml"}),Se=document.createElement("a");Se.href=URL.createObjectURL(ce),Se.download=`selected_tags_export_${Date.now()}.yaml`,Se.click(),Z({type:"success",str:"tagManager.outputSuccess"}),Wo()},Ba=()=>{ze.value=!1,rt.value="",dt.value=null},bo=async()=>{try{await oe()}catch(ge){console.error(":",ge)}},wo=y(),Rs=y({}),jn=()=>{if(wo.value){const ge=wo.value.getBoundingClientRect();Rs.value={position:"fixed",top:`${ge.bottom}px`,left:`${ge.left}px`,width:`${ge.width}px`,zIndex:1e3}}},ur=ge=>{ge.data.type==="weilin_prompt_ui_window_change_tagManager_position"||ge.data.type==="weilin_prompt_ui_window_change_tagManager_size"||ge.data.type==="weilin_prompt_ui_window_change_tagManager_scroll"||ge.data.type==="weilin_prompt_ui_window_change_promptBox_position"||ge.data.type==="weilin_prompt_ui_window_change_promptBox_size"||ge.data.type==="weilin_prompt_ui_window_change_promptBox_scroll"?jn():ge.data.type==="weilin_prompt_ui_window_change_click_outside"||ge.data.type==="weilin_prompt_ui_tag_manager_refresh"&&de()},cr=ge=>{X.value&&!wo.value.contains(ge.target)&&(X.value=!1)},Ds=ge=>{ge.key==="Escape"&&(X.value=!1)},vu=ge=>{A.value==1&&(_.value="TabID-"+ge)},_u=ge=>{_.value="None"},dr=ge=>{x.value==1&&(w.value="TabID-"+ge)},fr=ge=>{w.value="None"},pr=y(),gr=()=>{pr.value.open()},Ps=()=>{const ge=JSON.parse(JSON.stringify(te));try{const ce=localStorage.getItem("weilin_tag_manager_tab_size_config");if(ce){const Se=JSON.parse(ce);Q.value={...ge,...Se}}else Q.value={...ge}}catch(ce){console.error(":",ce),Q.value={...ge}}},yu=()=>{try{localStorage.setItem("weilin_tag_manager_tab_size_config",JSON.stringify(Q.value)),Z({type:"success",str:"tagManager.tabSizeConfigSaved"}),ee.value=!1}catch(ge){console.error(":",ge),Z({type:"error",str:"tagManager.tabSizeConfigSaveFailed"})}},bu=()=>{ee.value=!0},mr=()=>{ee.value=!1,Ps()},Ua=()=>{const ge=JSON.parse(JSON.stringify(te));Q.value={...ge}};return(ge,ce)=>(S(),L("div",D5,[i("div",P5,[i("div",F5,[i("button",{class:"refresh-btn",onClick:bo},[...ce[40]||(ce[40]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),i("div",B5,[ye(i("input",{type:"text","onUpdate:modelValue":ce[0]||(ce[0]=Se=>me.value=Se),placeholder:p(t)("tagManager.searchPlaceholder"),class:"search-input",ref_key:"searchInput",ref:wo,onInput:ce[1]||(ce[1]=Se=>X.value=me.value.trim().length>0)},null,40,U5),[[Ae,me.value]]),X.value?(S(),L("div",{key:0,class:"search-results",style:pt(Rs.value)},[fe.value.length===0?(S(),L("div",j5,h(p(t)("tagManager.noResults")),1)):(S(!0),L(Oe,{key:1},He(fe.value,(Se,Je)=>(S(),L("div",{key:`${Je}-search_item`,class:"search-result-item",onClick:At=>Ne(Se)},[i("div",W5,[i("span",V5,h(Se.name||Se.text),1),i("span",z5,h(Se.where),1)])],8,H5))),128))],4)):pe("",!0)]),i("button",{class:"import-btn",onClick:gr},h(p(t)("tagManager.importTags")),1)]),i("div",q5,[i("div",G5,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":ce[2]||(ce[2]=Se=>T.value=Se),"true-value":1,"false-value":0},null,512),[[Ft,T.value]]),qe(" "+h(p(t)("tagManager.autoAddSearchTag")),1)])]),i("button",{class:"tab-size-btn",onClick:bu},h(p(t)("tagManager.modifyTabSize")),1)])]),i("div",Q5,[i("div",Y5,[i("div",J5,[(S(!0),L(Oe,null,He(o.value,(Se,Je)=>{var At,Gt,ft;return S(),L("div",{key:"Tabss-"+Je,class:Ee(["tab-item",{active:((At=n.value)==null?void 0:At.name)===Se.name}]),style:pt({backgroundColor:((Gt=n.value)==null?void 0:Gt.name)===Se.name?"var(--primary-color)":Se.color,color:((ft=n.value)==null?void 0:ft.name)===Se.name?"#ffffff":Pe(Se.color),width:Q.value.primaryTab.width==="fit-content"?"fit-content":Q.value.primaryTab.width+"px",height:Q.value.primaryTab.height+"px",fontSize:Q.value.primaryTab.fontSize+"px"}),onClick:Ot=>_e(Se),onMouseenter:Ot=>vu(Je),onMouseleave:Ot=>_u()},[i("span",X5,h(Se.name),1),_.value=="TabID-"+Je?(S(),L("div",Z5,[i("button",{class:"action-btn move",onClick:Ke(Ot=>Fa(Se,1),["stop"]),title:p(t)("tagManager.moveGroup")},[...ce[41]||(ce[41]=[i("svg",{viewBox:"0 0 24 24",class:"move-icon"},[i("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)])],8,e6),i("button",{class:"action-btn edit",onClick:Ke(Ot=>H(Se),["stop"]),title:p(t)("tagManager.edit")},[...ce[42]||(ce[42]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])],8,t6),i("button",{class:"action-btn share",onClick:Ke(Ot=>mn(Se),["stop"]),title:p(t)("tagManager.share")},[...ce[43]||(ce[43]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)])],8,n6),i("button",{class:"action-btn delete",onClick:Ke(Ot=>Fe(Se),["stop"]),title:p(t)("tagManager.delete")},[...ce[44]||(ce[44]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])],8,o6)])):pe("",!0)],46,K5)}),128)),i("button",{class:"add-tab",onClick:ce[3]||(ce[3]=Se=>N("primary"))},[ce[45]||(ce[45]=i("span",{class:"plus-icon"},"+",-1)),qe(" "+h(p(t)("tagManager.addPrimaryCategory")),1)]),i("div",a6,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":ce[4]||(ce[4]=Se=>A.value=Se),"true-value":1,"false-value":0},null,512),[[Ft,A.value]]),qe(" "+h(A.value==1?p(t)("tagManager.exitEditMode"):p(t)("tagManager.editGroupMode")),1)])])])]),n.value?(S(),L("div",s6,[i("div",l6,[(S(!0),L(Oe,null,He(a.value,(Se,Je)=>{var At,Gt,ft;return S(),L("div",{key:"TabsSw-"+Je,class:Ee(["tab-item",{active:((At=l.value)==null?void 0:At.name)===Se.name}]),style:pt({backgroundColor:((Gt=l.value)==null?void 0:Gt.name)===Se.name?"var(--primary-color)":Se.color,color:((ft=l.value)==null?void 0:ft.name)===Se.name?"#ffffff":Pe(Se.color),width:Q.value.groupTab.width==="fit-content"?"fit-content":Q.value.groupTab.width+"px",height:Q.value.groupTab.height+"px",fontSize:Q.value.groupTab.fontSize+"px"}),onClick:Ot=>I(Se),onMouseenter:Ot=>dr(Je),onMouseleave:Ot=>fr()},[i("span",i6,h(Se.name),1),w.value=="TabID-"+Je?(S(),L("div",u6,[i("button",{class:"action-btn move",onClick:Ke(Ot=>Fa(Se,2),["stop"]),title:p(t)("tagManager.moveGroup")},[...ce[46]||(ce[46]=[i("svg",{viewBox:"0 0 24 24",class:"move-icon"},[i("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)])],8,c6),i("button",{class:"action-btn edit",onClick:Ke(Ot=>O(Se),["stop"]),title:p(t)("tagManager.edit")},[...ce[47]||(ce[47]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])],8,d6),i("button",{class:"action-btn delete",onClick:Ke(Ot=>Le(Se),["stop"]),title:p(t)("tagManager.delete")},[...ce[48]||(ce[48]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])],8,f6),i("button",{class:"action-btn share",onClick:Ke(Ot=>la(Se),["stop"]),title:p(t)("tagManager.share")},[...ce[49]||(ce[49]=[i("svg",{viewBox:"0 0 24 24",class:"action-icon"},[i("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})],-1)])],8,p6)])):pe("",!0)],46,r6)}),128)),n.value?(S(),L("button",{key:0,class:"add-tab",onClick:ce[5]||(ce[5]=Se=>N("group"))},[ce[50]||(ce[50]=i("span",{class:"plus-icon"},"+",-1)),qe(" "+h(p(t)("tagManager.addGroup")),1)])):pe("",!0),i("div",g6,[i("label",null,[ye(i("input",{type:"checkbox","onUpdate:modelValue":ce[6]||(ce[6]=Se=>x.value=Se),"true-value":1,"false-value":0},null,512),[[Ft,x.value]]),qe(" "+h(x.value==1?p(t)("tagManager.exitEditMode"):p(t)("tagManager.editGroupMode")),1)])])])])):pe("",!0)]),i("div",m6,[i("div",h6,[i("div",v6,h(l.value?l.value.name:p(t)("tagManager.selectCategory")),1),i("div",_6,[i("button",{class:"add-btn",onClick:D,disabled:!l.value},[ce[51]||(ce[51]=i("span",{class:"plus-icon"},"+",-1)),qe(" "+h(p(t)("tagManager.addTag")),1)],8,y6),K.value?(S(),L("button",{key:0,class:"share-selected-btn",onClick:Ns,disabled:!m.value.length},h(p(t)("tagManager.shareSelected")),9,b6)):(S(),L("button",{key:1,class:"share-btn",onClick:In,disabled:!l.value},h(p(t)("tagManager.batchShare")),9,w6)),K.value?(S(),L("button",{key:2,class:"cancel-delete-btn",onClick:Wo},h(p(t)("tagManager.cancelShare")),1)):pe("",!0),F.value?(S(),L("button",{key:3,class:"delete-btn",onClick:Ho,disabled:!m.value.length},h(p(t)("tagManager.deleteSelected")),9,x6)):(S(),L("button",{key:4,class:"delete-action-btn",onClick:hu,disabled:!l.value},h(p(t)("tagManager.hasDeleteAction")),9,T6)),F.value?(S(),L("button",{key:5,class:"cancel-delete-btn",onClick:ir},h(p(t)("tagManager.cancelDelete")),1)):pe("",!0)])]),l.value?(S(),L("div",S6,[(S(!0),L(Oe,null,He(s.value,Se=>(S(),L("div",{key:"tag-grid-"+Se.id_index,class:Ee(W.value===Se.id_index?"tag-wrapper highlight":"tag-wrapper")},[i("div",{class:"tag-content",onClick:Je=>We(Se)},[i("div",{class:"tag-main",style:pt({backgroundColor:Se.color||"transparent"})},[qe(h(Se.desc)+" ",1),i("div",C6,[i("button",{class:"action-btn move",onClick:Ke(Je=>Da(Se),["stop"]),title:p(t)("tagManager.moveTag")},[...ce[52]||(ce[52]=[i("svg",{viewBox:"0 0 24 24",class:"move-icon"},[i("path",{d:"M13 6v3h8V6h-8zm0 5v3h8v-3h-8zm-8 5v3h8v-3H5zm0-5v3h8v-3H5zm0-5v3h8V6H5z"})],-1)])],8,E6),i("button",{class:"action-btn edit",onClick:Ke(Je=>Y(Se),["stop"]),title:p(t)("tagManager.editTag")},[...ce[53]||(ce[53]=[i("svg",{viewBox:"0 0 24 24",class:"edit-icon"},[i("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})],-1)])],8,L6),i("button",{class:"action-btn delete",onClick:Ke(Je=>Ce(Se),["stop"]),title:p(t)("tagManager.deleteTag")},[...ce[54]||(ce[54]=[i("svg",{viewBox:"0 0 24 24",class:"delete-icon"},[i("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1)])],8,$6)])],4),i("div",A6,h(Se.text),1)],8,k6),g.value?ye((S(),L("input",{key:0,type:"checkbox","onUpdate:modelValue":ce[7]||(ce[7]=Je=>m.value=Je),value:Se,class:"tag-checkbox"},null,8,I6)),[[Ft,m.value]]):pe("",!0)],2))),128))])):pe("",!0)]),r.value?(S(),L("div",M6,[i("div",{class:"weilin-tools-dialog-content",onMousedown:ce[12]||(ce[12]=Ke(()=>{},["stop"]))},[i("div",O6,[i("h2",null,h(k()),1),i("button",{class:"close-btn",onClick:E},"")]),i("div",N6,[f.value=="primary"?(S(),L("div",R6,[i("label",null,h(p(t)("tagManager.categoryName")),1),ye(i("input",{type:"text","onUpdate:modelValue":ce[8]||(ce[8]=Se=>U.value.name=Se),placeholder:p(t)("tagManager.categoryNamePlaceholder"),onKeyup:on(B,["enter"])},null,40,D6),[[Ae,U.value.name]])])):pe("",!0),f.value=="group"?(S(),L("div",P6,[i("label",null,h(p(t)("tagManager.groupName")),1),ye(i("input",{type:"text","onUpdate:modelValue":ce[9]||(ce[9]=Se=>j.value.name=Se),placeholder:p(t)("tagManager.groupNamePlaceholder"),onKeyup:on(B,["enter"])},null,40,F6),[[Ae,j.value.name]])])):pe("",!0),i("div",B6,[i("label",null,h(p(t)("tagManager.backgroundColor")),1),i("div",U6,[i("div",{class:"color-preview",style:pt({backgroundColor:b.value})},null,4),i("div",j6,[ye(i("input",{type:"color","onUpdate:modelValue":ce[10]||(ce[10]=Se=>C.value.hex=Se),onInput:R,class:"color-input"},null,544),[[Ae,C.value.hex]]),i("div",H6,[ye(i("input",{type:"range","onUpdate:modelValue":ce[11]||(ce[11]=Se=>C.value.alpha=Se),min:"0",max:"100",onInput:R,class:"alpha-slider"},null,544),[[Ae,C.value.alpha,void 0,{number:!0}]]),i("span",W6,h(C.value.alpha)+"%",1)])])])])]),i("div",V6,[i("button",{class:"cancel-btn",onClick:E},h(p(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:B},h(p(t)("common.confirm")),1)])],32)])):pe("",!0),u.value?(S(),L("div",z6,[i("div",{class:"weilin-tools-dialog-content",onMousedown:ce[17]||(ce[17]=Ke(()=>{},["stop"]))},[i("div",q6,[i("h2",null,h(c.value?p(t)("tagManager.editTag"):p(t)("tagManager.addTag")),1),i("button",{class:"close-btn",onClick:re},"")]),i("div",G6,[i("div",Q6,[i("label",null,h(p(t)("tagManager.text")),1),ye(i("input",{type:"text","onUpdate:modelValue":ce[13]||(ce[13]=Se=>ue.value.desc=Se),placeholder:p(t)("tagManager.textPlaceholder")},null,8,Y6),[[Ae,ue.value.desc]])]),i("div",J6,[i("label",null,h(p(t)("tagManager.description")),1),ye(i("textarea",{"onUpdate:modelValue":ce[14]||(ce[14]=Se=>ue.value.text=Se),placeholder:p(t)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,K6),[[Ae,ue.value.text]])]),i("div",X6,[i("label",null,h(p(t)("tagManager.backgroundColor")),1),i("div",Z6,[i("div",{class:"color-preview",style:pt({backgroundColor:b.value})},null,4),i("div",e8,[ye(i("input",{type:"color","onUpdate:modelValue":ce[15]||(ce[15]=Se=>C.value.hex=Se),onInput:R,class:"color-input"},null,544),[[Ae,C.value.hex]]),i("div",t8,[ye(i("input",{type:"range","onUpdate:modelValue":ce[16]||(ce[16]=Se=>C.value.alpha=Se),min:"0",max:"100",onInput:R,class:"alpha-slider"},null,544),[[Ae,C.value.alpha,void 0,{number:!0}]]),i("span",n8,h(C.value.alpha)+"%",1)])])])])]),i("div",o8,[i("button",{class:"cancel-btn",onClick:re},h(p(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:ie},h(p(t)("common.confirm")),1)])],32)])):pe("",!0),ze.value?(S(),L("div",a8,[i("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:ce[18]||(ce[18]=Ke(()=>{},["stop"]))},[i("div",s8,[i("h2",null,h(p(t)("common.confirmDelete")),1),i("button",{class:"close-btn",onClick:Ba},"")]),i("div",l8,[i("p",r8,h(Ht.value),1)]),i("div",i8,[i("button",{class:"cancel-btn",onClick:Ba},h(p(t)("common.cancel")),1),i("button",{class:"delete-btn",onClick:st},h(p(t)("common.delete")),1)])],32)])):pe("",!0),P.value?(S(),L("div",u8,[i("div",c8,[i("div",d8,[i("h2",null,h(p(t)("tagManager.moveTag")),1),i("button",{class:"close-btn",onClick:ce[19]||(ce[19]=Se=>P.value=!1)},"")]),i("div",f8,[i("div",p8,[i("label",null,h(p(t)("tagManager.targetTag")),1),ye(i("select",{"onUpdate:modelValue":ce[20]||(ce[20]=Se=>q.value=Se),class:"form-select"},[(S(!0),L(Oe,null,He(s.value,Se=>(S(),L("option",{key:Se.id_index,value:Se.id_index},h(Se.desc+" --> "+Se.text),9,g8))),128))],512),[[Vt,q.value]])]),i("div",m8,[i("label",null,h(p(t)("tagManager.movePosition")),1),i("div",h8,[i("label",null,[ye(i("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ce[21]||(ce[21]=Se=>G.value=Se),value:"before"},null,512),[[fo,G.value]]),qe(" "+h(p(t)("tagManager.moveBefore")),1)]),i("label",null,[ye(i("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ce[22]||(ce[22]=Se=>G.value=Se),value:"after"},null,512),[[fo,G.value]]),qe(" "+h(p(t)("tagManager.moveAfter")),1)])])])]),i("div",v8,[i("button",{class:"cancel-btn",onClick:ce[23]||(ce[23]=Se=>P.value=!1)},h(p(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:rr},h(p(t)("common.confirm")),1)])])])):pe("",!0),v.value?(S(),L("div",_8,[i("div",y8,[i("div",b8,[i("h2",null,h(p(t)("tagManager.moveGroup")),1),i("button",{class:"close-btn",onClick:ce[24]||(ce[24]=Se=>v.value=!1)},"")]),i("div",w8,[i("div",x8,[i("label",null,h(p(t)("tagManager.targetGroup")),1),ye(i("select",{"onUpdate:modelValue":ce[25]||(ce[25]=Se=>ae.value=Se),class:"form-select"},[(S(!0),L(Oe,null,He(Pa.value,(Se,Je)=>(S(),L("option",{key:"group_move_id"+Je,value:Se.id_index},h(Se.name),9,T8))),128))],512),[[Vt,ae.value]])]),i("div",S8,[i("label",null,h(p(t)("tagManager.movePosition")),1),i("div",k8,[i("label",null,[ye(i("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ce[26]||(ce[26]=Se=>J.value=Se),value:"before"},null,512),[[fo,J.value]]),qe(" "+h(p(t)("tagManager.moveGroupBefore")),1)]),i("label",null,[ye(i("input",{class:"radio-input",type:"radio","onUpdate:modelValue":ce[27]||(ce[27]=Se=>J.value=Se),value:"after"},null,512),[[fo,J.value]]),qe(" "+h(p(t)("tagManager.moveGroupAfter")),1)])])])]),i("div",C8,[i("button",{class:"cancel-btn",onClick:ce[28]||(ce[28]=Se=>v.value=!1)},h(p(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:Un},h(p(t)("common.confirm")),1)])])])):pe("",!0),ee.value?(S(),L("div",E8,[i("div",{class:"weilin-tools-dialog-content tab-size-weilin-tools-dialog",onMousedown:ce[39]||(ce[39]=Ke(()=>{},["stop"]))},[i("div",L8,[i("h2",null,h(p(t)("tagManager.tabSizeConfig")),1),i("button",{class:"close-btn",onClick:mr},"")]),i("div",$8,[i("div",A8,[i("h3",null,h(p(t)("tagManager.primaryTabConfig")),1),i("div",I8,[i("label",null,h(p(t)("tagManager.tabWidth")),1),i("div",M8,[i("label",O8,[ye(i("input",{type:"radio","onUpdate:modelValue":ce[29]||(ce[29]=Se=>Q.value.primaryTab.width=Se),value:"fit-content"},null,512),[[fo,Q.value.primaryTab.width]]),qe(" "+h(p(t)("tagManager.fitContent")),1)]),i("label",N8,[ye(i("input",{type:"radio","onUpdate:modelValue":ce[30]||(ce[30]=Se=>Q.value.primaryTab.width=Se),value:"custom"},null,512),[[fo,Q.value.primaryTab.width]]),qe(" "+h(p(t)("tagManager.customWidth")),1)]),Q.value.primaryTab.width!=="fit-content"?ye((S(),L("input",{key:0,type:"number","onUpdate:modelValue":ce[31]||(ce[31]=Se=>Q.value.primaryTab.width=Se),min:"50",max:"300",class:"number-input"},null,512)),[[Ae,Q.value.primaryTab.width,void 0,{number:!0}]]):pe("",!0)])]),i("div",R8,[i("label",null,h(p(t)("tagManager.tabHeight"))+" ("+h(Q.value.primaryTab.height)+"px)",1),ye(i("input",{type:"range","onUpdate:modelValue":ce[32]||(ce[32]=Se=>Q.value.primaryTab.height=Se),min:"20",max:"60",class:"range-input"},null,512),[[Ae,Q.value.primaryTab.height,void 0,{number:!0}]])]),i("div",D8,[i("label",null,h(p(t)("tagManager.fontSize"))+" ("+h(Q.value.primaryTab.fontSize)+"px)",1),ye(i("input",{type:"range","onUpdate:modelValue":ce[33]||(ce[33]=Se=>Q.value.primaryTab.fontSize=Se),min:"8",max:"20",class:"range-input"},null,512),[[Ae,Q.value.primaryTab.fontSize,void 0,{number:!0}]])])]),i("div",P8,[i("h3",null,h(p(t)("tagManager.groupTabConfig")),1),i("div",F8,[i("label",null,h(p(t)("tagManager.tabWidth")),1),i("div",B8,[i("label",U8,[ye(i("input",{type:"radio","onUpdate:modelValue":ce[34]||(ce[34]=Se=>Q.value.groupTab.width=Se),value:"fit-content"},null,512),[[fo,Q.value.groupTab.width]]),qe(" "+h(p(t)("tagManager.fitContent")),1)]),i("label",j8,[ye(i("input",{type:"radio","onUpdate:modelValue":ce[35]||(ce[35]=Se=>Q.value.groupTab.width=Se),value:"custom"},null,512),[[fo,Q.value.groupTab.width]]),qe(" "+h(p(t)("tagManager.customWidth")),1)]),Q.value.groupTab.width!=="fit-content"?ye((S(),L("input",{key:0,type:"number","onUpdate:modelValue":ce[36]||(ce[36]=Se=>Q.value.groupTab.width=Se),min:"50",max:"300",class:"number-input"},null,512)),[[Ae,Q.value.groupTab.width,void 0,{number:!0}]]):pe("",!0)])]),i("div",H8,[i("label",null,h(p(t)("tagManager.tabHeight"))+" ("+h(Q.value.groupTab.height)+"px)",1),ye(i("input",{type:"range","onUpdate:modelValue":ce[37]||(ce[37]=Se=>Q.value.groupTab.height=Se),min:"20",max:"60",class:"range-input"},null,512),[[Ae,Q.value.groupTab.height,void 0,{number:!0}]])]),i("div",W8,[i("label",null,h(p(t)("tagManager.fontSize"))+" ("+h(Q.value.groupTab.fontSize)+"px)",1),ye(i("input",{type:"range","onUpdate:modelValue":ce[38]||(ce[38]=Se=>Q.value.groupTab.fontSize=Se),min:"8",max:"20",class:"range-input"},null,512),[[Ae,Q.value.groupTab.fontSize,void 0,{number:!0}]])])])]),i("div",V8,[i("button",{class:"reset-btn",onClick:Ua},h(p(t)("tagManager.resetDefault")),1),i("button",{class:"cancel-btn",onClick:mr},h(p(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:yu},h(p(t)("common.confirm")),1)])],32)])):pe("",!0),Ve(R5,{ref_key:"importTagDialogItem",ref:pr},null,512)]))}},[["__scopeId","data-v-c9c6726d"]]),tr=100,Wg=y(""),yo=y({}),Ue={setActiveWindow(e){Wg.value!==e&&(Wg.value=e,Object.keys(yo.value).forEach(t=>{yo.value[t]=tr}),yo.value[e]=tr+10)},getZIndex(e){return yo.value[e]||(yo.value[e]=tr),yo.value[e]},registerWindow(e){yo.value[e]||(yo.value[e]=tr)},unregisterWindow(e){delete yo.value[e]}},kn={getLoraList:async e=>await Me({url:"/get_lora_list",method:"get",params:e}),getAllLoraList:async e=>await Me({url:"/get_lora_load_all",method:"get",params:e}),getAllLoraStatus:async e=>await Me({url:"/get_lora_load_status",method:"get",params:e}),getLoraDetail:async e=>await Me({url:"/lorainfo/api/loras/info",method:"get",params:e}),getLoraRefresh:async e=>await Me({url:"/lorainfo/api/loras/info/refresh",method:"get",params:e}),postUplaodImg:async(e,t,o)=>{const n=new FormData;return n.append("image",e),n.append("path",t),n.append("fileName",o),await Me({url:"/lorainfo/api/loras/set/img",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}})},postLoraSave:async(e,t)=>{const o=new FormData;return o.append("json",JSON.stringify(t)),await Me({url:"/lorainfo/api/loras/info?file="+e,method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}})},postLoraDelet:async(e,t)=>await Me({url:"/lorainfo/api/delete/loras/info/filed?file="+e,method:"post",data:{json:t}}),getLoraFolderList:async()=>await Me({url:"/get_lora_folder_list",method:"post"}),getLoraRangeList:async e=>await Me({url:"/get_lora_list_by_range",method:"post",data:{range:e}}),searchLoraGetFolderList:async e=>await Me({url:"/get_lora_list_by_search",method:"post",data:{search:e}})},z8=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Vg=hn({name:"JsonString",props:{jsonValue:{type:String,required:!0}},setup(e){const t=y(!0),o=y(!1),n=y(null),a=y(null);ut(()=>{n.value&&a.value&&n.value.offsetHeight>a.value.offsetHeight&&(o.value=!0)});const s=()=>{t.value=!t.value};return()=>{const l=e.jsonValue,r=z8.test(l);let u;!t.value&&o.value?u=Et("span",{class:{"jv-ellipsis":!0},onClick:s},"..."):r?u=Et("span",{class:{"jv-item":!0,"jv-string":!0},ref:n},[Et("span",null,'"'),Et("a",{href:l,target:"_blank",class:"jv-link"},l),Et("span",null,'"')]):u=Et("span",{class:{"jv-item":!0,"jv-string":!0},ref:n},`"${l}"`);const d=[];return o.value&&d.push(Et("span",{class:{"jv-toggle":!0,open:t.value},onClick:s})),d.push(Et("span",{class:{"jv-holder-node":!0},ref:a})),d.push(u),Et("span",{},d)}}}),q8={class:Ee(["jv-item","jv-undefined"])},G8=hn({__name:"json-undefined",props:{jsonValue:{type:null,default:void 0}},setup(e){const t=e,o=tt(()=>t.jsonValue===null?"null":"undefined");return(n,a)=>(S(),L("span",q8,h(o.value),1))}}),Q8=hn({__name:"json-number",props:{jsonValue:{type:Number,required:!0}},setup(e){const t=e,o=tt(()=>Number.isInteger(t.jsonValue));return(n,a)=>(S(),L("span",{class:Ee(["jv-item","jv-number",o.value?"jv-number-integer":"jv-number-float"])},h(e.jsonValue.toString()),3))}}),Y8={class:Ee(["jv-item","jv-boolean"])},J8=hn({__name:"json-boolean",props:{jsonValue:{type:Boolean,required:!0}},setup(e){return(t,o)=>(S(),L("span",Y8,h(e.jsonValue.toString()),1))}}),K8=hn({name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:t}){const o=y({});let n=null;const a=u=>{setTimeout(()=>{o.value=u},0)};et(()=>e.jsonValue,u=>{a(u)},{immediate:!0,deep:!0});const s=tt(()=>{if(!e.sort)return o.value;const u=Object.keys(o.value).sort(),d={};return u.forEach(c=>{d[c]=o.value[c]}),d}),l=()=>{if(n)try{n.dispatchEvent(new Event("resized"))}catch{const u=document.createEvent("Event");u.initEvent("resized",!0,!1),n.dispatchEvent(u)}},r=()=>{t("update:expand",!e.expand),l()};return()=>{const u=[];if(u.push(Et("span",{class:["jv-item","jv-object"]},"{")),e.expand){for(const d in s.value)if(s.value.hasOwnProperty(d)){const c=s.value[d];u.push(Et(iu,{key:d,sort:e.sort,keyName:d,depth:e.depth+1,value:c,previewMode:e.previewMode}))}}return!e.expand&&Object.keys(o.value).length>0&&u.push(Et("span",{class:"jv-ellipsis",onClick:r,title:`click to reveal object content (keys: ${Object.keys(s.value).join(", ")})`},"...")),u.push(Et("span",{class:["jv-item","jv-object"]},"}")),Et("span",{ref:d=>{n=d}},u)}}}),X8=hn({name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:t}){const o=y([]);let n=null;const a=(l,r=0)=>{r===0&&(o.value=[]),setTimeout(()=>{l&&l.length>r&&(o.value.push(l[r]),a(l,r+1))},0)};et(()=>e.jsonValue,l=>{a(l)},{immediate:!0,deep:!0});const s=()=>{if(t("update:expand",!e.expand),n)try{n.dispatchEvent(new Event("resized"))}catch{const l=document.createEvent("Event");l.initEvent("resized",!0,!1),n.dispatchEvent(l)}};return()=>{const l=[];return!e.previewMode&&!e.keyName&&l.push(Et("span",{class:{"jv-toggle":!0,open:!!e.expand},onClick:s})),l.push(Et("span",{class:["jv-item","jv-array"]},"[")),e.expand&&o.value.forEach((r,u)=>{l.push(Et(iu,{key:u,sort:e.sort,depth:e.depth+1,value:r,previewMode:e.previewMode}))}),!e.expand&&o.value.length>0&&l.push(Et("span",{class:"jv-ellipsis",onClick:s,title:`click to reveal ${o.value.length} hidden items`},"...")),l.push(Et("span",{class:["jv-item","jv-array"]},"]")),Et("span",{ref:r=>{n=r}},l)}}}),Z8=["title"],e7=hn({__name:"json-function",props:{jsonValue:{type:Function,required:!0}},setup(e){return(t,o)=>(S(),L("span",{class:Ee(["jv-item","jv-function"]),title:e.jsonValue.toString()}," <function> ",8,Z8))}}),t7={class:Ee(["jv-item","jv-string"])},n7=hn({__name:"json-date",props:{jsonValue:{type:Date,required:!0}},setup(e){const t=e,o=ro("timeformat",a=>a.toLocaleString()),n=tt(()=>o(t.jsonValue));return(a,s)=>(S(),L("span",t7,' "'+h(n.value)+'" ',1))}}),o7={class:Ee(["jv-item","jv-regexp"])},a7=hn({__name:"json-regexp",props:{jsonValue:{type:RegExp,required:!0}},setup(e){return(t,o)=>(S(),L("span",o7,h(e.jsonValue.toString()),1))}}),iu=hn({name:"JsonBox",props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},setup(e){const t=ro("expandDepth",1/0),o=ro("keyClick",()=>{}),n=y(!0);let a=null;ut(()=>{n.value=e.previewMode||e.depth<t});const s=()=>{if(n.value=!n.value,a)try{a.dispatchEvent(new Event("resized"))}catch{const l=document.createEvent("Event");l.initEvent("resized",!0,!1),a.dispatchEvent(l)}};return()=>{const l=[];let r;e.value===null||e.value===void 0?r=G8:Array.isArray(e.value)?r=X8:e.value instanceof Date?r=n7:e.value instanceof RegExp?r=a7:typeof e.value=="object"?r=K8:typeof e.value=="number"?r=Q8:typeof e.value=="string"?r=Vg:typeof e.value=="boolean"?r=J8:typeof e.value=="function"?r=e7:r=Vg;const u=e.value&&(Array.isArray(e.value)||typeof e.value=="object"&&!(e.value instanceof Date)&&!(e.value instanceof RegExp));return!e.previewMode&&u&&!(e.value instanceof RegExp)&&l.push(Et("span",{class:{"jv-toggle":!0,open:!!n.value},onClick:s})),e.keyName&&l.push(Et("span",{class:"jv-key",onClick:()=>{o&&o(e.keyName)}},`${e.keyName}:`)),l.push(Et(r,{class:"jv-push",jsonValue:e.value,keyName:e.keyName,sort:e.sort,depth:e.depth,expand:n.value,previewMode:e.previewMode,"onUpdate:expand":d=>{n.value=d}})),Et("div",{class:{"jv-node":!0,"jv-key-node":!!e.keyName&&!u,toggle:!e.previewMode&&u},ref:d=>{a=d}},l)}}});function s7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uu={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */var l7=uu.exports,zg;function r7(){return zg||(zg=1,(function(e,t){(function(o,n){e.exports=n()})(l7,function(){return(function(){var o={686:(function(s,l,r){r.d(l,{default:function(){return xe}});var u=r(279),d=r.n(u),c=r(370),f=r.n(c),m=r(817),g=r.n(m);function v(oe){try{return document.execCommand(oe)}catch{return!1}}var _=function(oe){var de=g()(oe);return v("cut"),de},w=_;function x(oe){var de=document.documentElement.getAttribute("dir")==="rtl",be=document.createElement("textarea");be.style.fontSize="12pt",be.style.border="0",be.style.padding="0",be.style.margin="0",be.style.position="absolute",be.style[de?"right":"left"]="-9999px";var ke=window.pageYOffset||document.documentElement.scrollTop;return be.style.top="".concat(ke,"px"),be.setAttribute("readonly",""),be.value=oe,be}var A=function(oe,de){var be=x(oe);de.container.appendChild(be);var ke=g()(be);return v("copy"),be.remove(),ke},W=function(oe){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},be="";return typeof oe=="string"?be=A(oe,de):oe instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(oe==null?void 0:oe.type)?be=A(oe.value,de):(be=g()(oe),v("copy")),be},T=W;function P(oe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(de){return typeof de}:P=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},P(oe)}var q=function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=oe.action,be=de===void 0?"copy":de,ke=oe.container,_e=oe.target,I=oe.text;if(be!=="copy"&&be!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(_e!==void 0)if(_e&&P(_e)==="object"&&_e.nodeType===1){if(be==="copy"&&_e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(be==="cut"&&(_e.hasAttribute("readonly")||_e.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(I)return T(I,{container:ke});if(_e)return be==="cut"?w(_e):T(_e,{container:ke})},G=q;function z(oe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(de){return typeof de}:z=function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},z(oe)}function J(oe,de){if(!(oe instanceof de))throw new TypeError("Cannot call a class as a function")}function ve(oe,de){for(var be=0;be<de.length;be++){var ke=de[be];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(oe,ke.key,ke)}}function ae(oe,de,be){return de&&ve(oe.prototype,de),be&&ve(oe,be),oe}function F(oe,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(de&&de.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),de&&K(oe,de)}function K(oe,de){return K=Object.setPrototypeOf||function(be,ke){return be.__proto__=ke,be},K(oe,de)}function ee(oe){var de=ne();return function(){var be=U(oe),ke;if(de){var _e=U(this).constructor;ke=Reflect.construct(be,arguments,_e)}else ke=be.apply(this,arguments);return Q(this,ke)}}function Q(oe,de){return de&&(z(de)==="object"||typeof de=="function")?de:te(oe)}function te(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function ne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function U(oe){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(de){return de.__proto__||Object.getPrototypeOf(de)},U(oe)}function j(oe,de){var be="data-clipboard-".concat(oe);if(de.hasAttribute(be))return de.getAttribute(be)}var ue=(function(oe){F(be,oe);var de=ee(be);function be(ke,_e){var I;return J(this,be),I=de.call(this),I.resolveOptions(_e),I.listenClick(ke),I}return ae(be,[{key:"resolveOptions",value:function(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof ke.action=="function"?ke.action:this.defaultAction,this.target=typeof ke.target=="function"?ke.target:this.defaultTarget,this.text=typeof ke.text=="function"?ke.text:this.defaultText,this.container=z(ke.container)==="object"?ke.container:document.body}},{key:"listenClick",value:function(ke){var _e=this;this.listener=f()(ke,"click",function(I){return _e.onClick(I)})}},{key:"onClick",value:function(ke){var _e=ke.delegateTarget||ke.currentTarget,I=this.action(_e)||"copy",N=G({action:I,container:this.container,target:this.target(_e),text:this.text(_e)});this.emit(N?"success":"error",{action:I,text:N,trigger:_e,clearSelection:function(){_e&&_e.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(ke){return j("action",ke)}},{key:"defaultTarget",value:function(ke){var _e=j("target",ke);if(_e)return document.querySelector(_e)}},{key:"defaultText",value:function(ke){return j("text",ke)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(ke){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return T(ke,_e)}},{key:"cut",value:function(ke){return w(ke)}},{key:"isSupported",value:function(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],_e=typeof ke=="string"?[ke]:ke,I=!!document.queryCommandSupported;return _e.forEach(function(N){I=I&&!!document.queryCommandSupported(N)}),I}}]),be})(d()),xe=ue}),828:(function(s){var l=9;if(typeof Element<"u"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}function u(d,c){for(;d&&d.nodeType!==l;){if(typeof d.matches=="function"&&d.matches(c))return d;d=d.parentNode}}s.exports=u}),438:(function(s,l,r){var u=r(828);function d(m,g,v,_,w){var x=f.apply(this,arguments);return m.addEventListener(v,x,w),{destroy:function(){m.removeEventListener(v,x,w)}}}function c(m,g,v,_,w){return typeof m.addEventListener=="function"?d.apply(null,arguments):typeof v=="function"?d.bind(null,document).apply(null,arguments):(typeof m=="string"&&(m=document.querySelectorAll(m)),Array.prototype.map.call(m,function(x){return d(x,g,v,_,w)}))}function f(m,g,v,_){return function(w){w.delegateTarget=u(w.target,g),w.delegateTarget&&_.call(m,w)}}s.exports=c}),879:(function(s,l){l.node=function(r){return r!==void 0&&r instanceof HTMLElement&&r.nodeType===1},l.nodeList=function(r){var u=Object.prototype.toString.call(r);return r!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in r&&(r.length===0||l.node(r[0]))},l.string=function(r){return typeof r=="string"||r instanceof String},l.fn=function(r){var u=Object.prototype.toString.call(r);return u==="[object Function]"}}),370:(function(s,l,r){var u=r(879),d=r(438);function c(v,_,w){if(!v&&!_&&!w)throw new Error("Missing required arguments");if(!u.string(_))throw new TypeError("Second argument must be a String");if(!u.fn(w))throw new TypeError("Third argument must be a Function");if(u.node(v))return f(v,_,w);if(u.nodeList(v))return m(v,_,w);if(u.string(v))return g(v,_,w);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(v,_,w){return v.addEventListener(_,w),{destroy:function(){v.removeEventListener(_,w)}}}function m(v,_,w){return Array.prototype.forEach.call(v,function(x){x.addEventListener(_,w)}),{destroy:function(){Array.prototype.forEach.call(v,function(x){x.removeEventListener(_,w)})}}}function g(v,_,w){return d(document.body,v,_,w)}s.exports=c}),817:(function(s){function l(r){var u;if(r.nodeName==="SELECT")r.focus(),u=r.value;else if(r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"){var d=r.hasAttribute("readonly");d||r.setAttribute("readonly",""),r.select(),r.setSelectionRange(0,r.value.length),d||r.removeAttribute("readonly"),u=r.value}else{r.hasAttribute("contenteditable")&&r.focus();var c=window.getSelection(),f=document.createRange();f.selectNodeContents(r),c.removeAllRanges(),c.addRange(f),u=c.toString()}return u}s.exports=l}),279:(function(s){function l(){}l.prototype={on:function(r,u,d){var c=this.e||(this.e={});return(c[r]||(c[r]=[])).push({fn:u,ctx:d}),this},once:function(r,u,d){var c=this;function f(){c.off(r,f),u.apply(d,arguments)}return f._=u,this.on(r,f,d)},emit:function(r){var u=[].slice.call(arguments,1),d=((this.e||(this.e={}))[r]||[]).slice(),c=0,f=d.length;for(c;c<f;c++)d[c].fn.apply(d[c].ctx,u);return this},off:function(r,u){var d=this.e||(this.e={}),c=d[r],f=[];if(c&&u)for(var m=0,g=c.length;m<g;m++)c[m].fn!==u&&c[m].fn._!==u&&f.push(c[m]);return f.length?d[r]=f:delete d[r],this}},s.exports=l,s.exports.TinyEmitter=l})},n={};function a(s){if(n[s])return n[s].exports;var l=n[s]={exports:{}};return o[s](l,l.exports,a),l.exports}return(function(){a.n=function(s){var l=s&&s.__esModule?(function(){return s.default}):(function(){return s});return a.d(l,{a:l}),l}})(),(function(){a.d=function(s,l){for(var r in l)a.o(l,r)&&!a.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:l[r]})}})(),(function(){a.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)}})(),a(686)})().default})})(uu)),uu.exports}var i7=r7();const u7=s7(i7),c7=function(e,t){let o=Date.now(),n;return(...a)=>{Date.now()-o<t&&n&&clearTimeout(n),n=setTimeout(()=>{e(...a)},t),o=Date.now()}},d7=hn({name:"JsonViewer",components:{JsonBox:iu},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"light"},timeformat:{type:Function,default:e=>e.toLocaleString()},previewMode:{type:Boolean,default:!1},parse:{type:Boolean,default:!1}},emits:["onKeyClick","copied"],setup(e,{emit:t}){const o=y(!1),n=y(!1),a=y(e.expanded),s=y(null),l=y(null);gl("expandDepth",e.expandDepth),gl("timeformat",e.timeformat),gl("keyClick",v=>{t("onKeyClick",v)});const r=tt(()=>"jv-container jv-"+e.theme+(e.boxed?" boxed":"")),u=tt(()=>{if(typeof e.copyable=="boolean"&&!e.copyable)return{copyText:"copy",copiedText:"copied!",timeout:2e3,align:"right"};const v=e.copyable;return{copyText:v.copyText||"copy",copiedText:v.copiedText||"copied!",timeout:v.timeout||2e3,align:v.align||"right"}}),d=tt(()=>{if(!e.parse||typeof e.value!="string")return e.value;try{return JSON.parse(e.value)}catch{return e.value}}),c=()=>{f()},f=c7(()=>{Qe(()=>{l.value&&(l.value.$el.clientHeight>=250?n.value=!0:n.value=!1)})},200),m=v=>{o.value||(o.value=!0,setTimeout(()=>{o.value=!1},u.value.timeout),t("copied",v))},g=()=>{a.value=!a.value};return et(()=>e.value,()=>{c()}),ut(()=>{e.boxed&&l.value&&(c(),l.value.$el.addEventListener("resized",c,!0)),e.copyable&&s.value&&new u7(s.value,{text:()=>JSON.stringify(d.value,null,2)}).on("success",m)}),{clip:s,jsonBox:l,copied:o,expandableCode:n,expandCode:a,jvClass:r,copyText:u,parseValue:d,toggleExpandCode:g}}}),f7=(e,t)=>{const o=e.__vccOpts||e;for(const[n,a]of t)o[n]=a;return o};function p7(e,t,o,n,a,s){const l=Mh("json-box");return S(),L("div",{class:Ee(e.jvClass)},[e.copyable?(S(),L("div",{key:0,class:Ee(`jv-tooltip ${e.copyText.align||"right"}`)},[i("span",{ref:"clip",class:Ee(["jv-button",{copied:e.copied}])},[ts(e.$slots,"copy",{copied:e.copied},()=>[qe(h(e.copied?e.copyText.copiedText:e.copyText.copyText),1)])],2)],2)):pe("",!0),i("div",{class:Ee(["jv-code",{open:e.expandCode,boxed:e.boxed}])},[Ve(l,{ref:"jsonBox",value:e.parseValue,sort:e.sort,"preview-mode":e.previewMode},null,8,["value","sort","preview-mode"])],2),e.expandableCode&&e.boxed?(S(),L("div",{key:1,class:"jv-more",onClick:t[0]||(t[0]=(...r)=>e.toggleExpandCode&&e.toggleExpandCode(...r))},[i("span",{class:Ee(["jv-toggle",{open:!!e.expandCode}])},null,2)])):pe("",!0)],2)}const g7=f7(d7,[["render",p7]]),m7={class:"lora-raw__content"},qg="weilin_tools_",h7=yt({__name:"lora_raw",emits:["close","update"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=y({}),s=y(!1),l={loraRaw:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},u=y((()=>{try{const g=localStorage.getItem(`${qg}loraRawState`);if(g){const v=JSON.parse(g),_={...l};return v.loraRaw&&(_.loraRaw={...l.loraRaw,...v.loraRaw}),_}}catch(g){console.error("Error loading window states:",g)}return{...l}})());et(u,g=>{try{localStorage.setItem(`${qg}loraRawState`,JSON.stringify(g))}catch(v){console.error("Error saving window states:",v)}},{deep:!0}),ut(()=>{Ue.registerWindow("loraRaw")}),Dn(()=>{Ue.unregisterWindow("loraRaw")});const d=g=>{s.value=!1},c=(g,v)=>{u.value[g]&&(u.value[g].position={...v})},f=(g,v)=>{u.value[g]&&(u.value[g].size={...v})};return t({open:g=>{s.value=!0,Ue.setActiveWindow("loraRaw"),a.value=g}}),(g,v)=>s.value?(S(),wt(Sn,{key:0,title:p(n)("lora.rawTitle"),position:u.value.loraRaw.position,size:u.value.loraRaw.size,"z-index":p(Ue).getZIndex("loraRaw"),"onUpdate:position":v[0]||(v[0]=_=>c("loraRaw",_)),"onUpdate:size":v[1]||(v[1]=_=>f("loraRaw",_)),onActive:v[2]||(v[2]=_=>p(Ue).setActiveWindow("loraRaw")),onClose:v[3]||(v[3]=_=>d())},{default:it(()=>[i("div",m7,[Ve(p(g7),{value:a.value,copyable:"",sort:"",theme:"dark"},null,8,["value"])])]),_:1},8,["title","position","size","z-index"])):pe("",!0)}},[["__scopeId","data-v-4c910f08"]]),v7={key:0,class:"lora-detail__loading"},_7={class:"lora-detail__body"},y7={class:"lora-detail__tags"},b7=["title"],w7=["title"],x7={class:"lora-detail__table"},T7={class:"label"},S7={colspan:"2"},k7={colspan:"3"},C7={class:"label"},E7={colspan:"2",class:"hash"},L7={class:"label"},$7={colspan:"2"},A7=["href"],I7={key:1,class:"not-found"},M7=["title"],O7={class:"label"},N7=["title"],R7={key:1,class:"text"},D7={class:"actions"},P7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},F7={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},B7={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},U7={class:"label"},j7={colspan:"2"},H7={class:"label"},W7={colspan:"2"},V7={class:"label"},z7=["title"],q7=["onUpdate:modelValue","type","onKeyup"],G7={key:1,class:"text"},Q7={class:"actions"},Y7=["onClick","title"],J7={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},K7={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},X7={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},Z7={class:"label"},ex=["onUpdate:modelValue"],tx={key:1},nx=["onUpdate:modelValue","type","onKeyup"],ox={key:1,class:"text"},ax={class:"actions"},sx=["onClick","title"],lx={class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},rx={key:0,d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},ix={key:1,d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},ux=["onClick","title"],cx={class:"field-management"},dx=["title"],fx={key:0},px={class:"label"},gx=["title"],mx={key:0,class:"word-selection"},hx={colspan:"2"},vx={class:"word-list"},_x=["onClick"],yx={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},bx={key:1},wx={key:0,class:"lora-detail__images"},xx={class:"image-wrapper"},Tx=["onClick"],Sx=["src"],kx={class:"image-info"},Cx={key:0,class:"info-item"},Ex=["href"],Lx={key:1,class:"info-item"},$x={key:2,class:"info-item"},Ax={key:3,class:"info-item"},Ix={key:4,class:"info-item"},Mx={key:5,class:"info-item"},Ox={key:6,class:"info-item"},Nx={key:7,class:"info-item"},Gg="weilin_tools_",nr=yt({__name:"lora_detail",emits:["close","update"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=y(!1),s=y({}),l=y(!1),r=y(),u=y({}),d={loraDetail:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},f=y((()=>{try{const I=localStorage.getItem(`${Gg}loraDetailState`);if(I){const N=JSON.parse(I),H={...d};return N.loraDetail&&(H.loraDetail={...d.loraDetail,...N.loraDetail}),H}}catch(I){console.error("Error loading window states:",I)}return{...d}})());et(f,I=>{try{localStorage.setItem(`${Gg}loraDetailState`,JSON.stringify(I))}catch(N){console.error("Error saving window states:",N)}},{deep:!0}),ut(()=>{Ue.registerWindow("loraDetail")}),Dn(()=>{Ue.unregisterWindow("loraDetail")});const m=I=>{l.value=!1},g=(I,N)=>{f.value[I]&&(f.value[I].position={...N})},v=(I,N)=>{f.value[I]&&(f.value[I].size={...N})};t({open:I=>{l.value=!0,Ue.setActiveWindow("loraDetail"),a.value=!0,s.value=I,Qe(()=>{J()})}});const w=y(""),x=y(),A=I=>{x.value.open(I)},W=y({}),T=y({}),P=y([]),q=[{key:"strengthMin",label:n("lora.strengthMin"),tip:n("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:n("lora.strengthMax"),tip:n("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:n("lora.strWeight"),tip:n("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:n("lora.promptWords"),tip:n("lora.promptWordsTip")}],G=()=>{const I=`custom_${Date.now()}`;s.value.user_diy_fileds||(s.value.user_diy_fileds={}),u.value[I]={label:"",type:"text"},s.value.user_diy_fileds[I]={label:"",value:""},T.value[I]="",U(I)},z=async I=>{var N,H;delete u.value[I],delete T.value[I],(H=(N=s.value)==null?void 0:N.user_diy_fileds)!=null&&H[I]&&delete s.value.user_diy_fileds[I],await Qe(async()=>{await xe(I)})},J=()=>{w.value=s.value.name,s.value={},P.value=[],T.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},kn.getLoraDetail({file:w.value,refresh:!1,light:!1}).then(I=>{s.value=I.data,Qe(function(){var N,H,O,B,k,E;s.value.name=s.value.name||((H=(N=s.value.raw)===null||N===void 0?void 0:N.metadata)===null||H===void 0?void 0:H.ss_output_name===void 0?H["modelspec.title"]:H.ss_output_name)||"",T.value.nameValue=s.value.name,s.value.strengthMin=(O=s.value.strengthMin)!==null&&O!==void 0?O:"",T.value.minValue=s.value.strengthMin,s.value.strengthMax=(B=s.value.strengthMax)!==null&&B!==void 0?B:"",T.value.maxValue=s.value.strengthMax,s.value.userNote=(k=s.value.userNote)!==null&&k!==void 0?k:"",T.value.notesValue=s.value.userNote,s.value.loraWorks=(E=s.value.loraWorks)!==null&&E!==void 0?E:"",T.value.loraWorksValue=s.value.loraWorks,s.value.user_diy_fileds&&(u.value=s.value.user_diy_fileds),a.value=!1})}).catch(I=>{Z({type:"warn",str:"message.networkError"}),a.value=!1})},ve=I=>{let H=new URL(I).pathname.split("/").pop();return H=H.split("?")[0],decodeURIComponent(H)},ae=async I=>{try{const N=await fetch(I),H=ve(I),O=await N.blob();kn.postUplaodImg(O,s.value.file,H).then(B=>{Z({type:"success",str:"message.saveSuccess"})}).catch(B=>{Z({type:"warn",str:"message.unknownError"})})}catch{Z({type:"warn",str:"message.unknownError"})}},F=tt(()=>{var I;return(I=s.value.links)==null?void 0:I.find(N=>N.includes("civitai.com/models"))}),K=tt(()=>{var I,N;return((N=(I=s.value.raw)==null?void 0:I.civitai)==null?void 0:N.error)==="Model not found"}),ee=tt(()=>s.value.trainedWords||[]),Q=async()=>{var N;const I=((N=r.value)==null?void 0:N.scrollTop)||0;a.value=!0,kn.getLoraRefresh({file:w.value}).then(H=>{s.value=H.data,Qe(function(){var O,B,k,E,D,Y;s.value.name=s.value.name||((B=(O=s.value.raw)===null||O===void 0?void 0:O.metadata)===null||B===void 0?void 0:B.ss_output_name===void 0?B["modelspec.title"]:B.ss_output_name)||"",T.value.nameValue=s.value.name,s.value.strengthMin=(k=s.value.strengthMin)!==null&&k!==void 0?k:"",T.value.minValue=s.value.strengthMin,s.value.strengthMax=(E=s.value.strengthMax)!==null&&E!==void 0?E:"",T.value.maxValue=s.value.strengthMax,s.value.userNote=(D=s.value.userNote)!==null&&D!==void 0?D:"",T.value.notesValue=s.value.userNote,s.value.loraWorks=(Y=s.value.loraWorks)!==null&&Y!==void 0?Y:"",T.value.loraWorksValue=s.value.loraWorks,s.value.user_diy_fileds&&(u.value=s.value.user_diy_fileds),a.value=!1}),Qe(function(){a.value=!1}),r.value&&(r.value.scrollTop=I),Z({type:"success",str:"message.dataLoaded"})}).catch(H=>{Z({type:"warn",str:"message.networkError"}),a.value=!1})},te=I=>{W.value[I]?U(I):ne(I)},ne=I=>{var N,H;W.value[I]=!0,I in u.value?T.value[I]=((H=(N=s.value.user_diy_fileds)==null?void 0:N[I])==null?void 0:H.value)||"":T.value[I]=s.value[I],Qe(()=>{I==="name"&&nameInput.value&&nameInput.value.focus()})},U=I=>{I in u.value?(s.value.user_diy_fileds||(s.value.user_diy_fileds={}),s.value.user_diy_fileds[I]={label:u.value[I].label,value:T.value[I]}):s.value[I]=T.value[I],ue(s.value),W.value[I]=!1},j=I=>{W.value[I]=!1,T.value[I]=s.value[I]},ue=I=>{var H;const N=((H=r.value)==null?void 0:H.scrollTop)||0;a.value=!0,kn.postLoraSave(w.value,I).then(O=>{s.value=O.data,Qe(function(){var B,k,E,D,Y,ie;s.value.name=s.value.name||((k=(B=s.value.raw)===null||B===void 0?void 0:B.metadata)===null||k===void 0?void 0:k.ss_output_name===void 0?k["modelspec.title"]:k.ss_output_name)||"",T.value.nameValue=s.value.name,s.value.strengthMin=(E=s.value.strengthMin)!==null&&E!==void 0?E:"",T.value.minValue=s.value.strengthMin,s.value.strengthMax=(D=s.value.strengthMax)!==null&&D!==void 0?D:"",T.value.maxValue=s.value.strengthMax,s.value.userNote=(Y=s.value.userNote)!==null&&Y!==void 0?Y:"",T.value.notesValue=s.value.userNote,s.value.loraWorks=(ie=s.value.loraWorks)!==null&&ie!==void 0?ie:"",T.value.loraWorksValue=s.value.loraWorks,s.value.user_diy_fileds&&(u.value=s.value.user_diy_fileds),a.value=!1,Qe(function(){r.value&&(r.value.scrollTop=N)})}),Z({type:"success",str:"message.saveSuccess"})}).catch(O=>{Z({type:"warn",str:"message.networkError"}),a.value=!1})},xe=async I=>{var H;const N=((H=r.value)==null?void 0:H.scrollTop)||0;a.value=!0,await kn.postLoraDelet(w.value,I).then(O=>{s.value=O.data,Qe(function(){var B,k,E,D,Y,ie;s.value.name=s.value.name||((k=(B=s.value.raw)===null||B===void 0?void 0:B.metadata)===null||k===void 0?void 0:k.ss_output_name===void 0?k["modelspec.title"]:k.ss_output_name)||"",T.value.nameValue=s.value.name,s.value.strengthMin=(E=s.value.strengthMin)!==null&&E!==void 0?E:"",T.value.minValue=s.value.strengthMin,s.value.strengthMax=(D=s.value.strengthMax)!==null&&D!==void 0?D:"",T.value.maxValue=s.value.strengthMax,s.value.userNote=(Y=s.value.userNote)!==null&&Y!==void 0?Y:"",T.value.notesValue=s.value.userNote,s.value.loraWorks=(ie=s.value.loraWorks)!==null&&ie!==void 0?ie:"",T.value.loraWorksValue=s.value.loraWorks,s.value.user_diy_fileds&&(u.value=s.value.user_diy_fileds),a.value=!1,Qe(function(){r.value&&(r.value.scrollTop=N)})}),Z({type:"success",str:"message.deleteSuccess"})}).catch(O=>{Z({type:"warn",str:"message.networkError"}),a.value=!1})},oe=I=>{const N=P.value.indexOf(I);N===-1?P.value.push(I):P.value.splice(N,1)},de=I=>P.value.includes(I),be=async()=>{P.value.length&&navigator.clipboard.writeText(P.value).then(I=>{Z({type:"success",str:"message.copySuccess"})},I=>{Z({type:"warn",str:"message.copyFailed"})})};y(!1),y(!1),tt(()=>a.value?n("common.loading"):n("common.ready"));const ke=y(!0),_e=()=>{ke.value=!ke.value};return(I,N)=>(S(),L(Oe,null,[l.value?(S(),wt(Sn,{key:0,title:p(n)("lora.title"),position:f.value.loraDetail.position,size:f.value.loraDetail.size,"z-index":p(Ue).getZIndex("loraDetail"),"onUpdate:position":N[5]||(N[5]=H=>g("loraDetail",H)),"onUpdate:size":N[6]||(N[6]=H=>v("loraDetail",H)),onActive:N[7]||(N[7]=H=>p(Ue).setActiveWindow("loraDetail")),onClose:N[8]||(N[8]=H=>m())},{default:it(()=>{var H;return[i("div",{class:"lora-detail__content",ref_key:"loraContent",ref:r},[a.value?(S(),L("div",v7,[...N[9]||(N[9]=[i("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[i("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)])])):pe("",!0),i("div",_7,[N[24]||(N[24]=i("div",{class:"lora-detail__title"},"Lora ",-1)),i("ul",y7,[s.value.type?(S(),L("li",{key:0,class:Ee(["lora-detail__tag",`-type-${s.value.type.toLowerCase()}`]),title:p(n)("lora.type")},h(s.value.type),11,b7)):pe("",!0),s.value.baseModel?(S(),L("li",{key:1,class:Ee(["lora-detail__tag",`-basemodel-${s.value.baseModel.toLowerCase()}`]),title:p(n)("lora.baseModel")},h(s.value.baseModel),11,w7)):pe("",!0)]),i("table",x7,[i("tbody",null,[i("tr",null,[i("td",T7,h(p(n)("lora.file")),1),i("td",S7,h(s.value.file),1),i("td",k7,[i("button",{class:"fetch-btn",onClick:N[0]||(N[0]=O=>A(s.value.raw.metadata))},h(p(n)("lora.seeLoraRaw")),1)])]),i("tr",null,[i("td",C7,h(p(n)("lora.hash")),1),i("td",E7,h(s.value.sha256),1)]),i("tr",null,[i("td",L7,h(p(n)("lora.civitai")),1),i("td",$7,[F.value?(S(),L(Oe,{key:0},[i("a",{href:F.value,target:"_blank",class:"civitai-link"},[N[10]||(N[10]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),i("span",null,h(p(n)("lora.viewOnCivitai")),1)],8,A7),i("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:Q},h(p(n)("lora.getCivitData")),1)],64)):K.value?(S(),L("div",I7,[i("i",null,h(p(n)("lora.modelNotFound")),1),(S(),L("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:p(n)("lora.modelNotFoundTip")},[...N[11]||(N[11]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,M7))])):(S(),L("button",{key:2,class:"fetch-btn",onClick:Q},h(p(n)("lora.fetchFromCivitai")),1))])]),i("tr",{class:Ee({"is-editing":W.value.name})},[i("td",O7,[qe(h(p(n)("lora.name"))+" ",1),(S(),L("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:p(n)("lora.nameTip")},[...N[12]||(N[12]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,N7))]),i("td",null,[W.value.name?ye((S(),L("input",{key:0,"onUpdate:modelValue":N[1]||(N[1]=O=>T.value.name=O),type:"text",onKeyup:[N[2]||(N[2]=on(O=>U("name"),["enter"])),N[3]||(N[3]=on(O=>j("name"),["esc"]))],ref:"nameInput"},null,544)),[[Ae,T.value.name]]):(S(),L("span",R7,h(s.value.name),1))]),i("td",D7,[i("button",{class:"edit-btn",onClick:N[4]||(N[4]=O=>te("name"))},[(S(),L("svg",P7,[W.value.name?(S(),L("path",F7)):(S(),L("path",B7))]))])])],2),i("tr",null,[i("td",U7,h(p(n)("lora.baseModel")),1),i("td",j7,h(!s.value.baseModelFile&&!s.value.baseModelFile?"":(s.value.baseModel||"")+(s.value.baseModelFile?`
                                    (${s.value.baseModelFile})`:"")),1)]),i("tr",null,[i("td",H7,h(p(n)("lora.skipClip")),1),i("td",W7,h((I._t=(I._s=s.value.raw)===null||I._s===void 0?void 0:I._s.metadata)===null||I._t===void 0?void 0:I._t.ss_clip_skip),1)]),(S(),L(Oe,null,He(q,O=>i("tr",{key:O.key,class:Ee({"is-editing":W.value[O.key]})},[i("td",V7,[qe(h(O.label)+" ",1),O.tip?(S(),L("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:O.tip},[...N[13]||(N[13]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,z7)):pe("",!0)]),i("td",null,[W.value[O.key]?ye((S(),L("input",{key:0,"onUpdate:modelValue":B=>T.value[O.key]=B,type:O.type||"text",onKeyup:[on(B=>U(O.key),["enter"]),on(B=>j(O.key),["esc"])]},null,40,q7)),[[Dd,T.value[O.key]]]):(S(),L("span",G7,h(s.value[O.key]),1))]),i("td",Q7,[i("button",{class:"edit-btn",onClick:B=>te(O.key),title:p(n)("promptBox.settings.edit")},[(S(),L("svg",J7,[W.value[O.key]?(S(),L("path",K7)):(S(),L("path",X7))]))],8,Y7)])],2)),64)),(S(!0),L(Oe,null,He(u.value,(O,B)=>{var k;return S(),L("tr",{key:B,class:Ee({"is-editing":W.value[B]})},[i("td",Z7,[W.value[B]?ye((S(),L("input",{key:0,"onUpdate:modelValue":E=>O.label=E,type:"text"},null,8,ex)),[[Ae,O.label]]):(S(),L("span",tx,h(O.label),1))]),i("td",null,[W.value[B]?ye((S(),L("input",{key:0,"onUpdate:modelValue":E=>T.value[B]=E,type:O.type||"text",onKeyup:[on(E=>U(B),["enter"]),on(E=>j(B),["esc"])]},null,40,nx)),[[Dd,T.value[B]]]):(S(),L("span",ox,h(s.value.user_diy_fileds?(k=s.value.user_diy_fileds[B])==null?void 0:k.value:""),1))]),i("td",ax,[i("button",{class:"edit-btn",onClick:E=>te(B),title:p(n)("promptBox.settings.edit")},[(S(),L("svg",lx,[W.value[B]?(S(),L("path",rx)):(S(),L("path",ix))]))],8,sx),i("button",{style:{"margin-left":"5px",color:"#f87171"},onClick:E=>z(B),class:"edit-btn",title:p(n)("promptBox.settings.delete")},h(p(n)("promptBox.settings.delete")),9,ux)])],2)}),128)),i("div",cx,[i("button",{onClick:G,class:"add-btn",title:p(n)("lora.addDiyFiled")},h(p(n)("lora.addDiyFiled")),9,dx)]),ee.value.length?(S(),L("tr",fx,[i("td",px,[qe(h(p(n)("lora.trainedWords"))+" ",1),(S(),L("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:p(n)("lora.trainedWordsTip")},[...N[14]||(N[14]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,gx)),P.value.length?(S(),L("div",mx,[qe(h(p(n)("lora.selectedWords",{count:P.value.length}))+" ",1),i("button",{class:"copy-btn",onClick:be},h(p(n)("common.copy")),1)])):pe("",!0)]),i("td",hx,[i("ul",vx,[(S(!0),L(Oe,null,He(ke.value?ee.value.slice(0,10):ee.value,(O,B)=>(S(),L("li",{key:"words-"+B,class:Ee(["word-item",{"is-selected":de(O.word),"is-hidden":ke.value&&B>=10}]),onClick:k=>oe(O.word)},[i("span",null,h(O.word),1),O.civitai?(S(),L("svg",yx,[...N[15]||(N[15]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)])])):pe("",!0),O.count!=null?(S(),L("small",bx,h(O.count),1)):pe("",!0)],10,_x))),128)),ee.value.length>10?(S(),L("li",{key:0,class:"toggle-btn",onClick:_e},h(ke.value?p(n)("common.showMore"):p(n)("common.showLess")),1)):pe("",!0)])])])):pe("",!0)])]),(H=s.value.images)!=null&&H.length?(S(),L("ul",wx,[(S(!0),L(Oe,null,He(s.value.images,(O,B)=>(S(),L("li",{key:B,class:"lora-detail__image-item"},[i("figure",null,[i("div",xx,[i("div",{class:"image-action",onClick:k=>ae(O.url)}," Lora ",8,Tx),i("img",{src:O.url},null,8,Sx)]),i("figcaption",kx,[O.civitaiUrl?(S(),L("span",Cx,[i("a",{href:O.civitaiUrl,target:"_blank",class:"civitai-link"},[...N[16]||(N[16]=[qe(" C civitai ",-1),i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})],-1)])],8,Ex)])):pe("",!0),O.seed?(S(),L("span",Lx,[N[17]||(N[17]=i("label",null," seed",-1)),qe(" "+h(O.seed),1)])):pe("",!0),O.steps?(S(),L("span",$x,[N[18]||(N[18]=i("label",null," steps",-1)),qe(" "+h(O.steps),1)])):pe("",!0),O.cfg?(S(),L("span",Ax,[N[19]||(N[19]=i("label",null," cfg",-1)),qe(" "+h(O.cfg),1)])):pe("",!0),O.sampler?(S(),L("span",Ix,[N[20]||(N[20]=i("label",null," sampler",-1)),qe(" "+h(O.sampler),1)])):pe("",!0),O.model?(S(),L("span",Mx,[N[21]||(N[21]=i("label",null," model",-1)),qe(" "+h(O.model),1)])):pe("",!0),O.positive?(S(),L("span",Ox,[N[22]||(N[22]=i("label",null," positive",-1)),qe(" "+h(O.positive),1)])):pe("",!0),O.negative?(S(),L("span",Nx,[N[23]||(N[23]=i("label",null," negative",-1)),qe(" "+h(O.negative),1)])):pe("",!0)])])]))),128))])):pe("",!0)])],512)]}),_:1},8,["title","position","size","z-index"])):pe("",!0),Ve(h7,{ref_key:"loraRawRef",ref:x},null,512)],64))}},[["__scopeId","data-v-3a570568"]]),Rx={key:0,class:"lora-detail__loading"},Dx={class:"lora-detail__body"},Px={class:"lora-detail__tags"},Fx=["title"],Bx=["title"],Ux={class:"lora-detail__table"},jx={class:"label"},Hx={colspan:"2"},Wx={class:"label"},Vx={colspan:"2",class:"hash"},zx={class:"label"},qx={colspan:"2"},Gx=["href"],Qx={key:1,class:"not-found"},Yx=["title"],Jx={class:"label"},Kx=["title"],Xx={key:1,class:"text"},Zx={class:"label"},e9={colspan:"2"},t9={class:"label"},n9={colspan:"2"},o9={class:"label"},a9=["title"],s9={class:"text"},l9={class:"actions"},r9=["onClick","title"],i9={class:"label"},u9=["onUpdate:modelValue"],c9={key:1},d9={class:"text"},f9={class:"actions"},p9=["onClick","title"],g9={key:0},m9={class:"label"},h9=["title"],v9={key:0,class:"word-selection"},_9={colspan:"2"},y9={class:"word-list"},b9=["onClick"],w9={key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},x9={key:1},T9={key:0,class:"lora-detail__images",style:{display:"grid","grid-template-columns":"repeat(2, 1fr)",gap:"12px"}},S9={class:"image-wrapper",style:{height:"200px"}},k9=["src"],cu=yt({__name:"lora_card",props:{fileNmae:{type:String,required:!0},paddingLeft:{type:Number,required:!1,default:100},paddingTop:{type:Number,required:!1,default:100}},emits:["cardLeave","cardenter"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=y(!1),s=y({}),l=y(),r=y({}),u=e,d=y(""),c=o,f=()=>{c("cardLeave")},m=()=>{c("cardenter")},g=y({}),v=y({}),_=y([]),w=[{key:"strengthMin",label:n("lora.strengthMin"),tip:n("lora.strengthMinTip"),type:"number"},{key:"strengthMax",label:n("lora.strengthMax"),tip:n("lora.strengthMaxTip"),type:"number"},{key:"strWeight",label:n("lora.strWeight"),tip:n("lora.strWeightTip"),type:"number"},{key:"loraWorks",label:n("lora.promptWords"),tip:n("lora.promptWordsTip")}];ut(()=>{x()});const x=()=>{d.value=u.fileNmae,s.value={},_.value=[],v.value={name:!1,nameValue:"",min:!1,minValue:"",max:!1,maxValue:"",notes:!1,notesValue:"",loraWorks:!1,loraWorksValue:""},kn.getLoraDetail({file:d.value,refresh:!1,light:!1}).then(te=>{s.value=te.data,Qe(function(){var ne,U,j,ue,xe,oe;s.value.name=s.value.name||((U=(ne=s.value.raw)===null||ne===void 0?void 0:ne.metadata)===null||U===void 0?void 0:U.ss_output_name===void 0?U["modelspec.title"]:U.ss_output_name)||"",v.value.nameValue=s.value.name,s.value.strengthMin=(j=s.value.strengthMin)!==null&&j!==void 0?j:"",v.value.minValue=s.value.strengthMin,s.value.strengthMax=(ue=s.value.strengthMax)!==null&&ue!==void 0?ue:"",v.value.maxValue=s.value.strengthMax,s.value.userNote=(xe=s.value.userNote)!==null&&xe!==void 0?xe:"",v.value.notesValue=s.value.userNote,s.value.loraWorks=(oe=s.value.loraWorks)!==null&&oe!==void 0?oe:"",v.value.loraWorksValue=s.value.loraWorks,r.value=s.value.user_diy_fileds,a.value=!1})}).catch(te=>{Z({type:"warn",str:"message.networkError"}),a.value=!1})},A=te=>{navigator.clipboard.writeText(te).then(()=>{Z({type:"success",str:""})}).catch(ne=>{Z({type:"error",str:""})})},W=tt(()=>{var te;return(te=s.value.links)==null?void 0:te.find(ne=>ne.includes("civitai.com/models"))}),T=tt(()=>{var te,ne;return((ne=(te=s.value.raw)==null?void 0:te.civitai)==null?void 0:ne.error)==="Model not found"}),P=tt(()=>s.value.trainedWords||[]),q=async()=>{var ne;const te=((ne=l.value)==null?void 0:ne.scrollTop)||0;a.value=!0,kn.getLoraRefresh({file:d.value}).then(U=>{s.value=U.data,Qe(function(){var j,ue,xe,oe,de;s.value.name=s.value.name||((ue=(j=s.value.raw)===null||j===void 0?void 0:j.metadata)===null||ue===void 0?void 0:ue.ss_output_name===void 0?ue["modelspec.title"]:ue.ss_output_name)||"",v.value.nameValue=s.value.name,s.value.strengthMin=(xe=s.value.strengthMin)!==null&&xe!==void 0?xe:"",v.value.minValue=s.value.strengthMin,s.value.strengthMax=(oe=s.value.strengthMax)!==null&&oe!==void 0?oe:"",v.value.maxValue=s.value.strengthMax,s.value.userNote=(de=s.value.userNote)!==null&&de!==void 0?de:"",v.value.notesValue=s.value.userNote,a.value=!1}),Qe(function(){a.value=!1}),l.value&&(l.value.scrollTop=te),Z({type:"success",str:"message.dataLoaded"})}).catch(U=>{Z({type:"warn",str:"message.networkError"}),a.value=!1})},G=te=>{te in r.value?(s.value.user_diy_fileds||(s.value.user_diy_fileds={}),s.value.user_diy_fileds[te]={label:r.value[te].label,value:v.value[te]}):s.value[te]=v.value[te],J(s.value),g.value[te]=!1},z=te=>{g.value[te]=!1,v.value[te]=s.value[te]},J=te=>{var U;const ne=((U=l.value)==null?void 0:U.scrollTop)||0;a.value=!0,kn.postLoraSave(d.value,te).then(j=>{s.value=j.data,Qe(function(){var ue,xe,oe,de,be;s.value.name=s.value.name||((xe=(ue=s.value.raw)===null||ue===void 0?void 0:ue.metadata)===null||xe===void 0?void 0:xe.ss_output_name===void 0?xe["modelspec.title"]:xe.ss_output_name)||"",v.value.nameValue=s.value.name,s.value.strengthMin=(oe=s.value.strengthMin)!==null&&oe!==void 0?oe:"",v.value.minValue=s.value.strengthMin,s.value.strengthMax=(de=s.value.strengthMax)!==null&&de!==void 0?de:"",v.value.maxValue=s.value.strengthMax,s.value.userNote=(be=s.value.userNote)!==null&&be!==void 0?be:"",v.value.notesValue=s.value.userNote,a.value=!1,Qe(function(){l.value&&(l.value.scrollTop=ne)})}),Z({type:"success",str:"message.saveSuccess"})}).catch(j=>{Z({type:"warn",str:"message.networkError"}),a.value=!1})},ve=te=>{const ne=_.value.indexOf(te);ne===-1?_.value.push(te):_.value.splice(ne,1)},ae=te=>_.value.includes(te),F=async()=>{_.value.length&&navigator.clipboard.writeText(_.value).then(te=>{Z({type:"success",str:"message.copySuccess"})},te=>{Z({type:"warn",str:"message.copyFailed"})})},K=y(!0),ee=()=>{K.value=!K.value};return t({refresh:()=>{x()}}),(te,ne)=>{var U;return S(),L("div",{class:"lora_catd_content",style:pt(["left: "+e.paddingLeft+"px;top: "+e.paddingTop+"px;",{"font-size":"0.55em"}]),onMouseenter:m,onMouseleave:f},[i("div",{class:"close-button",onClick:f,title:""},[...ne[3]||(ne[3]=[i("span",null,"",-1)])]),i("div",{class:"lora-detail__content",ref_key:"loraContent",ref:l},[a.value?(S(),L("div",Rx,[...ne[4]||(ne[4]=[i("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"is-rotating"},[i("path",{d:"M12 4V2C6.48 2 2 6.48 2 12H4C4 7.58 7.58 4 12 4Z"})],-1)])])):pe("",!0),i("div",Dx,[ne[13]||(ne[13]=i("div",{class:"lora-detail__title"},"Lora ",-1)),i("ul",Px,[s.value.type?(S(),L("li",{key:0,class:Ee(["lora-detail__tag",`-type-${s.value.type.toLowerCase()}`]),title:p(n)("lora.type")},h(s.value.type),11,Fx)):pe("",!0),s.value.baseModel?(S(),L("li",{key:1,class:Ee(["lora-detail__tag",`-basemodel-${s.value.baseModel.toLowerCase()}`]),title:p(n)("lora.baseModel")},h(s.value.baseModel),11,Bx)):pe("",!0)]),i("table",Ux,[i("tbody",null,[i("tr",null,[i("td",jx,h(p(n)("lora.file")),1),i("td",Hx,h(s.value.file),1)]),i("tr",null,[i("td",Wx,h(p(n)("lora.hash")),1),i("td",Vx,h(s.value.sha256),1)]),i("tr",null,[i("td",zx,h(p(n)("lora.civitai")),1),i("td",qx,[W.value?(S(),L(Oe,{key:0},[i("a",{href:W.value,target:"_blank",class:"civitai-link"},[ne[5]||(ne[5]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"civitai-icon"},[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"})],-1)),i("span",null,h(p(n)("lora.viewOnCivitai")),1)],8,Gx),i("button",{style:{"margin-left":"10px"},class:"refresh-btn",onClick:q},h(p(n)("lora.getCivitData")),1)],64)):T.value?(S(),L("div",Qx,[i("i",null,h(p(n)("lora.modelNotFound")),1),(S(),L("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:p(n)("lora.modelNotFoundTip")},[...ne[6]||(ne[6]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,Yx))])):(S(),L("button",{key:2,class:"fetch-btn",onClick:q},h(p(n)("lora.fetchFromCivitai")),1))])]),i("tr",{class:Ee({"is-editing":g.value.name})},[i("td",Jx,[qe(h(p(n)("lora.name"))+" ",1),(S(),L("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:p(n)("lora.nameTip")},[...ne[7]||(ne[7]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,Kx))]),i("td",null,[g.value.name?ye((S(),L("input",{key:0,"onUpdate:modelValue":ne[0]||(ne[0]=j=>v.value.name=j),type:"text",onKeyup:[ne[1]||(ne[1]=on(j=>G("name"),["enter"])),ne[2]||(ne[2]=on(j=>z("name"),["esc"]))],ref:"nameInput"},null,544)),[[Ae,v.value.name]]):(S(),L("span",Xx,h(s.value.name),1))])],2),i("tr",null,[i("td",Zx,h(p(n)("lora.baseModel")),1),i("td",e9,h(!s.value.baseModelFile&&!s.value.baseModelFile?"":(s.value.baseModel||"")+(s.value.baseModelFile?`
                                (${s.value.baseModelFile})`:"")),1)]),i("tr",null,[i("td",t9,h(p(n)("lora.skipClip")),1),i("td",n9,h((te._t=(te._s=s.value.raw)===null||te._s===void 0?void 0:te._s.metadata)===null||te._t===void 0?void 0:te._t.ss_clip_skip),1)]),(S(),L(Oe,null,He(w,j=>i("tr",{key:j.key,class:Ee({"is-editing":g.value[j.key]})},[i("td",o9,[qe(h(j.label)+" ",1),j.tip?(S(),L("svg",{key:0,viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:j.tip},[...ne[8]||(ne[8]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,a9)):pe("",!0)]),i("td",null,[i("span",s9,h(s.value[j.key]),1)]),i("td",l9,[i("button",{class:"copy-btn",onClick:ue=>A(s.value[j.key]),title:p(n)("lora.copy")},[ne[9]||(ne[9]=i("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),qe(" "+h(p(n)("lora.copy")),1)],8,r9)])],2)),64)),(S(!0),L(Oe,null,He(r.value,(j,ue)=>{var xe;return S(),L("tr",{key:ue,class:Ee({"is-editing":g.value[ue]})},[i("td",i9,[g.value[ue]?ye((S(),L("input",{key:0,"onUpdate:modelValue":oe=>j.label=oe,type:"text"},null,8,u9)),[[Ae,j.label]]):(S(),L("span",c9,h(j.label),1))]),i("td",null,[i("span",d9,h(s.value.user_diy_fileds?(xe=s.value.user_diy_fileds[ue])==null?void 0:xe.value:""),1)]),i("td",f9,[i("button",{class:"copy-btn",onClick:oe=>{var de;return A((de=s.value.user_diy_fileds[ue])==null?void 0:de.value)},title:p(n)("lora.copy")},[ne[10]||(ne[10]=i("svg",{class:"svg-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)),qe(" "+h(p(n)("lora.copy")),1)],8,p9)])],2)}),128)),P.value.length?(S(),L("tr",g9,[i("td",m9,[qe(h(p(n)("lora.trainedWords"))+" ",1),(S(),L("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"help-icon",title:p(n)("lora.trainedWordsTip")},[...ne[11]||(ne[11]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},null,-1)])],8,h9)),_.value.length?(S(),L("div",v9,[qe(h(p(n)("lora.selectedWords",{count:_.value.length}))+" ",1),i("button",{class:"copy-btn",onClick:F},h(p(n)("common.copy")),1)])):pe("",!0)]),i("td",_9,[i("ul",y9,[(S(!0),L(Oe,null,He(K.value?P.value.slice(0,10):P.value,(j,ue)=>(S(),L("li",{key:"words-"+ue,class:Ee(["word-item",{"is-selected":ae(j.word),"is-hidden":K.value&&ue>=10}]),onClick:xe=>ve(j.word)},[i("span",null,h(j.word),1),j.civitai?(S(),L("svg",w9,[...ne[12]||(ne[12]=[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H8l4-7v4h3l-4 7z"},null,-1)])])):pe("",!0),j.count!=null?(S(),L("small",x9,h(j.count),1)):pe("",!0)],10,b9))),128)),P.value.length>10?(S(),L("li",{key:0,class:"toggle-btn",onClick:ee},h(K.value?p(n)("common.showMore"):p(n)("common.showLess")),1)):pe("",!0)])])])):pe("",!0)])]),(U=s.value.images)!=null&&U.length?(S(),L("ul",T9,[(S(!0),L(Oe,null,He(s.value.images,(j,ue)=>(S(),L("li",{key:ue,class:"lora-detail__image-item"},[i("div",S9,[i("img",{src:j.url,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,k9)])]))),128))])):pe("",!0)])],512)],36)}}},[["__scopeId","data-v-d4b68239"]]),C9={class:"header-actions"},E9=["title"],L9=["onMouseover","onDragstart","onDrop"],$9={class:"lora-info"},A9={class:"lora-header"},I9=["title"],M9={class:"lora-actions"},O9=["onClick","title"],N9=["onClick","title"],R9={class:"lora-weights-row"},D9={class:"weight-item-col"},P9=["onUpdate:modelValue"],F9={class:"weight-item-col"},B9=["onUpdate:modelValue"],U9={class:"switch-item-col"},j9={class:"switch"},H9=["checked","onChange"],jo="weilin_prompt_ui_",W9=yt({__name:"lora_stack",props:{isOpen:{type:Boolean,default:!1},selectedLoras:{type:Array,default:[]}},emits:["close","update:selectedLoras"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=y(!1),s=y(""),l=y(100),r=y(0),u=y(),d=y(!1),c=y(!1),f=y(),m=e,g=o,v=(ae,F)=>{if(c.value=!0,s.value===ae&&a.value)return;const ee=F.currentTarget.getBoundingClientRect();let te={left:ee.left-450-10,top:ee.top};te.left<10&&(te.left=ee.right+10),te.top=Math.max(10,Math.min(te.top,window.innerHeight-310)),l.value=te.left,r.value=te.top,a.value=!0,s.value=ae,Qe(()=>{f.value.refresh()})},_=()=>{c.value=!1,setTimeout(()=>{!d.value&&!c.value&&(a.value=!1,s.value="",d.value=!1)},200)},w=()=>{d.value=!0,c.value=!0},x=()=>{a.value=!1,s.value="",d.value=!1},A=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora"},"*")},W=ae=>{ae.hidden=!ae.hidden},T=ae=>{m.selectedLoras&&!m.selectedLoras.find(F=>F.name===ae.name)&&(m.selectedLoras.push({name:ae.name,weight:1,text_encoder_weight:1,...ae}),g("update:selectedLoras",m.selectedLoras))},P=ae=>{const F=m.selectedLoras.findIndex(K=>K.name===ae.name);F>-1&&(m.selectedLoras.splice(F,1),g("update:selectedLoras",m.selectedLoras))},q=y(),G=ae=>{q.value.open({name:ae.lora})};window.addEventListener("message",ae=>{ae.data.type==="weilin_prompt_ui_selectLora"&&T(ae.data.lora)});const z=y(null),J=ae=>{z.value=ae},ve=ae=>{if(z.value===null||z.value===ae)return;const F=m.selectedLoras.splice(z.value,1)[0];m.selectedLoras.splice(ae,0,F),z.value=null,g("update:selectedLoras",m.selectedLoras)};return t({addLora:T,removeLora:P}),(ae,F)=>(S(),L("div",{class:Ee(`${jo}lora-stack`),style:pt([{width:e.isOpen?"300px":"0"},{paddingRight:e.isOpen?"16px":"0"}])},[i("div",{class:Ee(`${jo}lora-content`)},[i("div",{class:Ee(`${jo}lora-header`)},[i("h3",{class:Ee(`${jo}lora-title`)},h(p(n)("controls.loraStack")),3),i("div",C9,[i("button",{class:Ee(`${jo}add-btn`),onClick:A,title:p(n)("controls.addLora")},[...F[2]||(F[2]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])],10,E9),i("button",{class:Ee(`${jo}close-btn`),onClick:F[0]||(F[0]=K=>ae.$emit("close"))},[...F[3]||(F[3]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],2)])],2),i("div",{class:Ee(`${jo}lora-body`)},[i("div",{class:Ee(`${jo}lora-list`)},[(S(!0),L(Oe,null,He(e.selectedLoras,(K,ee)=>(S(),L("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:u,key:K.name,class:Ee(["lora-item",{"hidden-lora":K.hidden}]),onMouseover:Q=>v(K.lora,Q),onMouseleave:_,draggable:"true",onDragstart:Q=>J(ee),onDragover:F[1]||(F[1]=Ke(()=>{},["prevent"])),onDrop:Q=>ve(ee)},[i("div",$9,[i("div",A9,[i("span",{class:"lora-name",title:K.name},h(K.name),9,I9),i("div",M9,[i("button",{class:"look-on-btn",onClick:Q=>G(K),title:p(n)("controls.lookOnLora")},[...F[4]||(F[4]=[i("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[i("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),i("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),i("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),i("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)])],8,O9),i("button",{class:"remove-btn",onClick:Q=>P(K),title:p(n)("controls.removeLora")},[...F[5]||(F[5]=[i("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],8,N9)])]),i("div",R9,[i("div",D9,[i("label",null,h(p(n)("loraManager.modelWeight")),1),ye(i("input",{type:"number","onUpdate:modelValue":Q=>K.weight=Q,class:"lora-weight",step:"0.1"},null,8,P9),[[Ae,K.weight]])]),i("div",F9,[i("label",null,h(p(n)("loraManager.textEncoderWeight")),1),ye(i("input",{type:"number","onUpdate:modelValue":Q=>K.text_encoder_weight=Q,class:"lora-weight",step:"0.1"},null,8,B9),[[Ae,K.text_encoder_weight]])]),i("div",U9,[i("label",null,h(K.hidden?p(n)("lora.hideLora"):p(n)("lora.showLora")),1),i("label",j9,[i("input",{type:"checkbox",checked:!K.hidden,onChange:Q=>W(K)},null,40,H9),F[6]||(F[6]=i("span",{class:"slider"},null,-1))])])])])],42,L9))),128))],2)],2)],2),Ve(nr,{ref_key:"loraDetailLoraStackRef",ref:q},null,512),a.value?(S(),wt(cu,{key:0,ref_key:"loraCardItem",ref:f,fileNmae:s.value,paddingLeft:l.value,paddingTop:r.value,onCardLeave:x,onCardenter:w},null,8,["fileNmae","paddingLeft","paddingTop"])):pe("",!0)],6))}},[["__scopeId","data-v-19f5b628"]]),V9={class:"main-label-manager"},z9={class:"mlm-header"},q9={class:"mlm-grid"},G9=["disabled"],Q9=["disabled"],Y9=["onClick","title","onDragstart","onDragenter","onDrop"],J9={class:"mlm-item-main"},K9={key:0,class:"pin-badge"},X9={class:"mlm-name"},Z9={class:"mlm-item-actions"},eT=["title","onClick"],tT=["title","onClick"],Qg="/weilin/prompt_ui/api/",du="weilin_prompt_ui_main_labels_v1",nT=yt({__name:"main_label_manager",props:{selectedId:{type:String,default:null}},emits:["select"],setup(e,{expose:t,emit:o}){const n=e,a=o,s=y(null),l=y(""),r=y([]),u=y(n.selectedId),d=y(!0),c=y(!0),f=y("time"),m=y(null),g=y(null),v=y(!1);async function _(){const I={items:r.value,settings:{sortMode:f.value,sortTimeDesc:d.value,sortNameAsc:c.value,selectedId:u.value}};try{await Dt.post(Qg+"labels/save",I)}catch(N){console.error(":",N),alert(": "+N.message)}}async function w(){var I;try{const H=(I=(await Dt.get(Qg+"labels/get")).data)==null?void 0:I.data;if(!H)throw new Error("no data");const O=Array.isArray(H)?H:(H==null?void 0:H.items)??[],B=Array.isArray(H)?{}:(H==null?void 0:H.settings)??{};r.value=O.map((k,E)=>({id:k.id??T(),name:k.name??"",content:k.content??"",createdAt:k.createdAt??k.updatedAt??Date.now(),updatedAt:k.updatedAt??k.createdAt??Date.now(),pinned:!!k.pinned,highlighted:!!k.highlighted,order:typeof k.order=="number"?k.order:E})),B.sortMode&&(f.value=B.sortMode),typeof B.sortTimeDesc=="boolean"&&(d.value=B.sortTimeDesc),typeof B.sortNameAsc=="boolean"&&(c.value=B.sortNameAsc),(typeof B.selectedId=="string"||B.selectedId===null)&&(u.value=B.selectedId)}catch(N){console.error(":",N),r.value=[]}}ut(()=>{var I;if(w(),oe(),r.value.length===0){const N=T();r.value.push({id:N,name:"",content:"",createdAt:Date.now(),updatedAt:Date.now(),pinned:!1,highlighted:!1,order:0}),_(),u.value=N;return}if(!P(u.value))u.value=((I=r.value[0])==null?void 0:I.id)??null;else{const N=P(u.value);a("select",N?{...N}:null)}}),et(()=>n.selectedId,I=>{u.value=I}),et([f,d,c],()=>{_()}),et(r,()=>{_()},{deep:!0}),et(u,I=>{_();const N=I?P(I):null;a("select",N?{...N}:null)});const x=tt(()=>{const I=l.value.trim().toLowerCase();return I?r.value.filter(N=>(N.name||"").toLowerCase().includes(I)):r.value}),A=tt(()=>{const I=[...x.value];if(f.value==="manual")return I.sort((B,k)=>{const E=B.order??0,D=k.order??0;return E!==D?E-D:(B.createdAt??0)-(k.createdAt??0)});const N=(B,k)=>{const E=B.name||"",D=k.name||"";let Y=E.localeCompare(D,void 0,{numeric:!0,sensitivity:"base"});return c.value||(Y=-Y),Y},H=(B,k)=>{let E=B.createdAt-k.createdAt;return d.value&&(E=-E),E},O=B=>B.pinned?0:1;return I.sort((B,k)=>{const E=O(B)-O(k);if(E!==0)return E;if(f.value==="name"){const Y=N(B,k);return Y!==0?Y:H(B,k)}const D=H(B,k);return D!==0?D:N(B,k)}),I}),W=tt(()=>P(u.value));function T(){return"mlm_"+Math.random().toString(36).slice(2)+"_"+Date.now()}function P(I){return r.value.find(N=>N.id===I)||null}function q(I){u.value=I.id,a("select",{...I})}function G(){const I=window.prompt("","");if(!I)return;ne(),f.value="manual";const N=T(),H=Date.now(),O=r.value.reduce((k,E)=>typeof E.order=="number"?Math.min(k,E.order):k,0),B={id:N,name:I.trim(),content:"",createdAt:H,updatedAt:H,pinned:!1,highlighted:!1,order:O-1};r.value.push(B),_(),u.value=N,a("select",{...B})}function z(){const I=W.value;if(!I)return;const N=window.prompt("",I.name||"");N&&(I.name=N.trim(),I.updatedAt=Date.now(),_())}function J(){const I=W.value;if(!I||!window.confirm(`"${I.name}"`))return;const N=r.value.findIndex(H=>H.id===I.id);N>=0&&r.value.splice(N,1),_(),r.value.length?(u.value=r.value[0].id,a("select",{...r.value[0]})):(u.value=null,a("select",null))}function ve(){f.value="time",d.value=!d.value}function ae(){f.value="name",c.value=!c.value}function F(I){I.pinned=!I.pinned,I.updatedAt=Date.now(),_()}function K(I){I.highlighted=!I.highlighted,I.updatedAt=Date.now(),_()}function ee(I){const N=W.value;N&&(N.content=I??"",N.updatedAt=Date.now(),clearTimeout(Q),Q=setTimeout(()=>_(),400))}let Q=null;function te(I){try{const N=new Date(I);return`${N.getFullYear()}-${(N.getMonth()+1).toString().padStart(2,"0")}-${N.getDate().toString().padStart(2,"0")} ${N.getHours().toString().padStart(2,"0")}:${N.getMinutes().toString().padStart(2,"0")}`}catch{return""}}function ne(){A.value.forEach((N,H)=>{N.order=H})}function U(I,N,H){try{H.dataTransfer.effectAllowed="move"}catch{}m.value=I.id,g.value=null,ne(),f.value="manual"}function j(I){m.value&&(g.value=I.id)}function ue(I){if(!m.value)return;const N=m.value,H=I==null?void 0:I.id;if(!H||N===H)return xe();const O=[...A.value],B=O.findIndex(D=>D.id===N),k=O.findIndex(D=>D.id===H);if(B<0||k<0)return xe();const[E]=O.splice(B,1);O.splice(k,0,E),O.forEach((D,Y)=>{D.order=Y}),_(),xe()}function xe(){m.value=null,g.value=null}function oe(){try{const I=localStorage.getItem(du);v.value=!!I&&I!=="null"&&I!=="undefined"}catch{v.value=!1}}async function de(){try{const I=localStorage.getItem(du);if(!I){alert("");return}const N=JSON.parse(I),H=Array.isArray(N)?N:(N==null?void 0:N.items)??[],O=Array.isArray(N)?{}:(N==null?void 0:N.settings)??{};if(!Array.isArray(H)||H.length===0){alert("");return}if(!window.confirm(` ${H.length} 

""


`))return;const k=new Set(r.value.map(Y=>Y.id)),E=r.value.reduce((Y,ie)=>Math.max(Y,typeof ie.order=="number"?ie.order:Y),-1);let D=0;H.forEach((Y,ie)=>{let re=Y.id;k.has(re)&&(re=T()),k.add(re),r.value.push({id:re,name:Y.name??"",content:Y.content??"",createdAt:Y.createdAt??Y.updatedAt??Date.now(),updatedAt:Y.updatedAt??Y.createdAt??Date.now(),pinned:!!Y.pinned,highlighted:!!Y.highlighted,order:(typeof Y.order=="number",E+1+ie)}),D++}),!f.value&&O.sortMode&&(f.value=O.sortMode),typeof d.value>"u"&&typeof O.sortTimeDesc=="boolean"&&(d.value=O.sortTimeDesc),typeof c.value>"u"&&typeof O.sortNameAsc=="boolean"&&(c.value=O.sortNameAsc),await _(),localStorage.removeItem(du),v.value=!1,alert(`

 ${D} 
 ${r.value.length} 

`)}catch(I){console.error(":",I),alert(": "+I.message)}}function be(){try{const I={items:r.value,settings:{sortMode:f.value,sortTimeDesc:d.value,sortNameAsc:c.value,selectedId:u.value},exportTime:new Date().toISOString(),version:"v1"},N=JSON.stringify(I,null,2),H=new Blob([N],{type:"application/json"}),O=URL.createObjectURL(H),B=document.createElement("a");B.href=O;const k=new Date,E=k.getFullYear()+(k.getMonth()+1).toString().padStart(2,"0")+k.getDate().toString().padStart(2,"0"),D=k.getHours().toString().padStart(2,"0")+k.getMinutes().toString().padStart(2,"0")+k.getSeconds().toString().padStart(2,"0");B.download=`weilin_prompt_labels_${E}_${D}.json`,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(O),alert(` ${r.value.length} `)}catch(I){console.error(":",I),alert(": "+I.message)}}function ke(){var I;(I=s.value)==null||I.click()}async function _e(I){var O;const N=(O=I.target.files)==null?void 0:O[0];if(!N)return;const H=new FileReader;H.onload=async B=>{var k,E;try{const D=(k=B.target)==null?void 0:k.result;if(typeof D!="string")throw new Error("");const Y=JSON.parse(D);if(!Y||typeof Y!="object")throw new Error("JSON");const ie=Array.isArray(Y)?Y:(Y==null?void 0:Y.items)??[],re=Array.isArray(Y)?{}:(Y==null?void 0:Y.settings)??{};if(!Array.isArray(ie))throw new Error("items");const C=window.confirm(` ${ie.length} 

""
""`)?"replace":"merge";if(C==="replace"){r.value=ie.map((R,V)=>({id:R.id??T(),name:R.name??"",content:R.content??"",createdAt:R.createdAt??R.updatedAt??Date.now(),updatedAt:R.updatedAt??R.createdAt??Date.now(),pinned:!!R.pinned,highlighted:!!R.highlighted,order:typeof R.order=="number"?R.order:V})),re.sortMode&&(f.value=re.sortMode),typeof re.sortTimeDesc=="boolean"&&(d.value=re.sortTimeDesc),typeof re.sortNameAsc=="boolean"&&(c.value=re.sortNameAsc);const b=re.selectedId&&r.value.find(R=>R.id===re.selectedId)?re.selectedId:((E=r.value[0])==null?void 0:E.id)??null;u.value=b}else{const b=new Set(r.value.map(me=>me.id)),R=r.value.reduce((me,fe)=>Math.max(me,typeof fe.order=="number"?fe.order:me),-1);let V=0;ie.forEach((me,fe)=>{let X=me.id;b.has(X)&&(X=T()),b.add(X),r.value.push({id:X,name:me.name??"",content:me.content??"",createdAt:me.createdAt??me.updatedAt??Date.now(),updatedAt:me.updatedAt??me.createdAt??Date.now(),pinned:!!me.pinned,highlighted:!!me.highlighted,order:(typeof me.order=="number",R+1+fe)}),V++}),alert(` ${V}  ${r.value.length} `)}await _(),C==="replace"&&alert(` ${r.value.length} `)}catch(D){console.error(":",D),alert(": "+D.message)}finally{s.value&&(s.value.value="")}},H.onerror=()=>{alert(""),s.value&&(s.value.value="")},H.readAsText(N)}return t({updateSelectedContent:ee}),(I,N)=>(S(),L("div",V9,[i("div",z9,[ye(i("input",{"onUpdate:modelValue":N[0]||(N[0]=H=>l.value=H),class:"mlm-search",type:"text",placeholder:""},null,512),[[Ae,l.value]]),i("button",{class:"mlm-add",onClick:G},"+ "),v.value?(S(),L("button",{key:0,class:"mlm-migrate",onClick:de,title:""},"   ")):pe("",!0),i("div",{class:"mlm-io-grid"},[i("button",{class:"mlm-export",onClick:be,title:"JSON"},""),i("button",{class:"mlm-import",onClick:ke,title:"JSON"},"")]),i("input",{ref_key:"fileInput",ref:s,type:"file",accept:".json",style:{display:"none"},onChange:_e},null,544),i("div",q9,[i("button",{class:"mlm-sort",onClick:ve},"  "+h(d.value?"":""),1),i("button",{class:"mlm-sort",onClick:ae},"  "+h(c.value?"AZ":"ZA"),1),i("button",{class:"mlm-edit",disabled:!W.value,onClick:z},"",8,G9),i("button",{class:"mlm-delete",disabled:!W.value,onClick:J},"",8,Q9)])]),Ve(zv,{name:"mlm",tag:"div",class:"mlm-list"},{default:it(()=>[(S(!0),L(Oe,null,He(A.value,(H,O)=>(S(),L("div",{key:H.id,class:Ee(["mlm-item",{active:H.id===u.value,pinned:!!H.pinned,highlighted:!!H.highlighted},{dragging:m.value===H.id,"drag-over":g.value===H.id}]),onClick:B=>q(H),title:H.updatedAt?te(H.updatedAt):"",draggable:"true",onDragstart:B=>U(H,O,B),onDragenter:Ke(B=>j(H),["prevent"]),onDragover:N[1]||(N[1]=Ke(()=>{},["prevent"])),onDrop:Ke(B=>ue(H),["prevent"]),onDragend:xe},[i("div",J9,[H.pinned?(S(),L("span",K9,"")):pe("",!0),i("span",X9,h(H.name),1)]),i("div",Z9,[i("button",{class:Ee(["mini-btn","pin",{active:H.pinned}]),title:H.pinned?"":"",onClick:Ke(B=>F(H),["stop"])},[...N[2]||(N[2]=[i("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[i("path",{d:"M4 14h4v6h8v-6h4L12 4 4 14z"})],-1)])],10,eT),i("button",{class:Ee(["mini-btn","highlight",{active:H.highlighted}]),title:H.highlighted?"":"",onClick:Ke(B=>K(H),["stop"])},[...N[3]||(N[3]=[i("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},[i("path",{d:"M12 17.27L18.18 21 16.54 13.97 22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})],-1)])],10,tT)])],42,Y9))),128))]),_:1})]))}},[["__scopeId","data-v-159c8913"]]);function Yg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var or={exports:{}},oT=or.exports,Jg;function aT(){return Jg||(Jg=1,(function(e){if(typeof t=="object"&&typeof t.version=="string")throw new Error("translate.js  translate.js ");var t={version:"3.18.0.20250816",useVersion:"v2",setUseVersion2:function(){t.useVersion="v2",console.log(" v2.10 V2:"+t.version+" translate.setUseVersion2() ")},translate:null,includedLanguages:"zh-CN,zh-TW,en",resourcesUrl:"//res.zvo.cn/translate",selectLanguageTag:{documentId:"translate",show:!0,languages:"",alreadyRender:!1,selectOnChange:function(n){var a=n.target.value;t.changeLanguage(a)},refreshRender:function(){let n=document.getElementById(t.selectLanguageTag.documentId+"SelectLanguage");n&&n.parentNode.removeChild(n),t.selectLanguageTag.alreadyRender=!1,t.selectLanguageTag.render()},customUI:function(n){var a=function(c){t.selectLanguageTag.selectOnChange(c)},s=document.createElement("select");s.id=t.selectLanguageTag.documentId+"SelectLanguage",s.className=t.selectLanguageTag.documentId+"SelectLanguage";for(var l=t.language.getCurrent(),r=0;r<n.length;r++){var u=document.createElement("option");if(u.setAttribute("value",n[r].id),t.selectLanguageTag.languages.length>0){var d=(","+t.selectLanguageTag.languages+",").toLowerCase();if(d.indexOf(","+n[r].id.toLowerCase()+",")<0)continue}l!=null&&typeof l<"u"&&l.length>0?l==n[r].id&&u.setAttribute("selected","selected"):n[r].id==t.language.getLocal()&&u.setAttribute("selected","selected"),u.appendChild(document.createTextNode(n[r].name)),s.appendChild(u)}window.addEventListener?s.addEventListener("change",a,!1):s.attachEvent("onchange",a),document.getElementById(t.selectLanguageTag.documentId).appendChild(s)},render:function(){if(!t.selectLanguageTag.alreadyRender&&(t.selectLanguageTag.alreadyRender=!0,!!t.selectLanguageTag.show)){if(document.getElementById(t.selectLanguageTag.documentId)==null){var n=document.getElementsByTagName("body");if(n.length==0){console.log("body tag not find, translate.selectLanguageTag.render() is not show Select Language");return}var a=n[0],s=document.createElement("div");s.id=t.selectLanguageTag.documentId,a.appendChild(s)}else if(document.getElementById(t.selectLanguageTag.documentId+"SelectLanguage")!=null)return;typeof t.request.api.language=="string"&&t.request.api.language.length>0?t.request.post(t.request.api.language,{},function(l){if(l.result==0){console.log("load language list error : "+l.info);return}t.selectLanguageTag.customUI(l.list)},null):typeof t.request.api.language=="object"&&t.selectLanguageTag.customUI(t.request.api.language)}}},localLanguage:"zh-CN",googleTranslateElementInit:function(){var n="";document.getElementById("translate")!=null&&(n="translate"),t.translate=new google.translate.TranslateElement({pageLanguage:"zh-CN",includedLanguages:t.selectLanguageTag.languages,layout:0},n)},execute_v1:function(){console.log("=====ERROR======"),console.log("The v1 version has been discontinued since 2022. Please use the latest V3 version and refer to: http://translate.zvo.cn/41162.html")},setCookie:function(n,a){var s=n+"="+escape(a);document.cookie=s},getCookie:function(n){for(var a=document.cookie,s=a.split("; "),l=0;l<s.length;l++){var r=s[l].split("=");if(r[0]==n)return unescape(r[1])}return""},currentLanguage:function(){var n=t.getCookie("googtrans");return n.length>0?n.substr(n.lastIndexOf("/")+1,n.length-1):t.localLanguage},changeLanguage:function(n){var a=",en,de,hi,lt,hr,lv,ht,hu,zh-CN,hy,uk,mg,id,ur,mk,ml,mn,af,mr,uz,ms,el,mt,is,it,my,es,et,eu,ar,pt-PT,ja,ne,az,fa,ro,nl,en-GB,no,be,fi,ru,bg,fr,bs,sd,se,si,sk,sl,ga,sn,so,gd,ca,sq,sr,kk,st,km,kn,sv,ko,sw,gl,zh-TW,pt-BR,co,ta,gu,ky,cs,pa,te,tg,th,la,cy,pl,da,tr,";if(a.indexOf(","+n+",")>-1){console.log("v1v12021v2 http://translate.zvo.cn/41549.html"),t.check();var s="/"+t.localLanguage+"/"+n,l=document.location.host.split(".");if(l.length>2){var r=l[l.length-2]+"."+l[l.length-1];document.cookie="googtrans=;expires="+new Date(1)+";domain="+r+";path=/",document.cookie="googtrans="+s+";domain="+r+";path=/"}t.setCookie("googtrans",""+s),t.refreshCurrentPage();return}if(t.useVersion="v2",t.to!=null&&t.to.length>0&&t.to!=t.language.getLocal())var u=!0;t.to=n,t.storage.set("to",n);try{window.self!==window.top&&typeof window.parent.translate=="object"&&typeof window.parent.translate.version=="string"&&window.parent.translate.language.getCurrent()!=n&&window.parent.translate.changeLanguage(n)}catch(d){console.log(d)}if(u)location.reload();else{t.execute();const d=document.querySelectorAll("iframe");for(let c=0;c<d.length;c++){const m=d[c].contentWindow;try{typeof m.translate=="object"&&typeof m.translate.version=="string"&&m.translate.to!=n&&(m.translate.to=n,m.translate.storage.set("to",n),m.translate.execute())}catch(g){console.log(g)}}}t.listener.use==!0&&t.listener.isStart==!1&&typeof t.listener.start<"u"&&t.listener.start()},check:function(){window.location.protocol=="file:"&&console.log(`\r
---WARNING----\r
translate.js filehttphttps\r
------------`)},to:"",autoDiscriminateLocalLanguage:!1,documents:[],inProgressNodes:[],ignore:{tag:["style","script","link","pre","code"],class:["ignore","translateSelectLanguage"],id:[],isIgnore:function(n){if(n==null||typeof n>"u")return!1;for(var a=n,s=100;s-- >0;){if(a==null||typeof a>"u")return!1;var l=t.element.getNodeName(a).toLowerCase();if(l.length>0){if(l=="body"||l=="html"||l=="#document")return!1;if(t.ignore.tag.indexOf(l)>-1)return!0}if(a.className!=null){var r=a.className;if(r==null||typeof r!="string")continue;r=r.trim().split(" ");for(var u=0;u<r.length;u++)if(r[u]!=null&&r[u].trim().length>0&&t.ignore.class.indexOf(r[u])>-1)return!0}if(a.id!=null&&typeof a.id<"u"&&t.ignore.id.indexOf(a.id)>-1)return!0;a=a.parentNode}return!1},text:[],textRegex:[],setTextRegexs:function(n){if(!Array.isArray(n))throw new Error("");for(let a=0;a<n.length;a++)if(!(n[a]instanceof RegExp))throw new Error(""+a+"RegExp");this.textRegex=this.textRegex.concat(n)}},refreshCurrentPage:function(){location.reload()},nomenclature:{data:new Array,old_Data:[],set:function(n){alert(" translate.nomenclature.set  append https://github.com/xnx3/translate ")},append:function(n,a,s){typeof t.nomenclature.data[n]>"u"&&(t.nomenclature.data[n]=new Array),typeof t.nomenclature.data[n][a]>"u"&&(t.nomenclature.data[n][a]=new Array);for(var l=s.split(`
`),r=0;r<l.length;r++){var u=l[r].trim();if(!(u.length<1)){var d=u.split("=");if(d.length==2){var c=d[0].trim(),f=d[1].trim();c.length==0||f.length==0||(t.nomenclature.data[n][a][c]=f)}}}t.nomenclature.data[n][a]=t.util.objSort(t.nomenclature.data[n][a])},get:function(){return t.nomenclature.data},dispose:function(n){if(n==null||n.length==0||typeof t.nomenclature.data[t.language.getLocal()]>"u"||typeof t.nomenclature.data[t.language.getLocal()][t.to]>"u")return n;for(var a in t.nomenclature.data[t.language.getLocal()][t.to])if(t.nomenclature.data[t.language.getLocal()][t.to].hasOwnProperty(a)){var s=t.nomenclature.data[t.language.getLocal()][t.to][a];if(typeof s!="function"){var l=n.indexOf(a);if(l>-1)if(t.language.getLocal()=="english"){var r="";if(l!=0){r=n.substr(l-1,1);var u=t.language.getCharLanguage(r);if(u=="english"||u=="romance")continue}var d="";if(l+a.length!=n.length){d=n.substr(l+a.length,1);var u=t.language.getCharLanguage(d);if(u=="english"||u=="romance")continue}n=n.replace(new RegExp(r+a+d,"g"),r+s+d)}else n=n.replace(new RegExp(a,"g"),s)}}return n}},office:{export:function(){if(t.language.getLocal()==t.language.getCurrent()){alert("");return}var n="";for(var a in t.nodeQueue)if(t.nodeQueue.hasOwnProperty(a)){t.nodeQueue[a];for(var s in t.nodeQueue[a].list)if(t.nodeQueue[a].list.hasOwnProperty(s)&&!(typeof s!="string"||s.length<1))for(var l in t.nodeQueue[a].list[s])t.nodeQueue[a].list[s].hasOwnProperty(l)&&(n=n+`
`+t.nodeQueue[a].list[s][l].original+"="+t.storage.get("hash_"+t.language.getCurrent()+"_"+l))}n.length>0?(n="translate.office.append('"+t.language.getCurrent()+"',`"+n+"\n`);",t.util.loadMsgJs(),msg.popups({text:'<textarea id="msgPopupsTextarea" style="width:100%; height:100%; color: black; padding: 8px;">loaing...</textarea>',width:"750px",height:"600px",padding:"1px"}),document.getElementById("msgPopupsTextarea").value=n):msg.alert("")},showPanel:function(){let n=document.createElement("div");n.setAttribute("id","translate_export"),n.setAttribute("class","ignore");let a=document.createElement("button");a.onclick=function(){t.office.export()},a.innerHTML="",a.setAttribute("style","margin-left: 72px; margin-top: 30px; margin-bottom: 20px; font-size: 25px; background-color: blue; padding: 15px; padding-top: 3px; padding-bottom: 3px; border-radius: 3px;"),n.appendChild(a);let s=document.createElement("div");s.innerHTML='1. <br/>2. <br/>3. <br/><a href="asd" target="_black" style="color: aliceblue;"></a>',s.setAttribute("style","font-size: 14px; padding: 12px;"),n.appendChild(s),n.setAttribute("style","background-color: black; color: #fff; width: 320px; height: 206px; position: fixed; bottom: 50px; right: 50px;"),document.body.appendChild(n),t.util.loadMsgJs()},append:function(n,a){for(var s=a.split(`
`),l=0;l<s.length;l++){var r=s[l].trim();if(!(r.length<1)){var u=r.split("=");if(u.length==2){var d=u[0],c=u[1];d.length==0||c.length==0||t.storage.set("hash_"+n+"_"+t.util.hash(d),c)}}}},fullExtract:{set:async function(n,a,s,l){if(typeof t.storage.IndexedDB>"u"){console.log("ERROR: translate.storage.IndexedDB not find");return}var r=await t.storage.IndexedDB.get("hash_"+n);typeof r>"u"&&r==null&&(r={originalText:a}),r[s]=l,await t.storage.IndexedDB.set("hash_"+n,r)},export:async function(n){if(typeof t.storage.IndexedDB>"u"){console.log("ERROR: translate.storage.IndexedDB not find");return}if(typeof n!="string"){console.log('error : to param not find, example: "english"');return}var a="translate.office.append('",s=await t.storage.IndexedDB.list("hash_*");for(var l in s)if(s.hasOwnProperty(l)){var r=s[l].value.originalText.replace(/\n/g,"\\n").replace(/\t/g,"\\t");a=a+`
`+r+"="+s[l].value.english.replace(/\n/g,"\\n").replace(/\t/g,"\\t")}a=a+"\n`);";const u=new Blob([a],{type:"text/plain"}),d=URL.createObjectURL(u),c=document.createElement("a");c.href=d,c.download=n+".txt",c.click(),URL.revokeObjectURL(d)},isUse:!1}},setAutoDiscriminateLocalLanguage:function(){t.autoDiscriminateLocalLanguage=!0},nodeQueue:{},setDocuments:function(n){n==null||typeof n>"u"||(typeof n.length>"u"?t.documents[0]=n:t.documents=n,t.nodeQueue={})},getDocuments:function(){if(t.documents!=null&&typeof t.documents<"u"&&t.documents.length>0)return t.documents;var n=new Array;return n[0]=document.documentElement,n},listener:{isStart:!1,use:!1,start:function(){t.listener.use=!0,t.temp_linstenerStartInterval=setInterval(function(){if(document.readyState=="complete"){if(clearInterval(t.temp_linstenerStartInterval),t.language.getCurrent()==t.language.getLocal()&&!t.language.translateLocal)return;t.listener.addListener()}},300)},ignoreNode:[],translateExecuteNodeIgnoreExpireTime:1e3,addIgnore:function(n,a,s){let l="";typeof n=="string"?l=n:l=o.uuid(n),t.listener.ignoreNode[l]={addtime:Date.now()+a,text:s}},refreshIgnoreNode:function(){var n=Date.now();for(const a in t.listener.ignoreNode)t.listener.ignoreNode[a].addtime<n&&delete t.listener.ignoreNode[a]},addListener:function(){if(t.listener.isStart==!0){console.log("translate.listener.start() ");return}t.listener.isStart=!0,t.listener.config={attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},t.listener.callback=function(l,r){var u=[];for(let v of l){let _=[];v.type==="childList"?v.addedNodes.length>0?_=v.addedNodes:v.removedNodes.length>0:v.type==="attributes"||v.type==="characterData"&&(_=[v.target]);for(let w of _){for(var d=!1,c=0;c<u.length;c++)if(u[c].isSameNode(w)){d=!0;break}if(d)break;u.push.apply(u,[w])}}if(u.length>0){var f=[];for(let v of u){for(var m=!1,g=0;g<t.inProgressNodes.length;g++)if(t.inProgressNodes[g].node.isSameNode(v)){m=!0;break}if(m)continue;let _=o.uuid(v);typeof t.listener.ignoreNode[_]<"u"&&t.listener.ignoreNode[_].addtime>Date.now()&&typeof v.nodeValue=="string"&&v.nodeValue==t.listener.ignoreNode[_].text||f.push(v)}if(f.length<1)return;t.execute(f)}},t.listener.observer=new MutationObserver(t.listener.callback);for(var n=t.getDocuments(),a=0;a<n.length;a++){var s=n[a];s!=null&&t.listener.observer.observe(s,t.listener.config)}},renderTaskFinish:function(n){},execute:{renderStartByApi:[],renderStartByApiRun:function(n,a,s){for(var l=0;l<t.listener.execute.renderStartByApi.length;l++)try{t.listener.execute.renderStartByApi[l](n,a,s)}catch(r){console.log(r)}},renderFinishByApi:[],renderFinishByApiRun:function(n,a,s){for(var l=0;l<t.listener.execute.renderFinishByApi.length;l++)try{t.listener.execute.renderFinishByApi[l](n,a,s)}catch(r){console.log(r)}}}},renderTask:class{constructor(){this.taskQueue=[],this.nodes=[]}add(n,a,s,l){var r=t.element.nodeAnalyse.get(n,l),u=t.util.hash(r.text);typeof this.nodes[u]>"u"&&(this.nodes[u]=new Array),this.nodes[u].push(n);var d=this.taskQueue[u];(d==null||typeof d>"u")&&(d=new Array);var c=new Array;a.substr(0,1)==" "&&s.substr(0,1)!=" "&&(s=" "+s),a.substr(a.length-1,1)===" "&&s.substr(0,1)!=" "&&(s=s+" "),c.originalText=a,c.resultText=s,c.attribute=l,d.push(c),this.taskQueue[u]=d}execute(){for(var n in this.taskQueue)if(this.taskQueue.hasOwnProperty(n)){var a=this.taskQueue[n];typeof a!="function"&&(a.sort((f,m)=>m.originalText.length-f.originalText.length),this.taskQueue[n]=a)}t.listener.refreshIgnoreNode();for(var n in this.nodes)if(this.nodes.hasOwnProperty(n))for(var a=this.taskQueue[n],s=0;s<this.nodes[n].length;s++)for(var l=0;l<a.length;l++){var r=a[l];if(typeof a!="function"){var u=this.nodes[n][l];setTimeout(function(g){for(var v=0;v<t.inProgressNodes.length;v++)if(t.inProgressNodes[v].node.isSameNode(g)){t.inProgressNodes[v].number=t.inProgressNodes[v].number-1,t.inProgressNodes[v].number<1&&t.inProgressNodes.splice(v,1);break}},50,u);var d=t.element.nodeAnalyse.set(this.nodes[n][l],r.originalText,r.resultText,r.attribute);t.listener.addIgnore(this.nodes[n][l],t.listener.translateExecuteNodeIgnoreExpireTime,d.resultText)}}if(typeof this.taskQueue<"u"&&Object.keys(this.taskQueue).length>0){var c=this;setTimeout(function(){for(var f in c.nodes)if(c.nodes.hasOwnProperty(f)){for(var m in c.nodes[f])if(c.nodes[f].hasOwnProperty(m)){var g=t.element.nodeAnalyse.get(c.nodes[f][m]),v=o.uuid(g.node);v.length!=0&&(t.nodeHistory[v]={},t.nodeHistory[v].node=g.node,t.whole.isWhole(g.node)?t.nodeHistory[v].translateText=c.taskQueue[f][m].resultText:t.nodeHistory[v].translateText=g.text)}}t.listener.renderTaskFinish(c)},50)}}},state:0,waitingExecute:{use:!0,queue:[],add:function(n){t.waitingExecute.queue.push(n);let a=setInterval(function(){if(t.state==0){clearInterval(a);var s=t.waitingExecute.get();t.execute(s)}},500)},get:function(){return t.waitingExecute.queue.length>0?t.waitingExecute.queue.shift():(console.log(" translate.waitingExecute.get quque"),null)},isAllExecuteFinish:function(n,a,s){t.listener.execute.renderFinishByApiRun(n,a,s);for(var l in t.translateRequest[n])if(t.translateRequest[n].hasOwnProperty(l)){for(var r=0;r<t.translateRequest[n][l].length;r++)if(t.translateRequest[n][l][r].executeFinish==0)return}t.lifecycle.execute.renderFinish_Trigger(n,s),t.state=0,t.executeNumber++}},executeNumber:0,lifecycle:{execute:{start:[],start_Trigger:function(n,a){for(var s=0;s<t.lifecycle.execute.start.length;s++)try{t.lifecycle.execute.start[s](n,a)}catch(l){console.log(l)}},start_old:[],startRun:function(n,a,s){for(var l=0;l<t.listener.execute.renderStartByApi.length;l++)try{t.listener.execute.renderStartByApi[l](n,a,s)}catch(r){console.log(r)}},scanNodesFinsh:[],translateNetworkBefore:[],translateNetworkBefore_Trigger:function(n,a,s,l){for(var r=0;r<t.lifecycle.execute.translateNetworkBefore.length;r++)try{t.lifecycle.execute.translateNetworkBefore[r](n,a,s,l)}catch(u){console.log(u)}},translateNetworkAfter:[],renderFinish:[function(n,a){typeof t.visual<"u"&&t.visual.adjustTranslationSpacesByNodequeueUuid(n)}],renderFinish_Trigger:function(n,a){for(var s=0;s<t.lifecycle.execute.renderFinish.length;s++)try{t.lifecycle.execute.renderFinish[s](n,a)}catch(l){console.log(l)}}}},execute:function(n){if(t.waitingExecute.use&&t.state!=0){console.log(""),t.waitingExecute.add(n);return}t.state=1,typeof n<"u"&&(t.useVersion="v2"),t.useVersion=="v1"&&(console.log("https://github.com/xnx3/translate  v2.5 v1v1v1v2v2"),t.useVersion="v2");try{t.init()}catch{}var a=t.util.uuid();if(t.to==null||t.to==""){var s=t.storage.get("to");s!=null&&typeof s<"u"&&s.length>0&&(t.to=s)}try{t.selectLanguageTag.render()}catch(re){console.log(re)}if(t.to==null||typeof t.to>"u"||t.to.length==0)if(t.autoDiscriminateLocalLanguage)t.executeByLocalLanguage();else{t.state=0;return}if(t.to==t.language.getLocal()&&!t.language.translateLocal){t.state=0;return}t.lifecycle.execute.start_Trigger(a,t.to),t.images.execute();var l;typeof n<"u"&&n!=null?typeof n.length>"u"?(l=new Array,l[0]=n):l=n:l=t.getDocuments(),l.length>500&&(console.log("------tip------"),console.log("translate.execute( docs ) docs.length 500 docs.length : "+l.length+" , http://translate.zvo.cn/43006.html  500"));try{for(var r in t.element.tagAttribute)if(t.element.tagAttribute.hasOwnProperty(r)&&t.element.tagAttribute[r]instanceof Array){var u=t.element.tagAttribute[r];t.element.tagAttribute[r]={attribute:u,condition:function(re){return!0}}}}catch(re){console.log(re)}for(var d=0;d<l.length&d<500;d++){var c=l[d];t.element.whileNodes(a,c)}if(t.language.translateLanguagesRange.length>0)for(var f in t.nodeQueue[a].list)t.nodeQueue[a].list.hasOwnProperty(f)&&t.language.translateLanguagesRange.indexOf(f)<0&&delete t.nodeQueue[a].list[f];typeof t.nodeQueue[a]>"u"&&(t.nodeQueue[a]=new Array,t.nodeQueue[a].list=[],console.log("--- translate.js warn tip  ---"),console.log("translate.js translate.js  translate.js  translate.execute() "));for(var f in t.nodeQueue[a].list)if(t.nodeQueue[a].list.hasOwnProperty(f)){for(var m in t.nodeQueue[a].list[f])if(t.nodeQueue[a].list[f].hasOwnProperty(m)&&typeof t.nodeQueue[a].list[f][m]!="function"&&!(typeof t.nodeQueue[a].list[f][m].nodes>"u"||typeof t.nodeQueue[a].list[f][m].nodes.length>"u")){for(var g=t.nodeQueue[a].list[f][m].nodes.length-1;g>-1;g--){var v=t.element.nodeAnalyse.get(t.nodeQueue[a].list[f][m].nodes[g].node),_=o.uuid(v.node);typeof t.nodeHistory[_]<"u"&&t.nodeHistory[_].translateText==v.text&&t.nodeQueue[a].list[f][m].nodes.splice(g,1)}t.nodeQueue[a].list[f][m].nodes.length==0&&delete t.nodeQueue[a].list[f][m]}Object.keys(t.nodeQueue[a].list[f]).length==0&&delete t.nodeQueue[a].list[f]}var w={},x={},A={},W=[];for(var f in t.nodeQueue[a].list){if(!t.nodeQueue[a].list.hasOwnProperty(f)||f==null||typeof f>"u"||f.length==0||f=="undefined")continue;w[f]=[],x[f]=[];let C=new t.renderTask;A[f]=[];for(var m in t.nodeQueue[a].list[f])if(t.nodeQueue[a].list[f].hasOwnProperty(m)&&typeof t.nodeQueue[a].list[f][m]!="function"){var T=t.nodeQueue[a].list[f][m].original,P=t.nodeQueue[a].list[f][m].translateText,q=T==P?m:t.util.hash(P);t.nodeQueue[a].list[f][m].cacheHash=q;var G=t.storage.get("hash_"+t.to+"_"+q);if(G!=null&&G.length>0){for(var z=0;z<t.nodeQueue[a].list[f][m].nodes.length;z++){for(var J=t.nodeQueue[a].list[f][m].nodes[z].node,ve=!1,ae=0;ae<t.inProgressNodes.length;ae++)t.inProgressNodes[ae].node.isSameNode(J)&&(t.inProgressNodes[ae].number++,ve=!0);ve||t.inProgressNodes.push({node:J,number:1});var F=t.nodeQueue[a].list[f][m].nodes[z].beforeText+G+t.nodeQueue[a].list[f][m].nodes[z].afterText;C.add(t.nodeQueue[a].list[f][m].nodes[z].node,T,F,t.nodeQueue[a].list[f][m].nodes[z].attribute);for(var K=-1,d=0;d<A[f].length;d++)if(t.nodeQueue[a].list[f][m].nodes[z].node.isSameNode(A[f][d].node)){K=d;break}for(var ee=-1,d=0;d<W.length;d++)if(t.nodeQueue[a].list[f][m].nodes[z].node.isSameNode(W[d].node)){ee=d;break}K==-1&&(K=A[f].length,A[f][K]={},A[f][K].node=t.nodeQueue[a].list[f][m].nodes[z].node,A[f][K].array=[]),ee==-1&&(ee=W.length,W[ee]={},W[ee].node=t.nodeQueue[a].list[f][m].nodes[z].node,W[ee].array=[]);var Q=A[f][K].array.length;A[f][K].array[Q]=F;var te=W[ee].array.length;W[ee].array[te]=F}continue}w[f].push(P),x[f].push(m)}C.execute()}if(typeof t.request.api.translate!="string"||t.request.api.translate==null||t.request.api.translate.length<1){t.state=0,t.lifecycle.execute.renderFinish_Trigger(a,t.to),t.executeNumber++;return}for(var f in A)if(A.hasOwnProperty(f)){for(var ne=Object.keys(t.nodeQueue[a].list[f]),U=ne.length,d=0;d<A[f].length;d++){for(var j=0;j<W.length;j++)if(A[f][d].node.isSameNode(W[j].node)){A[f][d].array=W[j].array;break}A[f][d].array.sort(function(b,R){return R.length-b.length});for(var ue=t.element.nodeAnalyse.get(A[f][d].node),xe=ue.text,oe=0;oe<A[f][d].array.length;oe++)A[f][d].array[oe]<1||(xe=xe.replace(new RegExp(t.util.regExp.pattern(A[f][d].array[oe]),"g"),t.util.regExp.resultText(`
`)));for(var de=xe.split(`
`),be=0;be<de.length;be++)de[be]<1||t.addNodeToQueue(a,ue.node,de[be])}var ke=Object.keys(t.nodeQueue[a].list[f]),_e=ke.length;if(U-_e!=0)for(var I=0;I<ke.length;I++){var N=ke[I];if(ne.indexOf(N)==-1){var H=t.nodeQueue[a].list[f][N],q=H.original==H.translateText?N:t.util.hash(H.translateText);t.nodeQueue[a].list[f][N].cacheHash=q,w[f].push(H.translateText),x[f].push(N)}}}var O=[];for(var f in t.nodeQueue[a].list)t.nodeQueue[a].list.hasOwnProperty(f)&&(typeof w[f]>"u"||w[f].length<1||f!=t.to&&O.push(f));if(O.length==0){t.lifecycle.execute.renderFinish_Trigger(a,t.to),t.state=0,t.executeNumber++;return}for(var f in x)if(x.hasOwnProperty(f)&&!(typeof x[f]>"u")&&!(x[f].length<1))for(var B=0;B<x[f].length;B++){var k=x[f][B];if(typeof t.nodeQueue[a].list[f][k].nodes>"u"||typeof t.nodeQueue[a].list[f][k].nodes.length>"u"){console.log("translate.nodeQueue['"+a+"']['list']['"+f+"']['"+k+"'].nodes.length is null ");continue}for(var E=0;E<t.nodeQueue[a].list[f][k].nodes.length;E++){for(var J=t.nodeQueue[a].list[f][k].nodes[E].node,ve=!1,ae=0;ae<t.inProgressNodes.length;ae++)t.inProgressNodes[ae].node.isSameNode(J)&&(t.inProgressNodes[ae].number++,ve=!0);ve||t.inProgressNodes.push({node:J,number:1})}}t.state=20;for(var D in O)if(O.hasOwnProperty(D)){var f=O[D];if(typeof f=="string"){if(typeof w[f]>"u"||w[f].length<1){console.log(",, lang:"+f+", translateTextArray:"),console.log(w),console.log(""),t.state=0,t.executeNumber++;return}(typeof t.translateRequest[a]>"u"||t.translateRequest[a]==null)&&(t.translateRequest[a]={}),t.translateRequest[a][f]={},t.translateRequest[a][f].executeFinish=0,t.translateRequest[a][f].addtime=Math.floor(Date.now()/1e3),t.listener.execute.renderStartByApiRun(a,f,t.to),t.lifecycle.execute.translateNetworkBefore_Trigger(a,f,t.to,w[f]);var Y=t.request.api.translate,ie={from:f,to:t.to,text:encodeURIComponent(JSON.stringify(w[f]))};t.request.post(Y,ie,function(C){if(C.result==0){typeof t.translateRequest[a]=="object"&&typeof t.translateRequest[a][C.from]=="object"?(t.translateRequest[a][C.from].result=2,t.translateRequest[a][C.from].executeFinish=1,t.translateRequest[a][C.from].stoptime=Math.floor(Date.now()/1e3)):console.log("WARINNG!!! translate.translateRequest[uuid][data.from] is not object");var b="";typeof C.from<"u"&&C.from!=null&&(b=C.from);var R="";typeof C.to<"u"&&C.to!=null?R=C.to:R=t.to,t.waitingExecute.isAllExecuteFinish(a,b,R),console.log("=======ERROR START======="),console.log(w[C.from]),console.log("response : "+C.info),console.log("=======ERROR END  =======");return}if(typeof t.nodeQueue[a]>"u"){console.log(" translate.js  translate.js  translate.js ");return}let V=new t.renderTask;for(var me=0;me<x[C.from].length;me++){var fe=C.from,X=C.text[me];if(X!=null){X.toLowerCase().indexOf(w[C.from][me].toLowerCase())>-1&&(X=w[C.from][me]);var le=x[C.from][me],Ne=t.nodeQueue[a].list[fe][le].cacheHash,Pe="";try{Pe=t.nodeQueue[a].list[fe][le].original}catch(ze){console.log("uuid:"+a+", originalWord:"+Pe+", lang:"+fe+", hash:"+le+", text:"+X+", queue:"+t.nodeQueue[a]),console.log(ze);continue}for(var We=0;We<t.nodeQueue[a].list[fe][le].nodes.length;We++)V.add(t.nodeQueue[a].list[fe][le].nodes[We].node,Pe,t.nodeQueue[a].list[fe][le].nodes[We].beforeText+X+t.nodeQueue[a].list[fe][le].nodes[We].afterText,t.nodeQueue[a].list[fe][le].nodes[We].attribute);t.storage.set("hash_"+C.to+"_"+Ne,X),t.office.fullExtract.isUse&&t.office.fullExtract.set(le,Pe,C.to,X)}}V.execute(),t.translateRequest[a][fe].result=1,t.translateRequest[a][fe].executeFinish=1,t.translateRequest[a][fe].stoptime=Math.floor(Date.now()/1e3),setTimeout(function(){t.waitingExecute.isAllExecuteFinish(a,C.from,C.to)},10)},function(C){t.translateRequest[a][C.data.from].executeFinish=1,t.translateRequest[a][C.data.from].stoptime=Math.floor(Date.now()/1e3),t.translateRequest[a][C.data.from].result=3,t.waitingExecute.isAllExecuteFinish(a,C.data.from,t.to)})}}},translateRequest:{},nodeHistory:{},element:{tagAttribute:{},nodeAnalyse:{get:function(n,a){return t.element.nodeAnalyse.analyse(n,"","",a)},set:function(n,a,s,l){return t.element.nodeAnalyse.analyse(n,a,s,l)},analyse:function(n,a,s,l){var r=new Array;r.node=n,r.text="";var u=t.element.getNodeName(n);if(l!=null&&typeof l=="string"&&l.length>0){var d;if(u=="INPUT"&&l.toLowerCase()=="value"?d=n.value:d=n[l],r.text=d,typeof a<"u"&&a.length>0){if(typeof d<"u"){var c=t.util.textReplace(d,a,s,t.to);u=="INPUT"&&l.toLowerCase()=="value"?n.value=c:n[l]=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}var f=n.getAttribute(l);if(f!=null&&typeof f<"u"){var c=t.util.textReplace(f,a,s,t.to);n.setAttribute(l,c),c.indexOf(s)>-1?r.resultText=c:r.resultText=""}}return r}if(u=="#text"&&typeof n.parentNode<"u"){var m=t.element.getNodeName(n.parentNode);m=="TEXTAREA"&&(u="TEXTAREA",n=n.parentNode)}if(u=="INPUT"||u=="TEXTAREA"){if(n.attributes==null||typeof n.attributes>"u")return r.text="",r;if(u=="INPUT"&&typeof n.attributes.type<"u"&&typeof n.attributes.type.nodeValue!=null&&(n.attributes.type.nodeValue.toLowerCase()=="button"||n.attributes.type.nodeValue.toLowerCase()=="submit")){var g=n.attributes.value;if(g!=null&&typeof g<"u"&&typeof g.nodeValue<"u"&&g.nodeValue.length>0){if(typeof a<"u"&&a.length>0){var c=t.util.textReplace(g.nodeValue,a,s,t.to);g.nodeValue=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}return r.text=g.nodeValue,r.node=g,r}}if(typeof n.attributes.placeholder<"u"){if(typeof a<"u"&&a.length>0){var c=t.util.textReplace(n.attributes.placeholder.nodeValue,a,s,t.to);n.attributes.placeholder.nodeValue=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}return r.text=n.attributes.placeholder.nodeValue,r.node=n.attributes.placeholder,r}return r.text="",r}if(u=="META"){if(typeof n.name<"u"&&n.name!=null){var v=n.name.toLowerCase(),_=n.getAttribute("property"),w="";if(typeof _<"u"&&_!=null&&_.length>0&&(w=_.toLowerCase()),v=="keywords"||v=="description"||v=="sharetitle"||w=="og:title"||w=="og:description"||w=="og:site_name"||w=="og:novel:latest_chapter_name"){if(typeof a<"u"&&a!=null&&a.length>0){var c=t.util.textReplace(n.content,a,s,t.to);n.content=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}return r.text=n.content,r}}return r.text="",r}if(u=="IMG"){if(typeof n.alt>"u"||n.alt==null)return r.text="",r;if(typeof a<"u"&&a.length>0){var c=t.util.textReplace(n.alt,a,s,t.to);n.alt=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}return r.text=n.alt,r}if(n.nodeValue==null||typeof n.nodeValue>"u")r.text="";else if(n.nodeValue.trim().length==0)r.text="";else{if(typeof a<"u"&&a!=null&&a.length>0){var c=t.util.textReplace(n.nodeValue,a,s,t.to);n.nodeValue=c,c.indexOf(s)>-1?r.resultText=c:r.resultText=""}r.text=n.nodeValue}return r}},getNodeName:function(n){return n==null||typeof n>"u"||n.nodeName==null||typeof n.nodeName>"u"?"":(n.nodeName,typeof n.nodeName=="string"?n.nodeName:typeof n.tagName=="string"&&n.tagName.length>0?n.tagName:(console.log("warn : get nodeName is null, this node ignore translate. node : "),console.log(n),""))},whileNodes:function(n,a){if(!(a==null||typeof a>"u")){(typeof t.nodeQueue[n]>"u"||t.nodeQueue[n]==null)&&(t.nodeQueue[n]=new Array,t.nodeQueue[n].expireTime=Date.now()+120*1e3,t.nodeQueue[n].list=new Array),typeof a=="object"&&typeof a.title=="string"&&a.title.length>0&&(t.ignore.isIgnore(a)||t.addNodeToQueue(n,a,a.title,"title"));var s=t.element.getNodeName(a).toLowerCase();if(typeof t.element.tagAttribute[s]<"u"){for(var l in t.element.tagAttribute[s].attribute)if(t.element.tagAttribute[s].attribute.hasOwnProperty(l)&&!(typeof t.element.tagAttribute[s].condition<"u"&&!t.element.tagAttribute[s].condition(a))){var r=t.element.tagAttribute[s].attribute[l];if(s=="input"&&r.toLowerCase()=="value")u=a.value;else{var u=a.getAttribute(r);if((typeof u>"u"||u==null)&&(u=a[r]),typeof u>"u"||u==null)continue}t.ignore.isIgnore(a)||t.addNodeToQueue(n,a,u,r)}}var d=a.childNodes;if(!(d==null||typeof d>"u"))if(d.length>0)for(var c=0;c<d.length;c++)t.element.whileNodes(n,d[c]);else t.element.findNode(n,a)}},findNode:function(n,a){if(!(a==null||typeof a>"u")&&a.parentNode!=null){var s=t.element.getNodeName(a.parentNode);if(s!=""&&!(t.ignore.tag.indexOf(s.toLowerCase())>-1)&&!t.ignore.isIgnore(a)){var l=t.element.nodeAnalyse.get(a);l.text.length>0&&t.addNodeToQueue(n,l.node,l.text)}}}},addNodeToQueue:function(n,a,s,l){if(!(a==null||s==null||s.length==0)){var r=t.element.getNodeName(a);if(r.toLowerCase()!="#comment"){if(t.util.hash(s),t.util.findTag(s)){if(a.parentNode==null)return;var u=t.element.getNodeName(a.parentNode);if(u=="SCRIPT"||u=="STYLE")return}var d=new Array;d.push(s);for(var c=0;c<t.ignore.textRegex.length;c++)for(var f=t.ignore.textRegex[c],m=0;m<d.length;m++){var s=d[m],g=s.match(f)||[];t.ignore.text=t.ignore.text.concat(g)}for(var v=0;v<t.ignore.text.length;v++)t.ignore.text[v].trim().length!=0&&(d=t.addNodeToQueueTextAnalysis(n,a,d,l,t.ignore.text[v],t.ignore.text[v]));if(typeof t.temp_nomenclature>"u"&&(t.temp_nomenclature=new Array),typeof t.temp_nomenclature[t.language.getLocal()]>"u"&&(_=new Array),typeof t.nomenclature.data[t.language.getLocal()]<"u"&&typeof t.nomenclature.data[t.language.getLocal()][t.to]<"u"){var _;for(var w in t.nomenclature.data[t.language.getLocal()][t.to])if(t.nomenclature.data[t.language.getLocal()][t.to].hasOwnProperty(w)){var x=t.nomenclature.data[t.language.getLocal()][t.to][w];d=t.addNodeToQueueTextAnalysis(n,a,d,l,w,x),typeof _<"u"&&_.push(w)}typeof t.temp_nomenclature[t.language.getLocal()]>"u"&&(t.temp_nomenclature[t.language.getLocal()]=_)}for(var m=0;m<d.length;m++)d[m].trim().length!=0&&(t.ignore.text.indexOf(d[m].trim())>-1||typeof t.temp_nomenclature[t.language.getLocal()]<"u"&&t.temp_nomenclature[t.language.getLocal()].indexOf(d[m].trim())>-1||t.addNodeToQueueAnalysis(n,a,d[m],l))}}},addNodeToQueueTextAnalysis:function(n,a,s,l,r,u){for(var d=new Array,c=0;c<s.length;c++){var f=s[c];if(f.trim()!=u.trim()){var m=f.indexOf(r);if(m>-1){if(r!=u){var g=m-u.length;g<0&&(g=0);var v=m+u.length;v>f.length&&(v=f.length);var _=f.substring(g,v);if(_.indexOf(u)>-1)continue}r!=u&&t.element.nodeAnalyse.set(a,r,u,l);for(var w=f.split(r),x=0;x<w.length;x++){var A=w[x];A.trim().length!=0&&(s.push(A),d.push(f))}}}}if(d.length>0)for(var W=0;W<d.length;W++){let T=s.indexOf(d[W]);T>-1&&s.splice(T,1)}return s},addNodeToQueueAnalysis:function(n,a,s,l){var r=t.language.recognition(s),u=r.languageArray;typeof u[t.to]<"u"&&delete u[t.to];var d=t.whole.isWhole(a);if(d){var c=r.languageName;t.addNodeQueueItem(n,a,s,l,c,"","")}else for(var c in u)if(u.hasOwnProperty(c)){for(var f=0;f<u[c].list.length;f++)if(!(typeof u[c].list[f]>"u"||typeof u[c].list[f].text>"u")){var m=u[c].list[f].text,g=u[c].list[f].beforeText,v=u[c].list[f].afterText;t.addNodeQueueItem(n,a,m,l,c,g,v)}}},addNodeQueueItem:function(n,a,s,l,r,u,d){(t.nodeQueue[n].list[r]==null||typeof t.nodeQueue[n].list[r]>"u")&&(t.nodeQueue[n].list[r]=new Array);var c=t.util.hash(s);(t.nodeQueue[n].list[r][c]==null||typeof t.nodeQueue[n].list[r][c]>"u")&&(t.nodeQueue[n].list[r][c]=new Array,t.nodeQueue[n].list[r][c].nodes=new Array,t.nodeQueue[n].list[r][c].original=s,t.nodeQueue[n].list[r][c].translateText=s);var f=!1;if(typeof a.isSameNode<"u"){for(var m=0;m<t.nodeQueue[n].list[r][c].nodes.length;m++)if(a.isSameNode(t.nodeQueue[n].list[r][c].nodes[m].node)){f=!0;continue}}if(!f){var g=t.nodeQueue[n].list[r][c].nodes.length;t.nodeQueue[n].list[r][c].nodes[g]=new Array,t.nodeQueue[n].list[r][c].nodes[g].node=a,t.nodeQueue[n].list[r][c].nodes[g].attribute=l,t.nodeQueue[n].list[r][c].nodes[g].beforeText=u,t.nodeQueue[n].list[r][c].nodes[g].afterText=d}},whole:{isEnableAll:!1,enableAll:function(){t.whole.isEnableAll=!0},class:[],tag:[],id:[],executeTip:function(){t.whole.class.length==0&&t.whole.tag.length==0&&t.whole.id.length==0||console.log(" translate.whole  http://translate.zvo.cn/42557.html "),t.whole.tag.indexOf("html")>-1&&console.log(" translate.whole.tag  html  body ")},isWhole:function(n){if(t.whole.isEnableAll)return!0;if(t.whole.class.length==0&&t.whole.tag.length==0&&t.whole.id.length==0&&t.whole.isEnableAll==!1||n==null||typeof n>"u")return!1;for(var a=n,s=100;s-- >0;){if(a==null||typeof a>"u")return!1;var l=t.element.getNodeName(a).toLowerCase();if(l.length>0){if(l=="html"||l=="#document")return!1;if(t.whole.tag.indexOf(l)>-1)return!0}if(a.className!=null){var r=a.className;if(r==null||typeof r!="string")continue;r=r.trim().split(" ");for(var u=0;u<r.length;u++)if(r[u]!=null&&r[u].trim().length>0&&t.whole.class.indexOf(r[u])>-1)return!0}if(a.id!=null&&typeof a.id<"u"&&t.whole.id.indexOf(a.id)>-1)return!0;a=a.parentElement}return!1}},language:{englishVarietys:["french","italian","deutsch","portuguese"],local:"",translateLocal:!1,translateLanguagesRange:[],setLocal:function(n){t.useVersion="v2",t.language.local=n},getLocal:function(){return(t.language.local==null||t.language.local.length<1)&&t.language.autoRecognitionLocalLanguage(),t.language.local},getCurrent:function(){var n=t.storage.get("to");return n!=null&&typeof n<"u"&&n.length>0?n:t.language.getLocal()},setDefaultTo:function(n){var a=t.storage.get("to");a!=null&&typeof a<"u"&&a.length>0||(t.storage.set("to",n),t.to=n)},clearCacheLanguage:function(){typeof t.language.setUrlParamControl_use<"u"&&t.language.setUrlParamControl_use&&(console.log(""),console.log("translate.language.setUrlParamControl(...)  URL  http://translate.zvo.cn/4075.html"),console.log("translate.language.clearCacheLanguage()  http://translate.zvo.cn/4080.html"),console.log(" translate.language.setUrlParamControl(...) url translate.language.clearCacheLanguage()  translate.language.setUrlParamControl(...) url translate.language.clearCacheLanguage() URL")),t.to="",t.storage.set("to","")},setUrlParamControl:function(n){t.language.setUrlParamControl_use=!0,(typeof n>"u"||n.length<1)&&(n="language");var a=t.util.getUrlParam(n);typeof a>"u"||a==""||a=="null"||a=="undefined"||(t.storage.set("to",a),t.to=a)},getTranslateAreaText:function(){var n="",a=document.createElement("div");if(t.documents!=null&&typeof t.documents<"u"&&t.documents.length>0)for(var s=0;s<t.documents.length;s++){var l=t.documents[s];typeof l<"u"&&l!=null&&typeof l.innerText<"u"&&l.innerText!=null&&l.innerText.length>0&&a.appendChild(l.cloneNode(!0))}else typeof document.head<"u"&&a.appendChild(document.head.cloneNode(!0)),typeof document.body<"u"&&a.appendChild(document.body.cloneNode(!0));for(var r=0;r<t.ignore.tag.length;r++)for(var u=t.ignore.tag[r],d=a.querySelectorAll(u),c=Array.prototype.slice.call(d),f=0;f<c.length;f++){var m=c[f];m.parentNode&&m.parentNode.removeChild(m)}if(n=a.innerText,n==null||typeof n>"u"||n.length<1){t.language.local="chinese_simplified";return}return n=n.replace(/\s/g,""),n},autoRecognitionLocalLanguage:function(){if(t.language.local!=null&&t.language.local.length>2)return t.language.local;var n=t.language.getTranslateAreaText();t.language.local="chinese_simplified";var a=t.language.recognition(n);return t.language.local=a.languageName,t.language.local},get:function(n){for(var a=new Array,s=new Array,l=[],r=[],u=0;u<n.length;u++){var d=n.charAt(u),c=t.language.getCharLanguage(d);c==""&&(c="unidentification");var f=t.language.analyse(c,s,l,r,d);s=f.langStrs,typeof l.language<"u"&&(r.language=l.language,r.charstr=l.charstr,r.storage_language=l.storage_language),l.language=f.storage_language,l.charstr=d,l.storage_language=f.storage_language,a.push(c)}return typeof s.unidentification<"u"&&delete s.unidentification,typeof s.specialCharacter<"u"&&delete s.specialCharacter,typeof s.number<"u"&&delete s.number,s},recognitionAlgorithm:function(n,a,s,l){if(typeof s.english<"u"&&typeof s.romance<"u"&&a.languageName=="english"&&s.romance/s.english>.008&&(typeof t.language.local<"u"&&t.language.local.length>1&&t.language.englishVarietys.indexOf(t.language.local)>-1&&(a.languageName=t.language.local),a.languageName=="english")){var r=t.language.romanceSentenceAnaly(n);r.length==0?console.log("     "+n+"  https://translate.zvo.cn/4030.html"):a.languageName=r}if(typeof s.japanese<"u"&&a.languageName!="japanese"&&s.japanese/l>.08&&(a.languageName="japanese"),(typeof s.chinese_simplified<"u"||typeof s.chinese_traditional<"u")&&typeof s.english<"u"&&a.languageName=="english"){var u=0;typeof s.chinese_simplified<"u"&&(u=u+s.chinese_simplified),typeof s.chinese_traditional<"u"&&(u=u+s.chinese_traditional),u/s.english>.05&&(a.languageName="chinese_simplified")}return typeof s.chinese_simplified<"u"&&typeof s.chinese_traditional<"u"&&a.languageName=="chinese_simplified"&&s.chinese_traditional/s.chinese_simplified>.03&&(a.languageName="chinese_traditional"),a},recognition:function(n){var a=t.language.get(n),s=[],l=[],r=0;for(var u in a)if(a.hasOwnProperty(u)&&typeof a[u]=="object"){for(var d=0,c=0;c<a[u].length;c++)d=d+a[u][c].text.length;r=r+d,s[u]=d,l[u]=d}var f="",m=0;for(var g in s)s.hasOwnProperty(g)&&s[g]>m&&(f=g,m=s[g]);var v={};for(var g in a)a.hasOwnProperty(g)&&(v[g]={},v[g].number=l[g],v[g].list=a[g]);var _={languageName:f,languageArray:v};return t.language.recognitionAlgorithm(n,_,s,r)},getCharLanguage:function(n){if(n==null||typeof n>"u")return"";if(this.russian(n))return"russian";if(this.english(n))return"english";if(this.romance(n))return"romance";if(this.specialCharacter(n))return"specialCharacter";if(this.number(n))return"number";var a=this.chinese(n);return a=="simplified"?"chinese_simplified":a=="traditional"?"chinese_traditional":this.japanese(n)?"japanese":this.korean(n)?"korean":this.greek(n)?"greek":this.thai(n)?"thai":this.arabic(n)?"arabic":this.romanian(n)?"romanian":this.hebrew(n)?"hebrew":""},analyse:function(n,a,s,l,r){typeof a[n]>"u"&&(a[n]=new Array);var u=0;typeof s.storage_language>"u"||(t.language.connector(r)&&(n=s.storage_language),s.storage_language==n?u=a[n].length-1:u=a[n].length),typeof a[n][u]>"u"&&(a[n][u]=new Array,a[n][u].beforeText="",a[n][u].afterText="",a[n][u].text=""),a[n][u].text=a[n][u].text+r,t.language.wordBlankConnector(t.language.getLocal())==!1&&t.language.wordBlankConnector(t.to)&&s.storage_language!=null&&typeof s.storage_language<"u"&&s.storage_language.length>0&&s.storage_language!="specialCharacter"&&(t.language.wordBlankConnector(s.storage_language)==!1&&t.language.wordBlankConnector(n)?a[s.storage_language][a[s.storage_language].length-1].afterText=" ":s.storage_language=="english"&&n!="english"&&(a[n][u].beforeText=" "));var d=new Array;return d.langStrs=a,d.storage_language=n,d},connector:function(n){return!!(/.*[\u0020\u00A0\u202F\u205F\u3000]+.*$/.test(n)||/.*[\u0030-\u0039]+.*$/.test(n)||/.*[\u0021\u0022\u0023\u0024\u0025\u0026\u0027\u002C\u002D\u002E\u003A\u003B\u003F\u0040]+.*$/.test(n)||/.*[\u3002\uFF1F\uFF01\uFF0C\u3001\uFF1B\uFF1A\u300C\u300D\u300E\u300F\u2018\u2019\u201C\u201D\uFF08\uFF09\u3014\u3015\u3010\u3011\u2014\u2026\u2013\uFF0E\u300A\u300B\u3008\u3009\u00b7]+.*$/.test(n))},wordBlankConnector:function(n){if(n==null||typeof n>"u")return!0;switch(n.trim().toLowerCase()){case"chinese_simplified":return!1;case"chinese_traditional":return!1;case"korean":return!1;case"japanese":return!1}return!0},chinese_traditional_dict:"",chinese:function(n){return/.*[\u4e00-\u9fa5]+.*$/.test(n)?this.chinese_traditional_dict.indexOf(n)>-1?"traditional":"simplified":""},japanese:function(n){return!!/.*[\u3040-\u309F\u30A0-\u30FF]+.*$/.test(n)},korean:function(n){return!!/.*[\uAC00-\uD7AF]+.*$/.test(n)},russian:function(n){return!!/^[--]$/.test(n)},thai:function(n){return!!/^[\u0E01-\u0E59]$/.test(n)},arabic:function(n){return/^[\u0600-\u06FF\u0750-\u077F]$/.test(n)},romanian:function(n){return/^[\u00C0-\u00FF\u0100-\u017F\u0218-\u021B]$/.test(n)},greek:function(n){return!!/^[\u0391-\u03A9\u03B1-\u03C9]$/.test(n)},hebrew:function(n){return/^[\u0590-\u05FF]$/.test(n)},number:function(n){return!!/.*[\u0030-\u0039]+.*$/.test(n)},english:function(n){return/.*[\u0041-\u005a]+.*$/.test(n)?!0:!!/.*[\u0061-\u007a]+.*$/.test(n)},romance_dict:["","","","","","","","","","","","",""],romance:function(n){return this.romance_dict.indexOf(n)>-1},romanceSentenceAnaly:function(n){const a={french:{score:0,chars:["","","","","",""]},spanish:{score:0,chars:["","",""],pairs:["ll"]},italian:{score:0,chars:["",""],pairs:["cc","ss"]},portuguese:{score:0,chars:["",""]}};for(let r=0;r<n.length;r++){const u=n[r].toLowerCase();if(Object.keys(a).forEach(d=>{a[d].chars.includes(u)&&(a[d].score+=1)}),r<n.length-1){const d=n.slice(r,r+2).toLowerCase();Object.keys(a).forEach(c=>{const f=a[c].pairs;f&&f.includes(d)&&(a[c].score+=2)})}}let s="",l=-1;return Object.keys(a).forEach(r=>{a[r].score>l&&(l=a[r].score,s=r)}),s||""},specialCharacter:function(n){return!!(/.*[\u2460-\u24E9]+.*$/.test(n)||/.*[\u2500-\u25FF]+.*$/.test(n)||/.*[\u3200-\u33FF]+.*$/.test(n)||/.*[\uFF00-\uFF5E]+.*$/.test(n)||/.*[\u2000-\u22FF]+.*$/.test(n)||/.*[\u3001-\u3036]+.*$/.test(n)||/.*[\u0020-\u002F]+.*$/.test(n)||/.*[\u003B\u003B\u003C\u003D\u003E\u003F\u005B\u005C\u005D\u005E\u005F\u0060\u007B\u007C\u007D\u007E]+.*$/.test(n)||/.*[\u0009\u000a\u0020\u00A0\u1680\u180E\u202F\u205F\u3000\uFEFF]+.*$/.test(n)||/.*[\u2000-\u200B]+.*$/.test(n)||/.*[\u2C60-\u2C77]+.*$/.test(n))},textTranslateReplace:function(n,a,s,l){return t.util.textReplace(n,a,s,l)}},executeByLocalLanguage:function(){var n=t.util.browserDefaultLanguage();if(typeof n<"u"&&n.length>0){t.changeLanguage(n);return}typeof t.request.api.ip!="string"||t.request.api.ip==null||t.request.api.ip.length<1||t.request.post(t.request.api.ip,{},function(a){a.result==0?(console.log("==== ERROR  ===="),console.log(a.info),console.log("==== ERROR END ====")):(t.storage.set("to",a.language),t.to=a.language,t.selectLanguageTag,t.execute())},null)},util:{textReplace:function(n,a,s,l){if(n==a)return s;let r=0,u=30;for(;n.indexOf(a,r)>-1&&u-- >0;){let d=""+s,c=""+a;if(t.language.wordBlankConnector(l)){let m=n.indexOf(a,r);if(m+1<n.length){let g=n.charAt(m+a.length);//.test(g)?(d=d+". ",c=a+"")://.test(g)?(d=d+", ",c=a+"")://.test(g)?(d=d+": ",c=a+""):[" ",`
`,"	","]","|","_","-","/"].indexOf(g)!==-1||d.length>0&&d.charAt(d.length-1)==" "||(d=d+" ")}if(m>0){let g=n.charAt(m-1);//.test(g)?(d=". "+d,c=""+c)://.test(g)?(d=", "+d,c=""+c)://.test(g)?(d=": "+d,c=""+c):[" ",`
`,"	","[","|","_","-","/"].indexOf(g)!==-1||d.length>0&&d.charAt(0)==" "||(d=" "+d)}}let f=t.util.replaceFromIndex(n,r,c,d);f.replaceEndIndex<1?console.log("while indexOf text:"+n+" , translateOriginal:"+a):(r=f.replaceEndIndex,n=f.text)}return n},replaceFromIndex:function(n,a,s,l){const r=n.slice(0,a),u=n.slice(a),d=u.indexOf(s);if(d>-1){const c=u.replace(s,l);return{text:r+c,replaceEndIndex:a+d+l.length}}else return{text:r+replacedAfter,replaceEndIndex:0}},uuid:function(){var n=new Date().getTime();window.performance&&typeof window.performance.now=="function"&&(n+=performance.now());var a="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(s){var l=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(s=="x"?l:l&3|8).toString(16)});return a},findTag:function(n){var a=/<[^>]+>/g;return a.test(n)},arrayFindMaxNumber:function(n){for(var a={},s=[],l=0,r=0,u=n.length;r<u;r++)a[n[r]]?a[n[r]]++:a[n[r]]=1,a[n[r]]>l&&(l=a[n[r]]);for(var d in a)a.hasOwnProperty(d)&&a[d]===l&&s.push(d);return s},hash:function(n){if(n==null||typeof n>"u")return n;var a=0,s,l;if(n.length===0)return a;for(s=0;s<n.length;s++)l=n.charCodeAt(s),a=(a<<5)-a+l,a|=0;return a+""},charReplace:function(n){return n==null?"":(n=n.trim(),n=n.replace(/\t|\n|\v|\r|\f/g,""),n)},regExp:{pattern:function(n){return n=n.replace(/\\/g,"\\\\"),n=n.replace(/\"/g,'\\"'),n=n.replace(/\?/g,"\\?"),n=n.replace(/\$/g,"\\$"),n=n.replace(/\(/g,"\\("),n=n.replace(/\)/g,"\\)"),n=n.replace(/\|/g,"\\|"),n=n.replace(/\+/g,"\\+"),n=n.replace(/\*/g,"\\*"),n=n.replace(/\[/g,"\\["),n=n.replace(/\]/g,"\\]"),n=n.replace(/\^/g,"\\^"),n=n.replace(/\{/g,"\\{"),n=n.replace(/\}/g,"\\}"),n},resultText:function(n){return n}},getUrlParam:function(n){var a=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),s=window.location.search.substr(1).match(a);return s!=null?unescape(s[2]):""},synchronizesLoadJs:function(n){var a=null;if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch{a=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(a=new XMLHttpRequest);if(a.open("GET",n,!1),a.send(null),a.readyState==4)if(a.status>=200&&a.status<300||a.status==0||a.status==304){var s=document.getElementsByTagName("HTML")[0],l=document.createElement("script");l.language="javascript",l.type="text/javascript";try{l.appendChild(document.createTextNode(a.responseText))}catch{l.text=a.responseText}return s.appendChild(l),!0}else return!1;else return!1},loadMsgJs:function(){typeof msg<"u"||t.util.synchronizesLoadJs("https://res.zvo.cn/msg/msg.js")},objSort:function(n){var a=Array.from(Object.keys(n));a.sort(function(r,u){return u.length-r.length});var s=new Array;for(var l of a)s[l]=n[l];return s},versionStringToInt:function(n){var a=n.split("."),s=0;return s=parseInt(a[0])*1e3*1e3+s,s=parseInt(a[1])*1e3+s,s=parseInt(a[2])+s,s},split:function(n,a,s){let l=a,r=[];if(JSON.stringify(n).length<=a)r.push(n);else{let u=JSON.stringify(n).trim().substring(1,JSON.stringify(n).length-1);if(JSON.stringify(n).length-a<=2){a=a-4;let d=u.substring(0,u.lastIndexOf('","')+1),c=u.substring(u.lastIndexOf('","')+2);r.push(JSON.parse("["+d+"]")),r.push(JSON.parse("["+c+"]"))}else{a=a-2;let d=0;for(;d-u.length<0;){let c="";d+a-u.length>=0?c=u.substring(d):c=u.substring(d,d+a);let f=c.length,m=1;c.endsWith('"')?c.endsWith('","')?f-=2:c.startsWith('"')||(f=c.lastIndexOf('","')+1):c.endsWith('",')?f-=1:(f=c.lastIndexOf('","')+1,f<=0&&(c.startsWith('"')?f=c.length-1:f=c.length-2,c.endsWith('"')||(m=0)));let g="";f-c.length>0||f-0==0?(g=c,f=f+g.length):g=c.substring(0,f),!g.startsWith('"')&&!g.startsWith(',"')&&(g='"'+g),g.endsWith('"')||(g=g+'"'),d+=f+m,g="["+g+"]";try{r.push(JSON.parse(g))}catch{d=d-(f+m)+1}}}}return s&&s>0&&(r=t.util._splitMaxSize(r,l,s)),r},_splitMaxSize:function(n,a,s){let l=[],r=[];if(n.forEach(function(u,d){if(u=r.concat(u),u.length>s){let f=u.slice(0,s),m=u.slice(s),g=1;for(;JSON.stringify(f).length>a&&(f=u.slice(0,s-g),m=u.slice(s-g),g++,!(g>=u.length+1)););l.push(f),r.length=0,r=m}else{let f=u,m=[],g=1;for(;JSON.stringify(f).length>a&&(f=u.slice(0,s-g),m=u.slice(s-g),g++,!(g>=u.length+1)););l.push(f),r.length=0,r=m}}),r.length>0){let u=[];u.push(r);let d=t.util._splitMaxSize(u,a,s);l=l.concat(d)}return l},browserLanguage:{zh:"chinese_simplified","zh-CN":"chinese_simplified","zh-TW":"chinese_traditional","zh-HK":"chinese_traditional",co:"corsican",gn:"guarani",rw:"kinyarwanda",ha:"hausa",no:"norwegian",nl:"dutch",yo:"yoruba",en:"english","en-US":"english",kok:"gongen",la:"latin",ne:"nepali",fr:"french",cs:"czech",haw:"hawaiian",ka:"georgian",ru:"russian",fa:"persian",bho:"bhojpuri",hi:"hindi",be:"belarusian",sw:"swahili",is:"icelandic",yi:"yiddish",tw:"twi",ga:"irish",gu:"gujarati",km:"khmer",sk:"slovak",he:"hebrew",kn:"kannada",hu:"hungarian",ta:"tamil",ar:"arabic",bn:"bengali",az:"azerbaijani",sm:"samoan",af:"afrikaans",id:"indonesian",da:"danish",sn:"shona",bm:"bambara",lt:"lithuanian",vi:"vietnamese",mt:"maltese",tk:"turkmen",as:"assamese",ca:"catalan",si:"singapore",ceb:"cebuano",gd:"scottish-gaelic",sa:"sanskrit",pl:"polish",gl:"galician",lv:"latvian",uk:"ukrainian",tt:"tatar",cy:"welsh",ja:"japanese",fil:"filipino",ay:"aymara",lo:"lao",te:"telugu",ro:"romanian",ht:"haitian_creole",doi:"dogrid",sv:"swedish",mai:"maithili",th:"thai",hy:"armenian",my:"burmese",ps:"pashto",hmn:"hmong",dv:"dhivehi",lb:"luxembourgish",sd:"sindhi",ku:"kurdish",tr:"turkish",mk:"macedonian",bg:"bulgarian",ms:"malay",lg:"luganda",mr:"marathi",et:"estonian",ml:"malayalam",de:"deutsch",sl:"slovene",ur:"urdu",pt:"portuguese",ig:"igbo",ckb:"kurdish_sorani",om:"oromo",el:"greek",es:"spanish",fy:"frisian",so:"somali",am:"amharic",ny:"nyanja",pa:"punjabi",eu:"basque",it:"italian",sq:"albanian",ko:"korean",tg:"tajik",fi:"finnish",ky:"kyrgyz",ee:"ewe",hr:"croatian",kri:"creole",qu:"quechua",bs:"bosnian",mi:"maori"},browserDefaultLanguage:function(){var n=navigator.language||navigator.userLanguage;if(typeof n=="string"&&n.length>0){var a=t.util.browserLanguage[n];if(typeof a>"u")console.log("browser default language : "+n+", translate.js current translate channel not support this language ");else return a}return""},urlSplitByText:function(n){const a=/(https?:\/\/[\w\-._~:\/?#[\]@!$&'()*+;=%]+(?=[\s\u4e00-\u9fa5,!?]|$))/gi,s=n.split(a);let l={};for(let r=0;r<s.length;r++)r%2===0?s[r]!==""&&(l[s[r]]="0"):l[s[r]]="1";return l},getElementPosition:function(n){const a=n.getBoundingClientRect(),s=window.scrollX||document.documentElement.scrollLeft,l=window.scrollY||document.documentElement.scrollTop,r=a.left+s,u=a.top+l,d=a.right-a.left,c=a.bottom-a.top,f=r+d,m=u+c;return{startX:r,startY:u,endX:f,endY:m,width:d,height:c}}},service:{name:"translate.service",use:function(n){if(typeof t.enterprise<"u"&&t.enterprise.isUse==!0){console.log(" translate.enterprise.use(); (https://translate.zvo.cn/4087.html) ,  translate.service.use('"+n+"'); (https://translate.zvo.cn/4081.html) ");return}if(typeof n=="string"&&(t.service.name=n,n!="translate.service")){if(t.whole.enableAll(),n.toLowerCase()=="giteeai"){t.request.api.host=["https://giteeai.zvo.cn/","https://deutsch.enterprise.api.translate.zvo.cn:1000/","https://api.translate.zvo.cn:1000/"];return}if(n.toLowerCase()=="siliconflow"){t.request.api.host=["https://siliconflow.zvo.cn/","https://america.api.translate.zvo.cn:1414/","https://deutsch.enterprise.api.translate.zvo.cn:1414/"];return}}},edge:{api:{auth:"https://edge.microsoft.com/translate/auth",translate:"https://api.cognitive.microsofttranslator.com/translate?from={from}&to={to}&api-version=3.0&includeSentenceLength=true"},language:{json:[{id:"ukrainian",name:"",serviceId:"uk"},{id:"norwegian",name:"Norge",serviceId:"no"},{id:"welsh",name:"Iaith Weleg",serviceId:"cy"},{id:"dutch",name:"nederlands",serviceId:"nl"},{id:"japanese",name:"",serviceId:"ja"},{id:"filipino",name:"Pilipino",serviceId:"fil"},{id:"english",name:"English",serviceId:"en"},{id:"lao",name:"",serviceId:"lo"},{id:"telugu",name:"Name",serviceId:"te"},{id:"romanian",name:"Romn",serviceId:"ro"},{id:"nepali",name:"Name",serviceId:"ne"},{id:"french",name:"Franais",serviceId:"fr"},{id:"haitian_creole",name:"Kreyl ayisyen",serviceId:"ht"},{id:"czech",name:"esk",serviceId:"cs"},{id:"swedish",name:"Svenska",serviceId:"sv"},{id:"russian",name:" ",serviceId:"ru"},{id:"malagasy",name:"Malagasy",serviceId:"mg"},{id:"burmese",name:"",serviceId:"my"},{id:"pashto",name:"Name",serviceId:"ps"},{id:"thai",name:"",serviceId:"th"},{id:"armenian",name:"",serviceId:"hy"},{id:"chinese_simplified",name:"",serviceId:"zh-CHS"},{id:"persian",name:"Persian",serviceId:"fa"},{id:"chinese_traditional",name:"",serviceId:"zh-CHT"},{id:"kurdish",name:"Kurd",serviceId:"ku"},{id:"turkish",name:"Trke",serviceId:"tr"},{id:"hindi",name:"",serviceId:"hi"},{id:"bulgarian",name:"",serviceId:"bg"},{id:"malay",name:"Malay",serviceId:"ms"},{id:"swahili",name:"Kiswahili",serviceId:"sw"},{id:"oriya",name:"",serviceId:"or"},{id:"icelandic",name:"slandName",serviceId:"is"},{id:"irish",name:"ris",serviceId:"ga"},{id:"khmer",name:"Name",serviceId:"km"},{id:"gujarati",name:"",serviceId:"gu"},{id:"slovak",name:"Slovensk",serviceId:"sk"},{id:"kannada",name:"Name",serviceId:"kn"},{id:"hebrew",name:"",serviceId:"he"},{id:"hungarian",name:"magyar",serviceId:"hu"},{id:"marathi",name:"Name",serviceId:"mr"},{id:"tamil",name:"",serviceId:"ta"},{id:"estonian",name:"eesti keel",serviceId:"et"},{id:"malayalam",name:"",serviceId:"ml"},{id:"inuktitut",name:"",serviceId:"iu"},{id:"arabic",name:"",serviceId:"ar"},{id:"deutsch",name:"Deutsch",serviceId:"de"},{id:"slovene",name:"slovenina",serviceId:"sl"},{id:"bengali",name:"",serviceId:"bn"},{id:"urdu",name:"",serviceId:"ur"},{id:"azerbaijani",name:"azerbaijani",serviceId:"az"},{id:"portuguese",name:"portugus",serviceId:"pt"},{id:"samoan",name:"lifiava",serviceId:"sm"},{id:"afrikaans",name:"afrikaans",serviceId:"af"},{id:"tongan",name:"",serviceId:"to"},{id:"greek",name:"",serviceId:"el"},{id:"indonesian",name:"IndonesiaName",serviceId:"id"},{id:"spanish",name:"Espaol",serviceId:"es"},{id:"danish",name:"dansk",serviceId:"da"},{id:"amharic",name:"amharic",serviceId:"am"},{id:"punjabi",name:"Name",serviceId:"pa"},{id:"albanian",name:"albanian",serviceId:"sq"},{id:"lithuanian",name:"Lietuva",serviceId:"lt"},{id:"italian",name:"italiano",serviceId:"it"},{id:"vietnamese",name:"Ting Vit",serviceId:"vi"},{id:"korean",name:"",serviceId:"ko"},{id:"maltese",name:"Malti",serviceId:"mt"},{id:"finnish",name:"suomi",serviceId:"fi"},{id:"catalan",name:"catal",serviceId:"ca"},{id:"croatian",name:"hrvatski",serviceId:"hr"},{id:"bosnian",name:"bosnian",serviceId:"bs-Latn"},{id:"polish",name:"Polski",serviceId:"pl"},{id:"latvian",name:"latvieu",serviceId:"lv"},{id:"maori",name:"Maori",serviceId:"mi"}],getMap:function(){if(typeof t.service.edge.language.map>"u"){t.service.edge.language.map=new Array;for(var n=0;n<t.service.edge.language.json.length;n++){var a=t.service.edge.language.json[n];t.service.edge.language.map[a.id]=a.serviceId}}return t.service.edge.language.map}},translate:function(n,a,s,l){var r=JSON.parse(decodeURIComponent(a.text));let u=t.util.split(r,4e4,900);t.request.send(t.service.edge.api.auth,{},{},function(d){var c={from:a.from+"",to:a.to,text:a.text},f=a.from;f!="auto"&&(f=="romance"?f="fr":f=t.service.edge.language.getMap()[a.from]);for(var m=t.service.edge.language.getMap()[a.to],g=t.service.edge.api.translate.replace("{from}",f).replace("{to}",m),v=0;v<u.length;v++){for(var _=[],w=0;w<u[v].length;w++)_.push({Text:u[v][w]});t.request.send(g,JSON.stringify(_),c,function(x){var A={};A.info="SUCCESS",A.result=1,A.from=a.from,A.to=a.to,A.text=[];for(var W=0;W<x.length;W++)A.text.push(x[W].translations[0].text);if(u.length>1){for(var T=-1,P=0;P<u.length;P++)if(u[P].length-A.text.length==0){T=P;break}T<0&&(console.log("------ERROR--------"),console.log("currentIndex-1  http://translate.zvo.cn/43006.html "));for(var q=0;q<T;q++)for(var G=u[q].length,z=0;z<G;z++)A.text.unshift(null);for(var J=u.length-1;J>T;J--)for(var ve=u[J].length,z=0;z<ve;z++)A.text.push(null)}s(A)},"post",!0,{Authorization:"Bearer "+d,"Content-Type":"application/json"},l,!0)}},"get",!0,{"content-type":"application/x-www-form-urlencoded"},function(d){console.log("---------error--------"),console.log("edge translate service error, http code : "+d.status+", response text : "+d.responseText)},!0)}}},request:{api:{host:["https://api.translate.zvo.cn/","https://america.api.translate.zvo.cn/"],language:"language.json",translate:"translate.json",ip:"ip.json",connectTest:"connectTest.json",init:"init.json"},appendParams:{},appendHeaders:{},response:function(n){},speedDetectionControl:{hostMasterNodeCutTime:2e3,hostQueue:[],hostQueueIndex:-1,disableTime:1e6,setCurrentHost:function(n){t.storage.set("speedDetectionControl_hostQueue",""),t.request.api.host=n,t.request.speedDetectionControl.checkHostQueue=new Array,t.request.speedDetectionControl.checkResponseSpeed_Storage(n,0)},getHostQueue:function(){if(t.request.speedDetectionControl.hostQueue.length==0){var n=t.storage.get("speedDetectionControl_hostQueue");if(n==null||typeof n>"u"||n==""){typeof t.request.api.host=="string"&&(t.request.api.host=[""+t.request.api.host]),t.request.speedDetectionControl.hostQueue=[];for(var a=0;a<t.request.api.host.length;a++){var s=t.request.api.host[a];t.request.speedDetectionControl.hostQueue[a]={host:s,time:0}}}else t.request.speedDetectionControl.hostQueue=JSON.parse(n);var l=t.storage.get("speedDetectionControl_lasttime");(l==null||typeof l>"u")&&(l=0);var r=6e4;new Date().getTime()-l>r&&t.request.speedDetectionControl.checkResponseSpeed()}return t.request.speedDetectionControl.hostQueue},checkResponseSpeed_Storage:function(n,a){t.request.speedDetectionControl.checkHostQueue.push({host:n,time:a}),t.request.speedDetectionControl.checkHostQueue.sort((s,l)=>s.time-l.time),t.storage.set("speedDetectionControl_hostQueue",JSON.stringify(t.request.speedDetectionControl.checkHostQueue)),t.storage.set("speedDetectionControl_lasttime",new Date().getTime()),t.request.speedDetectionControl.hostQueue=t.request.speedDetectionControl.checkHostQueue},checkResponseSpeed:function(){var n={"content-type":"application/x-www-form-urlencoded"};if(!(typeof t.request.api.connectTest!="string"||t.request.api.connectTest==null||t.request.api.connectTest.length<1)){t.request.speedDetectionControl.checkHostQueue=[],t.request.speedDetectionControl.checkHostQueueMap=[],typeof t.request.api.host=="string"&&(t.request.api.host=[""+t.request.api.host]);for(var a=0;a<t.request.api.host.length;a++){var s=t.request.api.host[a];t.request.speedDetectionControl.checkHostQueueMap[s]={start:new Date().getTime()};try{t.request.send(s+t.request.api.connectTest,{host:s},{host:s},function(l){var r=l.info,u=t.request.speedDetectionControl.checkHostQueueMap[r],d=new Date().getTime()-u.start;t.request.api.host[0]==r&&(d=d-t.request.speedDetectionControl.hostMasterNodeCutTime,d<0&&(d=0)),t.request.speedDetectionControl.checkResponseSpeed_Storage(r,d)},"post",!0,n,function(l){var r=l.requestURL.replace(t.request.api.connectTest,"");t.request.speedDetectionControl.checkResponseSpeed_Storage(r,t.request.speedDetectionControl.disableTime)},!1)}catch(l){console.log(l)}}}},getHostQueueIndex:function(){if(t.request.speedDetectionControl.hostQueueIndex<0){var n=t.storage.get("speedDetectionControl_hostQueueIndex");typeof n>"u"||n==null?(t.request.speedDetectionControl.hostQueueIndex=0,t.storage.set("speedDetectionControl_hostQueueIndex",0)):t.request.speedDetectionControl.hostQueueIndex=n}return t.request.speedDetectionControl.hostQueueIndex},getHost:function(){var n=t.request.speedDetectionControl.getHostQueue(),a=t.request.speedDetectionControl.getHostQueueIndex();return n.length>a||(console.log("index"+a),a=n.length-1),n[a].host}},getUrl:function(n){var a=t.request.speedDetectionControl.getHost(),s=a+n+"?v="+t.version;return s},post:function(n,a,s,l){var r={"content-type":"application/x-www-form-urlencoded"};if(!(typeof a>"u")){if(typeof t.enterprise<"u"&&t.enterprise.automaticAdaptationService(),t.request.getUrl(n),t.service.name=="client.edge"){if(n==t.request.api.translate){t.service.edge.translate(n,a,s,l);return}if(n==t.request.api.language){var u={};u.info="SUCCESS",u.result=1,u.list=t.service.edge.language.json,s(u);return}}this.send(n,a,a,s,"post",!0,r,l,!0)}},send:function(n,a,s,l,r,u,d,c,f){var m="";if((a==null||typeof a>"u")&&(a={}),typeof a=="string")m=a;else{a.browserDefaultLanguage=t.util.browserDefaultLanguage();for(var g in t.request.appendParams)t.request.appendParams.hasOwnProperty(g)&&(a[g]=t.request.appendParams[g]);typeof t.enterprise<"u"&&typeof t.enterprise.key<"u"&&typeof t.enterprise.key=="string"&&t.enterprise.key.length>0&&(a.key=t.enterprise.key);for(var v in a)a.hasOwnProperty(v)&&(m.length>0&&(m=m+"&"),m=m+v+"="+a[v])}n.indexOf("https://")==0||n.indexOf("http://")==0||(n=t.request.getUrl(n));var _=null;try{_=new XMLHttpRequest}catch{_=new ActiveXObject("Microsoft.XMLHTTP")}if(_.data=s,_.open(r,n,u),d!=null)for(var v in d)d.hasOwnProperty(v)&&_.setRequestHeader(v,d[v]);for(var w in t.request.appendHeaders)t.request.appendHeaders.hasOwnProperty(w)&&_.setRequestHeader(w,t.request.appendHeaders[w]);return t.service.name=="translate.service"&&_.setRequestHeader("currentpage",window.location.href+""),_.send(m),_.onreadystatechange=function(){if(_.readyState==4)if(t.request.response(_),_.status==200){var x=null;if(!(typeof _.responseText>"u"||_.responseText==null)){if(_.responseText.indexOf("{")>-1&&_.responseText.indexOf("}")>-1)try{x=JSON.parse(_.responseText)}catch(A){console.log(A)}}x==null?l(_.responseText):l(x)}else f&&(n.indexOf(t.request.api.connectTest)>-1||(t.service.name=="translate.service"&&console.log(`----- translate.js  -----

 3.16.0js https://cdn.staticfile.net/translate.js/3.16.0/translate.js  client.edge   https://translate.zvo.cn/4081.html  
 ,  600   http://translate.zvo.cn/4087.html 
12Ghttps://translate.zvo.cn/391129.html
-------------`),console.log("------- translate.js service api response error --------"),console.log("    http code : "+_.status),console.log("    response : "+_.response),console.log("    request url : "+n),console.log("    request data : "+JSON.stringify(a)),console.log("    request method : "+r),console.log("---------------------- end ----------------------"))),_.requestURL=n,c!=null&&c(_)},_},translateText:function(n,a){var s=new Array,l=t.language.getLocal(),r=t.language.getCurrent();if(typeof n=="string")s[0]=n;else{var u=Object.prototype.toString.call(n);if(u=="[object Array]")s=n;else if(u=="[object Object]")typeof n.texts>"u"&&console.log("translate.request.translateText  obj.texts   https://translate.zvo.cn/4077.html"),typeof n.texts=="string"?s=[n.texts]:s=n.texts,typeof n.from=="string"&&n.from.length>0&&(l=n.from),typeof n.to=="string"&&n.to.length>0&&(r=n.to);else{console.log("translate.request.translateText  https://translate.zvo.cn/4077.html");return}}for(var d=new Array,c=[],f={},m=0;m<s.length;m++){var g=t.util.hash(s[m]),v=t.storage.get("hash_"+r+"_"+g);v!=null&&v.length>0?d[m]=v:(d[m]="",c.push(s[m]),f[g]=m)}if(c.length==0){var w={from:l,to:r,text:d,result:1};a(w);return}if(!(typeof t.request.api.translate!="string"||t.request.api.translate==null||t.request.api.translate.length<1)){var _=t.request.api.translate,w={from:l,to:r,text:encodeURIComponent(JSON.stringify(c))};t.request.post(_,w,function(x){x.result==0&&(console.log("=======ERROR START======="),console.log("from : "+x.from),console.log("to : "+x.to),console.log("translate text array : "+s),console.log("response : "+x.info),console.log("=======ERROR END  ======="));for(var A=0;A<x.text.length;A++){var W=t.util.hash(c[A]);t.storage.set("hash_"+r+"_"+W,x.text[A]),t.office.fullExtract.isUse&&t.office.fullExtract.set(W,c[A],w.to,x.text[A]),d[f[W]]=x.text[A]}x.text=d,a(x)},null)}},listener:{minIntervalTime:800,lasttime:0,executetime:0,delayExecuteTime:200,addExecute:function(){var n=Date.now();t.request.listener.lasttime==0?(t.request.listener.executetime=n,t.request.listener.lasttime=1):t.request.listener.executetime>1||(n<t.request.listener.lasttime+t.request.listener.minIntervalTime?t.request.listener.executetime=t.request.listener.lasttime+t.request.listener.minIntervalTime:t.request.listener.executetime=n)},trigger:function(n){return!0},start:function(){if(typeof t.request.listener.isStart<"u")return;if(t.request.listener.isStart=!0,setInterval(function(){var r=Date.now();if(t.request.listener.executetime>1&&r>t.request.listener.executetime+t.request.listener.delayExecuteTime){t.request.listener.executetime=0,t.request.listener.lasttime=r;try{t.execute()}catch(u){console.log(u)}}},100),typeof PerformanceObserver>"u"){console.log(" translate.request.listener.start()  PerformanceObserver  translate.request.listener.start() ");return}const n=new PerformanceObserver(r=>{for(var u=!1,d=0;d<r.getEntries().length;d++){var c=r.getEntries()[d];if(c.initiatorType==="fetch"||c.initiatorType==="xmlhttprequest"){var f=c.name;typeof t.request.api.host=="string"&&(t.request.api.host=[t.request.api.host]);for(var m=!1,g=0;g<t.request.api.host.length;g++)if(f.indexOf(t.request.api.host[g])>-1){m=!0;break}if(typeof t.service.edge<"u"&&f.indexOf(t.service.edge.api.auth)>-1&&(m=!0),f.indexOf(".microsofttranslator.com/translate")>-1&&(m=!0),m||!t.request.listener.trigger())continue;u=!0;break}}u&&t.request.listener.addExecute()});var a=PerformanceObserver.supportedEntryTypes;if(a){for(var s=!1,l=0;l<a.length;l++)if(a[l]==="resource"){s=!0;break}if(s)try{n.observe({entryTypes:["resource"]});return}catch{console.log("PerformanceObserver entryTypes  type ")}}try{n.observe({type:"resource",buffered:!0}),console.log(" PerformanceObserver type")}catch{console.log(" PerformanceObserver , translate.request.listener.start() ")}}}},storage:{IndexedDB:{db:null,initDB:function(){const n=this;return new Promise((a,s)=>{const l="translate.js",r="kvStore",d=indexedDB.open(l,1);d.onupgradeneeded=function(c){const f=c.target.result;f.objectStoreNames.contains(r)||f.createObjectStore(r,{keyPath:"key"})},d.onsuccess=function(c){n.db=c.target.result,a()},d.onerror=function(c){s("IndexedDB ")}})},set:async function(n,a){return this.db||await this.initDB(),new Promise((s,l)=>{const u=this.db.transaction("kvStore","readwrite").objectStore("kvStore"),d={key:n,value:a},c=u.put(d);c.onsuccess=()=>s(),c.onerror=()=>l("")})},get:async function(n){return this.db||await this.initDB(),new Promise((a,s)=>{const u=this.db.transaction("kvStore","readonly").objectStore("kvStore").get(n);u.onsuccess=()=>{const d=u.result;a(d?d.value:void 0)},u.onerror=()=>s("")})},list:async function(n=""){return this.db||await this.initDB(),new Promise((a,s)=>{const u=this.db.transaction("kvStore","readonly").objectStore("kvStore").openCursor(),d=[],c="^"+n.replace(/\*/g,".*")+"$",f=new RegExp(c);u.onsuccess=m=>{const g=m.target.result;g?(f.test(g.key)&&d.push({key:g.key,value:g.value.value}),g.continue()):a(d)},u.onerror=()=>s("")})}},set:function(n,a){localStorage.setItem(n,a)},get:function(n){return localStorage.getItem(n)}},images:{queues:[],add:function(n){for(var a in n)n.hasOwnProperty(a)&&(t.images.queues[a]=n[a])},execute:function(){if(!(Object.keys(t.images.queues).length<1)){for(var n=document.getElementsByTagName("img"),a=0;a<n.length;a++){var s=n[a];if(!(typeof s.src>"u"||s.src==null||s.src.length==0)){var l=s.getAttribute("src");for(var r in t.images.queues){var u=r,d=t.images.queues[r];u==l&&(d=d.replace(new RegExp("{language}","g"),t.to),s.src=d)}}}for(var c=document.getElementsByTagName("*"),a=0;a<c.length;a++){var f=c[a],m=window.getComputedStyle(f,null),g=m.backgroundImage;if(g!="none"){var v=t.images.gainCssBackgroundUrl(g);if(typeof t.images.queues[v]<"u"){var d=t.images.queues[v];d=d.replace(new RegExp("{language}","g"),t.to),f.style.backgroundImage='url("'+d+'")'}}}}},gainCssBackgroundUrl:function(n){var a=n.indexOf('"'),s=n.lastIndexOf('"');if(a!=-1&&s!=-1){var l=n.substring(a+1,s);return l}return n}},reset:function(){var n=t.language.getCurrent(),a="";for(var s in t.nodeQueue)t.nodeQueue.hasOwnProperty(s)&&(a=s);if(a==""){console.log(" translate.reset(); ");return}for(var l in t.nodeQueue[a].list)if(t.nodeQueue[a].list.hasOwnProperty(l)){for(var r in t.nodeQueue[a].list[l])if(t.nodeQueue[a].list[l].hasOwnProperty(r)){var u=t.nodeQueue[a].list[l][r];for(var d in u.nodes)if(u.nodes.hasOwnProperty(d)){var c=t.storage.get("hash_"+n+"_"+r);if(!(typeof c>"u")&&c!=null&&c.length!=0&&!(typeof u.nodes[d].node>"u")){var f=typeof u.nodes[d].node.attribute>"u"?null:u.nodes[d].node.attribute,m=t.element.nodeAnalyse.analyse(u.nodes[d].node,"","",f);t.element.nodeAnalyse.analyse(u.nodes[d].node,m.text,u.original,f)}}}}t.storage.set("to",""),t.to=null,t.selectLanguageTag.render()},selectionTranslate:{selectionX:0,selectionY:0,callTranslate:function(n){let a=window.getSelection();if(a.anchorOffset==a.focusOffset)return;let s=window.getSelection().toString();if(typeof t.request.api.translate!="string"||t.request.api.translate==null||t.request.api.translate.length<1){console.log(" translate ");return}var l=t.request.api.translate,r={from:t.language.getLocal(),to:t.to,text:encodeURIComponent(JSON.stringify([s]))};t.request.post(l,r,function(u){if(u.result==0)return;let d=document.querySelector("#translateTooltip");d.innerText=u.text[0],d.style.top=selectionY+20+"px",d.style.left=selectionX+50+"px",d.style.display=""},null)},start:function(){let n=document.createElement("span");n.innerText="",n.setAttribute("id","translateTooltip"),n.setAttribute("style","background-color:black;color:#fff;text-align:center;border-radius:6px;padding:5px;position:absolute;z-index:999;top:150%;left:50%; "),document.body.appendChild(n),document.addEventListener("mousedown",a=>{selectionX=a.pageX,selectionY=a.pageY},!1),document.addEventListener("mouseup",t.selectionTranslate.callTranslate,!1),document.addEventListener("click",a=>{document.querySelector("#translateTooltip").style.display="none"},!1)}},enterprise:{isUse:!1,use:function(){if(t.enterprise.isUse=!0,t.request.speedDetectionControl.hostMasterNodeCutTime=300,t.request.api.host=["https://america-enterprise-api-translate.zvo.cn/","https://beijing.enterprise.api.translate.zvo.cn/","https://deutsch.enterprise.api.translate.zvo.cn/","https://america.api.translate.zvo.cn:666/","https://api.translate.zvo.cn:666/","https://api.translate.zvo.cn:888/"],t.service.name=="client.edge"){t.service.name="translate.service",console.log(" translate.enterprise.use(); (https://translate.zvo.cn/4087.html) ,  translate.service.use('client.edge'); (https://translate.zvo.cn/4081.html) ");return}},automaticAdaptationService:function(){if(t.enterprise.isUse){var n=t.request.speedDetectionControl.getHostQueue();n.length>0&&n[0].time+1>t.request.speedDetectionControl.disableTime&&(t.service.name="client.edge")}},key:""},init:function(){if(!(typeof t.init_execute<"u")&&(t.init_execute="",!(typeof t.request.api.init!="string"||t.request.api.init==null||t.request.api.init.length<1)))try{t.request.send(t.request.api.init,{},{},function(n){if(n.result==0){console.log("translate.js init "+n.info);return}else if(n.result==1){var a=t.util.versionStringToInt(n.version),s=t.util.versionStringToInt(t.version.replace("v",""));a>s&&console.log("Tip : translate.js find new version : "+n.version)}},"post",!0,null,function(n){},!1)}catch{}},progress:{style:`
			/* CSS */
			/*  */
			.translate_api_in_progress {
			  position: relative;
			  overflow: hidden; /*  */
			}

			/*  */
			.translate_api_in_progress::after {
			  content: '';
			  position: absolute;
			  top: 0;
			  left: 0;
			  width: 100%;
			  height: 100%;
			  background: rgba(255, 255, 255, 1); /*  */
			  z-index: 2;
			}

			/*  */
			.translate_api_in_progress::before {
			  content: '';
			  position: absolute;
			  top: 50%;
			  left: 0;
			  width: 100%;
			  height:100%; /*  */
			  background: linear-gradient(
			    90deg,
			    transparent 0%,
			    #e8e8e8 25%,  /*  */
			    #d0d0d0 50%,  /*  */
			    #e8e8e8 75%,  /*  */
			    transparent 100%
			  );
			  background-size: 200% 100%;
			  animation: translate_api_in_progress_horizontal-loader 3.5s linear infinite;
			  z-index: 3;
			  transform: translateY(-50%);
			}

			@keyframes translate_api_in_progress_horizontal-loader {
			  0% {
			    background-position: 200% 0;
			  }
			  100% {
			    background-position: -200% 0;
			  }
			}
		`,api:{isTip:!0,setUITip:function(n){t.progress.api.isTip=n},removeChildClass:function(n,a){var s=n.childNodes;if(!(s==null||typeof s>"u")){if(s.length>0)for(var l=0;l<s.length;l++)t.progress.api.removeChildClass(s[l],a+1)}a!=1&&(typeof n>"u"||typeof n.className=="string"&&(n.className.indexOf("translate_api_in_progress")<-1||(n.className=n.className.replace(/translate_api_in_progress/g,""))))},startUITip:function(){const n=document.createElement("style");n.textContent=t.progress.style,document.head.appendChild(n),t.progress.api.isTip&&(t.listener.execute.renderStartByApi.push(function(a,s,l){for(var r in t.nodeQueue[a].list[s])if(t.nodeQueue[a].list[s].hasOwnProperty(r)){for(var u in t.nodeQueue[a].list[s][r].nodes)if(t.nodeQueue[a].list[s][r].nodes.hasOwnProperty(u)){var d=t.nodeQueue[a].list[s][r].nodes[u].node;if(!(typeof d>"u"||typeof d.parentNode>"u")){var c=d.parentNode;if(c!=null){var f=d.parentNode;if(!(f!=null&&typeof f.className<"u"&&f.className!=null&&c.className.indexOf("translate_api_in_progress")>-1))if(t.progress.api.removeChildClass(c,1),typeof c.className>"u"||c.className==null||c.className=="")c.className=" translate_api_in_progress";else{if(c.className.indexOf("translate_api_in_progress")>-1)continue;c.className=c.className+" translate_api_in_progress"}}}}}}),t.listener.execute.renderFinishByApi.push(function(a,s,l){for(var r in t.nodeQueue[a].list[s])if(t.nodeQueue[a].list[s].hasOwnProperty(r)){for(var u in t.nodeQueue[a].list[s][r].nodes)if(t.nodeQueue[a].list[s][r].nodes.hasOwnProperty(u)){var d=t.nodeQueue[a].list[s][r].nodes[u].node,c=d.parentNode;if(c!=null){var f=c.className;typeof f>"u"||f==null||f==""||f.indexOf("translate_api_in_progress")<-1||(c.className=f.replace(/translate_api_in_progress/g,""))}}}}))}}},js:{transString:function(n,a,s,l){let r;try{r=JSON.parse(n)}catch(u){l(u);return}t.js.transObject(r,a,s,l)},transObject:function(n,a,s,l){let r=t.js.find(n);var u=new Array;for(const c in r)u.push(c);var d={from:"auto",to:a,texts:u};t.request.translateText(d,function(c){if(typeof c.result>"u"||c.result==0){l("network connect failure");return}if(c.result==0){l(c.info);return}const f=c.text;f&&f.length===u.length?u.forEach((m,g)=>{const v=f[g],_=r[m];_&&_.length>0&&_.forEach(w=>{t.js.setValueByPath(n,w,v)})}):console.error(""),s(n)})},setValueByPath:function(n,a,s){const l=a.replace(/\[(\d+)\]/g,".$1").split(".");let r=n;for(let u=0;u<l.length-1;u++)r=r[l[u]];r[l[l.length-1]]=s},find:function(n,a=""){let s={};if(typeof n=="object"&&n!==null)if(Array.isArray(n))n.forEach((l,r)=>{const u=a?`${a}[${r}]`:`[${r}]`,d=t.js.find(l,u);for(const[c,f]of Object.entries(d))s[c]||(s[c]=[]),s[c]=s[c].concat(f)});else for(const l in n){const r=a?`${a}.${l}`:l;if(typeof n[l]=="object"&&n[l]!==null){const u=t.js.find(n[l],r);for(const[d,c]of Object.entries(u))s[d]||(s[d]=[]),s[d]=s[d].concat(c)}else typeof n[l]=="string"&&(typeof s[n[l]]>"u"&&(s[n[l]]=[]),s[n[l]].push(r))}else typeof n=="string"&&(typeof s[n]>"u"&&(s[n]=[]),s[n].push(a));return s}},network:{originalOpen:XMLHttpRequest.prototype.open,originalSend:XMLHttpRequest.prototype.send,setRequestHeaderOriginal:XMLHttpRequest.prototype.setRequestHeader,rules:[{url:/https:\/\/www\.guanleiming\.com\/a\/b\/.html/,methods:["GET","POST"],params:["a","b1"]}],getRuleMatch:function(n,a){for(let s=0;s<t.network.rules.length;s++){const l=t.network.rules[s];if(typeof l.url>"u"&&l.url==""){console.log("WARINNG : translate.network.rule find url is null:"),console.log(l);continue}if(!(!l.url.test(n)||!l.methods.includes(a.toUpperCase())))return l}return null},use:function(){XMLHttpRequest.prototype.open=function(...n){return t.network.hookOpen.apply(this,n)},XMLHttpRequest.prototype.send=function(...n){return t.network.hookSend.apply(this,n)},XMLHttpRequest.prototype.setRequestHeader=function(...n){return t.network.setRequestHeader.apply(this,n)},t.network.fetch.use()},_translateText(n){return t.language.getLocal()==t.language.getCurrent()||typeof n=="string"&&n.length>0&&t.language.recognition(n).languageName==t.language.getLocal()?new Promise((a,s)=>{const l={from:"auto",to:t.language.getLocal(),text:[n]};a(l)}):new Promise((a,s)=>{const l={from:"auto",to:t.language.getLocal(),texts:[n]};t.request.translateText(l,function(r){r.result===1?a(r):s(r)})})},setRequestHeader:function(n,a){return this._requestContext&&(this._requestContext.headers=this._requestContext.headers||{},this._requestContext.headers[n]=a),t.network.setRequestHeaderOriginal.call(this,n,a)},RequestHandler:{async handleGet(n,a){typeof a.params>"u"&&typeof a.params.length>"u"&&a.params.length<1&&(console.log("WARINNG: rule not find params , rule : "),console.log(a),a.params=[]);try{const r=new URL(n,window.location.origin),u=r.searchParams;for(var s=0;s<a.params.length;s++){var l=a.params[s];if(u.has(l)){const d=u.get(l),c=await t.network._translateText(d);typeof c>"u"?console.log("WARINNG: translateResultData is undefined"):typeof c.result>"u"?console.log("WARINNG: translateResultData.result is undefined"):c.result!=1?console.log("WARINNG: translateResultData.result failure : "+c.info):u.set(l,decodeURIComponent(c.text[0]))}}return r.toString()}catch(r){return console.warn("GET:",r),n}},async handleForm(n,a){try{const s=new URLSearchParams(n),l={...s};for(const r of a.params)if(s.has(r)){const u=s.get(r),d=await t.network._translateText(u);l[r]=d}return new URLSearchParams(l).toString()}catch(s){return console.warn(":",s),n}},async handleJson(n,a){try{const l={...JSON.parse(n)};for(const r of a.params)if(l.hasOwnProperty(r)){const u=l[r];l[r]=await t.network._translateText(u)}return JSON.stringify(l)}catch(s){return console.warn("JSON:",s),n}}},_requestContext:null,hookOpen(n,a,s,l,r){return this._requestContext={method:n.toUpperCase(),originalUrl:a,async:s,user:l,password:r,matchedRule:t.network.getRuleMatch(a,n)},t.network.originalOpen.call(this,n,a,s,l,r)},hookSend(n){const a=this._requestContext;if(!a||!a.matchedRule)return t.network.originalSend.call(this,n);const s=async()=>{let l=n;const r=a.method;try{const d=await t.network.RequestHandler.handleGet(a.originalUrl,a.matchedRule);if(t.network.originalOpen.call(this,r,d,a.async,a.user,a.password),a.headers)for(const c in a.headers)t.network.setRequestHeaderOriginal.call(this,c,a.headers[c]);if(r==="POST"&&typeof n<"u"&&n!=null&&n.length<2e3){var u=!1;if(n.trim().indexOf("[")==0||n.trim().indexOf("{")==0)try{l=await t.network.RequestHandler.handleJson(n,a.matchedRule),u=!0}catch{u=!1}if(!u)try{l=await t.network.RequestHandler.handleForm(n,a.matchedRule)}catch{}}}catch(d){console.warn(":",d)}t.network.originalSend.call(this,l)};a.async!==!1?s.call(this):(console.warn(""),t.network.originalSend.call(this,n))},fetch:{originalFetch:window.fetch,use:function(){const n=this;window.fetch=function(...a){return n.hookFetch.apply(n,a)}},hookFetch:async function(n,a){const s=new Request(n,a),l=s.url,r=s.method,u=t.network.getRuleMatch(l,r);if(!u)return this.originalFetch.call(window,s);const d={method:r,url:l,headers:{},rule:u,isModified:!1};s.headers.forEach((f,m)=>{d.headers[m]=f}),this._requestContext=d;try{const f=await t.network.RequestHandler.handleGet(l,u);if(r==="GET"){const m=new Request(f,{method:r,headers:new Headers(d.headers),mode:s.mode,credentials:s.credentials,cache:s.cache,redirect:s.redirect,referrer:s.referrer,referrerPolicy:s.referrerPolicy});return this.originalFetch.call(window,m)}if(r==="POST"){let m=null;s.body&&(m=await s.clone().text());const g=s.headers.get("Content-Type");let v=m;if(typeof m<"u"&&m!=null&&m.length<2e3){var c=!1;if(m.trim().indexOf("[")==0||m.trim().indexOf("{")==0)try{v=await t.network.RequestHandler.handleJson(m,u),c=!0}catch{c=!1}if(!c)try{v=await t.network.RequestHandler.handleForm(m,u)}catch{}}const _=new Request(f,{method:r,headers:new Headers(d.headers),body:v,mode:s.mode,credentials:s.credentials,cache:s.cache,redirect:s.redirect,referrer:s.referrer,referrerPolicy:s.referrerPolicy});return this.originalFetch.call(window,_)}return this.originalFetch.call(window,s)}catch(f){return console.warn("fetch :",f),this.originalFetch.call(window,s)}},_requestContext:null}},visual:{getRects:function(n){return n.map(a=>{if(!a)return null;let s;if(a.nodeType===Node.TEXT_NODE){const l=document.createRange();l.selectNodeContents(a);const r=l.getClientRects();s=r.length>0?r[0]:null}else a.nodeType===Node.ELEMENT_NODE&&(s=a.getBoundingClientRect());return s?{node:a,left:s.left,top:s.top,right:s.right,bottom:s.bottom,width:s.width,height:s.height}:null})},coordinateSort:function(n){return n.filter(s=>s!==null).sort((s,l)=>Math.abs(s.top-l.top)<5?s.left-l.left:s.top-l.top)},afterAdjacent:function(n){var a=t.visual.coordinateSort(n);const s=[];return t.visual.groupRectsByLine(a).forEach(r=>{for(let u=0;u<r.length;u++)for(let d=u+1;d<r.length;d++){const c=r[u],f=r[d];if(!t.visual.areHorizontallyAdjacent(c,f))break;s.push({before:c,after:f})}}),s},groupRectsByLine:function(n){const a=[];let s=[];return n.forEach(l=>{if(s.length===0)s.push(l);else{const r=s[s.length-1];Math.abs(l.top-r.top)<5?s.push(l):(a.push(s),s=[l])}}),s.length>0&&a.push(s),a},areHorizontallyAdjacent:function(n,a){const s=Math.min(n.bottom,a.bottom)-Math.max(n.top,a.top),l=a.left-n.right;return s>0&&Math.abs(l)<1},afterAddSpace:function(n){const a=[];return n.forEach(s=>{const{before:l,after:r}=s,u=l.node,d=r.node,c=window.getComputedStyle(u.nodeType===Node.TEXT_NODE?u.parentElement:u),f=window.getComputedStyle(d.nodeType===Node.TEXT_NODE?d.parentElement:d),m=parseFloat(c.marginRight)>0||parseFloat(c.paddingRight)>0,g=parseFloat(f.marginLeft)>0||parseFloat(f.paddingLeft)>0;!m&&!g&&typeof u.textContent=="string"&&typeof d.textContent=="string"&&(/\s$/.test(u.textContent)||/^\s/.test(d.textContent)||a.push(u))}),a},adjustTranslationSpaces:function(n){if(!t.language.wordBlankConnector(t.to))return;const a=t.visual.getRects(n),s=t.visual.afterAdjacent(a);t.visual.afterAddSpace(s).forEach(r=>{if(r.nodeType===Node.TEXT_NODE)r.textContent=r.textContent+"";else if(r.nodeType===Node.ELEMENT_NODE){const u=r.lastChild;u&&u.nodeType===Node.TEXT_NODE&&(u.textContent=u.textContent+"")}})},adjustTranslationSpacesByNodequeueUuid:function(n){var a=[];for(var s in t.nodeQueue[n].list)if(t.nodeQueue[n].list.hasOwnProperty(s)&&!(s.length<1)){for(var l in t.nodeQueue[n].list[s])if(t.nodeQueue[n].list[s].hasOwnProperty(l)){for(var r in t.nodeQueue[n].list[s][l].nodes)if(t.nodeQueue[n].list[s][l].nodes.hasOwnProperty(r)){var u=t.nodeQueue[n].list[s][l].nodes[r].node;a.push(u)}}}t.visual.adjustTranslationSpaces(a)},adjustTranslationSpacesByLastNodequeueUuid:function(a){var a="";for(var s in t.nodeQueue){a=s;break}typeof a=="string"&&a.length>1&&t.visual.adjustTranslationSpacesByNodequeueUuid(a)},hideText:{style:`
				/*  -  */
		        html.translatejs-text-hidden p, html.translatejs-text-hidden div,
		        html.translatejs-text-hidden h1, html.translatejs-text-hidden h2, html.translatejs-text-hidden h3,
		        html.translatejs-text-hidden h4, html.translatejs-text-hidden h5, html.translatejs-text-hidden h6,
		        html.translatejs-text-hidden span, html.translatejs-text-hidden a, html.translatejs-text-hidden b,
		        html.translatejs-text-hidden strong, html.translatejs-text-hidden i, html.translatejs-text-hidden em,
		        html.translatejs-text-hidden mark,
		        html.translatejs-text-hidden blockquote, html.translatejs-text-hidden ul, html.translatejs-text-hidden ol,
		        html.translatejs-text-hidden li, html.translatejs-text-hidden table, html.translatejs-text-hidden th,
		        html.translatejs-text-hidden td, html.translatejs-text-hidden label, html.translatejs-text-hidden button,
		        html.translatejs-text-hidden input, html.translatejs-text-hidden select, html.translatejs-text-hidden textarea {
		            color: transparent !important;
		            text-shadow: none !important;
		        }

		        /*  */
		        html.translatejs-text-hidden ::placeholder {
		            color: transparent !important;
		        }

		        /*  */
		        img, video, iframe, canvas, svg,
		        object, embed, picture, source {
		            color: initial !important;
		        }

		        /*  */
		        .ignore-hidden {
		            color: inherit !important;
		        }
			`,hide:function(){const n=document.createElement("style");n.textContent=t.visual.hideText.style,document.head.appendChild(n),document.documentElement.classList.add("translatejs-text-hidden")},show:function(){document.documentElement.classList.remove("translatejs-text-hidden")}},webPageLoadTranslateBeforeHiddenText:function(){typeof document.body>"u"||document.body==null||console.log(" translate.visual.webPageLoadTranslateBeforeHiddenText()  head "),t.language.local==""&&console.log(" translate.visual.webPageLoadTranslateBeforeHiddenText()  http://translate.zvo.cn/4066.html  "),(t.language.local==""||t.language.local!=t.language.getCurrent())&&(t.visual.hideText.hide(),t.lifecycle.execute.renderFinish.push(function(n,a){t.visual.hideText.show()}))}}},o={index:function(n){var a=n.parentElement;if(a==null)return"";var s;if(typeof n.tagName>"u")s=a.childNodes;else{s=[];for(var l=a.childNodes,r=0;r<l.length;r++)l[r].tagName===n.tagName&&s.push(l[r])}var u=Array.prototype.indexOf.call(s,n);return n.nodeName+""+(u+1)},uuid:function(n){for(var a="",s=n;s!=null;){var l=o.index(s);l!=""&&(a!=""&&(a="_"+a),a=l+a),s=s.parentElement}return a}};console.log(`------ translate.js ------
Two lines of js html automatic translation, page without change, no language configuration file, no API Key, SEO friendly! Open warehouse : https://github.com/xnx3/translate 
jshtml API KeySEOhttps://gitee.com/mail_osc/translate`),(function(n,a){e.exports?e.exports=a():n.translate=a()})(oT,function(){return t})})(or)),or.exports}var sT=aT();const Ms=Yg(sT),Bn={getHistory:async()=>await Me({url:"/prompt/history/get_history",method:"get"}),saveHistory:async e=>await Me({url:"/prompt/history/add_history",method:"post",data:e}),deleteHistory:async e=>await Me({url:"/prompt/history/delete_history",method:"post",data:{id_index:e}}),batchDeleteHistory:async e=>await Me({url:"/prompt/history/batch_delete_history",method:"post",data:{id_index:e}}),getFavorite:async()=>await Me({url:"/prompt/collect_history/get_collect_history",method:"get"}),addFavorite:async e=>await Me({url:"/prompt/collect_history/add_collect_history",method:"post",data:e}),editFavorite:async e=>await Me({url:"/prompt/collect_history/edit_collect_history",method:"post",data:e}),deleteFavorite:async e=>await Me({url:"/prompt/collect_history/delete_collect_history",method:"post",data:{id_index:e}}),batchDeleteFavorite:async e=>await Me({url:"/prompt/collect_history/batch_delete_collect_history",method:"post",data:{id_indices:e}})},lT={class:"lora-manager-top-bar"},rT=["placeholder"],iT=["title"],uT=["title"],cT={class:"checkbox-container"},dT=["onClick"],fT=["onClick"],pT={key:0,class:"loading-indicator"},gT={key:1,class:"empty-list"},mT=["onClick","onMouseover"],hT=["src","alt","title"],vT={key:0,class:"loading-more"},_T={key:1,class:"no-more-data"},jt="weilin_prompt_ui_",Kg=yt({__name:"lora_index",props:{loraManager:{type:String,default:"look"}},setup(e,{expose:t}){const{t:o}=_t(),n=y(!1),a=y(!1),s=y(!1),l=y(!1),r=y("all"),u=y(""),d=y(null),c=y(""),f=y(null),m=y(!1),g=y(""),v=y(100),_=y(0),w=y(),x=y(!1),A=y(!1),W=y(),T=y(localStorage.getItem("weilin_prompt_ui_showHoverInfo")),P=y(localStorage.getItem("weilin_prompt_ui_clickAddTag"));(T.value===null||T.value===void 0||T.value==="")&&(localStorage.setItem("weilin_prompt_ui_showHoverInfo",!0),T.value=!0),(P.value===null||P.value===void 0||P.value==="")&&(localStorage.setItem("weilin_prompt_ui_clickAddTag",!1),P.value=!1);const q=e;et(T,b=>{localStorage.setItem("weilin_prompt_ui_showHoverInfo",b)}),et(P,b=>{localStorage.setItem("weilin_prompt_ui_clickAddTag",b)});const G=y(1),z=y(50),J=tt(()=>{if(r.value==="all"){const b=Q.value;if(b){const R=Object.values(b);return Math.ceil(R.length/z.value)}}else{const b=Q.value[u.value];if(b){const R=Object.values(b);return Math.ceil(R.length/z.value)}return 1}}),ve=()=>{x.value=!0,A.value=!0},ae=(b,R)=>{if(!T.value||T.value=="false"||(A.value=!0,g.value===b&&m.value))return;const me=R.currentTarget.getBoundingClientRect(),fe=window.innerHeight,X=450;let le={left:me.left+(me.width-X)/2,top:me.top+me.height+10};le.top+310>fe&&(le.top=me.top-310),le.left=Math.max(10,Math.min(le.left,window.innerWidth-X-10)),le.top=Math.max(10,Math.min(le.top,fe-310)),v.value=le.left,_.value=le.top,m.value=!0,g.value=b,Qe(()=>{W.value.refresh()})},F=()=>{A.value=!1,setTimeout(()=>{!x.value&&!A.value&&(m.value=!1,g.value="",x.value=!1)},200)},K=()=>{m.value=!1,g.value="",x.value=!1},ee=y([]),Q=y([]),te=y(""),ne=y(0),U=(b,R)=>{ne.value=b,te.value=R},j=async()=>{try{const b=await kn.getLoraFolderList();ee.value=b.data}catch(b){console.error("Failed to get folder list:",b),Z({type:"error",str:"message.loadFailed"})}},ue=()=>{if(!f.value||s.value||l.value)return;const b=f.value;b.scrollHeight-b.scrollTop-b.clientHeight<100&&Y()},xe=y(!1);let oe=null;const de=()=>{oe&&clearTimeout(oe),oe=setTimeout(()=>{c.value.length>0?(xe.value=!0,I()):(xe.value=!1,D())},300)},be=b=>{var R;return(R=b.local_info)!=null&&R.name&&b.local_info.name!==""&&b.local_info.name.length>0?b.local_info.name:b.name},ke=y(),_e=b=>{q.loraManager==="addLora"?re(b):q.loraManager==="prompt_inner"&&P.value?C(b):ke.value.open(b)},I=async()=>{try{const b=await kn.searchLoraGetFolderList(c.value);if(Q.value=b.data,Q.value.length>0){G.value=1;const R=Object.values(Q.value),V=(G.value-1)*50,me=V+50,fe=R.slice(V,me);B(fe)}}catch(b){console.error("Failed to get folder list:",b),Z({type:"error",str:"message.loadFailed"})}},N=y([]),H=b=>{if(b==="all"){N.value=[],r.value=b,u.value="/",Q.value=ee.value[b];const R=Q.value;if(R){l.value=!1,G.value=1;const V=Object.values(R),me=(G.value-1)*50,fe=me+50,X=V.slice(me,fe);B(X)}}else{N.value=[],r.value=b,u.value="/",Q.value=ee.value[b];const R=Q.value["/"];if(R){l.value=!1,G.value=1;const V=Object.values(R),me=(G.value-1)*50,fe=me+50,X=V.slice(me,fe);B(X)}}},O=b=>{if(b!=u.value){u.value=b,N.value=[];const R=Q.value[u.value];if(R){l.value=!1,G.value=1;const V=Object.values(R),me=(G.value-1)*50,fe=me+50,X=V.slice(me,fe);B(X)}}},B=async b=>{const R=await kn.getLoraRangeList(b);G.value===1?N.value=R.data.loras:N.value=N.value.concat(R.data.loras)},k=async()=>{if(d.value!=null){Z({type:"warn",str:"message.isLoading"});return}try{Z({type:"success",str:"message.isLoadingPleaseWait"}),await kn.getAllLoraList(),d.value=setInterval(async()=>{await E()},1e3)}catch(b){console.error("Failed to get all lora list:",b),Z({type:"error",str:"message.loadFailed"})}},E=async()=>{try{const b=await kn.getAllLoraStatus();b.data.isLoading===!1?(clearInterval(d.value),d.value=null,Z({type:"success",str:"message.loaddingSuccess"}),await D()):Z({type:"warn",str:"message.loaddingPrc",name:b.data.progress})}catch(b){console.error("Failed to get lora status:",b),clearInterval(d.value),d.value=null,Z({type:"error",str:"message.loadFailed"})}},D=async()=>{if(!n.value){n.value=!0,G.value=1,l.value=!1,s.value=!1;try{await j(),Qe(()=>{H("all")})}catch(b){console.error("Failed to refresh lora list:",b)}finally{n.value=!1}}},Y=async()=>{if(G.value>=J.value){l.value=!0;return}s.value=!0;try{if(G.value++,xe.value){if(Q.value=res.data,Q.value.length>0){const b=Object.values(Q.value),R=(G.value-1)*50,V=R+50,me=b.slice(R,V);B(me)}}else if(r.value==="all"){Q.value=ee.value[r.value];const b=Q.value;if(b){const R=Object.values(b),V=(G.value-1)*50,me=V+50,fe=R.slice(V,me);B(fe)}}else{const b=Q.value[u.value];if(b){const R=Object.values(b),V=(G.value-1)*50,me=V+50,fe=R.slice(V,me);B(fe)}}}finally{s.value=!1}},ie=()=>{G.value=1,l.value=!1,s.value=!1};et([r,u,c],()=>{ie()}),ut(()=>{D()});const re=b=>{var R,V,me,fe,X,le,Ne,Pe,We;ne.value===0?window.postMessage({type:"weilin_prompt_ui_selectLora",lora:{name:b.model_name,display_name:be(b),lora:b.name,weight:(R=b.local_info)!=null&&R.strengthMin?b.local_info.strengthMin:1,text_encoder_weight:(V=b.local_info)!=null&&V.strWeight?b.local_info.strWeight:1,loraWorks:(me=b.local_info)!=null&&me.loraWorks?b.local_info.loraWorks:""}},"*"):ne.value===1?window.postMessage({type:"weilin_prompt_ui_selectLora_stack_"+te.value,lora:{name:b.model_name,display_name:be(b),lora:b.name,weight:(fe=b.local_info)!=null&&fe.strengthMin?b.local_info.strengthMin:1,text_encoder_weight:(X=b.local_info)!=null&&X.strWeight?b.local_info.strWeight:1,loraWorks:(le=b.local_info)!=null&&le.loraWorks?b.local_info.loraWorks:""}},"*"):ne.value===2&&window.postMessage({type:"weilin_prompt_ui_selectLora_stack_node_"+te.value,lora:{name:b.model_name,display_name:be(b),lora:b.name,weight:(Ne=b.local_info)!=null&&Ne.strengthMin?b.local_info.strengthMin:1,text_encoder_weight:(Pe=b.local_info)!=null&&Pe.strWeight?b.local_info.strWeight:1,loraWorks:(We=b.local_info)!=null&&We.loraWorks?b.local_info.loraWorks:""}},"*")},C=b=>{var R,V,me;window.postMessage({type:"weilin_prompt_ui_addLoraTag_inner",lora:{tag:`<wlr:${b.model_name}:${(R=b.local_info)!=null&&R.strengthMin?b.local_info.strengthMin:1}:${(V=b.local_info)!=null&&V.strWeight?b.local_info.strWeight:1}>`,loraWorks:(me=b.local_info)!=null&&me.loraWorks?b.local_info.loraWorks:""}},"*")};return t({openSetSeed:U}),(b,R)=>(S(),L("div",{class:Ee(`${jt}lora-manager`)},[i("div",lT,[ye(i("input",{"onUpdate:modelValue":R[0]||(R[0]=V=>c.value=V),class:Ee(`${jt}search-input`),placeholder:p(o)("loraManager.searchPlaceholder"),onInput:de},null,42,rT),[[Ae,c.value]]),i("button",{class:Ee(`${jt}refresh-btn`),onClick:D,title:p(o)("loraManager.refresh")},[(S(),L("svg",{class:Ee([`${jt}refresh-icon`,{"is-rotating":n.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},[...R[3]||(R[3]=[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null,-1)])],2))],10,iT),i("button",{style:{"margin-left":"10px"},class:Ee(`${jt}refresh-btn`),onClick:k,title:p(o)("loraManager.cacheAll")},[(S(),L("svg",{class:Ee([`${jt}refresh-icon`,{"is-rotating":n.value}]),viewBox:"0 0 24 24",width:"20",height:"20"},[...R[4]||(R[4]=[i("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"},null,-1)])],2))],10,uT),i("div",cT,[i("label",{class:Ee(`${jt}checkbox-label`)},[ye(i("input",{type:"checkbox","onUpdate:modelValue":R[1]||(R[1]=V=>T.value=V),class:Ee(`${jt}checkbox`)},null,2),[[Ft,T.value]]),R[5]||(R[5]=i("span",null,"",-1))],2),e.loraManager=="prompt_inner"?(S(),L("label",{key:0,class:Ee(`${jt}checkbox-label`)},[ye(i("input",{type:"checkbox","onUpdate:modelValue":R[2]||(R[2]=V=>P.value=V),class:Ee(`${jt}checkbox`)},null,2),[[Ft,P.value]]),R[6]||(R[6]=i("span",null,"Tag",-1))],2)):pe("",!0)])]),xe.value?pe("",!0):(S(),L("div",{key:0,class:Ee(`${jt}category-nav`)},[(S(!0),L(Oe,null,He(Object.keys(ee.value),V=>(S(),L("button",{key:V,class:Ee([`${jt}category-btn`,{active:r.value===V}]),onClick:me=>H(V)},h(V==="/"?p(o)("loraManager.root"):V=="all"?p(o)("loraManager.all"):V),11,dT))),128))],2)),r.value!="all"&&!xe.value?(S(),L("div",{key:1,class:Ee(`${jt}subcategory-nav`)},[(S(!0),L(Oe,null,He(Object.keys(Q.value),V=>(S(),L("button",{key:V,class:Ee([`${jt}category-btn`,{active:u.value===V}]),onClick:me=>O(V)},h(V==="/"?p(o)("loraManager.root"):V=="all"?p(o)("loraManager.all"):V),11,fT))),128))],2)):pe("",!0),i("div",{class:Ee(`${jt}lora-list-container`),ref_key:"scrollContainer",ref:f,onScroll:ue},[a.value&&!s.value?(S(),L("div",pT,h(p(o)("loraManager.loading")),1)):N.value.length===0?(S(),L("div",gT,h(p(o)("loraManager.noResults")),1)):pe("",!0),i("div",{class:Ee(`${jt}lora-list`),style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(150px, 1fr))",gap:"12px"}},[(S(!0),L(Oe,null,He(N.value,V=>(S(),L("div",{key:V.file_path,class:Ee(`${jt}lora-card`),ref_for:!0,ref_key:"loraCardRef",ref:w,onClick:me=>_e(V),onMouseover:me=>ae(V.name,me),onMouseleave:F,style:{display:"flex","flex-direction":"column","min-height":"200px",cursor:"pointer"}},[i("div",{class:Ee(`${jt}lora-preview`),style:{flex:"1",display:"flex","align-items":"center","justify-content":"center",overflow:"hidden",width:"100%"}},[V.preview?(S(),L("img",{key:0,src:V.preview,alt:V.model_name,title:V.model_name,loading:"lazy",style:{width:"100%",height:"100%","object-fit":"contain","min-height":"150px"}},null,8,hT)):(S(),L("div",{key:1,class:Ee(`${jt}no-preview`),style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","min-height":"150px"}},[...R[7]||(R[7]=[i("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[i("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1)])],2))],2),i("div",{class:Ee(`${jt}lora-name`),style:{padding:"8px","text-align":"center","word-break":"break-word","white-space":"normal",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical",overflow:"hidden","min-height":"40px","max-height":"40px","line-height":"1.2","text-overflow":"ellipsis"}},h(be(V)),3)],42,mT))),128))],2),i("div",null,[s.value?(S(),L("div",vT,h(p(o)("loraManager.loadingMore")),1)):pe("",!0),!s.value&&l.value?(S(),L("div",_T,h(p(o)("loraManager.noMoreData")),1)):pe("",!0)])],34),Ve(nr,{ref_key:"loraDetailRef",ref:ke},null,512),m.value?(S(),wt(cu,{key:2,ref_key:"loraCardItem",ref:W,fileNmae:g.value,paddingLeft:v.value,paddingTop:_.value,onCardLeave:K,onCardenter:ve},null,8,["fileNmae","paddingLeft","paddingTop"])):pe("",!0)],2))}},[["__scopeId","data-v-e5643d0b"]]),yT={class:"tag-manager"},bT={class:"selected-categories-container"},wT={class:"selected-categories-header"},xT={class:"selected-categories-content"},TT={key:0,class:"selected-category-section"},ST={class:"section-title"},kT={class:"selected-items"},CT={class:"category-name"},ET=["onClick"],LT={key:1,class:"selected-category-section"},$T={class:"section-title"},AT={class:"selected-items"},IT={class:"category-name"},MT={class:"subcategory-name"},OT=["onClick"],NT={key:2,class:"no-selected"},RT={class:"category-tabs"},DT={class:"tabs-wrapper primary-tabs"},PT={class:"tabs-scroll"},FT=["onClick"],BT={class:"tab-text"},UT=["onClick","title"],jT={key:0,class:"tabs-wrapper group-tabs"},HT={class:"tabs-scroll"},WT=["onClick"],VT={class:"tab-text"},zT=["onClick","disabled","title"],qT=yt({__name:"tag_group_select",emits:["sureSelect"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=o,s=y([]),l=y(null),r=y(null),u=y([]),d=y(!1),c=y([]),f=y(!1),m=y(0),g=tt(()=>c.value.filter(K=>!K.sub)),v=tt(()=>c.value.filter(K=>K.sub)),_=K=>c.value.findIndex(ee=>ee.group.p_uuid===K.group.p_uuid&&!ee.sub),w=K=>c.value.findIndex(ee=>ee.group.p_uuid===K.group.p_uuid&&ee.sub&&ee.sub.g_uuid===K.sub.g_uuid),x=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh_select"},"*")},A=async()=>{try{const K=await Mt.getTagsGroupList();if(s.value=K.info,r.value){const ee=s.value.flatMap(Q=>Q.groups).find(Q=>Q.p_uuid===r.value.p_uuid);ee?r.value=ee:r.value=null}if(l.value){const ee=s.value.find(Q=>Q.p_uuid===l.value.p_uuid);ee?l.value=ee:l.value=null}}catch(K){console.error(":",K)}},W=K=>{if(!K||K==="transparent")return"var(--primary-text)";let ee,Q,te,ne=1;if(K.startsWith("rgba")){const j=K.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\)/);j&&([,ee,Q,te,ne]=j.map(Number))}else if(K.startsWith("rgb")){const j=K.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);j&&([,ee,Q,te]=j.map(Number))}return ne<.5?"var(--primary-text)":(ee*299+Q*587+te*114)/1e3>128?"#000000":"#ffffff"};ut(()=>{window.addEventListener("message",ae)}),Lo(()=>{window.removeEventListener("message",ae)});const T=K=>{l.value=K,r.value=null,d.value=!1,u.value=[]},P=K=>{q(l.value)||(r.value=K,d.value=!1,u.value=[])},q=K=>K?c.value.some(ee=>ee.group.p_uuid===K.p_uuid&&!ee.sub):!1,G=K=>{const ee=c.value.findIndex(Q=>Q.group.p_uuid===K.p_uuid&&!Q.sub);ee!==-1?c.value.splice(ee,1):(c.value=c.value.filter(Q=>Q.group.p_uuid!==K.p_uuid),c.value.push({group:{p_uuid:K.p_uuid,name:K.name},sub:null}))},z=(K,ee)=>{if(q(K))return;const Q=c.value.findIndex(te=>te.group.p_uuid===K.p_uuid&&te.sub&&te.sub.g_uuid===ee.g_uuid);if(Q!==-1)c.value.splice(Q,1);else{const te=c.value.findIndex(ne=>ne.group.p_uuid===K.p_uuid&&!ne.sub);te!==-1&&c.value.splice(te,1),c.value.push({group:{p_uuid:K.p_uuid,name:K.name},sub:ee?{g_uuid:ee.g_uuid,name:ee.name}:null})}},J=K=>{c.value.splice(K,1)},ve=()=>{c.value=[]},ae=K=>{K.data.type==="weilin_prompt_ui_tag_manager_refresh_select"&&A()},F=()=>{if(c.value.length===0){Z({type:"warn",str:"message.pleaseSelectGroup"});return}a("sureSelect",{data:c.value,index:m.value}),f.value=!1};return t({open:(K,ee)=>{x(),m.value=K,c.value=ee,f.value=!0}}),(K,ee)=>(S(),wt(Ca,{modelValue:f.value,"onUpdate:modelValue":ee[1]||(ee[1]=Q=>f.value=Q),title:p(n)("importDialog.selectTitle")},{footer:it(()=>[i("button",{onClick:ee[0]||(ee[0]=Q=>f.value=!1)},h(p(n)("promptBox.settings.close")),1),i("button",{onClick:F},h(p(n)("importDialog.sureSelect")),1)]),default:it(()=>[i("div",yT,[i("div",bT,[i("div",wT,[i("span",null,h(p(n)("importDialog.selectedCategories")),1),c.value.length>0?(S(),L("button",{key:0,class:"clear-all-btn",onClick:ve},h(p(n)("importDialog.clearAll")),1)):pe("",!0)]),i("div",xT,[g.value.length>0?(S(),L("div",TT,[i("div",ST,h(p(n)("importDialog.primaryCategories")),1),i("div",kT,[(S(!0),L(Oe,null,He(g.value,(Q,te)=>(S(),L("div",{key:"primary-"+te,class:"selected-item"},[i("span",CT,h(Q.group.name),1),i("button",{class:"remove-selected-btn",onClick:ne=>J(_(Q))},"",8,ET)]))),128))])])):pe("",!0),v.value.length>0?(S(),L("div",LT,[i("div",$T,h(p(n)("importDialog.subCategories")),1),i("div",AT,[(S(!0),L(Oe,null,He(v.value,(Q,te)=>(S(),L("div",{key:"sub-"+te,class:"selected-item"},[i("span",IT,h(Q.group.name),1),ee[2]||(ee[2]=i("span",{class:"separator"},">",-1)),i("span",MT,h(Q.sub.name),1),i("button",{class:"remove-selected-btn",onClick:ne=>J(w(Q))},"",8,OT)]))),128))])])):pe("",!0),c.value.length===0?(S(),L("div",NT,h(p(n)("importDialog.noSelectedCategories")),1)):pe("",!0)])]),i("div",RT,[i("div",DT,[i("div",PT,[(S(!0),L(Oe,null,He(s.value,(Q,te)=>{var ne,U,j;return S(),L("div",{key:"Tabss-"+te,class:Ee(["tab-item",{active:((ne=l.value)==null?void 0:ne.p_uuid)===Q.p_uuid}]),style:pt({backgroundColor:((U=l.value)==null?void 0:U.p_uuid)===Q.p_uuid?"var(--weilin-prompt-ui-primary-bg)":Q.color,color:((j=l.value)==null?void 0:j.p_uuid)===Q.p_uuid?"var(--weilin-prompt-ui-primary-text)":W(Q.color)}),onClick:ue=>T(Q)},[i("span",BT,h(Q.name),1),i("button",{class:"select-tab-btn",onClick:Ke(ue=>G(Q),["stop"]),title:p(n)("importDialog.selectCategory")},[...ee[3]||(ee[3]=[i("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[i("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)])],8,UT)],14,FT)}),128))])]),l.value?(S(),L("div",jT,[i("div",HT,[(S(!0),L(Oe,null,He(l.value.groups,(Q,te)=>{var ne,U,j;return S(),L("div",{key:"TabsSw-"+te,class:Ee(["tab-item",{active:((ne=r.value)==null?void 0:ne.g_uuid)===Q.g_uuid,disabled:q(l.value)}]),style:pt({backgroundColor:((U=r.value)==null?void 0:U.g_uuid)===Q.g_uuid?"var(--weilin-prompt-ui-primary-bg)":Q.color,color:((j=r.value)==null?void 0:j.g_uuid)===Q.g_uuid?"var(--weilin-prompt-ui-primary-text)":W(Q.color),opacity:q(l.value)?"0.5":"1",cursor:q(l.value)?"not-allowed":"pointer"}),onClick:ue=>q(l.value)?null:P(Q)},[i("span",VT,h(Q.name),1),q(l.value)?pe("",!0):(S(),L("button",{key:0,class:"select-tab-btn",onClick:Ke(ue=>z(l.value,Q),["stop"]),disabled:q(l.value),title:p(n)("importDialog.selectSubcategory")},[...ee[4]||(ee[4]=[i("svg",{viewBox:"0 0 24 24",width:"28",height:"28"},[i("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})],-1)])],8,zT))],14,WT)}),128))])])):pe("",!0)])])]),_:1},8,["modelValue","title"]))}},[["__scopeId","data-v-7c9863cd"]]),gn={getTemplateList:async()=>await Me({url:"/random_template/get_template_list",method:"post"}),getTemplateData:async e=>await Me({url:"/random_template/get_template_data",method:"post",data:{name:e}}),saveTemplateData:async e=>await Me({url:"/random_template/save_template",method:"post",data:{data:e}}),updateTemplateData:async(e,t)=>await Me({url:"/random_template/update_template",method:"post",data:{name:e,data:t}}),deleteTemplateData:async e=>await Me({url:"/random_template/delete_template",method:"post",data:{name:e}}),getRandomTemplateApple:async()=>await Me({url:"/get/setting/get_random_template_setting",method:"post"}),updateRandomTemplateApple:async e=>await Me({url:"/update/setting/update_random_template_setting",method:"post",data:{path:e}}),goRandomTemplate:async()=>await Me({url:"/random_template/go_random_template",method:"post"}),goRandomTemplatePath:async e=>await Me({url:"/random_template/go_random_template_path",method:"post",data:{name:e}})},GT={class:"random-rule-container"},QT={class:"settings-section template-section"},YT={class:"section-header"},JT={class:"template-controls"},KT={class:"template-select-group"},XT={class:"template-select-with-apply"},ZT={value:""},eS=["value"],tS=["disabled"],nS={class:"template-bottom-buttons"},oS=["disabled"],aS=["disabled"],sS={key:0,class:"template-name-input"},lS=["placeholder"],rS={class:"template-actions"},iS={key:0},uS={class:"settings-section"},cS={class:"section-header"},dS={class:"rules-reminder"},fS={class:"rules-list"},pS={class:"rule-header"},gS=["onClick"],mS={class:"rule-content"},hS={class:"form-group"},vS={class:"range-inputs"},_S=["onUpdate:modelValue"],yS=["onUpdate:modelValue"],bS={class:"form-group"},wS=["onUpdate:modelValue"],xS={value:"category"},TS={value:"specific"},SS={key:0,class:"form-group"},kS={class:"selected-categories-container"},CS={class:"selected-categories-header"},ES={class:"selected-categories-content"},LS={key:0,class:"selected-category-section"},$S={class:"section-title"},AS={class:"selected-items"},IS={class:"category-name"},MS={key:1,class:"selected-category-section"},OS={class:"section-title"},NS={class:"selected-items"},RS={class:"category-name"},DS={class:"subcategory-name"},PS={key:2,class:"no-selected"},FS=["onClick"],BS={key:1,class:"form-group"},US={class:"tags-input-container"},jS=["onClick"],HS=["onUpdate:modelValue","onKeydown","placeholder"],WS=["onClick"],VS={class:"actions-section"},zS=["disabled"],Xg="weilin_tools_",qS=yt({__name:"random_setting",emits:["close","update","generateRandomTags"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=y(!1),s=y(null),l=y(!1),r=y(""),u=y(""),d={randomRuleSetting:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},c={file_name:"new_random_template",rules:[{range:{min:1,max:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""},{range:{min:4,max:6},type:"category",categoryId:2,specificTags:[],tagGroupList:[],tagInput:""}]},f=y({});async function m(){try{r.value=="prompt_global"?await gn.getRandomTemplateApple().then(async H=>{H.data==""?f.value=c:await gn.getTemplateData(H.data).then(async O=>{Q.value=H.data,f.value=O.data,l.value=!0}).catch(O=>{console.error(":",O),Z({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(H=>{console.error(H),Z({type:"warn",str:"message.networkError"})}):u.value==""?f.value=c:await gn.getTemplateData(u.value).then(async H=>{Q.value=u.value,f.value=H.data,l.value=!0}).catch(H=>{console.error(":",H),Z({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(H){Z({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",H)}}function g(){try{const H=JSON.parse(JSON.stringify(f.value));H.rules&&H.rules.forEach(O=>{delete O.tagInput}),gn.updateTemplateData(Q.value,H).then(async O=>{await gn.getTemplateData(O.path_name).then(async B=>{f.value=B.data,Z({type:"success",str:"randomUtils.templateSaved"})}).catch(B=>{console.error(":",B),Z({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}).catch(O=>{console.error(":",O),Z({type:"warn",str:"randomUtils.errorSavingTemplate"})})}catch(H){console.error("Error saving random tag settings:",H),Z({type:"warn",str:"randomUtils.errorSavingSettings"})}}function v(){f.value.rules.push({range:{min:f.value.rules.length>0?f.value.rules[f.value.rules.length-1].range.max+1:1,max:f.value.rules.length>0?f.value.rules[f.value.rules.length-1].range.max+3:3},type:"category",categoryId:1,specificTags:[],tagGroupList:[],tagInput:""})}function _(H){f.value.rules.splice(H,1)}function w(H){H.tagInput&&H.tagInput.trim()&&(H.specificTags.push(H.tagInput.trim()),H.tagInput="")}function x(H,O){H.specificTags.splice(O,1)}function A(){}const T=y((()=>{try{const H=localStorage.getItem(`${Xg}randomRuleSettingState`);if(H){const O=JSON.parse(H),B={...d};return O.randomRuleSetting&&(B.randomRuleSetting={...d.randomRuleSetting,...O.randomRuleSetting}),B}}catch(H){console.error("Error loading window states:",H)}return{...d}})());et(T,H=>{try{localStorage.setItem(`${Xg}randomRuleSettingState`,JSON.stringify(H))}catch(O){console.error("Error saving window states:",O)}},{deep:!0});const P=H=>{a.value=!1},q=(H,O)=>{T.value[H]&&(T.value[H].position={...O})},G=(H,O)=>{T.value[H]&&(T.value[H].size={...O})},z=H=>{a.value=!0,r.value=H,Ue.registerWindow("randomRuleSetting"),Qe(()=>{Ue.setActiveWindow("randomRuleSetting"),H=="prompt_global"?j(1):I()})},J=(H,O)=>{s.value.open(H,O)},ve=()=>void 0,ae=H=>!H||!Array.isArray(H)||H.length<=0?[]:H.filter(O=>!O.sub),F=H=>!H||!Array.isArray(H)||H.length<=0?[]:H.filter(O=>O.sub),K=H=>{H&&H.data&&Array.isArray(H.data)?f.value.rules[H.index].tagGroupList=H.data:f.value.rules[H.index].tagGroupList=[]},ee=y([]),Q=y(""),te=y(""),ne=y(!1),U=y(!1);async function j(H=0){try{await gn.getTemplateList().then(O=>{ee.value=O.data,H==1&&m()}).catch(O=>{console.error(O),Z({type:"warn",str:"message.networkError"})})}catch(O){Z({type:"warn",str:"message.networkError"}),console.error("RandomTemplate:",O)}}function ue(){ne.value=!0,te.value=""}function xe(){ne.value=!1,te.value=""}function oe(){if(!Q.value){Z.warm(n("randomUtils.pleaseChooseTemplate"));return}r.value=="prompt_global"?gn.updateRandomTemplateApple(Q.value).then(H=>{Z({type:"success",str:"randomUtils.templateApplied"})}).catch(H=>{console.error(":",H),Z({type:"warn",str:"randomUtils.errorApplyingTemplate"})}):(window.postMessage({type:"weilin_prompt_ui_prompt_inner_update_node_tag_template_id",data:Q.value},"*"),Z({type:"success",str:"randomUtils.templateApplied"}))}function de(){Q.value&&gn.deleteTemplateData(Q.value).then(()=>{Z({type:"success",str:"randomUtils.templateDeleted"}),j(),Q.value=""}).catch(H=>{console.error(":",H),Z({type:"warn",str:"randomUtils.errorDeletingTemplate"})})}function be(){if(!Q.value)return;const H=ee.value.find(O=>O.path_name===Q.value);H&&(ne.value=!0,te.value=H.file_name,U.value=!0)}function ke(){if(!te.value.trim()){Z({type:"warn",str:"randomUtils.templateNameRequired"});return}if(f.value.file_name=te.value.trim(),U.value){const H=ee.value.find(O=>O.path_name===Q.value);if(H){H.file_name=te.value.trim();const O=JSON.parse(JSON.stringify(f.value));O.rules&&O.rules.forEach(B=>{delete B.tagInput}),gn.updateTemplateData(H.path_name,O).then(async B=>{Z({type:"success",str:"randomUtils.templateSaved"}),await j().then(async()=>{await gn.getTemplateData(B.path_name).then(async k=>{Q.value=B.path_name,f.value=k.data,Z({type:"success",str:"randomUtils.templateSaved"})}).catch(k=>{console.error(":",k),Z({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(B=>{console.error(":",B),Z({type:"warn",str:"randomUtils.errorSavingTemplate"})})}}else{f.value=c,f.value.file_name=te.value.trim();const H=JSON.parse(JSON.stringify(f.value));H.rules&&H.rules.forEach(O=>{delete O.tagInput}),gn.saveTemplateData(H).then(async O=>{await j().then(async()=>{await gn.getTemplateData(O.path_name).then(async B=>{Q.value=O.path_name,f.value=B.data,Z({type:"success",str:"randomUtils.templateSaved"})}).catch(B=>{console.error(":",B),Z({type:"warn",str:"randomUtils.errorLoadingTemplate"})})})}).catch(O=>{console.error(":",O),Z({type:"warn",str:"randomUtils.errorSavingTemplate"})})}ne.value=!1,te.value="",U.value=!1}const _e=async H=>{if(H.target.value!="")try{await gn.getTemplateData(H.target.value).then(async O=>{Q.value=O.path_name,f.value=O.data,l.value=!0}).catch(O=>{console.error(":",O),Z({type:"warn",str:"randomUtils.errorLoadingTemplate"})})}catch(O){Z({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",O)}},I=()=>{window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id"},"*")},N=H=>{H.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response"&&(u.value=H.data.data,j(1))};return ut(()=>{window.addEventListener("message",N)}),Dn(()=>{Ue.unregisterWindow("randomRuleSetting"),window.removeEventListener("message",N)}),t({open:z,getRandomTags:ve}),(H,O)=>(S(),L(Oe,null,[a.value?(S(),wt(Sn,{key:0,title:p(n)("randomUtils.title"),position:T.value.randomRuleSetting.position,size:T.value.randomRuleSetting.size,"z-index":p(Ue).getZIndex("randomRuleSetting"),"onUpdate:position":O[2]||(O[2]=B=>q("randomRuleSetting",B)),"onUpdate:size":O[3]||(O[3]=B=>G("randomRuleSetting",B)),onActive:O[4]||(O[4]=B=>p(Ue).setActiveWindow("randomRuleSetting")),onClose:O[5]||(O[5]=B=>P())},{default:it(()=>[i("div",GT,[i("div",QT,[i("div",YT,[i("h3",null,h(p(n)("randomUtils.ruleTemplates")),1)]),i("div",JT,[i("div",KT,[i("div",XT,[ye(i("select",{"onUpdate:modelValue":O[0]||(O[0]=B=>Q.value=B),onChange:_e,class:"form-select template-select"},[i("option",ZT,h(p(n)("randomUtils.selectTemplate")),1),(S(!0),L(Oe,null,He(ee.value,(B,k)=>(S(),L("option",{key:k,value:B.path_name},h(B.file_name),9,eS))),128))],544),[[Vt,Q.value]]),i("button",{class:"apply-template-btn",onClick:oe,disabled:!Q.value},h(p(n)("randomUtils.applyTemplate")),9,tS)]),i("div",nS,[i("button",{class:"new-template-btn",onClick:ue},h(p(n)("randomUtils.newTemplate")),1),i("button",{class:"edit-template-btn",onClick:be,disabled:!Q.value},h(p(n)("randomUtils.editTemplate")),9,oS),i("button",{class:"delete-template-btn",onClick:de,disabled:!Q.value},h(p(n)("randomUtils.deleteTemplate")),9,aS)])]),ne.value?(S(),L("div",sS,[ye(i("input",{type:"text","onUpdate:modelValue":O[1]||(O[1]=B=>te.value=B),class:"form-input",placeholder:p(n)("randomUtils.templateNamePlaceholder")},null,8,lS),[[Ae,te.value]]),i("div",rS,[i("button",{class:"save-template-btn",onClick:ke},h(p(n)("randomUtils.save")),1),i("button",{class:"cancel-template-btn",onClick:xe},h(p(n)("randomUtils.cancel")),1)])])):pe("",!0)])]),Q.value&&l.value?(S(),L("div",iS,[i("div",uS,[i("div",cS,[i("h3",null,h(p(n)("randomUtils.rules")),1),i("button",{class:"add-rule-btn",onClick:v},[O[6]||(O[6]=i("span",null,"+",-1)),qe(" "+h(p(n)("randomUtils.addRule")),1)])]),i("div",dS,[i("p",null,h(p(n)("randomUtils.rulesReminder")),1)]),i("div",fS,[(S(!0),L(Oe,null,He(f.value.rules,(B,k)=>(S(),L("div",{key:k,class:"rule-item"},[i("div",pS,[i("h4",null,h(p(n)("randomUtils.rule"))+" #"+h(k+1),1),i("button",{class:"delete-rule-btn",onClick:E=>_(k)},"",8,gS)]),i("div",mS,[i("div",hS,[i("label",null,h(p(n)("randomUtils.range")),1),i("div",vS,[ye(i("input",{type:"number","onUpdate:modelValue":E=>B.range.min=E,min:"1",class:"form-input range-input"},null,8,_S),[[Ae,B.range.min,void 0,{number:!0}]]),O[7]||(O[7]=i("span",null,"-",-1)),ye(i("input",{type:"number","onUpdate:modelValue":E=>B.range.max=E,min:"1",class:"form-input range-input"},null,8,yS),[[Ae,B.range.max,void 0,{number:!0}]])])]),i("div",bS,[i("label",null,h(p(n)("randomUtils.tagType")),1),ye(i("select",{"onUpdate:modelValue":E=>B.type=E,class:"form-select"},[i("option",xS,h(p(n)("randomUtils.category")),1),i("option",TS,h(p(n)("randomUtils.specificTags")),1)],8,wS),[[Vt,B.type]])]),B.type==="category"?(S(),L("div",SS,[i("div",kS,[i("div",CS,[i("span",null,h(p(n)("importDialog.selectedCategories")),1)]),i("div",ES,[ae(B.tagGroupList).length>0?(S(),L("div",LS,[i("div",$S,h(p(n)("importDialog.primaryCategories")),1),i("div",AS,[(S(!0),L(Oe,null,He(ae(B.tagGroupList),(E,D)=>(S(),L("div",{key:"primary-"+D,class:"selected-item"},[i("span",IS,h(E.group.name),1)]))),128))])])):pe("",!0),F(B.tagGroupList).length>0?(S(),L("div",MS,[i("div",OS,h(p(n)("importDialog.subCategories")),1),i("div",NS,[(S(!0),L(Oe,null,He(F(B.tagGroupList),(E,D)=>(S(),L("div",{key:"sub-"+D,class:"selected-item"},[i("span",RS,h(E.group.name),1),O[8]||(O[8]=i("span",{class:"separator"},">",-1)),i("span",DS,h(E.sub.name),1)]))),128))])])):pe("",!0),!B.tagGroupList||B.tagGroupList.length===0?(S(),L("div",PS,h(p(n)("importDialog.noSelectedCategories")),1)):pe("",!0)])]),i("button",{class:"add-tag-btn",onClick:E=>J(k,B.tagGroupList)},h(p(n)("randomUtils.selectTagGroup")),9,FS)])):pe("",!0),B.type==="specific"?(S(),L("div",BS,[i("label",null,h(p(n)("randomUtils.specificTags")),1),i("div",US,[(S(!0),L(Oe,null,He(B.specificTags,(E,D)=>(S(),L("div",{key:D,class:"tag-chip"},[qe(h(E)+" ",1),i("button",{class:"remove-tag-btn",onClick:Y=>x(B,D)},"",8,jS)]))),128)),ye(i("input",{type:"text","onUpdate:modelValue":E=>B.tagInput=E,onKeydown:on(Ke(E=>w(B),["prevent"]),["enter"]),class:"tag-input",placeholder:p(n)("randomUtils.addTagPlaceholder")},null,40,HS),[[Ae,B.tagInput]])]),i("button",{class:"add-tag-btn",onClick:E=>w(B)},h(p(n)("randomUtils.addTag")),9,WS)])):pe("",!0)])]))),128))])])])):pe("",!0)]),i("div",VS,[i("button",{class:"save-btn",onClick:g,disabled:!Q.value},h(p(n)("common.save")),9,zS)])]),_:1},8,["title","position","size","z-index"])):pe("",!0),Ve(qT,{ref_key:"tagGroupSelectItem",ref:s,onSureSelect:K},null,512)],64))}},[["__scopeId","data-v-61460fd3"]]);function Ma(e){let t=e.length;for(;--t>=0;)e[t]=0}const GS=3,QS=258,Zg=29,YS=256+1+Zg,em=30,JS=512,KS=new Array((YS+2)*2);Ma(KS);const XS=new Array(em*2);Ma(XS);const ZS=new Array(JS);Ma(ZS);const ek=new Array(QS-GS+1);Ma(ek);const tk=new Array(Zg);Ma(tk);const nk=new Array(em);Ma(nk);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const fu=new Uint8Array(256);for(let e=0;e<256;e++)fu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;fu[254]=fu[254]=1;const ok={class:"tag-manager"},ak={class:"form-group"},sk={class:"select-group-item"},lk=["value","placeholder"],rk={class:"form-group"},ik=["placeholder"],uk={class:"form-group"},ck=["placeholder"],dk={class:"form-group"},fk={class:"color-picker"},pk={class:"color-controls"},gk={class:"alpha-control"},mk={class:"alpha-value"},hk=yt({__name:"favour",emits:["sureSelect"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=y(null),s=y(!1),l=y({text:"",desc:"",id_index:"",color:"rgba(255, 123, 2, .4)"}),r=y({group:{id_index:0,name:"",color:"",create_time:0,p_uuid:""},sub:{id_index:0,name:"",color:"",create_time:0,g_uuid:"",p_uuid:""}}),u=y({hex:"#ff7b02",alpha:40}),d=tt(()=>f(u.value.hex,u.value.alpha)),c=()=>{const w=f(u.value.hex,u.value.alpha);l.value.color=w},f=(w,x)=>{const A=parseInt(w.slice(1,3),16),W=parseInt(w.slice(3,5),16),T=parseInt(w.slice(5,7),16);return`rgba(${A}, ${W}, ${T}, ${x/100})`},m=()=>{a.value.open()},g=()=>{if(!l.value.text||!l.value.desc||!r.value.sub.id_index||!r.value.sub.g_uuid){Z({type:"warn",str:"tagManager.textRequired"});return}Mt.addNewTags({id_index:r.value.sub.id_index,g_uuid:r.value.sub.g_uuid,text:l.value.text,desc:l.value.desc,color:l.value.color?l.value.color:"rgba(255, 123, 2, .4)"}).then(w=>{window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.addSuccess"}),v()}).catch(w=>{Z({type:"warn",str:"message.networkError"})})},v=()=>{l.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},s.value=!1},_=w=>{r.value=w,l.value.id_index=w.sub.id_index};return t({open:(w,x)=>{l.value={id_index:"",text:"",desc:"",color:"rgba(255, 123, 2, .4)"},l.value.text=w,l.value.desc=x,s.value=!0}}),(w,x)=>(S(),L(Oe,null,[Ve(Ca,{modelValue:s.value,"onUpdate:modelValue":x[5]||(x[5]=A=>s.value=A),title:p(n)("tagManager.addTag")},{footer:it(()=>[i("button",{onClick:x[4]||(x[4]=A=>s.value=!1)},h(p(n)("common.cancel")),1),i("button",{onClick:g},h(p(n)("common.confirm")),1)]),default:it(()=>[i("div",ok,[i("div",ak,[i("label",null,h(p(n)("importDialog.selectGroup")),1),i("div",sk,[i("input",{type:"text",value:l.value.id_index!=""?r.value.group.name+" -> "+r.value.sub.name:"",readonly:"",placeholder:p(n)("importDialog.selectGroup")},null,8,lk),i("button",{class:"add-tag-btn",style:{"margin-left":"10px","min-width":"fit-content"},onClick:m},h(p(n)("importDialog.selectGroup")),1)])]),i("div",rk,[i("label",null,h(p(n)("tagManager.text")),1),ye(i("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=A=>l.value.desc=A),placeholder:p(n)("tagManager.textPlaceholder")},null,8,ik),[[Ae,l.value.desc]])]),i("div",uk,[i("label",null,h(p(n)("tagManager.description")),1),ye(i("textarea",{"onUpdate:modelValue":x[1]||(x[1]=A=>l.value.text=A),placeholder:p(n)("tagManager.descriptionPlaceholder"),rows:"4"},"            ",8,ck),[[Ae,l.value.text]])]),i("div",dk,[i("label",null,h(p(n)("tagManager.backgroundColor")),1),i("div",fk,[i("div",{class:"color-preview",style:pt({backgroundColor:d.value})},null,4),i("div",pk,[ye(i("input",{type:"color","onUpdate:modelValue":x[2]||(x[2]=A=>u.value.hex=A),onInput:c,class:"color-input"},null,544),[[Ae,u.value.hex]]),i("div",gk,[ye(i("input",{type:"range","onUpdate:modelValue":x[3]||(x[3]=A=>u.value.alpha=A),min:"0",max:"100",onInput:c,class:"alpha-slider"},null,544),[[Ae,u.value.alpha,void 0,{number:!0}]]),i("span",mk,h(u.value.alpha)+"%",1)])])])])])]),_:1},8,["modelValue","title"]),Ve(Fp,{ref_key:"tagGroupSelectItem",ref:a,onSureSelect:_},null,512)],64))}},[["__scopeId","data-v-08abaad1"]]),vk={class:"weilin_prompt_ui_prompt-box"},_k={key:0,class:"weilin-toast",role:"status","aria-live":"polite"},yk={class:"center-container"},bk={class:"action-item"},wk=["title"],xk={class:"action-text"},Tk={class:"action-item"},Sk=["title"],kk={class:"action-text"},Ck={class:"action-item"},Ek={class:"action-text"},Lk={class:"action-item"},$k=["title"],Ak={class:"action-text"},Ik={class:"action-item"},Mk=["title"],Ok={class:"action-text"},Nk={class:"action-item"},Rk=["title"],Dk={class:"action-text"},Pk={key:0,class:"action-item"},Fk=["title"],Bk={class:"action-text"},Uk={class:"action-item"},jk=["title"],Hk={class:"action-text"},Wk={class:"action-item"},Vk=["title"],zk={class:"action-text"},qk={class:"action-item"},Gk=["title"],Qk={class:"action-text"},Yk={class:"action-item"},Jk=["title"],Kk={class:"action-text"},Xk={class:"action-item"},Zk=["title"],eC={class:"action-text"},tC={class:"action-item"},nC=["title"],oC={class:"action-text"},aC={class:"action-item"},sC=["title"],lC={class:"action-text"},rC={class:"action-item weilin-comfyui-toolbar-right"},iC=["disabled"],uC=["placeholder"],cC={class:"token-counter"},dC=["onClick"],fC={class:"tag"},pC={class:"desc"},gC={class:"prompt-input-translate-area"},mC={style:{display:"flex","align-items":"center"}},hC=["placeholder"],vC=["title"],_C={style:{"margin-left":"5px"},class:"action-text"},yC=["title"],bC={class:"action-text"},wC=["title"],xC={class:"action-text"},TC=["title"],SC={class:"action-text"},kC={key:0,class:"tokens-container"},CC=["draggable","onDragstart","onDragover","onDrop","onDblclick"],EC={key:0,class:"newline-token"},LC=["title"],$C=["onMouseenter","onMouseleave"],AC=["title"],IC=["title","onMouseenter","onMouseleave"],MC={style:{"margin-left":"5px"}},OC=["onMouseenter","onMouseleave"],NC=["onClick"],RC=["value","onInput","onBlur","onKeyup"],DC=["onClick","title"],PC={key:4,class:"translation-result"},FC=["onClick","title"],BC={class:"translated-text"},UC={key:0,class:"line-break"},jC={class:"tag-tips-content"},HC=["innerHTML"],WC={key:0,class:"weight-control"},VC={class:"weight-label"},zC={key:1,class:"lora-weight-controls"},qC={class:"weight-control"},GC={class:"weight-label"},QC={class:"weight-control"},YC={class:"weight-label"},JC=["title"],KC=["title"],XC={key:2,class:"bracket-btn-group"},ZC={class:"bracket-btn-container"},eE={class:"vertical-btn-group"},tE=["title"],nE=["title"],oE={class:"bracket-btn-container"},aE={class:"vertical-btn-group"},sE=["title"],lE=["title"],rE={class:"bracket-btn-container"},iE={class:"vertical-btn-group"},uE=["title"],cE=["title"],dE=["title"],fE={class:"tag-manager-section"},pE={class:"weilin-comfyui-selection-actions-content"},gE={class:"weilin-comfyui-selection-actions-count"},mE={class:"header-left"},hE={class:"section-title"},vE={class:"header-right"},_E={class:"lora-manager-container"},yE={class:"tag-manager-section"},bE={class:"header-left"},wE={class:"section-title"},xE={class:"header-right"},TE={class:"tag-manager-container"},SE="weilin_prompt_ui_",Os="weilin-selection-box",kE=16,tm="weilin_prompt_ui_sidebar_visible",CE="weilin_prompt_ui_main_labels_v1",EE=50,LE=yt({__name:"prompt_index",props:{promptManager:{type:String,default:"prompt_global"},hasPromptLoraStack:{type:Boolean,default:!1}},setup(e,{expose:t}){const o=y(null),{t:n}=_t(),a=y(),s=y(),l=y({top:0,left:0}),r=y(0),u=e,d=y(null),c=y(""),f=y([]),m={},g=y(null),v=y(!1),_=y({top:"0px",left:"0px"}),w=y(!1),x=y(null),A=y(null),W=y(null),T=y([]),P=y(!1),q=y(!1),G=y([]),z=y(0),J=y(null),ve=y(localStorage.getItem("weilin_prompt_ui_auto_box_width")||450),ae=y(localStorage.getItem("weilin_prompt_ui_auto_box_height")||350),F=y(""),K=y(!1),ee=y({x:0,y:0}),Q=y({x:0,y:0}),te=y([]),ne=y(null),U=y(!1),j=y(!1),ue=y(!1),xe=y({top:"0px",left:"0px"}),oe=y(!1),de=y(!1),be=y(0),ke=y(!1),_e=y({top:"0px",left:"0px"}),I=y(null),N=y(null),H=y(""),O=y(0),B=y(!0),k=()=>{B.value=!B.value};et(B,M=>{localStorage.setItem(tm,String(M))}),ut(()=>{const M=localStorage.getItem(tm);B.value=M!=="false"});const E=()=>(O.value++,`token_${O.value}_${Date.now()}`),D=()=>{P.value=!P.value},Y=()=>{P.value=!1},ie=y(null),re=y(null),C=y(!1),b=`weilin_prompt_ui_last_main_label_id_${u.promptManager||"default"}`,R=tt(()=>{const M=B.value?280:0;return`calc(100% - ${(P.value?300:0)+M}px)`});let V=!1;const me=M=>{if(!M){re.value=null,c.value="",Qe(()=>{s.value&&(s.value.value="",ra({target:s.value}))}),C.value=!1;return}re.value=M.id,V=!0,c.value=M.content||"",Qe(()=>{s.value&&(s.value.value=c.value,ra({target:s.value}))}),C.value=!1};et(c,M=>{if(V){V=!1;return}C.value=!0}),et(f,()=>{V||(C.value=!0)},{deep:!0}),et(re,M=>{try{localStorage.setItem(b,M||"")}catch{}});function fe(){try{const M=localStorage.getItem(b);if(!M)return;const $=localStorage.getItem(CE),se=$?JSON.parse($):[],he=Array.isArray(se)?se.find(Re=>Re&&Re.id===M):null;if(!he)return;re.value=M,V=!0,c.value=he.content||"",Qe(()=>{s.value&&(s.value.value=c.value,ra({target:s.value})),V=!1}),C.value=!1}catch{}}ut(()=>{fe();const M=()=>{try{localStorage.setItem(b,re.value||"")}catch{}};window.addEventListener("beforeunload",M),Lo(()=>window.removeEventListener("beforeunload",M))});function X(){var M;re.value&&(M=ie.value)!=null&&M.updateSelectedContent&&(ie.value.updateSelectedContent(c.value),C.value=!1,Pe())}const le=y(!1);let Ne=null;function Pe(){le.value=!0,Ne&&clearTimeout(Ne),Ne=setTimeout(()=>{le.value=!1},1600)}Lo(()=>{Ne&&clearTimeout(Ne)});const We=()=>{x.value.open()},ze=y(1),rt=()=>{if(g.value===null)return;let $=f.value[g.value].text;if(!st($)){Z({type:"warn",str:"message.noFinishKuo"});return}const se=$e=>$e.startsWith("(")&&$e.endsWith(")")&&!$e.slice(1,-1).includes("(")&&!$e.slice(1,-1).includes(")")&&!$e.slice(1,-1).includes("[")&&!$e.slice(1,-1).includes("]")&&!$e.slice(1,-1).includes("{")&&!$e.slice(1,-1).includes("}")&&!$e.slice(1,-1).includes("<")&&!$e.slice(1,-1).includes(">");let he=$;const Re=/:(-?\d+(\.\d+)?)$/.test($),we=$.match(/^\((.*?):(-?\d+(\.\d+)?)\)$/);if(Re||we)ze.value===1?$.startsWith("(")&&$.endsWith(")")?he=$.slice(1,-1).replace(/:(\d+(\.\d+)?)$/,""):he=$.replace(/:(\d+(\.\d+)?)$/,""):we?he=`(${we[1]}:${ze.value})`:he=$.replace(/:(-?\d+(\.\d+)?)$/,`:${ze.value}`);else{const $e=$.match(/^([^_]+)_(\([^)]+\))$/);if($e&&!$.includes("\\(")&&!$.includes("\\)")){const[,Ie,Xe]=$e;ze.value===1?he=$:he=`(${Ie} ${Xe}:${ze.value})`}else $.includes("\\(")&&$.includes("\\)")&&!/[\(\)\[\]\{\}<>]/.test($.replace(/\\[\(\)\[\]\{\}<>]/g,""))?ze.value===1?he=$:$.startsWith("(")&&$.endsWith(")")?he=$.replace(/\)$/,`:${ze.value})`):he=`(${$}:${ze.value})`:/[\(\[\{\<\)\]\}\>]/.test($)?ze.value===1&&se($)?he=$.slice(1,-1):ze.value===1?he=$:$.startsWith("(")&&$.endsWith(")")?he=$.replace(/\)$/,`:${ze.value})`):he=`(${$}:${ze.value})`:ze.value===1?he=$:he=`(${$}:${ze.value})`}f.value[g.value].text=he,Mn()},dt=y(.5),Ht=y(.5);et(g,M=>{var $;if(M!==null&&(($=f.value[M])!=null&&$.isLoraTag)){const he=f.value[M].text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);he&&(dt.value=parseFloat(he[2]),Ht.value=parseFloat(he[3]))}});const Fe=()=>{var M;if(g.value!==null&&((M=f.value[g.value])!=null&&M.isLoraTag)){const $=f.value[g.value],se=$.text.match(/<wlr:([^:]+):([^:]+):([^>]+)>/);if(se){const Re=`<wlr:${se[1]}:${dt.value}:${Ht.value}>`;$.text=Re,Mn()}}},Le=M=>{if(g.value===null)return;let se=f.value[g.value].text;const he={"(":")","[":"]","{":"}","<":">"}[M];se=`${M}${se}${he}`,f.value[g.value].text=se,In()},Ce=M=>{if(g.value===null)return;let se=f.value[g.value].text;const he={"(":")","[":"]","{":"}","<":">"};se.startsWith(M)&&se.endsWith(he[M])&&(se=se.slice(1,-1),f.value[g.value].text=se,In())},st=M=>{const $=[],se={"(":")","[":"]","{":"}","<":">"};for(let he of M)if(se[he])$.push(he);else if(Object.values(se).includes(he)&&($.length===0||se[$.pop()]!==he))return!1;return $.length===0};Cc(()=>{for(const M in m)delete m[M]}),y(!0),y(!1);const mn=M=>/[\p{L}]/u.test(M),la=M=>{const $=M.match(/([^:]+):[\d.]+/);return $?$[1]:M};let Da=null;const rr=async()=>{Da&&clearTimeout(Da),Da=setTimeout(async()=>{if(!s.value)return;const M=s.value,$=M.selectionStart;await Qe();const se=M.value.substring(0,$),he=document.createElement("div");he.style.position="absolute",he.style.top="0",he.style.left="0",he.style.visibility="hidden",he.style.whiteSpace="pre-wrap",he.style.wordWrap="break-word",he.style.width=window.getComputedStyle(M).width,he.style.font=window.getComputedStyle(M).font,he.style.padding=window.getComputedStyle(M).padding;const Re=document.createTextNode(se),we=document.createElement("span");we.textContent="|",he.appendChild(Re),he.appendChild(we),M.parentNode.appendChild(he);const $e=we.getBoundingClientRect(),Ie=M.parentNode.getBoundingClientRect();let Xe=$e.top-Ie.top+$e.height,bt=$e.left-Ie.left;if(await Qe(),a.value){const Tt=a.value.offsetWidth,Wn=M.offsetWidth,Yt=M.getBoundingClientRect().left-Ie.left;bt+Tt>Yt+Wn&&(bt=Yt+Wn-Tt),bt<Yt&&(bt=Yt),bt=Math.max(0,Math.min(bt,Ie.width-Tt))}M.parentNode.removeChild(he),l.value={top:Xe,left:bt},Da=null},50)},Pa=y(null),ra=M=>{if(!(M!=null&&M.target)||!s.value)return;const $=M.target.value,se=M.target.selectionStart,he=M.target.selectionEnd,Re={comma:{enabled:localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false",pattern://g,replace:","},period:{enabled:localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false",pattern://g,replace:"."},bracket:{enabled:localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false",patterns:[{pattern://g,replace:"["},{pattern://g,replace:"]"},{pattern://g,replace:"("},{pattern://g,replace:")"}]},angleBracket:{enabled:localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false",patterns:[{pattern://g,replace:"<"},{pattern://g,replace:">"}]}};let we=$.substring(0,se),$e=$;Object.values(Re).forEach(Ze=>{Ze.enabled&&(Ze.pattern?(we=we.replace(Ze.pattern,Ze.replace),$e=$e.replace(Ze.pattern,Ze.replace)):Ze.patterns&&Ze.patterns.forEach(({pattern:Lt,replace:St})=>{we=we.replace(Lt,St),$e=$e.replace(Lt,St)}))}),c.value=$e;const Ie=we.length,Xe=he-se,bt=Ie+Xe;Qe(()=>{s.value&&(s.value.setSelectionRange(Ie,bt),s.value.focus())});const Tt=$e.substring(0,Ie),Wn=localStorage.getItem("weilin_prompt_ui_comma_close_autocomplete")==="true",Yt=Ie>0?Tt[Ie-1]:"";if((Yt===","||Yt===" ")&&Wn){q.value=!1,I.value&&clearTimeout(I.value),I.value=setTimeout(()=>{var js;const Ze=((js=s.value)==null?void 0:js.selectionStart)||0,St=(c.value||"").substring(0,Ze);let rn=Ze;for(;rn>0&&!/[,\s]/.test(St[rn-1]);)rn--;const Us=St.substring(rn,Ze).trim();Us&&hm(Us),Wo()},300),r.value=Fa(c.value);return}let mt=Ie;for(;mt>0&&!/[,\s]/.test(Tt[mt-1]);)mt--;const ot=Tt.substring(mt,Ie).trim();I.value&&clearTimeout(I.value),I.value=setTimeout(()=>{ot&&hm(ot),Wo()},300),r.value=Fa(c.value)},Fa=M=>M?M.trim().split(/\s+/).length:0,Un=async()=>{let M=localStorage.getItem("weilin_prompt_ui_comma_conversion")==="true",$=localStorage.getItem("weilin_prompt_ui_period_conversion")==="true",se=localStorage.getItem("weilin_prompt_ui_bracket_conversion")==="true",he=localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")==="true";localStorage.getItem("weilin_prompt_ui_underscore_to_bracket"),localStorage.getItem("weilin_prompt_ui_comma_conversion")||(localStorage.setItem("weilin_prompt_ui_comma_conversion","true"),M=!0),localStorage.getItem("weilin_prompt_ui_period_conversion")||(localStorage.setItem("weilin_prompt_ui_period_conversion","true"),$=!0),localStorage.getItem("weilin_prompt_ui_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_bracket_conversion","true"),se=!0),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")||(localStorage.setItem("weilin_prompt_ui_angle_bracket_conversion","true"),he=!0),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")||localStorage.setItem("weilin_prompt_ui_underscore_to_bracket","false"),M&&(c.value=c.value.replace(//g,",")),$&&(c.value=c.value.replace(//g,".")),se&&(c.value=c.value.replace(//g,"[").replace(//g,"]").replace(//g,"(").replace(//g,")")),he&&(c.value=c.value.replace(//g,"<").replace(//g,">"));const Re=c.value;let we=[];const $e=f.value.map((lt,mt)=>({token:lt,originalIndex:mt,currentIndex:mt})).filter(({token:lt})=>lt.isHidden);we=((lt,mt=0)=>{let ot=[],Ze=mt,Lt="",St=[];for(;Ze<lt.length;){const rn=lt[Ze];if(rn===`
`){Lt.trim()&&(ot.push(Lt.trim()),Lt=""),ot.push(`
`),Ze++;continue}St.length===0&&rn===","?(Lt.trim()&&ot.push(Lt.trim()),Lt=""):Lt+=rn,Ze++}return Lt.trim()&&(St.length===0?ot.push(...Lt.split(",").filter(Boolean).map(rn=>rn.trim())):ot.push(Lt.trim())),ot})(Re);const Xe=new Map;f.value.forEach((lt,mt)=>{lt.id||(lt.id=E()),Xe.set(mt,lt)});const bt=[];we.forEach(lt=>{if(lt===`
`)bt.push({id:E(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""});else if(lt.trim()){const mt=lt.trim(),ot=/^<wlr:[^:]+:\d+(\.\d+)?:\d+(\.\d+)?>$/.test(mt);let Ze=!1;for(const[Lt,St]of Xe)if(St.text===mt&&!St.isHidden&&!bt.includes(St)){ot&&!St.isLoraTag&&(St.isLoraTag=!0),bt.push(St),Xe.delete(Lt),Ze=!0;break}if(!Ze){for(const[Lt,St]of Xe)if(St.text===mt&&!bt.includes(St)){ot&&!St.isLoraTag&&(St.isLoraTag=!0),bt.push(St),Xe.delete(Lt),Ze=!0;break}}Ze||bt.push({id:E(),text:mt,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:"",isLoraTag:ot})}});const Tt=new Set;$e.forEach(({token:lt,originalIndex:mt})=>{if(Tt.has(lt.id)||(Tt.add(lt.id),bt.some(Lt=>Lt.id===lt.id)))return;let Ze=mt;for(;Ze>bt.length;)Ze--;Ze<0?bt.push(lt):bt.splice(Ze,0,lt)}),f.value=bt,c.value=f.value.length>0?f.value.reduce((lt,mt,ot)=>{var js,xm;if(mt.isHidden)return lt;if(mt.text===`
`){const xo=Ha(ot);return xo!==-1&&f.value[xo],lt+mt.text}if(lt===""){let xo=ot+1;for(;xo<f.value.length&&((js=f.value[xo])!=null&&js.isHidden);)xo++;const tM=xo>=f.value.length,Tm=xo<f.value.length?f.value[xo]:null,nM=tM||Tm&&Tm.text===`
`;return mt.text+(nM?",":"")}let Ze=ot+1;for(;Ze<f.value.length&&((xm=f.value[Ze])!=null&&xm.isHidden);)Ze++;const Lt=Ze>=f.value.length,St=Ze<f.value.length?f.value[Ze]:null,rn=St&&St.text===`
`||Lt,Us=Ha(ot);return Us!==-1&&f.value[Us].text===`
`?lt+mt.text+(rn?",":""):lt+", "+mt.text+(rn?",":"")},""):"",N.value&&clearTimeout(N.value),N.value=setTimeout(()=>{In()},1e3),Wo();const Wn=20;let Yt=0;for(;Yt<f.value.length;){const lt=Math.min(Yt+Wn,f.value.length),mt=[];for(let ot=Yt;ot<lt;ot++)if(f.value[ot].text.length>0&&!f.value[ot].translate){let Ze=f.value[ot].text;const Lt=la(Ze.trim());mt.push(fn.getTranslateLocal(Lt).then(St=>{const rn=St;f.value[ot].translate=rn.translated.translate,f.value[ot].color=rn.translated.color}))}await Promise.all(mt),Yt=lt}r.value=Fa(c.value)},hu=async()=>{let $=0;const se=20;for(;$<f.value.length;){let he=[],Re=[],we=0;for(let $e=$;$e<f.value.length;$e++){const Ie=f.value[$e];if(Ie.translate&&/[a-zA-Z]/.test(Ie.translate)&&!(typeof Ie.text=="string"&&Ie.text.startsWith("<wlr"))){const Xe=Ie.text;if(Xe.length>se){const Tt=JSON.stringify([{index:Ie.id,text:Xe,translate:""}]);await ir(Tt,[Ie.id]),$=$e+1;break}else he.push({index:Ie.id,text:Xe,translate:""}),Re.push(Ie.id),we++}if(we===2)break}if(he.length>0){const $e=JSON.stringify(he);await ir($e)}$+=we>0?we:1}},ir=async(M,$)=>{let se=0;for(;se<2;)try{const he=await fn.translaterText(M,"");if(he&&he.data){const Re=JSON.parse(he.data);for(let we=0;we<Re.length;we++){const $e=Re[we],Ie=f.value.findIndex(Xe=>Xe.id===$e.index);Ie!==-1&&(f.value[Ie].translate=$e.translate)}return!0}return!1}catch{if(se++,se>=2)return!1}return!1},Ho=y(""),In=()=>{const M=c.value.replace(/[\s\t\n]+/g,"");if(T.value.length>0){if(M.length>0){const $=T.value.filter(Re=>!Re.hidden);let se={prompt:c.value,lora:"",temp_prompt:f.value,temp_lora:T.value};$.length>0&&(se.lora=$);const he=JSON.stringify(se);Ho.value!=he&&(Ho.value=he,Bn.saveHistory({tag:he}))}}else if(Ho.value!=c.value){const $={prompt:c.value,lora:"",temp_prompt:f.value,temp_lora:""},se=JSON.stringify($);M.length>0&&Bn.saveHistory({tag:se})}Wo(),V||(C.value=!0)},Wo=()=>{if(T.value.length>0){Ho.value=c.value;const M=T.value.filter(he=>!he.hidden);let $={prompt:c.value,lora:"",temp_prompt:f.value,temp_lora:T.value};M.length>0&&($.lora=M);const se=JSON.stringify($);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:se},"*")}else{Ho.value=c.value;const M={prompt:c.value,lora:"",temp_prompt:f.value,temp_lora:""},$=JSON.stringify(M);window.postMessage({type:"weilin_prompt_ui_prompt_finish_prompt",data:$},"*")}},Ns=(M,$)=>{if(U.value)return;bo.value&&(clearTimeout(bo.value),bo.value=null);const se=$.target.getBoundingClientRect();_.value={top:`${se.top-50}px`,left:`${se.left+se.width/2}px`},g.value=M;const he=f.value[M].text;ze.value=Ba(he),_e.value={top:`${se.bottom+window.scrollY+se.height+10}px`,left:`${se.left+se.width/2}px`},f.value[M].isLoraTag||(ke.value=!0)},Ba=M=>{const $=[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:"<",close:">"}];for(const he of $)if(M.startsWith(he.open)&&M.endsWith(he.close))return Ba(M.slice(1,-1));const se=M.match(/:(\d+(\.\d+)?)$/);return se?parseFloat(se[1]):1},bo=y(null),wo=M=>{bo.value&&clearTimeout(bo.value),bo.value=setTimeout(()=>{v.value||jn(),bo.value=null},100),ke.value=!1},Rs=()=>{v.value=!1,wo(g.value),setTimeout(()=>{v.value||(U.value=!1)},100)},jn=()=>{v.value||(g.value=null)},ur=()=>{if(g.value!==null){const M=g.value;Ds(M),g.value=null,v.value=!1}},cr=()=>{if(g.value!==null){const M=g.value;f.value.splice(M+1,0,{id:E(),text:`
`,translate:"",isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),Mn()}},Ds=M=>{const $=c.value;let se=f.value[M],he=0,Re=-1;for(let we=0;we<M;we++){let $e=$.indexOf(f.value[we].text,he);$e!==-1&&(he=$e+f.value[we].text.length)}if(se.text===`
`||se.text==="	"){for(let we=he;we<$.length;we++)if($[we]===se.text){Re=we;break}}else Re=$.indexOf(se.text,he);if(Re!==-1){const we=se.text===`
`?" ":"",$e=$.substring(0,Re)+we+$.substring(Re+se.text.length);c.value=$e}f.value.splice(M,1),c.value=f.value.length>0?f.value.reduce((we,$e,Ie)=>{var lt,mt;if($e.isHidden)return we;if($e.text===`
`){const ot=Ha(Ie);return ot!==-1&&f.value[ot],we+$e.text}if(we===""){let ot=Ie+1;for(;ot<f.value.length&&((lt=f.value[ot])!=null&&lt.isHidden);)ot++;const Ze=ot>=f.value.length,Lt=ot<f.value.length?f.value[ot]:null,St=Ze||Lt&&Lt.text===`
`;return $e.text+(St?",":"")}let Xe=Ie+1;for(;Xe<f.value.length&&((mt=f.value[Xe])!=null&&mt.isHidden);)Xe++;const bt=Xe>=f.value.length,Tt=Xe<f.value.length?f.value[Xe]:null,Wn=Tt&&Tt.text===`
`||bt,Yt=Ha(Ie);return Yt!==-1&&f.value[Yt].text===`
`?we+$e.text+(Wn?",":""):we+", "+$e.text+(Wn?",":"")},""):"",In(),C.value=!0},vu=(M,$)=>{const se=c.value;let he=0,Re=-1;for(let $e=0;$e<M;$e++){let Ie=se.indexOf(f.value[$e].text,he);Ie!==-1&&(he=Ie+f.value[$e].text.length)}const we=f.value[M].text;if(Re=se.indexOf(we,he),Re!==-1){const $e=$.target.value,Ie=se.substring(0,Re)+$e+se.substring(Re+we.length);c.value=Ie,f.value[M]={...f.value[M],text:$e},In()}},_u=M=>{f.value[M].isPunctuation||(f.value[M].isEditing=!0,setTimeout(()=>{const $=m[M];if($){$.focus();const se=$.value.length;$.setSelectionRange(se,se),dr($),$.addEventListener("input",()=>dr($)),In(),C.value=!0}}))},dr=M=>{const $=document.createElement("span");$.style.visibility="hidden",$.style.position="absolute",$.style.whiteSpace="pre";const se=window.getComputedStyle(M);$.style.font=se.font,$.style.fontSize=se.fontSize,$.style.fontFamily=se.fontFamily,$.style.padding=se.padding,$.style.border=se.border,$.textContent=M.value||M.placeholder||"",document.body.appendChild($);const he=$.offsetWidth;M.style.width=`${Math.max(he+4,20)}px`,document.body.removeChild($)},fr=M=>{f.value[M].isEditing=!1};et(f,M=>{Mn()},{deep:!0}),et(T,M=>{In(),C.value=!0},{deep:!0});const pr=()=>{w.value=!w.value,w.value&&Qe(()=>{var $;const M=A.value.getBoundingClientRect();($=W.value)==null||$.setPosition(M)})},gr=()=>{w.value=!1},Ps=M=>{var $,se;A.value&&!A.value.contains(M.target)&&W.value&&!W.value.$el.contains(M.target)&&gr(),($=a.value)!=null&&$.contains&&((se=s.value)!=null&&se.contains)&&!a.value.contains(M.target)&&!s.value.contains(M.target)&&(q.value=!1)},yu=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openTagManager_prompt"},"*")},bu=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openLoraManager"},"*")},mr=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openHistoryManager"},"*")},Ua=y(!0),ge=()=>{Ua.value=!Ua.value},ce=y(!1),Se=()=>{ce.value=!ce.value};y(null);const Je=()=>{const M=s.value;M&&(M.addEventListener("keyup",At),M.addEventListener("click",At),M.addEventListener("input",At))},At=()=>{q.value&&rr()},Gt=()=>{if(s.value){const M=s.value.style.height||`${s.value.offsetHeight}px`;localStorage.setItem("weilinPromptTextAreaHeight",M)}},ft=()=>{const M=localStorage.getItem("weilinPromptTextAreaHeight");M&&s.value&&(s.value.style.height=M)};ut(()=>{document.addEventListener("click",Ps),window.addEventListener("message",pm),gm(),Je(),Qe(()=>{ft()}),setTimeout(()=>{ne.value||(ne.value=document.querySelector(".tokens-container")),ne.value?(ne.value.removeEventListener("mousedown",Ot),ne.value.removeEventListener("mousemove",ia),ne.value.removeEventListener("mouseup",Qt),ne.value.removeEventListener("mouseleave",Qt),ne.value.addEventListener("mousedown",Ot),ne.value.addEventListener("mousemove",ia),ne.value.addEventListener("mouseup",Qt),ne.value.addEventListener("mouseleave",Qt),ne.value.style.userSelect="none",ne.value.style.cursor="default",console.log("")):console.warn("tokens-container")},100)}),Lo(()=>{ne.value&&(ne.value.removeEventListener("mousedown",Ot),ne.value.removeEventListener("mousemove",ia),ne.value.removeEventListener("mouseup",Qt),ne.value.removeEventListener("mouseleave",Qt)),vr()});const Ot=M=>{if(M.button===0&&!M.ctrlKey&&!M.metaKey){const $=M.target.closest(".token-item-box, .token-item, .lora-tag-icon, .newline-token, .tab-token, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box, .token-controls"),se=ne.value;if(se&&!$){j.value=!1,K.value=!1,oe.value=!1,de.value=!1,Fs(),vr();const he=se.getBoundingClientRect();ee.value={x:Math.max(M.clientX,he.left),y:Math.max(M.clientY,he.top)},Q.value={x:Math.max(M.clientX,he.left),y:Math.max(M.clientY,he.top)},j.value=!0,console.log("")}}},ia=M=>{if(j.value&&ne.value&&!K.value&&Math.sqrt(Math.pow(M.clientX-ee.value.x,2)+Math.pow(M.clientY-ee.value.y,2))>3&&(M.preventDefault(),M.stopPropagation(),K.value=!0,U.value=!0,te.value=[],hr(),console.log("")),K.value&&ne.value){M.preventDefault(),M.stopPropagation();const $=ne.value.getBoundingClientRect();Q.value={x:Math.min(Math.max(M.clientX,$.left),$.right),y:Math.min(Math.max(M.clientY,$.top),$.bottom)};const se=5;Math.abs(Q.value.x-ee.value.x)<se&&(Q.value.x=ee.value.x+se),Math.abs(Q.value.y-ee.value.y)<se&&(Q.value.y=ee.value.y+se),(!oe.value||Date.now()-be.value>100)&&(oe.value=!0,requestAnimationFrame(()=>{cm(),oe.value=!1}));const he=Date.now();!de.value&&he-be.value>kE&&(be.value=he,de.value=!0,requestAnimationFrame(()=>{EI(),de.value=!1}))}},Qt=()=>{if(j.value=!1,K.value){const M=te.value.length;K.value=!1,U.value=!1,oe.value=!1,de.value=!1,vr(),M>0&&LI()}},hr=()=>{try{let M=document.getElementById(Os);M&&document.body.removeChild(M),M=document.createElement("div"),M.id=Os,M.style.cssText=`
      position: fixed;
      background-color: rgba(66, 133, 244, 0.4);
      border: 2px dashed #4285f4;
      box-shadow: 0 0 12px rgba(66, 133, 244, 0.6);
      pointer-events: none;
      z-index: 99999;
      transition: none;
      opacity: 1;
      display: block;
    `,document.body.appendChild(M),console.log(""),cm()}catch(M){console.error(":",M),oe.value=!1}},cm=()=>{try{let M=document.getElementById(Os);if(!M&&K.value&&(hr(),M=document.getElementById(Os),!M))return;const $=Math.min(ee.value.x,Q.value.x),se=Math.min(ee.value.y,Q.value.y),he=Math.abs(Q.value.x-ee.value.x),Re=Math.abs(Q.value.y-ee.value.y),we=5,$e=Math.max(he,we),Ie=Math.max(Re,we);M&&(M.style.left=`${$}px`,M.style.top=`${se}px`,M.style.width=`${$e}px`,M.style.height=`${Ie}px`)}catch(M){console.error(":",M),oe.value=!1}},vr=()=>{try{const M=document.getElementById(Os);M&&document.body.removeChild(M)}catch(M){console.error(":",M)}},EI=()=>{te.value=[];const M=Math.min(ee.value.x,Q.value.x),$=Math.min(ee.value.y,Q.value.y),se=Math.max(ee.value.x,Q.value.x),he=Math.max(ee.value.y,Q.value.y);document.querySelectorAll(".token-item-box").forEach((we,$e)=>{if(!we.querySelector(".token-item, .lora-tag-icon, .newline-token, .tab-token"))return;const Xe=we.getBoundingClientRect();Xe.right>=M&&Xe.left<=se&&Xe.bottom>=$&&Xe.top<=he&&te.value.push($e)}),dm()},dm=()=>{const M=document.querySelectorAll(".token-item-box"),$=[],se=[];M.forEach((he,Re)=>{te.value.includes(Re)?$.push(he):se.push(he)}),$.forEach(he=>{he.classList.add("token-item-box-selected")}),se.forEach(he=>{he.classList.remove("token-item-box-selected"),he.style.border="",he.style.boxShadow="",he.style.backgroundColor=he.dataset.originalBgColor||""})},LI=()=>{if(te.value.length>0){const M=Math.min(ee.value.x,Q.value.x),$=Math.min(ee.value.y,Q.value.y),se=Math.max(ee.value.x,Q.value.x);Math.max(ee.value.y,Q.value.y),xe.value={top:`${$-50}px`,left:`${(M+se)/2}px`},ue.value=!0,setTimeout(()=>{document.addEventListener("click",wu)},0)}},$I=()=>{if(te.value.length===0)return;const se=[...te.value].sort((he,Re)=>he-Re).map(he=>f.value[he].text).join(", ");navigator.clipboard.writeText(se).then(()=>{const he=document.createElement("div");he.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #4caf50;
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      z-index: 999999;
    `,he.textContent="",document.body.appendChild(he),setTimeout(()=>{document.body.removeChild(he)},2e3)}),Fs()},AI=()=>{te.value.length!==0&&(te.value.forEach(M=>{f.value[M]&&!f.value[M].isHidden&&(f.value[M].isHidden=!0,f.value[M].hiddenHint=n("promptBox.hiddenHint"))}),Mn(),In(),Fs())},II=()=>{te.value.length!==0&&(te.value.forEach(M=>{f.value[M]&&f.value[M].isHidden&&(f.value[M].isHidden=!1,f.value[M].hiddenHint="")}),Mn(),In(),Fs())},MI=()=>{te.value.length>0&&(confirm(` ${te.value.length} `)?OI():_r())},Fs=()=>{ue.value=!1,document.removeEventListener("click",wu),_r()},wu=M=>{const $=document.querySelector(".token-controls");$&&!$.contains(M.target)&&Fs()},OI=()=>{if(te.value.length===0)return;[...te.value].sort(($,se)=>se-$).forEach($=>{f.value.splice($,1)}),Mn(),In(),_r()},_r=()=>{document.querySelectorAll(".token-item-box-selected").forEach($=>{$.classList.remove("token-item-box-selected"),$.style.border="",$.style.boxShadow="",$.style.backgroundColor=$.dataset.originalBgColor||""}),te.value=[],ue.value&&(ue.value=!1,document.removeEventListener("click",wu))},fm=M=>{if(te.value.length===0)return;const $=M.target.closest(".token-item-box, .token-item, .token-controls, .delete-btn, .weight-control, .bracket-btn, .translate-button, .tag-tips-box"),se=ne.value;(M.target===s.value||!$&&(!se||!se.contains(M.target)))&&_r()};ut(()=>{document.addEventListener("click",fm)}),Dn(()=>{document.removeEventListener("click",Ps),document.removeEventListener("click",fm),Pa.value&&clearTimeout(Pa.value),window.removeEventListener("message",pm);const M=s.value;M&&(M.removeEventListener("keyup",At),M.removeEventListener("click",At),M.removeEventListener("input",At)),ne.value&&(ne.value.removeEventListener("mousedown",Ot),ne.value.removeEventListener("mousemove",ia),ne.value.removeEventListener("mouseup",Qt),ne.value.removeEventListener("mouseleave",Qt)),vr()});const pm=M=>{if(M.data.type==="weilin_prompt_ui_insertTag"){const $=c.value,se=M.data.tagText;$===""?c.value=se:($.endsWith(" "),c.value=$+", "+se+","),H.value=c.value,Un()}else if(M.data.type==="weilin_prompt_ui_user_history_tag"){const $=M.data.tagText;Ho.value=$,bm($)}else if(M.data.type!=="weilin_prompt_ui_refresh_all_data"){if(M.data.type==="weilin_prompt_ui_translate_setting")gm();else if(M.data.type==="weilin_prompt_ui_selectLora"){if(M.data.lora.loraWorks!=null&&M.data.lora.loraWorks.length>0){const $=c.value,se=M.data.lora.loraWorks;$===""?c.value=se:($.endsWith(" "),c.value=$+", "+se+","),H.value=c.value,Un()}}else if(M.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response")KI(M.data.data);else if(M.data.type==="weilin_prompt_ui_addLoraTag_inner")if(M.data.lora.loraWorks!=null&&M.data.lora.loraWorks.length>0){const $=c.value,se=M.data.lora.tag+(M.data.lora.loraWorks===""?"":", "+M.data.lora.loraWorks);$===""?c.value=se:($.endsWith(" "),c.value=$+", "+se+","),H.value=c.value,Un()}else{const $=c.value,se=M.data.lora.tag;$===""?c.value=se:($.endsWith(" "),c.value=$+", "+se+","),H.value=c.value,Un()}}},gm=async()=>{const M=localStorage.getItem("weilin_prompt_ui_sourceLanguage")||"english",$=localStorage.getItem("weilin_prompt_ui_targetLanguage")||"chinese_simplified";localStorage.getItem("weilin_prompt_ui_sourceLanguage")||localStorage.setItem("weilin_prompt_ui_sourceLanguage",M),localStorage.getItem("weilin_prompt_ui_targetLanguage")||localStorage.setItem("weilin_prompt_ui_targetLanguage",$),M!=="auto"&&Ms.language.setLocal(M),Ms.language.setDefaultTo($),await Qe()},NI=(M,$)=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="network")Ms.request.translateText(M,function(se){if(se.result>0){const he=se.text.map(Re=>Re.replace(/[\[\]]/g,"")).join(", ");$.translate=he}});else{let se={index:$.id,text:$.text,translate:""};const he=JSON.stringify(se);fn.translaterText(he,"").then(Re=>{if(Re&&Re.data){const we=JSON.parse(Re.data);$.translate=we.translate}})}},mm=()=>{if(localStorage.getItem("weilin_prompt_ui_translater_setting")=="network"){var M={from:Ms.language.recognition(F.value).languageName,to:"english",texts:[F.value]};Ms.request.translateText(M,function(se){if(se.result>0){const he=se.text.map(Re=>Re.replace(/[\[\]]/g,"")).join(", ");f.value.push({text:he,translate:F.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),F.value="",Mn()}})}else{let $={text:F.value,translate:""};const se=JSON.stringify($);fn.translaterInputText(se,"").then(he=>{if(he&&he.data){const Re=JSON.parse(he.data);f.value.push({text:Re.translate,translate:F.value,isPunctuation:!1,isEditing:!1,isHidden:!1,color:""}),F.value="",Mn()}})}},RI=()=>{setTimeout(()=>{q.value||(H.value=c.value,Un())},100)},hm=M=>{let $=M.replace(/[\[\]{}]/g,"").trim();const he=la($).trim();if(!he){q.value=!1;return}if(he.length>20){q.value=!1;return}try{const Re=he.toLowerCase();qi.getAutocomplete(String(Re)).then(async we=>{G.value=we.data,await rr(),setTimeout(()=>{ve.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450,ae.value=localStorage.getItem("weilin_prompt_ui_auto_box_height")||350,q.value=G.value.length>0,z.value=0},50)})}catch(Re){console.error("Autocomplete error:",Re),q.value=!1}},DI=M=>{q.value&&(M.key==="ArrowDown"?(M.preventDefault(),z.value=Math.min(z.value+1,G.value.length-1),vm()):M.key==="ArrowUp"?(M.preventDefault(),z.value=Math.max(z.value-1,0),vm()):M.key==="Tab"||M.key==="Enter"?(M.preventDefault(),_m(z.value,null)):M.key==="Escape"&&(M.preventDefault(),ym()))},vm=()=>{Qe(()=>{if(J.value&&a.value){const M=a.value,$=J.value,se=M.getBoundingClientRect(),he=$.getBoundingClientRect(),Re=he.top<se.top,we=he.bottom>se.bottom;Re?M.scrollTop=M.scrollTop+(he.top-se.top):we&&(M.scrollTop=M.scrollTop+(he.bottom-se.bottom))}})},PI=tt(()=>{if(!d.value)return{left:l.value.left};const M=d.value.offsetWidth;ve.value=localStorage.getItem("weilin_prompt_ui_auto_box_width")||450;const $=ve.value;let se=l.value.left;return se+$>M&&(se=M-$),se<0&&(se=0),{left:se}}),_m=(M,$)=>{if($&&($.preventDefault(),$.stopPropagation()),!G.value[M])return;q.value=!1;const se=s.value.selectionStart,he=s.value.selectionEnd,Re=c.value;let we=G.value[M].text;localStorage.getItem("weilin_prompt_ui_comma_conversion")!=="false"&&(we=we.replace(//g,",")),localStorage.getItem("weilin_prompt_ui_period_conversion")!=="false"&&(we=we.replace(//g,".")),localStorage.getItem("weilin_prompt_ui_bracket_conversion")!=="false"&&(we=we.replace(//g,"[").replace(//g,"]").replace(//g,"(").replace(//g,")")),localStorage.getItem("weilin_prompt_ui_angle_bracket_conversion")!=="false"&&(we=we.replace(//g,"<").replace(//g,">")),localStorage.getItem("weilin_prompt_ui_underscore_to_bracket")==="true"&&(we=we.replace(/_/g," ")),localStorage.getItem("weilin_prompt_ui_bracket_escape")==="true"&&(we=we.replace(/\(([^)]+)\)/g,"\\($1\\)"));let $e=se,Ie=he;for(;$e>0&&!/[,\s]/.test(Re[$e-1]);)$e--;for(;!1;)Ie++;let Xe=Re.substring(0,$e)+we+Re.substring(Ie);Re[Ie]&&!/[\,\s]/.test(Re[Ie])&&(Xe=Re.substring(0,$e)+we+", "+Re.substring(Ie));const bt=Re[Ie]&&!/[\,\s]/.test(Re[Ie]),Tt=$e+we.length+(bt?2:0);c.value=Xe,H.value=Xe,Un(),Qe(()=>{s.value&&(s.value.selectionStart=Tt,s.value.selectionEnd=Tt)})},ym=()=>{q.value=!1},bm=M=>{if(M.length>0)try{const $=JSON.parse(M);if(c.value=$.prompt,H.value=c.value,$.lora&&$.lora!=""&&(T.value=$.lora),$.temp_prompt&&$.temp_prompt!=""){const se=$.temp_prompt;let he=!1;se.tokens&&se.tokens.length>0&&se.tokens!=""&&(f.value=se.tokens,he=!0),se.lora&&se.lora.length>0&&se.lora!=""&&(T.value=se.lora,he=!0),!he&&se.length>0&&se!=""&&(f.value=se)}if($.temp_lora&&$.temp_lora.length>0&&$.temp_lora!=""){const se=$.temp_lora;T.value=se}Un()}catch{Z({type:"warn",str:"promptBox.settings.errorPrompt"})}},yr=y(!1),Bs=y(null),Hn=y([]);let ja=null,Vo=null;const FI=(M,$=!1)=>{yr.value=!0,Bs.value=null,Hn.value=[],$&&te.value.length>1&&te.value.includes(M)?Hn.value=[...te.value].sort((se,he)=>se-he):(te.value=[],Bs.value=M),Vo={originalTokens:[...f.value],draggedItems:Hn.value.length>0?Hn.value.map(se=>f.value[se]):[f.value[M]]}},BI=(M,$)=>{if(U.value){$.preventDefault();return}FI(M,!0),$.dataTransfer.effectAllowed="move"},UI=(M,$,se)=>{const he=$.filter($e=>$e<se).length;let Re=Math.max(0,se-he);const we=M.length-$.length;return Re=Math.min(Re,we),Re},wm=M=>{if(!Vo)return;const $=[...Vo.originalTokens],se=Hn.value.length>0?Hn.value:[Bs.value],he=se.map(we=>Vo.originalTokens[we]);for(let we=se.length-1;we>=0;we--){const $e=se[we];$e<$.length&&$.splice($e,1)}const Re=UI(Vo.originalTokens,se,M);if(Vo.draggedItems.forEach((we,$e)=>{$.splice(Re+$e,0,we)}),f.value=$,Mn(),Hn.value.length>0&&te.value.length>0){const we=[];for(let $e=0;$e<$.length;$e++){const Ie=$[$e];he.some(Xe=>Xe.text===Ie.text)&&we.push($e)}te.value=we,setTimeout(()=>{dm()},0)}},jI=(M,$)=>{if(U.value){$.preventDefault();return}$.preventDefault(),yr.value&&(M<0||M>=f.value.length||Hn.value.length>0&&Hn.value.includes(M)||Hn.value.length===0&&Bs.value===M||(ja&&clearTimeout(ja),ja=setTimeout(()=>{wm(M)},EE)))},HI=(M,$)=>{$.preventDefault(),ja&&(clearTimeout(ja),ja=null),yr.value&&Vo&&wm(M),yr.value=!1,Bs.value=null,Hn.value=[],Vo=null},Mn=()=>{c.value=f.value.length>0?f.value.reduce((M,$,se)=>{var Xe,bt;if($.isHidden)return M;if($.text===`
`){const Tt=Ha(se);return Tt!==-1&&f.value[Tt],M+$.text}if(M===""){let Tt=se+1;for(;Tt<f.value.length&&((Xe=f.value[Tt])!=null&&Xe.isHidden);)Tt++;const Wn=Tt>=f.value.length,Yt=Tt<f.value.length?f.value[Tt]:null,lt=Wn||Yt&&Yt.text===`
`;return $.text+(lt?",":"")}let he=se+1;for(;he<f.value.length&&((bt=f.value[he])!=null&&bt.isHidden);)he++;const Re=he>=f.value.length,we=he<f.value.length?f.value[he]:null,$e=we&&we.text===`
`||Re,Ie=Ha(se);return Ie!==-1&&f.value[Ie].text===`
`?M+$.text+($e?",":""):M+", "+$.text+($e?",":"")},""):"",Wo(),V||(C.value=!0)},WI=()=>{window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*")},VI=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank")},zI=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_cloud_window"},"*")},qI=()=>{window.parent.postMessage({type:"weilin_prompt_ui_open_danbooru_manager_window"},"*")},GI=()=>{window.open("https://afdian.com/a/weilin9999","_blank")},Ha=M=>{for(let $=M-1;$>=0;$--)if(!f.value[$].isHidden)return $;return-1},QI=M=>{if(M>=0&&M<f.value.length){if(f.value[M].text===`
`||f.value[M].text==="	")return;f.value[M].isHidden=!f.value[M].isHidden,f.value[M].isHidden?f.value[M].hiddenHint=n("promptBox.hiddenHint"):f.value[M].hiddenHint="",Mn()}},YI=()=>{window.open("https://www.bilibili.com/list/288025756/?sid=4690314&spm_id_from=333.1387.0.0&oid=114342431298474&bvid=BV1txdfYxE7X","_blank")},JI=async()=>{if(u.promptManager=="prompt_global")try{await gn.goRandomTemplate().then(M=>{M.code===200?(c.value=M.random_tags,Qe(()=>{Un()})):Z({type:"warn",str:M.info})}).catch(M=>{console.error(M),Z({type:"warn",str:"message.networkError"})})}catch(M){Z({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",M)}else window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"},"*")},KI=async M=>{try{await gn.goRandomTemplatePath(M).then($=>{$.code===200?(c.value=$.random_tags,Qe(()=>{Un()})):Z({type:"warn",str:$.info})}).catch($=>{console.error($),Z({type:"warn",str:"message.networkError"})})}catch($){Z({type:"warn",str:"message.networkError"}),console.error("Error loading random tag settings:",$)}},xu=y(null),XI=M=>{xu.value&&xu.value.open(M.text,M.translate)},ZI=()=>{o.value.open(u.promptManager)},eM=()=>{c.value="",f.value=[],F.value="",T.value=[],H.value="",Mn()};return t({setPromptText:bm}),(M,$)=>{var se,he,Re;return S(),L(Oe,null,[i("div",vk,[Ve(bl,{name:"weilin-fade"},{default:it(()=>[le.value?(S(),L("div",_k,"")):pe("",!0)]),_:1}),u.promptManager==="prompt"?(S(),wt(W9,{key:0,"is-open":P.value,"selected-loras":T.value,onClose:Y},null,8,["is-open","selected-loras"])):pe("",!0),B.value?(S(),wt(nT,{key:1,ref_key:"mainLabelManagerRef",ref:ie,"selected-id":re.value,onSelect:me},null,8,["selected-id"])):pe("",!0),i("div",{class:Ee(`${SE}main-content`),style:pt({width:R.value})},[i("div",yk,[i("div",bk,[i("button",{class:"tag-manager-btn",onClick:k,title:B.value?"":""},[(S(),L("svg",{class:Ee(["weilin-comfyui-sidebar-toggle-icon",{"is-closed":!B.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},[...$[16]||($[16]=[i("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"},null,-1)])],2)),i("span",xk,h(B.value?"":""),1)],8,wk)]),i("div",Tk,[i("button",{class:"language-switch-btn",onClick:Ke(pr,["stop"]),ref_key:"langBtnRef",ref:A,title:p(n)("controls.language")},[$[17]||($[17]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"translate-icon"},[i("path",{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"})],-1)),i("span",kk,h(p(n)("controls.language")),1)],8,Sk),Ve(bl,{name:"fade"},{default:it(()=>[w.value?(S(),wt(q_,{key:0,ref_key:"languageSwitcherRef",ref:W,onClose:gr},null,512)):pe("",!0)]),_:1})]),i("div",Ck,[Ve(T4,{title:p(n)("controls.switchTheme")},{default:it(({isDark:we})=>[i("span",Ek,h(p(n)(we?"controls.darkMode":"controls.lightMode")),1)]),_:1},8,["title"])]),i("div",Lk,[i("button",{class:"settings-btn",onClick:We,title:p(n)("controls.settings")},[$[18]||($[18]=i("svg",{class:"settings-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})],-1)),i("span",Ak,h(p(n)("controls.settings")),1)],8,$k)]),i("div",Ik,[i("button",{class:"tag-manager-btn",onClick:yu,title:p(n)("controls.tagManager")},[$[19]||($[19]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon"},[i("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),i("span",Ok,h(p(n)("controls.tagManager")),1)],8,Mk)]),i("div",Nk,[i("button",{class:"tag-manager-btn",onClick:qI,title:p(n)("controls.danbooruManager")},[$[20]||($[20]=i("svg",{class:"tag-icon",viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),i("span",Dk,h(p(n)("controls.danbooruManager")),1)],8,Rk)]),u.hasPromptLoraStack?(S(),L("div",Pk,[i("button",{class:"tag-manager-btn",onClick:D,title:p(n)("controls.loraStack")},[$[21]||($[21]=i("svg",{sxmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M902.5 485.1c-59-17.5-113.8-3.4-155 27.7V365.1c0-45.2-36.9-82.1-82.1-82.1H511.2c31.1-41.2 45.2-96 27.7-155C522.2 71.6 475 26.1 418 12 303.4-16.5 200.9 69.4 200.9 179.3c0 39.1 13.5 74.7 35.3 103.7H82.1C36.9 283 0 319.9 0 365.1v113.1c0 25.5 27.9 38.8 49.5 25.3 38.8-24.3 87.8-33.6 139.4-19.5 57 15.6 103.4 62.5 118.4 119.7 30.1 115.5-56.2 219.4-166.8 219.4-33.5 0-64.7-9.6-91.1-26.2C27.8 783.4 0 796.8 0 822.2v113.2c0 45.2 36.9 82.1 82.1 82.1h583.3c45.2 0 82.1-36.9 82.1-82.1V787.7c29 21.9 64.6 35.3 103.7 35.3 109.9 0 195.8-102.5 167.3-217.1-14.1-56.9-59.7-104.1-116-120.8z"})],-1)),i("span",Bk,h(p(n)("controls.loraStack")),1)],8,Fk)])):pe("",!0),i("div",Uk,[i("button",{class:"tag-manager-btn",onClick:bu,title:p(n)("controls.loraManager")},[$[22]||($[22]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),i("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),i("span",Hk,h(p(n)("controls.loraManager")),1)],8,jk)]),i("div",Wk,[i("button",{class:"tag-manager-btn",onClick:mr,title:p(n)("controls.history")},[$[23]||($[23]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M653.7 85.83c-235.05 0-426.29 191.25-426.29 426.3s191.24 426.3 426.29 426.3c235.06 0 426.3-191.25 426.3-426.3S888.76 85.83 653.7 85.83z m0 779.98c-195.01 0-353.67-158.65-353.67-353.68S458.69 158.45 653.7 158.45c195.02 0 353.68 158.65 353.68 353.68S848.72 865.81 653.7 865.81z"}),i("path",{d:"M866.78 634.19L695.93 533.61V302.59c0-20.06-16.26-36.31-36.31-36.31s-36.31 16.26-36.31 36.31v253.66c0 17.06 11.8 31.26 27.66 35.16l178.98 105.36c17.28 10.17 39.54 4.41 49.71-12.87 10.17-17.28 4.4-39.54-12.88-49.71zM44.76 324.51h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31zM231.18 703.25H44.76c-20.05 0-36.31 16.26-36.31 36.31s16.26 36.31 36.31 36.31h186.42c20.05 0 36.31-16.26 36.31-36.31s-16.25-36.31-36.31-36.31zM36.31 550.19h118.8c20.05 0 36.31-16.26 36.31-36.31s-16.26-36.31-36.31-36.31H36.31c-20.05 0-36.31 16.26-36.31 36.31 0 20.06 16.26 36.31 36.31 36.31z"})],-1)),i("span",zk,h(p(n)("controls.history")),1)],8,Vk)]),i("div",qk,[i("button",{class:"tag-manager-btn",onClick:WI,title:p(n)("controls.aiChat")},[$[24]||($[24]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),i("path",{d:"M6 14h12v2H6zm0-3h12v2H6zm0-3h12v2H6z"})],-1)),i("span",Qk,h(p(n)("controls.aiChat")),1)],8,Gk)]),i("div",Yk,[i("button",{class:"tag-manager-btn",onClick:VI,title:p(n)("controls.github")},[$[25]||($[25]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)),i("span",Kk,h(p(n)("controls.github")),1)],8,Jk)]),i("div",Xk,[i("button",{class:"tag-manager-btn",onClick:zI,title:p(n)("controls.shareCloudData")},[$[26]||($[26]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})],-1)),i("span",eC,h(p(n)("controls.shareCloudData")),1)],8,Zk)]),i("div",tC,[i("button",{class:"tag-manager-btn",onClick:YI,title:p(n)("controls.tutorialVideo")},[$[27]||($[27]=i("svg",{t:"1745234292993",class:"tag-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1496",width:"128",height:"128"},[i("path",{d:"M204.288 63.488c-8.704 8.192-16.896 20.48-18.944 26.624-3.584 11.776 12.8 62.464 20.48 62.464S235.52 176.128 235.52 184.32c0 16.384-17.92 26.112-47.104 26.112-34.816 0-104.448 27.648-128.512 51.2-9.216 8.704-26.112 33.792-37.888 56.32L0 358.4v469.504l21.504 40.448c24.576 47.616 35.84 59.392 82.944 84.992l40.96 22.528h722.944l40.96-19.968c51.712-24.576 72.704-45.056 95.744-94.72l17.92-38.4v-231.424l0.512-231.424-17.92-36.352c-9.216-20.48-28.16-47.104-42.496-59.904-31.232-30.208-86.528-54.272-122.368-54.272-54.272 0-65.024-22.528-26.624-57.856 20.48-18.432 23.04-25.088 23.04-45.568 0-19.968-3.584-28.16-16.896-41.984-9.216-9.216-22.528-16.896-29.696-16.896-11.776 0-34.304 9.216-40.448 16.896-1.536 1.536-35.84 35.328-75.776 74.24l-73.216 71.168-83.456-0.512c-45.568 0-88.064-2.56-93.696-4.608-5.632-2.56-38.4-31.232-72.704-65.024C249.856 40.448 235.008 32.256 204.288 63.488z m652.8 262.656c5.12 0.512 19.968 9.216 31.744 20.48l21.504 19.968 1.536 217.088c1.024 197.12 0.512 218.112-8.704 236.032-14.336 27.136-34.816 40.448-65.536 41.984-14.336 0.512-173.568 0.512-353.28 0l-326.144-1.536-45.056-45.056V373.248l20.992-22.528c15.872-17.92 25.6-23.552 41.984-25.088 16.384-1.024 634.88-0.512 680.96 0.512z","p-id":"1497"}),i("path",{d:"M279.04 502.272c-20.48 22.016-20.992 25.088-20.992 66.56 0 39.936 1.024 44.544 17.92 64 29.184 33.28 55.808 32.256 84.48-2.56 11.264-12.8 12.8-22.016 13.312-64 0-47.104-0.512-48.64-19.968-68.096-27.136-27.648-47.616-26.112-74.752 4.096z m393.216-3.584c-18.944 18.944-19.968 20.992-19.968 69.12 0 47.616 0.512 49.664 18.432 67.072 24.576 23.552 35.84 26.624 58.368 13.824 29.184-16.896 39.936-43.52 36.864-90.624-2.56-35.328-4.608-41.984-22.016-59.904-25.088-25.6-45.568-25.6-71.68 0.512z","p-id":"1498"})],-1)),i("span",oC,h(p(n)("controls.tutorialVideo")),1)],8,nC)]),i("div",aC,[i("button",{class:"tag-manager-btn",onClick:GI,title:p(n)("controls.sponsor")},[$[28]||($[28]=i("svg",{t:"1745823985128",class:"tag-icon",viewBox:"0 0 1322 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},[i("path",{d:"M495.899049 634.906371c-17.304811 0-31.251971 13.947161-31.251971 31.251971S478.594238 697.410314 495.899049 697.410314c17.304811 0 31.251971-13.947161 31.251971-31.251972 0-17.304811-13.947161-31.251971-31.251971-31.251971zM790.855671 728.662285c-17.304811 0-31.251971 13.947161-31.251972 31.251971s13.947161 31.251971 31.251972 31.251972 31.251971-13.947161 31.251971-31.251972c0-17.04653-13.947161-30.993691-31.251971-31.251971z"}),i("path",{d:"M1262.99289 719.622459c-13.430599-8.264984-28.927445-13.430599-44.68257-14.980284 34.867902-84.974368 57.080047-196.293374-18.596215-306.837537-115.193217-168.657333-280.75118-256.73107-491.766556-260.863562-60.179416-1.291404-130.948343 1.549685-205.849762 4.649054-87.040614 3.35765-203.008673 8.006703-281.526023 1.549684 15.755126-8.523265 32.543375-16.788249 47.007098-23.761829 55.530362-27.119479 98.921529-48.04022 84.457807-85.232649-7.748423-21.695583-30.218848-33.059937-67.411277-34.09306C206.624604-1.755689 37.967271 43.443443 7.748423 119.636265c-17.04653 42.874605-19.887618 125.524447 152.902206 198.876182 71.027208 30.218848 271.969635 66.894715 349.453861 74.643138 17.563091 1.549685 34.867902 5.165615 51.397871 11.364353-17.821372 11.622634-35.901025 24.02011-54.238959 36.417586-31.768533-18.079653-83.941245-39.516955-122.683358-13.172318-14.463722 9.298107-23.503549 25.053233-24.02011 42.358044-0.516562 21.179022 12.397476 42.099763 26.861198 58.629731-57.080047 45.715694-103.312302 89.881703-119.84227 123.974762-18.337934 41.841482-25.828075 110.544163 8.523265 177.438879 43.391167 84.974368 138.955046 144.120661 284.625391 176.147474 190.352916 41.583202 354.619476 4.132492 463.355674-53.205835 60.437697-32.026814 103.570583-69.994085 124.233043-103.828864 6.457019 2.066246 12.914038 4.132492 19.629338 6.198738 9.298107 2.841088 18.596214 5.682177 27.37776 8.781546 28.669164 10.072949 60.695977 8.523265 85.232649-3.61593l1.291403-0.774843c17.821372-9.039826 31.510252-25.053233 37.708991-44.166009 15.238565-51.139589-29.444006-79.033911-56.563486-96.08044z m-811.776412-239.684541l-17.30481 12.655757c-5.165615-5.165615-9.814669-11.106072-13.430599-17.563091 6.7153-2.066246 18.337934 0.258281 30.735409 4.907334zM1262.99289 798.139808c-1.291404 3.874211-4.132492 6.97358-9.298107 9.814669-10.33123 5.165615-25.569795 5.423896-39.258675 0.774842-9.298107-3.35765-19.371057-6.457019-29.444006-9.556388-18.596214-5.682177-49.848186-15.238565-55.788643-22.470426-9.814669-12.914038-28.152602-15.755126-41.32492-5.940457s-15.755126 28.152602-5.940458 41.324921c3.615931 4.390773 7.490142 8.264984 12.139196 11.622634-44.940851 62.245662-242.267348 186.220424-521.468844 125.007885-125.782728-27.636041-210.498815-77.742507-244.850155-145.412065-24.794952-48.815063-19.112776-98.921529-7.231861-126.299289 34.09306-71.027208 280.75118-234.518925 438.30244-327.241716 13.947161-8.264984 18.596214-26.344637 10.33123-40.291798s-27.119479-19.629337-40.291797-10.33123c-12.655757 7.490142-55.788643 33.059937-111.060725 68.186119-18.596214-12.655757-50.881309-27.894322-102.537459-33.059936-81.874999-8.264984-270.936512-44.42429-332.149051-70.252366C139.471608 245.418993 40.033517 196.34565 61.987381 141.073568c5.165615-12.914038 29.185725-33.576498 81.100157-53.464116 35.384463-13.430599 72.318611-22.470426 109.769321-27.119479l-11.622634 5.682176c-35.384463 17.304811-73.868296 36.417586-99.954652 59.146293-1.807965-1.033123-3.615931-2.324527-5.165615-3.874211-10.847792-11.622634-29.185725-12.397476-41.06664-1.291404l-0.516562 0.516561c-11.880915 11.106072-12.139195 29.702287-1.033123 41.583202 10.589511 11.106072 26.086356 19.371057 45.715694 25.569795 0.774842 0.258281 1.291404 0.516562 2.066246 0.774842 68.702681 21.179022 190.611197 18.596214 362.367899 11.622634 74.126577-2.841088 144.120661-5.682177 202.492111-4.649054 193.710566 3.874211 339.122631 80.841876 444.75946 235.552049 64.828469 95.047318 41.583202 188.544951 4.390773 269.903388-4.649054-3.615931-9.039826-7.748423-12.655757-12.139195-10.33123-12.397476-28.669164-14.463722-41.324921-4.649054-12.655757 10.072949-14.722003 28.669164-4.649054 41.324921 5.940457 7.490142 36.675867 42.874605 74.643138 39.775236h2.066246c1.291404-0.258281 2.324527 0 3.615931-0.258281 25.828075-4.649054 42.358044-3.615931 57.596608 6.198738 20.40418 12.914038 30.218848 20.40418 28.410883 26.861199z"})],-1)),i("span",lC,h(p(n)("controls.sponsor")),1)],8,sC)]),Ve(Dp,{ref_key:"settingDialog",ref:x},null,512),i("div",rC,[i("button",{class:Ee(["update-label-btn",{"is-dirty":C.value}]),disabled:!re.value||!C.value,onClick:X},"  ",10,iC)])]),i("div",{style:{position:"relative"},ref_key:"parentCneterBox",ref:d},[ye(i("textarea",{"onUpdate:modelValue":$[0]||($[0]=we=>c.value=we),class:"input-area",onInput:ra,placeholder:p(n)("promptBox.placeholder"),onKeydown:DI,onBlur:RI,rows:"6",ref_key:"inputAreaRef",ref:s,onMouseup:Gt,onResize:Gt},null,40,uC),[[Ae,c.value]]),i("div",cC,h(r.value)+" tokens ",1),i("div",{class:"autocomplete-container",ref_key:"autocompleteContainerRef",ref:a,style:pt({top:`${l.value.top}px`,left:`${PI.value.left}px`,display:q.value?"block":"none",width:`${ve.value}px`,maxHeight:`${ae.value}px`})},[i("button",{class:"close-autocomplete-btn",onClick:Ke(ym,["stop"])},""),(S(!0),L(Oe,null,He(G.value,(we,$e)=>(S(),L("div",{key:$e,class:Ee(["autocomplete-item",{selected:$e===z.value}]),onClick:Ke(Ie=>_m($e,Ie),["stop"]),ref_for:!0,ref:Ie=>{Ie&&$e===z.value&&(J.value=Ie)}},[i("span",fC,h(we.text),1),i("span",pC,h(we.desc),1)],10,dC))),128))],4)],512),i("div",gC,[i("div",mC,[ye(i("input",{type:"text","onUpdate:modelValue":$[1]||($[1]=we=>F.value=we),class:"prompt-input-translate-area-textarea",onKeyup:$[2]||($[2]=on(we=>mm(),["enter"])),placeholder:p(n)("promptBox.translatePlaceholder")},null,40,hC),[[Ae,F.value]]),i("button",{class:"translate-btn",style:{"margin-left":"8px"},onClick:$[3]||($[3]=we=>mm())},"  ")]),i("button",{class:"translate-btn",onClick:hu,title:p(n)("promptBox.oneClickTranslate")},[$[29]||($[29]=i("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[i("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),i("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)),i("span",_C,h(p(n)("promptBox.oneClickTranslate")),1)],8,vC),i("button",{class:"translate-btn random-tag-settings-btn",onClick:ZI,title:p(n)("promptBox.randomTagSettings")},[$[30]||($[30]=i("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[i("path",{d:"M512 409.6c-56.32 0-102.4 46.08-102.4 102.4s46.08 102.4 102.4 102.4 102.4-46.08 102.4-102.4-46.08-102.4-102.4-102.4z m0 153.6c-28.16 0-51.2-23.04-51.2-51.2s23.04-51.2 51.2-51.2 51.2 23.04 51.2 51.2-23.04 51.2-51.2 51.2z"}),i("path",{d:"M512 204.8c-25.6 0-51.2 2.56-76.8 7.68l-15.36-61.44c-2.56-10.24-10.24-17.92-20.48-20.48-10.24-2.56-20.48 0-28.16 7.68l-76.8 76.8c-5.12 5.12-7.68 12.8-7.68 20.48s2.56 15.36 7.68 20.48l76.8 76.8c5.12 5.12 12.8 7.68 20.48 7.68 2.56 0 5.12 0 7.68-2.56 10.24-2.56 17.92-10.24 20.48-20.48l15.36-61.44c25.6-5.12 51.2-7.68 76.8-7.68 140.8 0 256 115.2 256 256s-115.2 256-256 256-256-115.2-256-256c0-25.6 2.56-51.2 7.68-76.8l61.44-15.36c10.24-2.56 17.92-10.24 20.48-20.48 2.56-10.24 0-20.48-7.68-28.16l-76.8-76.8c-5.12-5.12-12.8-7.68-20.48-7.68s-15.36 2.56-20.48 7.68l-76.8 76.8c-7.68 7.68-10.24 17.92-7.68 28.16 2.56 10.24 10.24 17.92 20.48 20.48l61.44 15.36c-5.12 25.6-7.68 51.2-7.68 76.8 0 168.96 138.24 307.2 307.2 307.2s307.2-138.24 307.2-307.2-138.24-307.2-307.2-307.2z"})],-1)),i("span",bC,h(p(n)("promptBox.randomTagSettings")),1)],8,yC),i("button",{class:"translate-btn random-tag-btn",onClick:JI,title:p(n)("promptBox.oneClickRandomTag")},[$[31]||($[31]=i("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"utils-item-icon",width:"24",height:"24"},[i("path",{d:"M832 512c0-176-144-320-320-320S192 336 192 512s144 320 320 320 320-144 320-320z m-384 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m128-128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 256c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m-128 128c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z m256 0c0-35.2 28.8-64 64-64s64 28.8 64 64-28.8 64-64 64-64-28.8-64-64z"})],-1)),i("span",xC,h(p(n)("promptBox.oneClickRandomTag")),1)],8,wC),i("button",{class:"translate-btn clear-all-btn",onClick:eM,title:p(n)("promptBox.oneClickCleanAll")},[$[32]||($[32]=i("svg",{class:"utils-item-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1605",width:"24",height:"24"},[i("path",{d:"M716.8 338.944H307.2v-102.4a76.8 76.8 0 0 1 76.8-76.8h256a77.312 77.312 0 0 1 76.8 76.8z m-358.4-51.2h307.2v-51.2a26.112 26.112 0 0 0-25.6-25.6h-256a25.6 25.6 0 0 0-25.6 25.6zM702.464 856.576H321.536A65.024 65.024 0 0 1 256 791.04V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a14.336 14.336 0 0 0 13.824 14.336h380.928a14.848 14.848 0 0 0 14.336-14.336V406.528a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v384.512a65.536 65.536 0 0 1-65.024 65.536z"}),i("path",{d:"M432.128 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a25.6 25.6 0 0 1 25.6-25.6 26.112 26.112 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),i("path",{d:"M593.408 678.912a25.6 25.6 0 0 1-25.6-25.6v-220.16a26.112 26.112 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v220.16a25.6 25.6 0 0 1-25.6 25.6z"}),i("path",{d:"M828.416 338.944H196.096a25.6 25.6 0 0 1-25.6-25.6 25.6 25.6 0 0 1 25.6-25.6h632.32a25.6 25.6 0 0 1 25.6 25.6 25.6 25.6 0 0 1-25.6 25.6z"})],-1)),i("span",SC,h(p(n)("promptBox.oneClickCleanAll")),1)],8,TC)]),f.value.length>0?(S(),L("div",kC,[(S(!0),L(Oe,null,He(f.value,(we,$e)=>(S(),L(Oe,{key:"tag-item-"+$e},[i("div",{class:Ee(["token-item-box",{"token-item-box-disabled":we.isHidden}]),draggable:!we.isEditing,onDragstart:Ie=>BI($e,Ie),onDragover:Ke(Ie=>jI($e,Ie),["prevent"]),onDrop:Ie=>HI($e,Ie),onDblclick:Ie=>QI($e),style:pt({backgroundColor:we.color})},[we.text===`
`?(S(),L("div",EC,[i("span",{class:"token-symbol",title:p(n)("promptBox.newline")},"",8,LC)])):we.text==="	"?(S(),L("div",{key:1,class:"token-item tab-token",onMouseenter:Ie=>Ns($e,Ie),onMouseleave:Ie=>wo()},[i("span",{class:"token-symbol",title:p(n)("promptBox.tab")},"",8,AC)],40,$C)):we.isLoraTag?(S(),L("div",{key:2,class:"lora-tag-icon",title:p(n)("promptBox.loraTag"),onMouseenter:Ie=>Ns($e,Ie),onMouseleave:Ie=>wo()},[$[33]||($[33]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"15",height:"15"},[i("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"})],-1)),i("span",MC,h(we.text),1)],40,IC)):we.text&&!we.isLoraTag?(S(),L("div",{key:3,class:Ee(["token-item",{punctuation:we.isPunctuation}]),onMouseenter:Ie=>Ns($e,Ie),onMouseleave:Ie=>wo()},[!we.isEditing||we.isPunctuation?(S(),L("span",{key:0,onClick:Ie=>!we.isPunctuation&&_u($e)},h(we.text),9,NC)):we.isPunctuation?pe("",!0):(S(),L("input",{key:1,value:we.text,onInput:Ie=>vu($e,Ie),onBlur:Ie=>fr($e),onKeyup:on(Ie=>fr($e),["enter"]),ref_for:!0,ref:Ie=>{Ie&&(m[$e]=Ie)}},null,40,RC)),i("button",{class:"quick-delete-btn",onClick:Ke(Ie=>Ds($e),["stop"]),title:p(n)("promptBox.delete"),style:{"margin-left":"4px"}},[...$[34]||($[34]=[i("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",fill:"#ff4d4f70"})],-1)])],8,DC)],42,OC)):pe("",!0),we.text!==`
`&&we.text!=="	"&&!we.isLoraTag?(S(),L("div",PC,[mn(we.text)?(S(),L("div",{key:0,onClick:Ie=>NI(we.text,we),class:"translate-button",title:p(n)("promptBox.translate")},[...$[35]||($[35]=[i("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",class:"token-item-icon",width:"24",height:"24"},[i("path",{d:"M677.676657 294.6142c19.165116 57.5433 44.715939 102.2992 89.431879 147.0551 38.322239-38.3622 63.873063-89.5118 83.038178-147.0551h-172.470057z m-421.56861 319.685h166.076358l-83.038179-223.7795-83.038179 223.7795z","p-id":"2419"}),i("path",{d:"M894.854661 0.504H128.353929C58.095158 0.504 0.607803 58.0473 0.607803 128.378v767.244c0 70.3307 57.487355 127.874 127.746126 127.874h766.500733c70.258771 0 127.746126-57.5433 127.746126-127.874V128.378c0-70.3307-51.101647-127.874-127.746126-127.874zM581.867062 825.2913c-12.771416 12.7874-25.550824 12.7874-38.322239 12.7874-6.3937 0-19.165116 0-25.550824-6.3937-6.3937-6.3937-12.779408 0-12.779408-6.3937s-6.385708-12.7874-12.771415-25.5748c-6.3937-12.7874-6.3937-19.1811-12.779408-31.9685l-25.542832-70.3307H230.557224L205.0064 767.748c-12.771416 25.5748-19.165116 44.7559-25.550824 57.5433-6.3937 12.7874-19.165116 12.7874-38.322239 12.7874-12.779408 0-25.550824-6.3937-38.330231-12.7874-12.771416-12.7874-19.157124-19.1811-19.157124-31.9685 0-6.3937 0-12.7874 6.385708-25.5748 6.3937-12.7874 6.3937-19.1811 12.771416-31.9685l140.525533-358.0472c6.3937-12.7874 6.3937-25.5748 12.779408-38.3622 6.385708-12.7874 12.771416-25.5748 19.157124-31.9685 6.3937-6.3937 12.779408-19.1811 25.550823-25.5748 12.779408-6.3937 25.550824-6.3937 38.330232-6.3937 12.771416 0 25.542832 0 38.322239 6.3937 12.771416 6.3937 19.165116 12.7874 25.550824 25.5748 6.385708 6.3937 12.771416 19.1811 19.157124 31.9685 6.3937 12.7874 12.779408 25.5748 19.165115 44.7559l140.525534 351.6535c12.771416 25.5748 19.165116 44.7559 19.165116 57.5433-6.3937 6.3937-12.779408 19.1811-19.165116 31.9685zM933.176901 575.937c-70.258771-25.5748-121.360418-57.5433-166.076358-95.9055-44.707947 44.7559-102.195302 76.7244-172.462065 95.9055l-19.157124-31.9685c70.258771-19.1811 127.746126-44.7559 172.462066-89.5118C703.22748 409.7008 664.905241 352.1575 652.125833 288.2205h-63.873063v-25.5748h172.470058c-12.7874-19.1811-25.558816-44.7559-38.330232-63.937l19.157124-6.3937c12.779408 19.1811 31.944524 44.7559 44.715939 70.3307h159.682658v31.9685h-63.873063c-19.157124 63.937-51.093655 121.4803-89.423887 159.8425 44.715939 38.3622 95.809594 70.3307 166.076358 89.5118l-25.550824 31.9685z","p-id":"2420"})],-1)])],8,FC)):pe("",!0),i("span",BC,h(we.translate?we.translate:""),1)])):pe("",!0)],46,CC),we.text===`
`?(S(),L("div",UC)):pe("",!0)],64))),128))])):pe("",!0),ke.value?(S(),L("div",{key:1,class:"tag-tips-box",style:pt(_e.value)},[i("div",jC,[i("p",{innerHTML:p(n)("promptBox.tagTips")},null,8,HC)])],4)):pe("",!0),ye(i("div",{class:"token-controls",style:pt(_.value),onMouseenter:$[14]||($[14]=we=>v.value=!0),onMouseleave:Rs},[(se=f.value[g.value])!=null&&se.isLoraTag?pe("",!0):(S(),L("div",WC,[ye(i("input",{type:"number","onUpdate:modelValue":$[4]||($[4]=we=>ze.value=we),step:"0.1",class:"weight-input",onChange:rt},null,544),[[Ae,ze.value]]),i("span",VC,h(p(n)("promptBox.weight")),1)])),(he=f.value[g.value])!=null&&he.isLoraTag?(S(),L("div",zC,[i("div",qC,[ye(i("input",{type:"number","onUpdate:modelValue":$[5]||($[5]=we=>dt.value=we),step:"0.1",class:"weight-input",onChange:Fe},null,544),[[Ae,dt.value]]),i("span",GC,h(p(n)("promptBox.modelWeight")),1)]),i("div",QC,[ye(i("input",{type:"number","onUpdate:modelValue":$[6]||($[6]=we=>Ht.value=we),step:"0.1",class:"weight-input",onChange:Fe},null,544),[[Ae,Ht.value]]),i("span",YC,h(p(n)("promptBox.textWeight")),1)])])):pe("",!0),i("button",{class:"favour-btn",onClick:$[7]||($[7]=we=>XI(f.value[g.value])),title:p(n)("promptBox.favour")},[...$[36]||($[36]=[i("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[i("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",fill:"#FFD700"})],-1)])],8,JC),i("button",{onClick:ur,class:"delete-btn",title:p(n)("promptBox.delete")},[...$[37]||($[37]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],8,KC),(Re=f.value[g.value])!=null&&Re.isLoraTag?pe("",!0):(S(),L("div",XC,[i("div",ZC,[$[38]||($[38]=i("div",{class:"bracket-btn"}," () ",-1)),i("div",eE,[i("button",{class:"vertical-btn",onClick:$[8]||($[8]=we=>Le("(")),title:p(n)("promptBox.addBracket")}," + ",8,tE),i("button",{class:"vertical-btn",onClick:$[9]||($[9]=we=>Ce("(")),title:p(n)("promptBox.removeLayer")}," - ",8,nE)])]),i("div",oE,[$[39]||($[39]=i("div",{class:"bracket-btn"}," [] ",-1)),i("div",aE,[i("button",{class:"vertical-btn",onClick:$[10]||($[10]=we=>Le("[")),title:p(n)("promptBox.addBracket")}," + ",8,sE),i("button",{class:"vertical-btn",onClick:$[11]||($[11]=we=>Ce("[")),title:p(n)("promptBox.removeLayer")}," - ",8,lE)])]),i("div",rE,[$[40]||($[40]=i("div",{class:"bracket-btn"}," {} ",-1)),i("div",iE,[i("button",{class:"vertical-btn",onClick:$[12]||($[12]=we=>Le("{")),title:p(n)("promptBox.addBracket")}," + ",8,uE),i("button",{class:"vertical-btn",onClick:$[13]||($[13]=we=>Ce("{")),title:p(n)("promptBox.removeLayer")}," - ",8,cE)])])])),i("button",{class:"line-token-btn",onClick:cr,title:p(n)("promptBox.addLineToken"),style:{"margin-left":"8px"}},[...$[41]||($[41]=[i("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[i("path",{d:"M5 19h14v-2H5v2zm0-7h14v-2H5v2zm0-7v2h14V5H5z",fill:"#888"}),i("path",{d:"M7 17v-2h2v2H7zm0-7V8h2v2H7zm0-7V3h2v2H7z",fill:"#4285f4"})],-1)])],8,dE)],36),[[ds,g.value!==null&&f.value[g.value]]]),i("div",fE,[ye(i("div",{class:"token-controls",style:pt(xe.value),onMouseenter:$[15]||($[15]=we=>v.value=!0),onMouseleave:Rs},[i("div",pE,[i("div",gE," "+h(te.value.length)+" ",1),i("div",{class:"weilin-comfyui-selection-actions-buttons"},[i("button",{class:"delete-btn copy-btn",onClick:$I,title:""},[...$[42]||($[42]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})],-1)])]),i("button",{class:"delete-btn",onClick:AI,title:""},[...$[43]||($[43]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"#ff4d4f","stroke-width":"2"}),i("path",{d:"M8.5 8.5l7 7",stroke:"#ff4d4f","stroke-width":"2","stroke-linecap":"round"})],-1)])]),i("button",{class:"delete-btn enable-btn",onClick:II,title:""},[...$[44]||($[44]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)])]),i("button",{class:"delete-btn",onClick:MI,title:""},[...$[45]||($[45]=[i("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])])])])],36),[[ds,ue.value]]),i("div",{class:"tag-manager-header",onClick:Se},[i("div",mE,[$[46]||($[46]=i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",class:"tag-icon",width:"24",height:"24"},[i("path",{d:"M129 128h350v80H209v224h270v80H129V128zM129 895V576h768v319H129z m80-239v159h608V656H209zM730 356c19.882 0 36-16.118 36-36s-16.118-36-36-36-36 16.118-36 36 16.118 36 36 36z"}),i("path",{d:"M578.517 214.386a32.002 32.002 0 0 0-16.01 27.731l0.058 155.918a31.998 31.998 0 0 0 16 27.701l135.156 78.033a32.002 32.002 0 0 0 31.99 0.006l135.058-77.909a32.002 32.002 0 0 0 16.01-27.731l-0.058-155.918a32 32 0 0 0-16-27.701l-135.157-78.033a31.998 31.998 0 0 0-31.989-0.005l-135.058 77.908z m67.002 58.058l84.033-48.591 84.181 48.715 0.034 95.24-84.034 48.591-84.18-48.714-0.034-95.241z"})],-1)),i("span",hE,h(p(n)("controls.loraManager")),1)]),i("div",vE,[(S(),L("svg",{class:Ee(["collapse-icon",{"is-collapsed":!ce.value}]),viewBox:"0 0 24 24"},[...$[47]||($[47]=[i("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)])],2))])]),ye(i("div",_E,[Ve(Kg,{loraManager:"prompt_inner"})],512),[[ds,ce.value]])]),i("div",yE,[i("div",{class:"tag-manager-header",onClick:ge},[i("div",bE,[$[48]||($[48]=i("svg",{class:"tag-icon",viewBox:"0 0 24 24"},[i("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),i("span",wE,h(p(n)("controls.tagManager")),1)]),i("div",xE,[(S(),L("svg",{class:Ee(["collapse-icon",{"is-collapsed":!Ua.value}]),viewBox:"0 0 24 24"},[...$[49]||($[49]=[i("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1)])],2))])]),ye(i("div",TE,[Ve(Hg)],512),[[ds,Ua.value]])])],6)]),Ve(qS,{ref_key:"randomSettingItem",ref:o},null,512),Ve(hk,{ref_key:"favourItemRef",ref:xu},null,512)],64)}}},[["__scopeId","data-v-fde3d588"]]),$E={class:"container"},AE={class:"tab-container"},IE={key:0},ME={class:"search-container"},OE=["placeholder"],NE=["title"],RE=["title","disabled"],DE=["title"],PE={class:"history-list"},FE={class:"action-buttons"},BE=["onClick","title"],UE=["onClick","title"],jE=["onClick","title"],HE=["value"],WE={key:1},VE={class:"search-container"},zE=["placeholder"],qE=["title"],GE=["title"],QE=["title","disabled"],YE=["title"],JE={class:"history-list"},KE={key:0,class:"favor-name"},XE={class:"action-buttons"},ZE=["onClick","title"],eL=["onClick","title"],tL=["onClick","title"],nL=["value"],oL={key:2,class:"weilin-tools-dialog-overlay"},aL={class:"weilin-tools-dialog-header"},sL={class:"weilin-tools-dialog-body"},lL={class:"form-group"},rL=["placeholder"],iL={class:"form-group"},uL=["placeholder"],cL={class:"form-group"},dL={class:"color-picker"},fL={class:"color-controls"},pL={class:"alpha-control"},gL={class:"alpha-value"},mL={class:"weilin-tools-dialog-footer"},hL={key:3,class:"weilin-tools-dialog-overlay"},vL={class:"weilin-tools-dialog-header"},_L={class:"weilin-tools-dialog-body"},yL={class:"confirm-message"},bL={class:"weilin-tools-dialog-footer"},wL=yt({__name:"history_index",setup(e){const{t}=_t(),o=y(""),n=y([]),a=y([]),s=y([]),l=y([]),r=y("history"),u=y([]),d=y(!1),c=y(!1),f=y(!1),m=y({hex:"rgba(255, 123, 2, .4)",alpha:100}),g=y({name:"",tag:"",color:"rgba(255, 123, 2, .4)"}),v=y(!1),_=y(0),w=O=>JSON.parse(O).prompt,x=O=>({hex:"#FFFFFF",alpha:0}),A=O=>{const{hex:B,alpha:k}=x();m.value={hex:B,alpha:k}},W=()=>{f.value=!1,g.value={id:"",name:"",tag:"",backgroundColor:"transparent"},A(),d.value=!0},T=O=>{const B=O.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(B){const[,k,E,D,Y]=B,ie=`#${((1<<24)+(parseInt(k)<<16)+(parseInt(E)<<8)+parseInt(D)).toString(16).slice(1)}`,re=Y?Math.round(parseFloat(Y)*100):100;return{hex:ie,alpha:re}}return{hex:"#FF7B02",alpha:50}},P=O=>{f.value=!0,g.value={...O},m.value=T(O.color),d.value=!0},q=()=>{const O=ne(m.value.hex,m.value.alpha);g.value.color=O},G=()=>{d.value=!1,g.value={name:"",tag:"",color:"rgba(255, 123, 2, .4)"},f.value=!1},z=y(""),J=y(null),ve=tt(()=>{if(!J.value)return"";switch(z.value){case"history":return t("history.deleteHistoryConfirm",{name:J.value.tag});case"favorite":return t("history.deleteFavoriteConfirm",{name:J.value.tag});case"deleteSelected":return t("history.confirmDeleteSelected");case"deleteSelectedFavorite":return t("history.confirmDeleteSelected");default:return""}}),ae=O=>{z.value="history",J.value=O,c.value=!0},F=O=>{z.value="favorite",J.value=O,c.value=!0},K=()=>{v.value=!1,_.value=0,z.value="deleteSelected",J.value=u.value,c.value=!0},ee=()=>{v.value=!1,_.value=0,z.value="deleteSelectedFavorite",J.value=u.value,c.value=!0},Q=async()=>{try{switch(z.value){case"history":Bn.deleteHistory(J.value.id_index).then(O=>{ue(),Z({type:"success",str:"message.deleteSuccess"})}).catch(O=>{Z({type:"warn",str:"message.networkError"})});break;case"favorite":Bn.deleteFavorite(J.value.id_index).then(O=>{xe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.deleteSuccess"})}).catch(O=>{Z({type:"warn",str:"message.networkError"})});break;case"deleteSelected":Bn.batchDeleteHistory(u.value).then(O=>{ue(),Z({type:"success",str:"message.deleteSuccess"})}).catch(O=>{Z({type:"warn",str:"message.networkError"})});break;case"deleteSelectedFavorite":Bn.batchDeleteFavorite(J.value).then(O=>{xe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.deleteSuccess"})}).catch(O=>{Z({type:"warn",str:"message.networkError"})});break}U()}catch{Z({type:"warn",str:"message.networkError"})}},te=O=>{O.target.checked?r.value==="history"?u.value=n.value.map(B=>B.id_index):u.value=s.value.map(B=>B.id_index):u.value=[]},ne=(O,B)=>{const k=parseInt(O.slice(1,3),16),E=parseInt(O.slice(3,5),16),D=parseInt(O.slice(5,7),16);return`rgba(${k}, ${E}, ${D}, ${B/100})`},U=()=>{c.value=!1,z.value="",J.value=null},j=()=>{if(!g.value.tag){Z({type:"warn",str:"history.dialog.tag_placeholder"});return}f.value?Bn.editFavorite({id_index:g.value.id_index,name:g.value.name,tag:g.value.tag,color:g.value.color}).then(O=>{xe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.editSuccess"})}).catch(O=>{Z({type:"warn",str:"message.networkError"})}):Bn.addFavorite({name:g.value.name,tag:g.value.tag,color:g.value.color}).then(O=>{xe(),window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),Z({type:"success",str:"message.addSuccess"})}).catch(O=>{Z({type:"warn",str:"message.networkError"})}),G()},ue=()=>{Bn.getHistory({}).then(O=>{n.value=O.data,a.value=n.value}).catch(O=>{Z({type:"warn",str:"message.networkError"})})},xe=()=>{Bn.getFavorite().then(O=>{s.value=O.data,l.value=s.value}).catch(O=>{Z({type:"warn",str:"message.networkError"})})},oe=()=>{a.value=n.value.filter(O=>O.tag.includes(o.value))},de=()=>{l.value=s.value.filter(O=>O.tag.includes(o.value))},be=()=>{ue()},ke=()=>{xe()},_e=O=>{Bn.addFavorite({tag:O.tag}).then(B=>{B.code===200?(window.postMessage({type:"weilin_prompt_ui_refresh_all_data"},"*"),xe(),Z({type:"success",str:"message.addFavoriteSuccess"})):Z({type:"success",str:"message.addFavoriteIsExist"})}).catch(B=>{Z({type:"warn",str:"message.networkError"})})},I=O=>{window.postMessage({type:"weilin_prompt_ui_user_history_tag",tagText:O.tag},"*")},N=()=>{u.value=[],v.value=!0},H=()=>{u.value=[],v.value=!1,_.value=0};return ut(()=>{ue(),xe()}),(O,B)=>(S(),L("div",$E,[i("h1",null,h(r.value==="history"?p(t)("history.title"):p(t)("history.favorites")),1),i("div",AE,[i("button",{class:Ee([{active:r.value==="history"},"tab-button"]),onClick:B[0]||(B[0]=k=>r.value="history")},h(p(t)("history.history")),3),i("button",{class:Ee([{active:r.value==="favorites"},"tab-button"]),onClick:B[1]||(B[1]=k=>r.value="favorites")},h(p(t)("history.favorites")),3)]),r.value==="history"?(S(),L("div",IE,[i("div",ME,[i("button",{class:"refresh-btn",onClick:be},[...B[14]||(B[14]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),ye(i("input",{type:"text","onUpdate:modelValue":B[2]||(B[2]=k=>o.value=k),placeholder:p(t)("history.search_placeholder"),onInput:oe,class:"search-input"},null,40,OE),[[Ae,o.value]]),v.value?ye((S(),L("input",{key:0,type:"checkbox","onUpdate:modelValue":B[3]||(B[3]=k=>_.value=k),value:1,class:"tag-checkbox",onChange:te},null,544)),[[Ft,_.value]]):pe("",!0),v.value?pe("",!0):(S(),L("button",{key:1,class:"bulk-delete-btn",onClick:N,title:p(t)("history.bulk_delete")},[...B[15]||(B[15]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,NE)),v.value?(S(),L("button",{key:2,class:"bulk-delete-btn",onClick:K,title:p(t)("history.sure_delete"),disabled:u.value.length===0},[...B[16]||(B[16]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)])],8,RE)):pe("",!0),v.value?(S(),L("button",{key:3,class:"bulk-delete-btn",onClick:H,title:p(t)("history.cancel_delete")},[...B[17]||(B[17]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),i("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)])],8,DE)):pe("",!0)]),i("ul",PE,[(S(!0),L(Oe,null,He(a.value,k=>(S(),L("li",{key:k.id_index,class:"history-item"},[i("span",null,h(w(k.tag)),1),i("div",FE,[i("button",{onClick:E=>_e(k),class:"favorite-btn",title:p(t)("history.add_to_favorites")},[...B[18]||(B[18]=[i("svg",{viewBox:"0 0 24 24",width:"24",height:"24",class:"favorite-icon"},[i("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])],8,BE),i("button",{onClick:E=>ae(k),class:"delete-favorite-btn",title:p(t)("history.delete_history")},[...B[19]||(B[19]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[i("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,UE),i("button",{onClick:E=>I(k),class:"use-btn",title:p(t)("history.use_item")},[...B[20]||(B[20]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[i("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)])],8,jE),v.value?ye((S(),L("input",{key:0,type:"checkbox","onUpdate:modelValue":B[4]||(B[4]=E=>u.value=E),value:k.id_index,class:"tag-checkbox"},null,8,HE)),[[Ft,u.value]]):pe("",!0)])]))),128))])])):(S(),L("div",WE,[i("div",VE,[i("button",{class:"refresh-btn",onClick:ke},[...B[21]||(B[21]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"refresh-icon"},[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),ye(i("input",{type:"text","onUpdate:modelValue":B[5]||(B[5]=k=>o.value=k),placeholder:p(t)("history.search_placeholder"),onInput:de,class:"search-input"},null,40,zE),[[Ae,o.value]]),v.value?ye((S(),L("input",{key:0,type:"checkbox","onUpdate:modelValue":B[6]||(B[6]=k=>_.value=k),value:1,class:"tag-checkbox",onChange:te},null,544)),[[Ft,_.value]]):pe("",!0),i("button",{class:"add-his-btn",onClick:W,title:p(t)("history.add_new")},[...B[22]||(B[22]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"add-icon"},[i("path",{d:"M19 11h-6V5c0-.55-.45-1-1-1s-1 .45-1 1v6H5c-.55 0-1 .45-1 1s.45 1 1 1h6v6c0 .55.45 1 1 1s1-.45 1-1v-6h6c.55 0 1-.45 1-1s-.45-1-1-1z"})],-1)])],8,qE),v.value?pe("",!0):(S(),L("button",{key:1,class:"bulk-delete-btn",onClick:N,title:p(t)("history.bulk_delete")},[...B[23]||(B[23]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,GE)),v.value?(S(),L("button",{key:2,class:"bulk-delete-btn",onClick:ee,title:p(t)("history.sure_delete"),disabled:u.value.length===0},[...B[24]||(B[24]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M392.533333 806.4L85.333333 503.466667l59.733334-59.733334 247.466666 247.466667L866.133333 213.333333l59.733334 59.733334L392.533333 806.4z"})],-1)])],8,QE)):pe("",!0),v.value?(S(),L("button",{key:3,class:"bulk-delete-btn",onClick:H,title:p(t)("history.cancel_delete")},[...B[25]||(B[25]=[i("svg",{viewBox:"0 0 1024 1024",width:"16",height:"16",class:"delete-favorite-icon"},[i("path",{d:"M794.8 794.8c-14 14-36.9 14-50.9 0L229.2 280.1c-14-14-14-36.9 0-50.9s36.9-14 50.9 0L794.9 744c13.9 13.9 13.9 36.8-0.1 50.8z"}),i("path",{d:"M794.8 229.2c14 14 14 36.9 0 50.9L280.1 794.8c-14 14-36.9 14-50.9 0s-14-36.9 0-50.9L744 229.1c13.9-13.9 36.8-13.9 50.8 0.1z"})],-1)])],8,YE)):pe("",!0)]),i("ul",JE,[(S(!0),L(Oe,null,He(l.value,k=>(S(),L("li",{key:k.id_index,class:"history-item"},[i("div",{class:"favor-name-box",style:pt({backgroundColor:k.color||"transparent"})},[k.name.length>0?(S(),L("span",KE,h(k.name),1)):pe("",!0)],4),i("span",null,h(w(k.tag)),1),i("div",XE,[i("button",{onClick:E=>P(k),class:"delete-favorite-btn",title:p(t)("history.edit_favorite")},[...B[26]||(B[26]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[i("path",{d:"M200.59 626.48v129.5h129.5l381.93-381.93-129.5-129.5-381.93 381.93z m611.56-352.57c13.45-13.41 13.48-35.18 0.07-48.62l-0.07-0.07-80.81-80.81c-13.41-13.45-35.18-13.48-48.62-0.07l-0.07 0.07-63.19 63.19 129.5 129.5 63.19-63.19zM131.52 824.96h759.71c23.02 0 34.53 11.51 34.53 34.53 0 23.02-11.51 34.53-34.53 34.53H131.52c-23.02 0-34.53-11.51-34.53-34.53 0-23.02 11.51-34.53 34.53-34.53z","p-id":"2346"})],-1)])],8,ZE),i("button",{onClick:E=>F(k),class:"delete-favorite-btn",title:p(t)("history.delete_favorite")},[...B[27]||(B[27]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"delete-favorite-icon"},[i("path",{d:"M907.618072 232.742353 744.713682 232.742353 744.713682 116.382952c0-12.852708-10.419786-23.272495-23.272495-23.272495L302.556765 93.110457c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 116.360425L116.380904 232.743377c-12.852708 0-23.272495 10.419786-23.272495 23.272495s10.418762 23.272495 23.272495 23.272495l791.237168 0c12.852708 0 23.272495-10.419786 23.272495-23.272495S920.469756 232.742353 907.618072 232.742353zM325.829259 139.654423l372.340458 0 0 93.08793L325.829259 232.742353 325.829259 139.654423zM791.257647 372.362985c-12.852708 0-23.272495 10.418762-23.272495 23.272495l0 488.712146L256.012799 884.347625 256.012799 395.635479c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 511.983617c0 12.852708 10.418762 23.272495 23.272495 23.272495l558.516318 0c12.852708 0 23.272495-10.419786 23.272495-23.272495L814.529118 395.635479C814.529118 382.782771 804.110355 372.362985 791.257647 372.362985zM442.189684 767.987201l0-372.351721c0-12.852708-10.418762-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.418762 23.272495 23.272495 23.272495S442.189684 780.839909 442.189684 767.987201zM628.353257 767.987201l0-372.351721c0-12.852708-10.419786-23.272495-23.272495-23.272495s-23.272495 10.418762-23.272495 23.272495l0 372.351721c0 12.852708 10.419786 23.272495 23.272495 23.272495S628.353257 780.839909 628.353257 767.987201z"})],-1)])],8,eL),i("button",{onClick:E=>I(k),class:"use-btn",title:p(t)("history.use_favorite")},[...B[28]||(B[28]=[i("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",class:"use-icon"},[i("path",{d:"M915.515273 142.819385 98.213046 458.199122c-46.058539 17.772838-44.90475 43.601756 2.348455 57.622994l197.477685 58.594874 80.292024 238.91085c10.51184 31.277988 37.972822 37.873693 61.462483 14.603752l103.584447-102.611545 204.475018 149.840224c26.565749 19.467242 53.878547 9.222132 61.049613-23.090076l149.210699-672.34491C965.264096 147.505054 946.218922 130.971848 915.515273 142.819385zM791.141174 294.834331l-348.61988 310.610267c-6.268679 5.58499-11.941557 16.652774-12.812263 24.846818l-15.390659 144.697741c-1.728128 16.24808-7.330491 16.918483-12.497501 1.344894l-67.457277-203.338603c-2.638691-7.954906 0.975968-17.705389 8.022355-21.931178l442.114555-265.181253C812.67481 268.984974 815.674251 272.975713 791.141174 294.834331z","p-id":"18085"})],-1)])],8,tL),v.value?ye((S(),L("input",{key:0,type:"checkbox","onUpdate:modelValue":B[7]||(B[7]=E=>u.value=E),value:k.id_index,class:"tag-checkbox"},null,8,nL)),[[Ft,u.value]]):pe("",!0)])]))),128))])])),d.value?(S(),L("div",oL,[i("div",{class:"weilin-tools-dialog-content",onMousedown:B[12]||(B[12]=Ke(()=>{},["stop"]))},[i("div",aL,[i("h2",null,h(f.value?p(t)("history.dialog.edit_tag"):p(t)("history.dialog.add_tag")),1),i("button",{class:"close-btn",onClick:G},"")]),i("div",sL,[i("div",lL,[i("label",null,h(p(t)("history.dialog.name")),1),ye(i("input",{type:"text","onUpdate:modelValue":B[8]||(B[8]=k=>g.value.name=k),placeholder:p(t)("history.dialog.name_placeholder")},null,8,rL),[[Ae,g.value.name]])]),i("div",iL,[i("label",null,h(p(t)("history.dialog.tag")),1),ye(i("textarea",{"onUpdate:modelValue":B[9]||(B[9]=k=>g.value.tag=k),placeholder:p(t)("history.dialog.tag_placeholder"),rows:"4"},"                        ",8,uL),[[Ae,g.value.tag]])]),i("div",cL,[i("label",null,h(p(t)("history.dialog.background_color")),1),i("div",dL,[i("div",{class:"color-preview",style:pt({backgroundColor:O.previewColor})},null,4),i("div",fL,[ye(i("input",{type:"color","onUpdate:modelValue":B[10]||(B[10]=k=>m.value.hex=k),onInput:q,class:"color-input"},null,544),[[Ae,m.value.hex]]),i("div",pL,[ye(i("input",{type:"range","onUpdate:modelValue":B[11]||(B[11]=k=>m.value.alpha=k),min:"0",max:"100",onInput:q,class:"alpha-slider"},null,544),[[Ae,m.value.alpha,void 0,{number:!0}]]),i("span",gL,h(m.value.alpha)+"%",1)])])])])]),i("div",mL,[i("button",{class:"cancel-btn",onClick:G},h(p(t)("common.cancel")),1),i("button",{class:"confirm-btn",onClick:j},h(p(t)("common.confirm")),1)])],32)])):pe("",!0),c.value?(S(),L("div",hL,[i("div",{class:"weilin-tools-dialog-content confirm-weilin-tools-dialog",onMousedown:B[13]||(B[13]=Ke(()=>{},["stop"]))},[i("div",vL,[i("h2",null,h(p(t)("common.confirmDelete")),1),i("button",{class:"close-btn",onClick:U},"")]),i("div",_L,[i("p",yL,h(ve.value),1)]),i("div",bL,[i("button",{class:"cancel-btn",onClick:U},h(p(t)("common.cancel")),1),i("button",{class:"delete-btn",onClick:Q},h(p(t)("common.delete")),1)])],32)])):pe("",!0)]))}},[["__scopeId","data-v-d9f9b5c3"]]),xL={key:0,class:"drop-zone"},TL={key:1,class:"preview-container"},SL=["srcdoc"],kL={class:"action-buttons"},nm="weilin_tools_",CL=yt({__name:"tranToWeb",emits:["close","update"],setup(e,{expose:t,emit:o}){const{t:n}=_t(),a=y(!1),s=y(""),l=y(null),r={tranToWeb:{visible:!1,position:{x:150,y:150},size:{width:800,height:600}}},d=y((()=>{try{const z=localStorage.getItem(`${nm}tranToWebState`);if(z){const J=JSON.parse(z),ve={...r};return J.tranToWeb&&(ve.tranToWeb={...r.tranToWeb,...J.tranToWeb}),ve}}catch(z){console.error("Error loading window states:",z)}return{...r}})());et(d,z=>{try{localStorage.setItem(`${nm}tranToWebState`,JSON.stringify(z))}catch(J){console.error("Error saving window states:",J)}},{deep:!0}),ut(()=>{Ue.registerWindow("tranToWeb")}),Dn(()=>{Ue.unregisterWindow("tranToWeb")});const c=z=>{a.value=!1},f=(z,J)=>{d.value[z]&&(d.value[z].position={...J})},m=(z,J)=>{d.value[z]&&(d.value[z].size={...J})},g=()=>{a.value=!0,Ue.setActiveWindow("tranToWeb")},v=z=>{z.dataTransfer.dropEffect="copy"},_=z=>{const J=z.dataTransfer.files[0];J&&J.type.startsWith("image/")&&x(J)},w=z=>{const J=z.clipboardData.items;for(let ve=0;ve<J.length;ve++)if(J[ve].type.startsWith("image/")){const ae=J[ve].getAsFile();x(ae);break}},x=z=>{const J=new FileReader;J.onload=ve=>{const ae=ve.target.result,F=btoa(ae);l.value=F,A()},J.readAsDataURL(z)},A=()=>{s.value=`
        <!DOCTYPE html>
        <html>
        <head>
            <title>WeiLin Comfyui Tools - Image to HTML</title>
            <style>
                body { margin: 0; padding: 0; }
                img { max-width: 100%; height: auto; }
            </style>
            <script>
                window.onload = function() {
                    // 
                    try {
                        const encryptedData = "${l.value}";
                        const originalData = atob(encryptedData);
                        document.getElementById('decrypted-img').src = originalData;
                        document.getElementById('decrypted-img').style.display = 'block';
                    } catch(e) {
                        console.error(':', e);
                        document.body.innerHTML = '<p></p>';
                    }
                };
            <\/script>
        </head>
        <body>
            <img id="decrypted-img" style="display:none;" />
        </body>
        </html>
    `},W=()=>{const z=new Blob([s.value],{type:"text/html"}),J=URL.createObjectURL(z),ve=document.createElement("a");ve.href=J,ve.download="image-to-html.html",document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(J)},T=()=>{s.value="",l.value=null},P=y(null),q=()=>{s.value||P.value.click()},G=z=>{const J=z.target.files[0];J&&J.type.startsWith("image/")&&x(J)};return t({open:g}),(z,J)=>a.value?(S(),wt(Sn,{key:0,title:p(n)("utils.tranToWeb"),position:d.value.tranToWeb.position,size:d.value.tranToWeb.size,"z-index":p(Ue).getZIndex("tranToWeb"),"onUpdate:position":J[0]||(J[0]=ve=>f("tranToWeb",ve)),"onUpdate:size":J[1]||(J[1]=ve=>m("tranToWeb",ve)),onActive:J[2]||(J[2]=ve=>p(Ue).setActiveWindow("tranToWeb")),onClose:J[3]||(J[3]=ve=>c())},{default:it(()=>[i("div",{class:"utils_tran_web__content",onDragover:Ke(v,["prevent"]),onDrop:Ke(_,["prevent"]),onPaste:w,onClick:q},[s.value?(S(),L("div",TL,[i("iframe",{srcdoc:s.value,class:"html-preview"},null,8,SL),i("div",kL,[i("button",{onClick:W},h(p(n)("utils.downloadHtml")),1),i("button",{onClick:T},h(p(n)("utils.clear")),1)])])):(S(),L("div",xL,h(p(n)("utils.dropOrPasteImage")),1)),i("input",{type:"file",ref_key:"fileInput",ref:P,style:{display:"none"},accept:"image/*",onChange:G},null,544)],32)]),_:1},8,["title","position","size","z-index"])):pe("",!0)}},[["__scopeId","data-v-aaebcad3"]]),EL=["onMouseenter","onMouseleave","onMousedown","onMouseup"],LL=yt({__name:"FloatingBall",setup(e){const{t}=_t(),o=y(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1),n=y(parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66),a=y(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||n.value),s=y(localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default"),l=y(localStorage.getItem("weilin_prompt_ui_customSkinUrl")||""),r=y(localStorage.getItem("weilin_prompt_ui_bgType")||"gradient"),u=y(localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb"),d=y(localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc"),c=y(localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50);o.value<1&&(o.value=1,localStorage.setItem("weilin_prompt_ui_floatingBallCount",o.value)),n.value<5&&(n.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallSize",n.value)),a.value<5&&(a.value=66,localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",a.value)),localStorage.getItem("weilin_prompt_ui_floatingBallCount")||localStorage.setItem("weilin_prompt_ui_floatingBallCount",o.value),localStorage.getItem("weilin_prompt_ui_floatingBallSize")||localStorage.setItem("weilin_prompt_ui_floatingBallSize",n.value),localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize")||localStorage.setItem("weilin_prompt_ui_floatingBallHeightSize",n.value);const f=y([]),m=y([]),g=y([]),v=y([]),_=y(null),w=tt(()=>v.value.map(ae=>{const F={...ae};return s.value==="custom"&&l.value?(F.backgroundImage=`url(${l.value})`,F.backgroundSize="contain",F.backgroundRepeat="no-repeat",F.backgroundPosition="center",F.imageRendering="optimizeQuality"):r.value==="gradient"?F.background=`linear-gradient(135deg, ${u.value}, ${d.value})`:F.background="transparent",F.borderRadius=`${c.value}%`,F}));for(let ae=0;ae<o.value;ae++){g.value[ae]=!1,m.value[ae]=!1;const F=window.innerWidth,K=window.innerHeight,ee=n.value,Q=a.value,te=10,ne=Math.floor(F/(ee+te)),U=Math.floor(ae/ne);let ue=20+ae%ne*(ee+te),xe=K-100-U*(Q+te);ue=Math.max(0,ue),ue=Math.min(ue,F-ee),xe=Math.max(0,xe),xe=Math.min(xe,K-Q),f.value[ae]={x:ue,y:xe,width:ee+"px",height:Q+"px"},v.value[ae]={left:`${f.value[ae].x}px`,top:`${f.value[ae].y}px`,width:`${ee}px`,height:`${Q}px`}}const x=(ae,F)=>{ae.target.closest(".weilin_prompt_ui_floating-ball")&&(m.value[F]=!0,document.addEventListener("mousemove",ee=>A(ee,F)),document.addEventListener("mouseup",ee=>W(ee,F)))},A=(ae,F)=>{if(m.value[F]){const K=window.innerWidth,ee=window.innerHeight,Q=n.value,te=a.value;let ne=ae.clientX-Q/2,U=ae.clientY-te/2;ne=Math.max(0,ne),ne=Math.min(ne,K-Q),U=Math.max(0,U),U=Math.min(U,ee-te),f.value[F]={x:ne,y:U,width:Q+"px",height:te+"px"},v.value[F]={left:`${f.value[F].x}px`,top:`${f.value[F].y}px`,width:`${Q}px`,height:`${te}px`}}},W=(ae,F)=>{m.value[F]=!1,document.removeEventListener("mousemove",K=>A(K,F)),document.removeEventListener("mouseup",K=>W(K,F))},T=()=>{},P=ae=>{switch(ae){case"item1":window.parent.postMessage({type:"weilin_prompt_ui_open_global_prompt_box"},"*");break;case"item2":window.parent.postMessage({type:"weilin_prompt_ui_open_global_tag_manager"},"*");break;case"item3":window.parent.postMessage({type:"weilin_prompt_ui_open_global_lora_manager"},"*");break;case"item4":window.parent.postMessage({type:"weilin_prompt_ui_openAiWindow"},"*");break;case"item5":window.parent.postMessage({type:"weilin_prompt_ui_restore_window"},"*");break;case"item6":window.parent.postMessage({type:"weilin_prompt_ui_open_node_list_window"},"*");break;case"item7":G();break;case"item8":_.value.open();break}},q=y(),G=()=>{q.value.open()},z=ae=>{if(ae.data.type==="weilin_prompt_ui_floating_ball_setting"){o.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallCount"))||1,n.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallSize"))||66,a.value=parseInt(localStorage.getItem("weilin_prompt_ui_floatingBallHeightSize"))||n.value,s.value=localStorage.getItem("weilin_prompt_ui_ballSkinType")||"default",l.value=localStorage.getItem("weilin_prompt_ui_customSkinUrl")||"",r.value=localStorage.getItem("weilin_prompt_ui_bgType")||"gradient",u.value=localStorage.getItem("weilin_prompt_ui_gradientColor1")||"#6a11cb",d.value=localStorage.getItem("weilin_prompt_ui_gradientColor2")||"#2575fc",c.value=localStorage.getItem("weilin_prompt_ui_ballBorderRadius")||50,g.value=[],m.value=[],f.value=[],v.value=[];for(let F=0;F<o.value;F++){g.value[F]=!1,m.value[F]=!1;const K=window.innerWidth,ee=window.innerHeight,Q=n.value,te=a.value,ne=10,U=Math.floor(K/(Q+ne)),j=Math.floor(F/U);let xe=20+F%U*(Q+ne),oe=ee-100-j*(te+ne);xe=Math.max(0,xe),xe=Math.min(xe,K-Q),oe=Math.max(0,oe),oe=Math.min(oe,ee-te),f.value[F]={x:xe,y:oe,width:Q+"px",height:te+"px"},v.value[F]={left:`${f.value[F].x}px`,top:`${f.value[F].y}px`,width:`${Q}px`,height:`${te}px`,...s.value==="custom"&&l.value?{backgroundImage:`url(${l.value})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}:r.value==="gradient"?{background:`linear-gradient(135deg, ${u.value}, ${d.value})`}:{background:"transparent"},borderRadius:`${c.value}%`}}}},J=ae=>{g.value[ae]=!0},ve=ae=>{g.value[ae]=!1};return ut(()=>{window.addEventListener("message",z)}),Dn(()=>{window.removeEventListener("message",z),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",W)}),(ae,F)=>(S(),L(Oe,null,[(S(!0),L(Oe,null,He(o.value,K=>(S(),L("div",{class:"weilin_prompt_ui_floating-ball",style:pt(w.value[K-1]),onMouseenter:ee=>J(K-1),onMouseleave:ee=>ve(K-1),onMousedown:ee=>x(ee,K-1),onMouseup:ee=>W(ee,K-1),key:"floating-ball-"+K},[i("div",{class:"weilin_prompt_ui_ball-content",onClick:T},h(s.value==="default"?"WeiLin":""),1),g.value[K-1]?(S(),L("div",{key:0,class:"weilin_prompt_ui_menu-container",onMousedown:F[8]||(F[8]=Ke(()=>{},["stop"]))},[i("div",{class:"weilin_prompt_ui_menu-item",onClick:F[0]||(F[0]=ee=>P("item1"))},h(p(t)("floatingBall.promptBox")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:F[1]||(F[1]=ee=>P("item2"))},h(p(t)("floatingBall.tagManager")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:F[2]||(F[2]=ee=>P("item3"))},h(p(t)("floatingBall.loraManager")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:F[3]||(F[3]=ee=>P("item4"))},h(p(t)("floatingBall.aiWindow")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:F[4]||(F[4]=ee=>P("item6"))},h(p(t)("floatingBall.openNodeListWindow")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:F[5]||(F[5]=ee=>P("item7"))},h(p(t)("floatingBall.tranToWeb")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:F[6]||(F[6]=ee=>P("item8"))},h(p(t)("floatingBall.openSetting")),1),i("div",{class:"weilin_prompt_ui_menu-item",onClick:F[7]||(F[7]=ee=>P("item5"))},h(p(t)("floatingBall.restoreWindow")),1)],32)):pe("",!0)],44,EL))),128)),Ve(CL,{ref_key:"tranToWebRef",ref:q},null,512),Ve(Dp,{ref_key:"settingDialog",ref:_},null,512)],64))}},[["__scopeId","data-v-660fe17c"]]),$L={class:"ai-chat-window"},AL={class:"history-sidebar"},IL={class:"history-list"},ML=["onClick"],OL={key:0},NL=["onKeyup","onBlur"],RL={class:"item-actions"},DL=["onClick"],PL=["onClick"],FL={class:"chat-main"},BL={class:"message-list"},UL={class:"message-content"},jL={key:0,class:"message assistant"},HL={class:"message-content"},WL={class:"input-area"},VL=["placeholder","onKeydown"],zL=["disabled"],qL=yt({__name:"ai_window",setup(e){const{t}=_t(),o=y([]),n=y(-1),a=y(""),s=y(!1),l=y({}),r=y(!1),u=y(""),d=P=>{var q;o.value[P]&&(r.value=!0,u.value=((q=o.value[P])==null?void 0:q.title)||` ${P+1}`,n.value=P)},c=P=>{o.value[P]&&(u.value.trim()&&(o.value[P].title=u.value.trim(),x()),r.value=!1)},f=()=>{r.value=!1},m=()=>{Cs.getOpenAiSetting().then(P=>{l.value=P.data}).catch(P=>{Z({type:"warn",str:"message.networkError"})})};ut(()=>{m()});const g=tt(()=>o.value[n.value]||{messages:[]}),v=P=>{n.value=P},_=()=>{s.value=!0;const P={title:` ${o.value.length+1}`,messages:[],createdAt:new Date().toISOString()};return o.value.push(P),n.value=o.value.length-1,x(),s.value=!1,P},w=()=>{const P=localStorage.getItem("aiChatHistory");P&&(o.value=JSON.parse(P))},x=()=>{localStorage.setItem("aiChatHistory",JSON.stringify(o.value))};ut(()=>{m(),w()});const A=async()=>{if(!a.value.trim()||s.value)return;(o.value.length===0||n.value===-1)&&_();const P={role:"user",content:a.value,timestamp:new Date().toISOString()};g.value.messages.push(P),x(),a.value="";const q={role:"assistant",content:"",timestamp:new Date().toISOString()};g.value.messages.push(q),x(),s.value=!0;try{await T({messages:g.value.messages},G=>{const z=g.value.messages[g.value.messages.length-1];z.content+=G.content,x()},G=>{console.error("Error:",G);const z=g.value.messages[g.value.messages.length-1];z.content="",x()},()=>{s.value=!1,x()})}catch(G){console.error("Error:",G),s.value=!1;const z=g.value.messages[g.value.messages.length-1];z.content="",x()}},W=P=>{o.value.splice(P,1),n.value===P&&(n.value=Math.max(0,P-1)),x()},T=async(P,q,G,z)=>{var J,ve;try{const ae=await fetch(l.value.base_url+"/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.value.api_key}`},body:JSON.stringify({model:l.value.model,messages:P.messages,stream:!0})});if(!ae.ok)throw new Error(`HTTP error! status: ${ae.status}`);const F=ae.body.getReader(),K=new TextDecoder;let ee="";for(;;){const{done:Q,value:te}=await F.read();if(Q){z();break}ee+=K.decode(te,{stream:!0});const ne=ee.split(`
`);ee=ne.pop();for(const U of ne)if(U.trim()!==""){if(U==="data: [DONE]"){z();return}try{const j=U.replace(/^data: /,""),xe=((ve=(J=JSON.parse(j).choices[0])==null?void 0:J.delta)==null?void 0:ve.content)||"";xe&&q({content:xe})}catch{console.error("Failed to parse message:",U)}}}}catch(ae){G(ae)}};return(P,q)=>(S(),L("div",$L,[i("div",AL,[i("button",{class:"new-chat-btn",onClick:_},h(p(t)("aiWindow.newChat")),1),i("div",IL,[(S(!0),L(Oe,null,He(o.value,(G,z)=>(S(),L("div",{key:z,class:Ee(["history-item",{active:n.value===z}]),onClick:J=>v(z)},[!r.value||n.value!==z?(S(),L("span",OL,h((G==null?void 0:G.title)||p(t)("aiWindow.chatName")+` ${z+1}`),1)):ye((S(),L("input",{key:1,"onUpdate:modelValue":q[0]||(q[0]=J=>u.value=J),onKeyup:[on(J=>c(z),["enter"]),on(f,["esc"])],onBlur:J=>c(z),class:"rename-input"},null,40,NL)),[[Ae,u.value]]),i("div",RL,[i("button",{class:"rename-btn",onClick:Ke(J=>d(z),["stop"])},"",8,DL),r.value?pe("",!0):(S(),L("button",{key:0,class:"delete-btn",onClick:Ke(J=>W(z),["stop"])},"",8,PL))])],10,ML))),128))])]),i("div",FL,[i("div",BL,[(S(!0),L(Oe,null,He(g.value.messages,(G,z)=>(S(),L("div",{key:z,class:Ee(["message",G.role])},[i("div",UL,[i("pre",null,h(G.content),1)])],2))),128)),s.value?(S(),L("div",jL,[i("div",HL,[i("pre",null,h(p(t)("aiWindow.thinking")),1)])])):pe("",!0)]),i("div",WL,[ye(i("textarea",{class:"ai-chat-textarea","onUpdate:modelValue":q[1]||(q[1]=G=>a.value=G),placeholder:p(t)("aiWindow.inputMessage"),onKeydown:on(Ke(A,["exact","prevent"]),["enter"])},null,40,VL),[[Ae,a.value]]),i("button",{class:"ai-chat-btn",onClick:A,disabled:s.value},h(p(t)("aiWindow.send")),9,zL)])])]))}},[["__scopeId","data-v-0cea2906"]]),GL={class:"lora-info"},QL={class:"lora-header"},YL=["title"],JL={class:"lora-weights"},KL={class:"weight-item"},XL=["title"],ZL={class:"weight-item"},e$={class:"center-box"},t$=["onClick"],ar="weilin_prompt_ui_",n$=yt({__name:"index",setup(e){const{t}=_t(),o=y([]);window.addEventListener("message",a=>{a.data.type==="weilin_prompt_ui_update_node_list_info"&&(o.value=a.data.nodeList)});const n=a=>{window.postMessage({type:"weilin_prompt_ui_prompt_open_node_wit_seed",seed:a},"*")};return ut(()=>{window.postMessage({type:"weilin_prompt_ui_prompt_get_node_list_info"},"*")}),(a,s)=>(S(),L("div",{class:Ee(`${ar}lora-stack`)},[i("div",{class:Ee(`${ar}lora-content`)},[i("div",{class:Ee(`${ar}lora-body`)},[i("div",{class:Ee(`${ar}lora-list`)},[(S(!0),L(Oe,null,He(o.value,l=>(S(),L("div",{key:l.id,class:"lora-item"},[i("div",GL,[i("div",QL,[i("span",{class:"lora-name",title:l.title},"#"+h(l.id)+" - "+h(l.title),9,YL)]),i("div",JL,[i("div",KL,[i("div",{class:"text-label",title:l.text},h(l.text),9,XL)]),i("div",ZL,[i("div",e$,[i("button",{onClick:r=>n(l.seed),class:"open-button"},h(p(t)("nodeListWindow.openPromptUI")),9,t$)])])])])]))),128))],2)],2)],2)],2))}},[["__scopeId","data-v-0c15a742"]]),pu={getTreeFromCloud:async e=>await Me({url:"/cloud/get/tree",method:"post",data:{path:e}}),getLocalInstallPackage:async()=>await Me({url:"/cloud/get/local/package",method:"post",data:{}}),installSelectPackage:async(e,t)=>await Me({url:"/cloud/download/file",method:"post",timeout:0,data:{paths:t,path:e}})},o$={class:"cloud-manager"},a$={class:"toolbar"},s$={class:"current-path"},l$={class:"file-list"},r$={class:"file-info"},i$={class:"file-name"},u$={class:"file-type"},c$={class:"file-actions"},d$=["onClick"],f$={key:1,class:"install-container"},p$={key:0,class:"installed-badge"},g$=["onClick","disabled"],m$=yt({__name:"index",setup(e){const{t}=_t(),o=y([]),n=y("tags"),a=y("tags"),s=y([]),l=async _=>{try{const w=await pu.getTreeFromCloud(_);o.value=w.data}catch(w){console.error(":",w),Z({type:"warn",str:"message.networkError"})}},r=async()=>{try{const _=await pu.getLocalInstallPackage();s.value=_.data||[]}catch(_){console.error(":",_),Z({type:"warn",str:"message.networkError"})}},u=_=>s.value.some(w=>w===_),d=async _=>{try{const w=o.value.find(x=>x.path===_);w&&(w.isInstalling=!0,await pu.installSelectPackage(a.value,[_]).then(()=>{r(),Z({type:"success",str:"message.installPackageSuccess"})}))}catch(w){console.error(":",w),Z({type:"warn",str:"message.installPackageFail"})}finally{const w=o.value.find(x=>x.path===_);w&&(w.isInstalling=!1)}},c=()=>{const _=n.value.split("/");_.length>1&&(n.value=_.slice(0,-1).join("/"),l(n.value))},f=()=>{l(n.value),r()},m=_=>{n.value=_,l(_)},g=()=>{a.value="tags",n.value="tags",l(n.value)},v=()=>{a.value="danbooru",n.value="danbooru",l(n.value)};return ut(()=>{l(n.value),r()}),(_,w)=>(S(),L("div",o$,[i("div",a$,[i("button",{class:"refresh-btn",onClick:f},[...w[0]||(w[0]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[i("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1)])]),i("button",{class:"database-btn",onClick:g},[w[1]||(w[1]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[i("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})],-1)),i("span",null,h(p(t)("cloudWindow.tagDatabase")),1)]),i("button",{class:"database-btn",onClick:v},[w[2]||(w[2]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[i("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4v4z"})],-1)),i("span",null,h(p(t)("cloudWindow.danbooruDatabase")),1)]),i("div",s$,[i("span",null,h(p(t)("cloudWindow.currentPath"))+": "+h(a.value=="tags"?p(t)("cloudWindow.tagDatabase"):p(t)("cloudWindow.danbooruDatabase")),1)])]),i("div",l$,[n.value!=="tags"&&n.value!=="danbooru"?(S(),L("button",{key:0,class:"back-btn",onClick:c},[w[3]||(w[3]=i("svg",{viewBox:"0 0 24 24",width:"16",height:"16",class:"tag-icon"},[i("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)),qe(" "+h(p(t)("cloudWindow.back")),1)])):pe("",!0),(S(!0),L(Oe,null,He(o.value,x=>(S(),L("div",{key:x.path,class:"file-item"},[i("div",r$,[i("span",i$,h(x.name),1),i("span",u$,h(x.type=="dir"?"":x.type=="file"?"":""),1)]),i("div",c$,[x.type==="dir"?(S(),L("button",{key:0,onClick:A=>m(x.path),class:"open-btn"},h(p(t)("cloudWindow.open")),9,d$)):x.type==="file"?(S(),L("div",f$,[u(x.path)?(S(),L("span",p$,h(p(t)("cloudWindow.installed")),1)):(S(),L("button",{key:1,onClick:A=>d(x.path),class:"install-btn",disabled:x.isInstalling},h(x.isInstalling?p(t)("cloudWindow.installing"):p(t)("cloudWindow.install")),9,g$))])):pe("",!0)])]))),128))])]))}},[["__scopeId","data-v-508c00b0"]]),h$={class:"header-actions"},v$=["title"],_$=["onMouseover","onDragstart","onDrop"],y$={class:"lora-info"},b$={class:"lora-header"},w$=["title"],x$={class:"lora-actions"},T$=["onClick","title"],S$=["onClick","title"],k$={class:"lora-weights-row"},C$={class:"weight-item-col"},E$=["onUpdate:modelValue"],L$={class:"weight-item-col"},$$=["onUpdate:modelValue"],A$={class:"switch-item-col"},I$={class:"switch"},M$=["checked","onChange"],Oa="weilin_prompt_ui_",O$=yt({__name:"lora_stack",setup(e,{expose:t}){const{t:o}=_t(),n=y([]),a=y(""),s=y(!1),l=y(""),r=y(100),u=y(0),d=y(),c=y(!1),f=y(!1),m=y(),g=()=>{window.postMessage({type:"weilin_prompt_ui_openLoraManager_addLora_stack",seed:a.value},"*")},v=F=>{F.hidden=!F.hidden},_=(F,K)=>{if(f.value=!0,l.value===F&&s.value)return;const Q=K.currentTarget.getBoundingClientRect();let ne={left:Q.left-450-10,top:Q.top};ne.left<10&&(ne.left=Q.right+10),ne.top=Math.max(10,Math.min(ne.top,window.innerHeight-310)),r.value=ne.left,u.value=ne.top,s.value=!0,l.value=F,Qe(()=>{m.value.refresh()})},w=()=>{f.value=!1,setTimeout(()=>{!c.value&&!f.value&&(s.value=!1,l.value="",c.value=!1)},200)},x=()=>{c.value=!0,f.value=!0},A=()=>{s.value=!1,l.value="",c.value=!1},W=F=>{n.value.find(K=>K.name===F.name)||n.value.push({name:F.name,weight:1,text_encoder_weight:1,...F})},T=F=>{const K=n.value.findIndex(ee=>ee.name===F.name);K>-1&&n.value.splice(K,1)},P=y(),q=F=>{P.value.open({name:F.lora})};window.addEventListener("message",F=>{F.data.type==="weilin_prompt_ui_selectLora_stack_"+a.value&&W(F.data.lora)});const G=(F,K)=>{if(a.value=K,F.length>0)try{const ee=JSON.parse(F);if(ee.lora&&ee.lora!=""&&(n.value=ee.lora),ee.temp_lora&&ee.temp_lora.length>0&&ee.temp_lora!=""){const Q=ee.temp_lora;n.value=Q}}catch{Z({type:"warn",str:"promptBox.settings.errorPrompt"})}};et(n,F=>{z()},{deep:!0});const z=()=>{if(n.value.length>0){const F=n.value.filter(Q=>!Q.hidden);let K={lora:"",temp_lora:n.value};F.length>0&&(K.lora=F);const ee=JSON.stringify(K);window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:ee},"*")}else{const K=JSON.stringify({lora:"",temp_lora:""});window.postMessage({type:"weilin_prompt_ui_prompt_finish_lora_stack_"+a.value,data:K},"*")}},J=y(null),ve=F=>{J.value=F},ae=F=>{if(J.value===null||J.value===F)return;const K=n.value.splice(J.value,1)[0];n.value.splice(F,0,K),J.value=null,z()};return t({initLoraStack:G}),(F,K)=>(S(),L("div",{class:Ee(`${Oa}lora-stack`)},[i("div",{class:Ee(`${Oa}lora-content`)},[i("div",{class:Ee(`${Oa}lora-header`)},[i("div",h$,[i("button",{class:Ee(`${Oa}add-btn`),onClick:g,title:p(o)("controls.addLora")},[...K[1]||(K[1]=[i("svg",{viewBox:"0 0 24 24",width:"16",height:"16"},[i("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])],10,v$)])],2),i("div",{class:Ee(`${Oa}lora-body`)},[i("div",{class:Ee(`${Oa}lora-list`)},[(S(!0),L(Oe,null,He(n.value,(ee,Q)=>(S(),L("div",{ref_for:!0,ref_key:"loraStackItemRef",ref:d,key:ee.name,class:Ee(["lora-item",{"hidden-lora":ee.hidden}]),onMouseover:te=>_(ee.lora,te),onMouseleave:w,draggable:"true",onDragstart:te=>ve(Q),onDragover:K[0]||(K[0]=Ke(()=>{},["prevent"])),onDrop:te=>ae(Q)},[i("div",y$,[i("div",b$,[i("span",{class:"lora-name",title:ee.name},h(ee.name),9,w$),i("div",x$,[i("button",{class:"look-on-btn",onClick:te=>q(ee),title:p(o)("controls.lookOnLora")},[...K[2]||(K[2]=[i("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[i("path",{d:"M576.5 930.2H163.1c-52.9 0-96-43.1-96-96v-672c0-52.9 43.1-96 96-96h672c52.9 0 96 43.1 96 96V577c0 17.7-14.3 32-32 32s-32-14.3-32-32V162.2c0-17.6-14.4-32-32-32h-672c-17.6 0-32 14.4-32 32v672c0 17.6 14.4 32 32 32h413.4c17.7 0 32 14.3 32 32s-14.3 32-32 32z","p-id":"3466"}),i("path",{d:"M692.4 322.3H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h446.7c17.7 0 32 14.3 32 32s-14.3 32-32 32zM388.5 530.2H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.6-14.3 32-31.9 32zM388.5 738H245.7c-17.7 0-32-14.3-32-32s14.3-32 32-32h142.7c17.7 0 32 14.3 32 32 0.1 17.7-14.3 32-31.9 32z","p-id":"3467"}),i("path",{d:"M624.1 792.5c-94.8 0-172-77.2-172-172s77.2-172 172-172 172 77.2 172 172-77.1 172-172 172z m0-280c-59.6 0-108 48.4-108 108s48.4 108 108 108 108-48.4 108-108-48.4-108-108-108z","p-id":"3468"}),i("path",{d:"M820.8 864.2L710.5 753.9c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L866 818.9c12.5 12.5 12.5 32.8 0 45.3s-32.7 12.5-45.2 0z","p-id":"3469"})],-1)])],8,T$),i("button",{class:"remove-btn",onClick:te=>T(ee),title:p(o)("controls.removeLora")},[...K[3]||(K[3]=[i("svg",{viewBox:"0 0 24 24",width:"14",height:"14"},[i("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])],8,S$)])]),i("div",k$,[i("div",C$,[i("label",null,h(p(o)("loraManager.modelWeight")),1),ye(i("input",{type:"number","onUpdate:modelValue":te=>ee.weight=te,class:"lora-weight",step:"0.1"},null,8,E$),[[Ae,ee.weight]])]),i("div",L$,[i("label",null,h(p(o)("loraManager.textEncoderWeight")),1),ye(i("input",{type:"number","onUpdate:modelValue":te=>ee.text_encoder_weight=te,class:"lora-weight",step:"0.1"},null,8,$$),[[Ae,ee.text_encoder_weight]])]),i("div",A$,[i("label",null,h(ee.hidden?p(o)("lora.hideLora"):p(o)("lora.showLora")),1),i("label",I$,[i("input",{type:"checkbox",checked:!ee.hidden,onChange:te=>v(ee)},null,40,M$),K[4]||(K[4]=i("span",{class:"slider"},null,-1))])])])])],42,_$))),128))],2)],2)],2),Ve(nr,{ref_key:"loraDetailLoraStackRef",ref:P},null,512),s.value?(S(),wt(cu,{key:0,ref_key:"loraCardItem",ref:m,fileNmae:l.value,paddingLeft:r.value,paddingTop:u.value,onCardLeave:A,onCardenter:x},null,8,["fileNmae","paddingLeft","paddingTop"])):pe("",!0)],2))}},[["__scopeId","data-v-c2ab38ea"]]),Na={searchDanbooru:async(e="",t=1,o=100)=>await Me({url:"/danbooru/get_tags",method:"post",data:{search:e,page:t,limit:o}}),addDanbooruTag:async e=>await Me({url:"/danbooru/add_tag",method:"post",data:e}),updateDanbooruTag:async e=>await Me({url:"/danbooru/update_tag",method:"post",timeout:0,data:e}),deleteDanbooruTag:async e=>await Me({url:"/danbooru/delete_tag",method:"post",timeout:0,data:{id:e}}),batchDeleteDanbooruTags:async e=>await Me({url:"/danbooru/batch_delete_tag",method:"post",timeout:0,data:{values:e}}),runSQLToServer:async e=>await Me({url:"/danbooru/run_sql_text",method:"post",timeout:0,data:{sql:e}})},N$={key:0,class:"loading-overlay"},R$={class:"settings-content"},D$={style:{"margin-bottom":"16px"}},P$=["placeholder"],F$={style:{"margin-bottom":"16px"}},B$=["placeholder"],U$=["placeholder"],j$=["placeholder"],H$={class:"data-container"},W$={key:0},V$={key:0},z$={class:"tag-group-container"},q$={key:0},G$={key:1},Q$={style:{display:"flex","align-items":"center"}},Y$={key:0},J$=["placeholder"],K$=["placeholder"],X$=["placeholder"],Z$=["placeholder"],eA=["onClick"],tA=["onClick"],nA=["onClick"],oA={key:1},aA={class:"tag-group-container"},sA={key:0},lA={key:1},rA={style:{display:"flex","align-items":"center"}},iA={key:0},uA=["placeholder"],cA=["placeholder"],dA=["placeholder"],fA=["placeholder"],pA=["onClick"],gA=["onClick"],mA=["onClick"],hA=yt({__name:"import_danbooru",setup(e,{expose:t}){const{t:o}=_t(),n=y(!1),a=y(""),s=y(""),l=y(""),r=y(""),u=y(""),d=y(""),c=y(""),f=y(""),m=y(""),g=y([]),v=y(-1),_=y(""),w=y(""),x=y(null);y(null);const A=y(null),W=y(!1),T=y(""),P=y(0),q=y(0);function G(){a.value="",s.value="",P.value=0,q.value=0,l.value="",r.value="",u.value="",d.value="",c.value="",f.value="",m.value="",g.value=[],v.value=-1,_.value="",w.value="",W.value=!1}function z(_e){G();const I=_e.target.files[0];if(I){const N=new FileReader;N.onload=H=>{H.target.result.split(";").filter(k=>k.trim()).forEach(k=>{if((k.includes("tag_groups")||k.includes("tag_subgroups"))&&k.includes("p_uuid"))if(k.includes("g_uuid")){u.value=k+";";const D=k.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);D&&(m.value=D[1]);const Y=k.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Y&&(c.value=Y[1].replace(/''/g,"'"))}else{r.value=k+";";const D=k.split("VALUES")[1].trim().match(/,\s*'([^']+)'\)$/);D&&(f.value=D[1]);const Y=k.match(/VALUES\s*\([^'"]*['"]([^'"]+)['"]/);Y&&(d.value=Y[1].replace(/''/g,"'"))}else k.includes("tag_tags")&&g.value.push(k+";")})},N.readAsText(I)}_e.target.value=""}function J(_e){const I=_e.target.files[0];if(I){const N=new FileReader;N.onload=H=>{H.target.result.split(`
`).filter(k=>k.trim()).forEach(k=>{const E=k.split(",");if(E.length>=2){let D,Y,ie,re;E.length===2?(D=E[0].trim(),re=E[1].trim(),Y=0,ie=0):E.length>=3&&(D=E[0].trim(),Y=parseInt(E[1].trim())||0,ie=parseInt(E[2].trim())||0,re=E.slice(3).join(",").trim(),re=re.replace(/^"(.*)"$/,"$1"));const C=D.replace(/'/g,"''"),b=re.replace(/'/g,"''"),R=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${C}', '', '${b}', ${ie}, ${Y});`;g.value.push(R)}})},N.readAsText(I)}_e.target.value=""}function ve(){A.value.click()}function ae(){let _e;g.value.length>0&&K(g.value[0])?_e=[...g.value].join(`
`):_e=[r.value,u.value,...g.value].join(`
`);const I=new Blob([_e],{type:"text/sql"}),N=document.createElement("a");if(N.href=URL.createObjectURL(I),T.value.length<=0){const H=parseInt(new Date().getTime()/1e3);N.download="export_"+H+".sql"}else N.download=T.value+".sql";N.click()}function F(_e){const I=_e.match(/VALUES\s*\([^']*'([^']+)'/),N=_e.match(/VALUES\s*\([^']*'[^']*'\s*,\s*'([^']+)'/);return{text:I?I[1].replace(/''/g,"'"):"",desc:N?N[1].replace(/''/g,"'"):""}}function K(_e){return _e.includes("danbooru_tag")}function ee(_e){const I=_e.match(/VALUES\s*\(\s*'([^']+)'\s*,\s*'([^']*)'\s*,\s*'([^']*)'\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);return I?{tag:I[1].replace(/''/g,"'"),color_id:I[2],translate:I[3].replace(/''/g,"'"),hot:parseInt(I[4]),aliases:parseInt(I[5])}:{tag:"",color_id:"",translate:"",hot:0,aliases:0}}const Q=y(0),te=y(0);function ne(_e){const I=g.value[_e];if(K(I)){const N=ee(I);_.value=N.tag,w.value=N.translate,Q.value=N.hot,te.value=N.aliases}else{const N=F(I);_.value=N.text,w.value=N.desc}v.value=_e}function U(_e){const I=_.value.replace(/'/g,"''"),N=w.value.replace(/'/g,"''");if(K(g.value[_e])){const H=ee(g.value[_e]),O=parseInt(Q.value)||0,B=parseInt(te.value)||0;g.value[_e]=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${I}', '${H.color_id}', '${N}', ${O}, ${B});`}else g.value[_e]=g.value[_e].replace(/(VALUES\s*\([^']*')([^']+)'/,`$1${I}'`).replace(/(VALUES\s*\([^']*'[^']*'\s*,\s*')([^']+)'/,`$1${N}'`);v.value=-1}function j(){v.value=-1,_.value="",w.value="",Q.value=0,te.value=0}function ue(_e){g.value.splice(_e,1)}function xe(){const _e=a.value.replace(/'/g,"''"),I=s.value.replace(/'/g,"''"),N=parseInt(P.value)||0,H=parseInt(q.value)||0,O=`INSERT INTO "danbooru_tag" ("tag", "color_id", "translate", "hot", "aliases") VALUES ('${_e}', '', '${I}', ${N}, ${H});`;g.value.push(O),a.value="",s.value="",P.value=0,q.value=0}const oe=y(!1),de=async _e=>{oe.value=!0;try{await Na.runSQLToServer(_e).then(I=>{if(I.code!=200){Z({type:"warn",str:I.message});return}else be(),Z({type:"success",str:"importDialog.successImport"})}).catch(I=>{console.error(I),Z({type:"warn",str:"importDialog.importFail"})})}catch(I){console.error(I),Z({type:"warn",str:"importDialog.importFail"})}finally{oe.value=!1}},be=()=>{window.postMessage({type:"weilin_prompt_ui_tag_manager_refresh"},"*")},ke=async()=>{if(g.value.length>0&&K(g.value[0])){const _e=[...g.value];await de(_e)}else if(W.value){if(r.value.length<=0||u.value.length<=0){Z({type:"warn",str:"importDialog.pleaseFullRequest"});return}const _e=[...g.value];await de(_e)}else{if(r.value.length<=0||u.value.length<=0){Z({type:"warn",str:"importDialog.pleaseFullRequest"});return}const _e=[r.value,u.value,...g.value];await de(_e)}};return et(r,(_e,I)=>{var O,B;if(!_e||_e===I)return;const N=(O=_e.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:O[1],H=(B=I==null?void 0:I.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:B[1];N&&H&&u.value&&(u.value=u.value.replace(new RegExp(`'${H}'`,"g"),`'${N}'`))}),et(u,(_e,I)=>{var O,B;if(!_e||_e===I)return;const N=(O=_e.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:O[1],H=(B=I==null?void 0:I.match(/'([^']+)'\s*\)\s*;?$/))==null?void 0:B[1];N&&H&&g.value.length>0&&(g.value=g.value.map(k=>k.replace(new RegExp(`'${H}'`,"g"),`'${N}'`)))}),t({open:()=>{n.value=!0}}),(_e,I)=>(S(),L(Oe,null,[oe.value?(S(),L("div",N$,[...I[19]||(I[19]=[i("div",{class:"loading-spinner"},null,-1)])])):pe("",!0),Ve(Ca,{modelValue:n.value,"onUpdate:modelValue":I[18]||(I[18]=N=>n.value=N),title:p(o)("danbooruManager.importBatchTitle")},{footer:it(()=>[i("button",{onClick:I[17]||(I[17]=N=>n.value=!1)},h(p(o)("promptBox.settings.close")),1),i("button",{onClick:ke},h(p(o)("importDialog.sure")),1)]),default:it(()=>[i("div",R$,[i("div",D$,[i("button",{onClick:G,class:"upload-btn"},h(p(o)("importDialog.cleanAll")),1),i("button",{style:{"margin-left":"10px"},onClick:ae},h(p(o)("importDialog.dumpSQL")),1),ye(i("input",{style:{width:"300px","margin-left":"10px"},"onUpdate:modelValue":I[0]||(I[0]=N=>T.value=N),placeholder:p(o)("importDialog.settingOutputName")},null,8,P$),[[Ae,T.value]]),i("input",{type:"file",ref_key:"fileInput",ref:x,onChange:z,accept:".sql",style:{display:"none"}},null,544),i("input",{type:"file",ref_key:"danbooruTxtFileInput",ref:A,onChange:J,accept:".txt,.csv",style:{display:"none"}},null,544)]),i("div",F$,[ye(i("input",{"onUpdate:modelValue":I[1]||(I[1]=N=>a.value=N),placeholder:"Tag"},null,512),[[Ae,a.value]]),ye(i("input",{"onUpdate:modelValue":I[2]||(I[2]=N=>s.value=N),placeholder:p(o)("importDialog.translater")},null,8,B$),[[Ae,s.value]]),ye(i("input",{"onUpdate:modelValue":I[3]||(I[3]=N=>P.value=N),placeholder:p(o)("danbooruManager.hot"),type:"number"},null,8,U$),[[Ae,P.value]]),ye(i("input",{"onUpdate:modelValue":I[4]||(I[4]=N=>q.value=N),placeholder:p(o)("danbooruManager.aliases"),type:"number"},null,8,j$),[[Ae,q.value]]),i("button",{onClick:xe},h(p(o)("importDialog.add")),1),i("button",{style:{"margin-left":"10px"},onClick:ve,class:"upload-btn"},h(p(o)("danbooruManager.import")),1)]),i("div",H$,[r.value?(S(),L("div",W$,[i("h3",null,h(F(r.value).text),1),u.value?(S(),L("div",V$,[i("h4",null,h(F(u.value).text),1),i("div",z$,[(S(!0),L(Oe,null,He(g.value,(N,H)=>(S(),L("div",{key:H,style:{display:"flex","flex-direction":"column","align-items":"center"}},[K(N)?(S(),L("p",q$,h(ee(N).tag)+" - "+h(ee(N).translate)+" ("+h(p(o)("danbooruManager.hot"))+": "+h(ee(N).hot)+", "+h(p(o)("danbooruManager.aliases"))+": "+h(ee(N).aliases)+")",1)):(S(),L("p",G$,h(F(N).text)+" - "+h(F(N).desc),1)),i("div",Q$,[v.value===H?(S(),L("div",Y$,[K(N)?ye((S(),L("input",{key:0,"onUpdate:modelValue":I[5]||(I[5]=O=>_.value=O),placeholder:"Tag"},null,512)),[[Ae,_.value]]):ye((S(),L("input",{key:1,"onUpdate:modelValue":I[6]||(I[6]=O=>_.value=O),placeholder:"Tag"},null,512)),[[Ae,_.value]]),K(N)?ye((S(),L("input",{key:2,"onUpdate:modelValue":I[7]||(I[7]=O=>w.value=O),placeholder:p(o)("importDialog.translate")},null,8,J$)),[[Ae,w.value]]):ye((S(),L("input",{key:3,"onUpdate:modelValue":I[8]||(I[8]=O=>w.value=O),placeholder:p(o)("importDialog.translater")},null,8,K$)),[[Ae,w.value]]),K(N)?ye((S(),L("input",{key:4,"onUpdate:modelValue":I[9]||(I[9]=O=>Q.value=O),placeholder:p(o)("danbooruManager.hot"),type:"number"},null,8,X$)),[[Ae,Q.value]]):pe("",!0),K(N)?ye((S(),L("input",{key:5,"onUpdate:modelValue":I[10]||(I[10]=O=>te.value=O),placeholder:p(o)("danbooruManager.aliases"),type:"number"},null,8,Z$)),[[Ae,te.value]]):pe("",!0),i("button",{onClick:O=>U(H)},h(p(o)("importDialog.sureYes")),9,eA),i("button",{style:{"margin-left":"10px"},onClick:j},h(p(o)("importDialog.cancel")),1)])):(S(),L("button",{key:1,onClick:O=>ne(H)},h(p(o)("importDialog.edit")),9,tA)),i("button",{style:{"margin-left":"10px"},onClick:O=>ue(H)},h(p(o)("importDialog.delete")),9,nA)])]))),128))])])):pe("",!0)])):g.value.length>0?(S(),L("div",oA,[i("h3",null,h(p(o)("danbooruManager.importTitle")),1),i("div",aA,[(S(!0),L(Oe,null,He(g.value,(N,H)=>(S(),L("div",{key:H,style:{display:"flex","flex-direction":"column","align-items":"center"}},[K(N)?(S(),L("p",sA,h(ee(N).tag)+" - "+h(ee(N).translate)+" (: "+h(ee(N).hot)+", : "+h(ee(N).aliases)+")",1)):(S(),L("p",lA,h(F(N).text)+" - "+h(F(N).desc),1)),i("div",rA,[v.value===H?(S(),L("div",iA,[K(N)?ye((S(),L("input",{key:0,"onUpdate:modelValue":I[11]||(I[11]=O=>_.value=O),placeholder:"Tag"},null,512)),[[Ae,_.value]]):ye((S(),L("input",{key:1,"onUpdate:modelValue":I[12]||(I[12]=O=>_.value=O),placeholder:"Tag"},null,512)),[[Ae,_.value]]),K(N)?ye((S(),L("input",{key:2,"onUpdate:modelValue":I[13]||(I[13]=O=>w.value=O),placeholder:p(o)("importDialog.translater")},null,8,uA)),[[Ae,w.value]]):ye((S(),L("input",{key:3,"onUpdate:modelValue":I[14]||(I[14]=O=>w.value=O),placeholder:p(o)("importDialog.translater")},null,8,cA)),[[Ae,w.value]]),K(N)?ye((S(),L("input",{key:4,"onUpdate:modelValue":I[15]||(I[15]=O=>Q.value=O),placeholder:p(o)("danbooruManager.hot"),type:"number"},null,8,dA)),[[Ae,Q.value]]):pe("",!0),K(N)?ye((S(),L("input",{key:5,"onUpdate:modelValue":I[16]||(I[16]=O=>te.value=O),placeholder:p(o)("danbooruManager.aliases"),type:"number"},null,8,fA)),[[Ae,te.value]]):pe("",!0),i("button",{onClick:O=>U(H)},h(p(o)("importDialog.sureYes")),9,pA),i("button",{style:{"margin-left":"10px"},onClick:j},h(p(o)("importDialog.cancel")),1)])):(S(),L("button",{key:1,onClick:O=>ne(H)},h(p(o)("importDialog.edit")),9,gA)),i("button",{style:{"margin-left":"10px"},onClick:O=>ue(H)},h(p(o)("importDialog.delete")),9,mA)])]))),128))])])):pe("",!0)])])]),_:1},8,["modelValue","title"])],64))}},[["__scopeId","data-v-4dfbaa15"]]),vA={class:"danbooru-manager"},_A={class:"title"},yA={class:"action-bar"},bA={class:"search-box"},wA=["placeholder"],xA=["disabled"],TA={class:"pagination"},SA=["disabled"],kA={class:"page-info"},CA=["disabled"],EA={class:"page-size-control"},LA={key:0,class:"tag-list"},$A={style:{"table-layout":"fixed",overflow:"auto"}},AA={class:"checkbox-column"},IA=["checked"],MA={class:"tag-column"},OA={class:"translate-column"},NA={class:"color-column"},RA={class:"hot-column"},DA={class:"aliases-column"},PA={class:"control-column"},FA=["value"],BA=["onClick"],UA=["onClick"],jA={key:1,class:"no-results"},HA={key:2,class:"weilin-tools-dialog"},WA={class:"weilin-tools-dialog-content"},VA={class:"form-group"},zA=["placeholder"],qA={class:"form-group"},GA=["placeholder"],QA={class:"form-group"},YA=["value"],JA={class:"form-group"},KA={key:0,class:"form-group"},XA={class:"weilin-tools-dialog-actions"},ZA={key:3,class:"weilin-tools-dialog"},eI={class:"weilin-tools-dialog-content"},tI={class:"weilin-tools-dialog-actions"},nI={key:4,class:"weilin-tools-dialog"},oI={class:"weilin-tools-dialog-content"},aI={class:"weilin-tools-dialog-actions"},sI={key:5,class:"overlay"},lI=yt({__name:"danbooru_manager",setup(e){const{t}=_t(),o=y(""),n=y([]),a=y(1),s=y(1),l=y(100),r=y(!1),u=y(!1),d=y(!1),c=y(!1),f=y(!1),m=y(null),g=y({tag:"",translate:"",color_id:0,hot:0,aliases:0}),v=[{name:"",color:"#888888"},{name:"",color:"#FF6666"},{name:"",color:"#66FF66"},{name:"",color:"#6666FF"},{name:"",color:"#FFFF66"},{name:"",color:"#FF66FF"},{name:"",color:"#66FFFF"},{name:"",color:"#FF9966"},{name:"",color:"#FF99CC"},{name:"",color:"#996633"}],_=U=>v[U]?v[U].color:v[0].color;let w=null;const x=()=>{w&&clearTimeout(w),w=setTimeout(()=>{a.value=1,A()},300)},A=async()=>{r.value=!0,ae.value=[];try{const U=await Na.searchDanbooru(o.value,a.value,l.value);U&&U.data?(n.value=U.data.data||[],s.value=U.data.total_pages||1):(n.value=[],s.value=1)}catch(U){console.error(":",U),Z({type:"error",str:t("message.searchFailed")}),n.value=[]}finally{r.value=!1}},W=U=>{U<1||U>s.value||(a.value=U,A())},T=()=>{l.value<10&&(l.value=10),l.value>500&&(l.value=500),a.value=1,ae.value=[],A()},P=()=>{f.value=!1,g.value={tag:"",translate:"",color_id:0,hot:0,aliases:0},u.value=!0},q=U=>{f.value=!0,m.value=U,g.value={id:U.id_index,tag:U.tag,translate:U.translate||"",color_id:U.color_id||0,hot:U.hot||0,aliases:U.aliases||0},u.value=!0},G=()=>{u.value=!1},z=async()=>{if(!g.value.tag){Z({type:"error",str:t("tagManager.textRequired")});return}try{if(f.value){const U=await Na.updateDanbooruTag({id:g.value.id,update_data:{tag:g.value.tag,translate:g.value.translate,color_id:g.value.color_id,hot:g.value.hot,aliases:g.value.aliases}});U&&U.code===200?(Z({type:"success",str:t("message.editSuccess")}),A()):Z({type:"error",str:t("message.editFailed")})}else{const U=await Na.addDanbooruTag({tag:g.value.tag,translate:g.value.translate,color_id:g.value.color_id,hot:g.value.hot,aliases:g.value.aliases});U&&U.code===200?(Z({type:"success",str:t("message.addSuccess")}),A()):Z({type:"error",str:t("message.addFailed")})}G()}catch(U){console.error(":",U),Z({type:"error",str:f.value?t("message.editFailed"):t("message.addFailed")})}},J=U=>{m.value=U,d.value=!0},ve=async()=>{if(!(!m.value||!m.value.id_index))try{const U=await Na.deleteDanbooruTag(m.value.id_index);U&&U.code===200?(Z({type:"success",str:t("message.deleteSuccess")}),A()):Z({type:"error",str:t("message.deleteFailed")}),d.value=!1}catch(U){console.error(":",U),Z({type:"error",str:t("message.deleteFailed")})}},ae=y([]),F=tt(()=>n.value.length>0&&ae.value.length===n.value.length),K=()=>{F.value?ae.value=[]:ae.value=n.value.map(U=>U.id_index)},ee=()=>{ae.value.length!==0&&(c.value=!0)},Q=async()=>{if(ae.value.length!==0){try{const U=await Na.batchDeleteDanbooruTags(ae.value);U&&U.code===200?(Z({type:"success",str:` ${ae.value.length} `}),ae.value=[],A()):Z({type:"error",str:""})}catch(U){console.error(":",U),Z({type:"error",str:""})}c.value=!1}},te=y(),ne=()=>{te.value.open()};return ut(()=>{A()}),(U,j)=>{var ue;return S(),L("div",vA,[i("h2",_A,h(p(t)("danbooruManager.title")),1),i("div",yA,[i("div",bA,[ye(i("input",{"onUpdate:modelValue":j[0]||(j[0]=xe=>o.value=xe),type:"text",placeholder:p(t)("danbooruManager.searchPlaceholder"),onInput:x},null,40,wA),[[Ae,o.value]]),i("button",{class:"search-btn",onClick:A},h(p(t)("tagManager.search")),1)]),i("button",{class:"add-btn",onClick:P},h(p(t)("danbooruManager.add")),1),i("button",{class:"add-btn",onClick:ne},h(p(t)("tagManager.importDanbooru")),1),i("button",{class:Ee(["batch-delete-btn",{disabled:ae.value.length===0}]),disabled:ae.value.length===0,onClick:ee},h(p(t)("tagManager.hasDeleteAction"))+" ("+h(ae.value.length)+") ",11,xA)]),i("div",TA,[i("button",{disabled:a.value<=1,onClick:j[1]||(j[1]=xe=>W(a.value-1)),class:"page-btn"},h(p(t)("loraManager.prevPage")),9,SA),i("span",kA,h(a.value)+" / "+h(s.value),1),i("button",{disabled:a.value>=s.value,onClick:j[2]||(j[2]=xe=>W(a.value+1)),class:"page-btn"},h(p(t)("loraManager.nextPage")),9,CA),i("div",EA,[i("label",null,h(p(t)("danbooruManager.pageShow")),1),ye(i("input",{"onUpdate:modelValue":j[3]||(j[3]=xe=>l.value=xe),type:"number",min:"10",max:"500",onChange:T,class:"page-size-input"},null,544),[[Ae,l.value,void 0,{number:!0}]]),i("span",null,h(p(t)("danbooruManager.pageLimit")),1)])]),n.value.length>0?(S(),L("div",LA,[i("table",$A,[i("thead",null,[i("tr",null,[i("th",AA,[i("input",{type:"checkbox",checked:F.value,onChange:K},null,40,IA)]),j[12]||(j[12]=i("th",{class:"id-column"},"ID",-1)),i("th",MA,h(p(t)("tagManager.description")),1),i("th",OA,h(p(t)("promptBox.translate")),1),i("th",NA,h(p(t)("tagManager.backgroundColor")),1),i("th",RA,h(p(t)("danbooruManager.hot")),1),i("th",DA,h(p(t)("danbooruManager.aliases")),1),i("th",PA,h(p(t)("danbooruManager.controle")),1)])]),i("tbody",null,[(S(!0),L(Oe,null,He(n.value,xe=>(S(),L("tr",{key:xe.id_index},[i("td",null,[ye(i("input",{type:"checkbox",value:xe.id_index,"onUpdate:modelValue":j[4]||(j[4]=oe=>ae.value=oe)},null,8,FA),[[Ft,ae.value]])]),i("td",null,h(xe.id_index),1),i("td",null,h(xe.tag),1),i("td",null,h(xe.translate),1),i("td",null,[i("div",{class:"color-box",style:pt({backgroundColor:_(xe.color_id)})},null,4)]),i("td",null,h(xe.hot),1),i("td",null,h(xe.aliases),1),i("td",null,[i("button",{class:"edit-btn",onClick:oe=>q(xe)},h(p(t)("common.edit")),9,BA),i("button",{style:{"margin-left":"10px"},class:"delete-btn",onClick:oe=>J(xe)},h(p(t)("common.delete")),9,UA)])]))),128))])])])):(S(),L("div",jA,h(p(t)("tagManager.noResults")),1)),u.value?(S(),L("div",HA,[i("div",WA,[i("h3",null,h(f.value?p(t)("danbooruManager.edit"):p(t)("danbooruManager.add")),1),i("div",VA,[i("label",null,h(p(t)("tagManager.description")),1),ye(i("input",{"onUpdate:modelValue":j[5]||(j[5]=xe=>g.value.tag=xe),type:"text",placeholder:p(t)("tagManager.descriptionPlaceholder")},null,8,zA),[[Ae,g.value.tag]])]),i("div",qA,[i("label",null,h(p(t)("promptBox.translate")),1),ye(i("input",{"onUpdate:modelValue":j[6]||(j[6]=xe=>g.value.translate=xe),type:"text",placeholder:p(t)("danbooruManager.translatePlaceholder")},null,8,GA),[[Ae,g.value.translate]])]),i("div",QA,[i("label",null,h(p(t)("tagManager.backgroundColor")),1),ye(i("select",{"onUpdate:modelValue":j[7]||(j[7]=xe=>g.value.color_id=xe)},[(S(),L(Oe,null,He(v,(xe,oe)=>i("option",{key:oe,value:oe},h(xe.name),9,YA)),64))],512),[[Vt,g.value.color_id]]),i("div",{class:"color-preview",style:pt({backgroundColor:_(g.value.color_id)})},null,4)]),i("div",JA,[j[13]||(j[13]=i("label",null,"Hot",-1)),ye(i("input",{"onUpdate:modelValue":j[8]||(j[8]=xe=>g.value.hot=xe),type:"number",min:"0"},null,512),[[Ae,g.value.hot,void 0,{number:!0}]])]),f.value?pe("",!0):(S(),L("div",KA,[j[14]||(j[14]=i("label",null,"Aliases",-1)),ye(i("input",{"onUpdate:modelValue":j[9]||(j[9]=xe=>g.value.aliases=xe),type:"number",min:"0"},null,512),[[Ae,g.value.aliases,void 0,{number:!0}]])])),i("div",XA,[i("button",{onClick:G},h(p(t)("common.cancel")),1),i("button",{onClick:z},h(p(t)("common.save")),1)])])])):pe("",!0),d.value?(S(),L("div",ZA,[i("div",eI,[i("h3",null,h(p(t)("common.confirmDelete")),1),i("p",null,h(p(t)("tagManager.deleteTagConfirm",{name:((ue=m.value)==null?void 0:ue.tag)||""})),1),i("div",tI,[i("button",{onClick:j[10]||(j[10]=xe=>d.value=!1)},h(p(t)("common.cancel")),1),i("button",{class:"delete-btn",onClick:ve},h(p(t)("common.delete")),1)])])])):pe("",!0),c.value?(S(),L("div",nI,[i("div",oI,[i("h3",null,h(p(t)("danbooruManager.sureBatchDelete")),1),i("p",null,h(p(t)("danbooruManager.sureBatchDeleteTips1"))+" "+h(ae.value.length)+" "+h(p(t)("danbooruManager.sureBatchDeleteTips2")),1),i("div",aI,[i("button",{onClick:j[11]||(j[11]=xe=>c.value=!1)},h(p(t)("common.cancel")),1),i("button",{class:"delete-btn",onClick:Q},h(p(t)("danbooruManager.sureDelete")),1)])])])):pe("",!0),u.value||d.value||c.value?(S(),L("div",sI)):pe("",!0),Ve(hA,{ref_key:"importDanbooruDialog",ref:te},null,512)])}}},[["__scopeId","data-v-0c23bf70"]]),rI={id:"weilin_comfyui_tools_prompt_ui_container_main"},iI={key:10,class:"version-update-notification"},uI={class:"version-update-content"},Ra="weilin_tools_",cI=yt({__name:"App",setup(e){Nl();const t=y(localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true");localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")||(localStorage.setItem("weilin_prompt_ui_floatingBallEnabled","true"),t.value=!0);const{t:o}=_t(),n=y(""),a=y("look"),s=y("manager"),l=y("prompt_global"),r=y(!1),u=`${Ra}theme`,d=y(localStorage.getItem(u)==="dark"),c=y(""),f=y(!1),m=y(""),g=y(null),v=`${Ra}version_update_remind`,_=()=>{f.value=!1,g.value&&(clearTimeout(g.value),g.value=null)},w=()=>{window.open("https://github.com/weilin9999/WeiLin-Comfyui-Tools","_blank"),_()},x=()=>{localStorage.setItem(v,"false"),_()},A={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:500}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:300,height:600}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}},W=()=>{try{const U=localStorage.getItem(`${Ra}windowStates`);if(U){const j=JSON.parse(U),ue={...A};for(const xe in j)xe in ue&&(ue[xe]={...A[xe],...j[xe],visible:j[xe].is_default_close?!1:j[xe].visible});return ue}}catch(U){console.error("Error loading window states:",U)}return{...A}},T=y(W());et(T,U=>{try{localStorage.setItem(`${Ra}windowStates`,JSON.stringify(U))}catch(j){console.error("Error saving window states:",j)}},{deep:!0}),ut(()=>{Object.keys(T.value).forEach(U=>{Ue.registerWindow(U)}),P(),window.addEventListener("message",te),ne()});const P=()=>{let U=localStorage.getItem(u);U||(localStorage.setItem(u,"dark"),U="dark",d.value=!0),d.value=U==="dark";const j=document.getElementById("weilin_comfyui_tools_prompt_ui_div");j&&j.setAttribute("data-theme",d.value?"dark":"light")};Dn(()=>{Object.keys(T.value).forEach(U=>{Ue.unregisterWindow(U)}),window.removeEventListener("message",te),g.value&&(clearTimeout(g.value),g.value=null)});const q=U=>{U==="prompt"&&(n.value=""),T.value[U].visible=!1},G=(U,j)=>{T.value[U]&&(T.value[U].position={...j})},z=(U,j)=>{T.value[U]&&(T.value[U].size={...j})},J=()=>{const U={loraDetail:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}}},j={prompt:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:600,height:400}},tag:{visible:!1,is_default_close:!1,position:{x:150,y:150},size:{width:800,height:600}},lora:{visible:!1,is_default_close:!1,position:{x:200,y:200},size:{width:800,height:600}},history:{visible:!1,is_default_close:!1,position:{x:300,y:300},size:{width:800,height:600}},ai_window:{visible:!1,is_default_close:!1,position:{x:400,y:400},size:{width:800,height:600}},node_list_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:400,height:800}},cloud_window:{visible:!1,is_default_close:!1,position:{x:100,y:100},size:{width:800,height:600}},lora_stack_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:300,height:600}},danbooru_manager_window:{visible:!1,is_default_close:!0,position:{x:100,y:100},size:{width:800,height:600}}};localStorage.setItem(`${Ra}windowStates`,JSON.stringify(j)),localStorage.setItem(`${Ra}loraDetailState`,JSON.stringify(U)),T.value=W()};(()=>{fn.getTranslateSetting().then(U=>{localStorage.setItem("weilin_prompt_ui_translater_setting",U.data)}).catch(U=>{message({type:"warn",str:"message.getTranslaterFail"})})})();const ae=y(),F=y(),K=y(),ee=y(),Q=y(),te=U=>{U.data.type==="weilin_prompt_ui_openTagManager"?(s.value="manager",T.value.tag.visible=!0,Ue.setActiveWindow("tag")):U.data.type==="weilin_prompt_ui_openTagManager_prompt"?(s.value="prompt",T.value.tag.visible=!0,Ue.setActiveWindow("tag")):U.data.type==="weilin_prompt_ui_openPromptBox"?(n.value=U.data.id,l.value="prompt",T.value.prompt.visible=!0,r.value=!1,U.data.node==="WeiLinPromptUI"&&(r.value=!0),Qe(()=>{ae.value.setPromptText(U.data.prompt)}),Ue.setActiveWindow("prompt")):U.data.type==="weilin_prompt_ui_openLoraManager"?(a.value="look",T.value.lora.visible=!0,Ue.setActiveWindow("lora")):U.data.type==="weilin_prompt_ui_openLoraManager_addLora"?(a.value="addLora",T.value.lora.visible=!0,Qe(()=>{K.value.openSetSeed(0,"")}),Ue.setActiveWindow("lora")):U.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack"?(a.value="addLora",T.value.lora.visible=!0,Qe(()=>{K.value.openSetSeed(1,U.data.seed)}),Ue.setActiveWindow("lora")):U.data.type==="weilin_prompt_ui_openLoraManager_addLora_stack_node"?(a.value="addLora",T.value.lora.visible=!0,Qe(()=>{K.value.openSetSeed(2,U.data.seed)}),Ue.setActiveWindow("lora")):U.data.type==="weilin_prompt_ui_openHistoryManager"?(T.value.history.visible=!0,Ue.setActiveWindow("history")):U.data.type==="weilin_prompt_ui_openAiWindow"?(T.value.ai_window.visible=!0,Ue.setActiveWindow("ai_window")):U.data.type==="weilin_prompt_ui_open_node_list_window"?(T.value.node_list_window.visible=!0,Ue.setActiveWindow("node_list_window")):U.data.type==="weilin_prompt_ui_prompt_finish_prompt"?window.postMessage({type:"weilin_prompt_ui_prompt_update_prompt_"+n.value,data:U.data.data},"*"):U.data.type==="weilin_prompt_ui_open_global_prompt_box"?(l.value="prompt_global",n.value="global",T.value.prompt.visible=!0,r.value=!1,Qe(()=>{ae.value.setPromptText(c.value)}),Ue.setActiveWindow("prompt")):U.data.type==="weilin_prompt_ui_open_global_tag_manager"?(s.value="manager",T.value.tag.visible=!0,Ue.setActiveWindow("tag")):U.data.type==="weilin_prompt_ui_open_global_lora_manager"?(a.value="look",T.value.lora.visible=!0,Ue.setActiveWindow("lora")):U.data.type==="weilin_prompt_ui_prompt_update_prompt_global"?c.value=U.data.data:U.data.type==="weilin_prompt_ui_floating_ball_setting"?t.value=localStorage.getItem("weilin_prompt_ui_floatingBallEnabled")==="true":U.data.type==="weilin_prompt_ui_restore_window"?J():U.data.type==="weilin_prompt_ui_open_cloud_window"?(T.value.cloud_window.visible=!0,Ue.setActiveWindow("cloud_window")):U.data.type==="weilin_prompt_ui_open_node_lora_stack_window"?(T.value.lora_stack_window.visible=!0,Qe(()=>{F.value.initLoraStack(U.data.prompt,U.data.seed)}),Ue.setActiveWindow("lora_stack_window")):U.data.type==="weilin_prompt_ui_openLoraDetail"?ee.value.open({name:U.data.lora}):U.data.type==="weilin_prompt_ui_open_danbooru_manager_window"?(T.value.danbooru_manager_window.visible=!0,Ue.setActiveWindow("danbooru_manager_window")):U.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_get_template_"+n.value,data:U.data.data},"*"):U.data.type==="weilin_prompt_ui_get_template_response"?n.value===U.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_response",data:U.data.data},"*"):U.data.type==="weilin_prompt_ui_prompt_inner_update_node_tag_template_id"?window.postMessage({type:"weilin_prompt_ui_update_template_"+n.value,data:U.data.data},"*"):U.data.type==="weilin_prompt_ui_prompt_inner_get_node_tag_template_id_gorandom"?window.postMessage({type:"weilin_prompt_ui_get_template_go_random_"+n.value,data:U.data.data},"*"):U.data.type==="weilin_prompt_ui_get_template_go_random_response"&&n.value===U.data.id&&window.postMessage({type:"weilin_prompt_ui_prompt_inner_get_node_tag_template_id_go_random_response",data:U.data.data},"*")},ne=async()=>{try{if(localStorage.getItem(v)==="false"){console.info("WeiLin-Comfyui-Tools ");return}const j=await fetch("https://raw.githubusercontent.com/weilin9999/WeiLin-Comfyui-Tools/refs/heads/main/src/src/utils/version.js");if(!j.ok){console.error(":",j.status);return}const xe=(await j.text()).match(/export const version = "([^"]+)"/);if(xe&&xe[1]){const oe=xe[1];console.info(`WeiLin-Comfyui-Tools GitHub ${oe}`),oe!==ho&&(m.value=`WeiLin-Comfyui-Tools  ${oe} ${ho}`,f.value=!0,g.value&&clearTimeout(g.value),g.value=setTimeout(()=>{f.value=!1,g.value=null},1e4),console.info(`WeiLin-Comfyui-Tools  ${oe} ${ho} GitHubhttps://github.com/weilin9999/WeiLin-Comfyui-Tools`))}}catch(U){console.error("WeiLin-Comfyui-Tools :",U)}};return(U,j)=>(S(),L("div",rI,[T.value.prompt.visible?(S(),wt(Sn,{key:0,name:"promptBox",title:l.value==="prompt"?p(o)("promptBox.windowTitle"):p(o)("promptBox.windowTitleGlobal"),position:T.value.prompt.position,size:T.value.prompt.size,"z-index":p(Ue).getZIndex("prompt"),"onUpdate:position":j[0]||(j[0]=ue=>G("prompt",ue)),"onUpdate:size":j[1]||(j[1]=ue=>z("prompt",ue)),onActive:j[2]||(j[2]=ue=>p(Ue).setActiveWindow("prompt")),onClose:j[3]||(j[3]=ue=>q("prompt"))},{default:it(()=>[Ve(LE,{promptManager:l.value,hasPromptLoraStack:r.value,ref_key:"promptBoxRef",ref:ae},null,8,["promptManager","hasPromptLoraStack"])]),_:1},8,["title","position","size","z-index"])):pe("",!0),T.value.tag.visible?(S(),wt(Sn,{key:1,name:"tagManager",title:p(o)("tagManager.windowTitle"),position:T.value.tag.position,size:T.value.tag.size,"z-index":p(Ue).getZIndex("tag"),"onUpdate:position":j[4]||(j[4]=ue=>G("tag",ue)),"onUpdate:size":j[5]||(j[5]=ue=>z("tag",ue)),onActive:j[6]||(j[6]=ue=>p(Ue).setActiveWindow("tag")),onClose:j[7]||(j[7]=ue=>q("tag"))},{default:it(()=>[Ve(Hg,{tagManager:s.value},null,8,["tagManager"])]),_:1},8,["title","position","size","z-index"])):pe("",!0),T.value.lora.visible?(S(),wt(Sn,{key:2,name:"loraManager",title:p(o)("loraManager.windowTitle"),position:T.value.lora.position,size:T.value.lora.size,"z-index":p(Ue).getZIndex("lora"),"onUpdate:position":j[8]||(j[8]=ue=>G("lora",ue)),"onUpdate:size":j[9]||(j[9]=ue=>z("lora",ue)),onActive:j[10]||(j[10]=ue=>p(Ue).setActiveWindow("lora")),onClose:j[11]||(j[11]=ue=>q("lora"))},{default:it(()=>[Ve(Kg,{loraManager:a.value,ref_key:"loraManagerRef",ref:K},null,8,["loraManager"])]),_:1},8,["title","position","size","z-index"])):pe("",!0),T.value.history.visible?(S(),wt(Sn,{key:3,name:"historyManager",title:p(o)("history.windowTitle"),position:T.value.history.position,size:T.value.history.size,"z-index":p(Ue).getZIndex("history"),"onUpdate:position":j[12]||(j[12]=ue=>G("history",ue)),"onUpdate:size":j[13]||(j[13]=ue=>z("history",ue)),onActive:j[14]||(j[14]=ue=>p(Ue).setActiveWindow("history")),onClose:j[15]||(j[15]=ue=>q("history"))},{default:it(()=>[Ve(wL)]),_:1},8,["title","position","size","z-index"])):pe("",!0),T.value.ai_window.visible?(S(),wt(Sn,{key:4,name:"aiWindow",title:p(o)("aiWindow.windowTitle"),position:T.value.ai_window.position,size:T.value.ai_window.size,"z-index":p(Ue).getZIndex("ai_window"),"onUpdate:position":j[16]||(j[16]=ue=>G("ai_window",ue)),"onUpdate:size":j[17]||(j[17]=ue=>z("ai_window",ue)),onActive:j[18]||(j[18]=ue=>p(Ue).setActiveWindow("ai_window")),onClose:j[19]||(j[19]=ue=>q("ai_window"))},{default:it(()=>[Ve(qL)]),_:1},8,["title","position","size","z-index"])):pe("",!0),T.value.node_list_window.visible?(S(),wt(Sn,{key:5,name:"nodeListWindow",title:p(o)("nodeListWindow.windowTitle"),position:T.value.node_list_window.position,size:T.value.node_list_window.size,"z-index":p(Ue).getZIndex("node_list_window"),"onUpdate:position":j[20]||(j[20]=ue=>G("node_list_window",ue)),"onUpdate:size":j[21]||(j[21]=ue=>z("node_list_window",ue)),onActive:j[22]||(j[22]=ue=>p(Ue).setActiveWindow("node_list_window")),onClose:j[23]||(j[23]=ue=>q("node_list_window"))},{default:it(()=>[Ve(n$)]),_:1},8,["title","position","size","z-index"])):pe("",!0),T.value.cloud_window.visible?(S(),wt(Sn,{key:6,name:"cloudWindow",title:p(o)("cloudWindow.windowTitle"),position:T.value.cloud_window.position,size:T.value.cloud_window.size,"z-index":p(Ue).getZIndex("cloud_window"),"onUpdate:position":j[24]||(j[24]=ue=>G("cloud_window",ue)),"onUpdate:size":j[25]||(j[25]=ue=>z("cloud_window",ue)),onActive:j[26]||(j[26]=ue=>p(Ue).setActiveWindow("cloud_window")),onClose:j[27]||(j[27]=ue=>q("cloud_window"))},{default:it(()=>[Ve(m$)]),_:1},8,["title","position","size","z-index"])):pe("",!0),T.value.lora_stack_window.visible?(S(),wt(Sn,{key:7,name:"loraStackWindow",title:p(o)("controls.loraStack"),position:T.value.lora_stack_window.position,size:T.value.lora_stack_window.size,"z-index":p(Ue).getZIndex("lora_stack_window"),"onUpdate:position":j[28]||(j[28]=ue=>G("lora_stack_window",ue)),"onUpdate:size":j[29]||(j[29]=ue=>z("lora_stack_window",ue)),onActive:j[30]||(j[30]=ue=>p(Ue).setActiveWindow("lora_stack_window")),onClose:j[31]||(j[31]=ue=>q("lora_stack_window"))},{default:it(()=>[Ve(O$,{ref_key:"loraStackRef",ref:F},null,512)]),_:1},8,["title","position","size","z-index"])):pe("",!0),T.value.danbooru_manager_window.visible?(S(),wt(Sn,{key:8,name:"DanbooruManagerWindow",title:p(o)("controls.danbooruManager"),position:T.value.danbooru_manager_window.position,size:T.value.danbooru_manager_window.size,"z-index":p(Ue).getZIndex("danbooru_manager_window"),"onUpdate:position":j[32]||(j[32]=ue=>G("danbooru_manager_window",ue)),"onUpdate:size":j[33]||(j[33]=ue=>z("danbooru_manager_window",ue)),onActive:j[34]||(j[34]=ue=>p(Ue).setActiveWindow("danbooru_manager_window")),onClose:j[35]||(j[35]=ue=>q("danbooru_manager_window"))},{default:it(()=>[Ve(lI,{ref_key:"danbooruManagerRef",ref:Q},null,512)]),_:1},8,["title","position","size","z-index"])):pe("",!0),t.value?(S(),wt(LL,{key:9})):pe("",!0),Ve(nr,{ref_key:"loraDetailLoraStackRef",ref:ee},null,512),f.value?(S(),L("div",iI,[i("div",uI,[i("span",null,h(m.value),1),i("div",{class:"version-update-actions"},[i("button",{class:"goto-github-btn",onClick:w},"GitHub"),i("button",{class:"no-remind-btn",onClick:x},""),i("button",{class:"close-version-update",onClick:_},"")])])])):pe("",!0)]))}},[["__scopeId","data-v-b86e2bdb"]]);var sr={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */var dI=sr.exports,om;function fI(){return om||(om=1,(function(e,t){(function(n,a){e.exports=a()})(dI,function(){return(function(){var o={686:(function(s,l,r){r.d(l,{default:function(){return xe}});var u=r(279),d=r.n(u),c=r(370),f=r.n(c),m=r(817),g=r.n(m);function v(oe){try{return document.execCommand(oe)}catch{return!1}}var _=function(de){var be=g()(de);return v("cut"),be},w=_;function x(oe){var de=document.documentElement.getAttribute("dir")==="rtl",be=document.createElement("textarea");be.style.fontSize="12pt",be.style.border="0",be.style.padding="0",be.style.margin="0",be.style.position="absolute",be.style[de?"right":"left"]="-9999px";var ke=window.pageYOffset||document.documentElement.scrollTop;return be.style.top="".concat(ke,"px"),be.setAttribute("readonly",""),be.value=oe,be}var A=function(de,be){var ke=x(de);be.container.appendChild(ke);var _e=g()(ke);return v("copy"),ke.remove(),_e},W=function(de){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},ke="";return typeof de=="string"?ke=A(de,be):de instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(de==null?void 0:de.type)?ke=A(de.value,be):(ke=g()(de),v("copy")),ke},T=W;function P(oe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(be){return typeof be}:P=function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},P(oe)}var q=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=de.action,ke=be===void 0?"copy":be,_e=de.container,I=de.target,N=de.text;if(ke!=="copy"&&ke!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(I!==void 0)if(I&&P(I)==="object"&&I.nodeType===1){if(ke==="copy"&&I.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(ke==="cut"&&(I.hasAttribute("readonly")||I.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(N)return T(N,{container:_e});if(I)return ke==="cut"?w(I):T(I,{container:_e})},G=q;function z(oe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(be){return typeof be}:z=function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},z(oe)}function J(oe,de){if(!(oe instanceof de))throw new TypeError("Cannot call a class as a function")}function ve(oe,de){for(var be=0;be<de.length;be++){var ke=de[be];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(oe,ke.key,ke)}}function ae(oe,de,be){return de&&ve(oe.prototype,de),be&&ve(oe,be),oe}function F(oe,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(de&&de.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),de&&K(oe,de)}function K(oe,de){return K=Object.setPrototypeOf||function(ke,_e){return ke.__proto__=_e,ke},K(oe,de)}function ee(oe){var de=ne();return function(){var ke=U(oe),_e;if(de){var I=U(this).constructor;_e=Reflect.construct(ke,arguments,I)}else _e=ke.apply(this,arguments);return Q(this,_e)}}function Q(oe,de){return de&&(z(de)==="object"||typeof de=="function")?de:te(oe)}function te(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function ne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function U(oe){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(be){return be.__proto__||Object.getPrototypeOf(be)},U(oe)}function j(oe,de){var be="data-clipboard-".concat(oe);if(de.hasAttribute(be))return de.getAttribute(be)}var ue=(function(oe){F(be,oe);var de=ee(be);function be(ke,_e){var I;return J(this,be),I=de.call(this),I.resolveOptions(_e),I.listenClick(ke),I}return ae(be,[{key:"resolveOptions",value:function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof _e.action=="function"?_e.action:this.defaultAction,this.target=typeof _e.target=="function"?_e.target:this.defaultTarget,this.text=typeof _e.text=="function"?_e.text:this.defaultText,this.container=z(_e.container)==="object"?_e.container:document.body}},{key:"listenClick",value:function(_e){var I=this;this.listener=f()(_e,"click",function(N){return I.onClick(N)})}},{key:"onClick",value:function(_e){var I=_e.delegateTarget||_e.currentTarget,N=this.action(I)||"copy",H=G({action:N,container:this.container,target:this.target(I),text:this.text(I)});this.emit(H?"success":"error",{action:N,text:H,trigger:I,clearSelection:function(){I&&I.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(_e){return j("action",_e)}},{key:"defaultTarget",value:function(_e){var I=j("target",_e);if(I)return document.querySelector(I)}},{key:"defaultText",value:function(_e){return j("text",_e)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(_e){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return T(_e,I)}},{key:"cut",value:function(_e){return w(_e)}},{key:"isSupported",value:function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],I=typeof _e=="string"?[_e]:_e,N=!!document.queryCommandSupported;return I.forEach(function(H){N=N&&!!document.queryCommandSupported(H)}),N}}]),be})(d()),xe=ue}),828:(function(s){var l=9;if(typeof Element<"u"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}function u(d,c){for(;d&&d.nodeType!==l;){if(typeof d.matches=="function"&&d.matches(c))return d;d=d.parentNode}}s.exports=u}),438:(function(s,l,r){var u=r(828);function d(m,g,v,_,w){var x=f.apply(this,arguments);return m.addEventListener(v,x,w),{destroy:function(){m.removeEventListener(v,x,w)}}}function c(m,g,v,_,w){return typeof m.addEventListener=="function"?d.apply(null,arguments):typeof v=="function"?d.bind(null,document).apply(null,arguments):(typeof m=="string"&&(m=document.querySelectorAll(m)),Array.prototype.map.call(m,function(x){return d(x,g,v,_,w)}))}function f(m,g,v,_){return function(w){w.delegateTarget=u(w.target,g),w.delegateTarget&&_.call(m,w)}}s.exports=c}),879:(function(s,l){l.node=function(r){return r!==void 0&&r instanceof HTMLElement&&r.nodeType===1},l.nodeList=function(r){var u=Object.prototype.toString.call(r);return r!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in r&&(r.length===0||l.node(r[0]))},l.string=function(r){return typeof r=="string"||r instanceof String},l.fn=function(r){var u=Object.prototype.toString.call(r);return u==="[object Function]"}}),370:(function(s,l,r){var u=r(879),d=r(438);function c(v,_,w){if(!v&&!_&&!w)throw new Error("Missing required arguments");if(!u.string(_))throw new TypeError("Second argument must be a String");if(!u.fn(w))throw new TypeError("Third argument must be a Function");if(u.node(v))return f(v,_,w);if(u.nodeList(v))return m(v,_,w);if(u.string(v))return g(v,_,w);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(v,_,w){return v.addEventListener(_,w),{destroy:function(){v.removeEventListener(_,w)}}}function m(v,_,w){return Array.prototype.forEach.call(v,function(x){x.addEventListener(_,w)}),{destroy:function(){Array.prototype.forEach.call(v,function(x){x.removeEventListener(_,w)})}}}function g(v,_,w){return d(document.body,v,_,w)}s.exports=c}),817:(function(s){function l(r){var u;if(r.nodeName==="SELECT")r.focus(),u=r.value;else if(r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"){var d=r.hasAttribute("readonly");d||r.setAttribute("readonly",""),r.select(),r.setSelectionRange(0,r.value.length),d||r.removeAttribute("readonly"),u=r.value}else{r.hasAttribute("contenteditable")&&r.focus();var c=window.getSelection(),f=document.createRange();f.selectNodeContents(r),c.removeAllRanges(),c.addRange(f),u=c.toString()}return u}s.exports=l}),279:(function(s){function l(){}l.prototype={on:function(r,u,d){var c=this.e||(this.e={});return(c[r]||(c[r]=[])).push({fn:u,ctx:d}),this},once:function(r,u,d){var c=this;function f(){c.off(r,f),u.apply(d,arguments)}return f._=u,this.on(r,f,d)},emit:function(r){var u=[].slice.call(arguments,1),d=((this.e||(this.e={}))[r]||[]).slice(),c=0,f=d.length;for(c;c<f;c++)d[c].fn.apply(d[c].ctx,u);return this},off:function(r,u){var d=this.e||(this.e={}),c=d[r],f=[];if(c&&u)for(var m=0,g=c.length;m<g;m++)c[m].fn!==u&&c[m].fn._!==u&&f.push(c[m]);return f.length?d[r]=f:delete d[r],this}},s.exports=l,s.exports.TinyEmitter=l})},n={};function a(s){if(n[s])return n[s].exports;var l=n[s]={exports:{}};return o[s](l,l.exports,a),l.exports}return(function(){a.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(l,{a:l}),l}})(),(function(){a.d=function(s,l){for(var r in l)a.o(l,r)&&!a.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:l[r]})}})(),(function(){a.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)}})(),a(686)})().default})})(sr)),sr.exports}var pI=fI();const gI=Yg(pI),mI=e=>({toClipboard(t,o){return new Promise((n,a)=>{const s=document.createElement("button"),l=new gI(s,{text:()=>t,action:()=>"copy",container:o!==void 0?o:document.body});l.on("success",r=>{l.destroy(),n(r)}),l.on("error",r=>{l.destroy(),a(r)}),document.body.appendChild(s),s.click(),document.body.removeChild(s)})}}),hI=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,vI=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,_I=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function yI(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){bI(e);return}return t}function bI(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function wI(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const o=e.trim();if(o.length<=9)switch(o.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!_I.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(hI.test(e)||vI.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,yI)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}function xI(e,t){if(e==null)return;let o=e;for(let n=0;n<t.length;n++){if(o==null||o[t[n]]==null)return;o=o[t[n]]}return o}function gu(e,t,o){if(o.length===0)return t;const n=o[0];return o.length>1&&(t=gu(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,n)?Number.isInteger(Number(o[1]))?[]:{}:e[n],t,Array.prototype.slice.call(o,1))),Number.isInteger(Number(n))&&Array.isArray(e)?e.slice()[n]:Object.assign({},e,{[n]:t})}function am(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const o={};for(const n in e)o[n]=e[n];return delete o[t[0]],o}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const o={};for(const n in e)o[n]=e[n];return o}return gu(e,am(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function sm(e,t){return t.map(o=>o.split(".")).map(o=>[o,xI(e,o)]).filter(o=>o[1]!==void 0).reduce((o,n)=>gu(o,n[1],n[0]),{})}function lm(e,t){return t.map(o=>o.split(".")).reduce((o,n)=>am(o,n),e)}function rm(e,{storage:t,serializer:o,key:n,debug:a,pick:s,omit:l,beforeHydrate:r,afterHydrate:u},d,c=!0){try{c&&(r==null||r(d));const f=t.getItem(n);if(f){const m=o.deserialize(f),g=s?sm(m,s):m,v=l?lm(g,l):g;e.$patch(v)}c&&(u==null||u(d))}catch(f){a&&console.error("[pinia-plugin-persistedstate]",f)}}function im(e,{storage:t,serializer:o,key:n,debug:a,pick:s,omit:l}){try{const r=s?sm(e,s):e,u=l?lm(r,l):r,d=o.serialize(u);t.setItem(n,d)}catch(r){a&&console.error("[pinia-plugin-persistedstate]",r)}}function TI(e,t,o){const{pinia:n,store:a,options:{persist:s=o}}=e;if(!s)return;if(!(a.$id in n.state.value)){const u=n._s.get(a.$id.replace("__hot:",""));u&&Promise.resolve().then(()=>u.$persist());return}const r=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(t);a.$hydrate=({runHooks:u=!0}={})=>{r.forEach(d=>{rm(a,d,e,u)})},a.$persist=()=>{r.forEach(u=>{im(a.$state,u)})},r.forEach(u=>{rm(a,u,e),a.$subscribe((d,c)=>im(c,u),{detached:!0})})}function SI(e={}){return function(t){TI(t,o=>({key:(e.key?e.key:n=>n)(o.key??t.store.$id),debug:o.debug??e.debug??!1,serializer:o.serializer??e.serializer??{serialize:n=>JSON.stringify(n),deserialize:n=>wI(n)},storage:o.storage??e.storage??window.localStorage,beforeHydrate:o.beforeHydrate,afterHydrate:o.afterHydrate,pick:o.pick,omit:o.omit}),e.auto??!1)}}var kI=SI();const{toClipboard:CI}=mI(),mu=document.createElement("div");mu.id="weilin_comfyui_tools_prompt_ui_div",document.querySelector("body").appendChild(mu);const um=l2();um.use(kI);const lr=n1(cI);lr.use(um),lr.use(ks),F_(),lr.config.globalProperties.$copyText=CI,lr.mount(mu),console.log("WeiLin Prompt UI is running - version "+ho),console.log("WeiLin  -  "+ho)}));
//# sourceMappingURL=main.entry.js.map
